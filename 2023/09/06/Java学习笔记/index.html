<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Java学习笔记 | Welcome to Durango's blog!</title><meta name="keywords" content="Java"><meta name="author" content="Durango,1530268781@qq.com"><meta name="copyright" content="Durango"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本笔记为B站学习【韩顺平 零基础30天学会Java】课程个人笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Java学习笔记">
<meta property="og:url" content="https://www.durango.cn/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Welcome to Durango&#39;s blog!">
<meta property="og:description" content="本笔记为B站学习【韩顺平 零基础30天学会Java】课程个人笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.durango.cn/img/java_cover.jpg">
<meta property="article:published_time" content="2023-09-06T05:39:28.000Z">
<meta property="article:modified_time" content="2024-03-22T08:11:04.357Z">
<meta property="article:author" content="Durango">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.durango.cn/img/java_cover.jpg"><link rel="shortcut icon" href="/img/avatar2.jpg"><link rel="canonical" href="https://www.durango.cn/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":1000,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Durango","link":"链接: ","source":"来源: Welcome to Durango's blog!","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-22 16:11:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar2.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/java_topImg.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Welcome to Durango's blog!</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-09-06T05:39:28.000Z" title="发表于 2023-09-06 13:39:28">2023-09-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-22T08:11:04.357Z" title="更新于 2024-03-22 16:11:04">2024-03-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E3%80%8AJava%E3%80%8B/">《Java》</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">83.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>359分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Java学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="—-第一阶段-—"><a href="#—-第一阶段-—" class="headerlink" title="— 第一阶段 —"></a>— 第一阶段 —</h1><h1 id="第一章-内容介绍"><a href="#第一章-内容介绍" class="headerlink" title="第一章 内容介绍"></a>第一章 内容介绍</h1><p>略</p>
<h1 id="第二章-Java概述"><a href="#第二章-Java概述" class="headerlink" title="第二章 Java概述"></a>第二章 Java概述</h1><h2 id="2-1-Java历史"><a href="#2-1-Java历史" class="headerlink" title="2.1 Java历史"></a>2.1 Java历史</h2><ul>
<li>1995年，sun公司正式发布Java第一个版本</li>
<li>2009年，甲骨文公司收购sun</li>
</ul>
<h2 id="2-2-Java-技术体系平台"><a href="#2-2-Java-技术体系平台" class="headerlink" title="2.2 Java 技术体系平台"></a>2.2 Java 技术体系平台</h2><table>
<thead>
<tr>
<th>版本</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Java SE（Standard Edition）标准版</td>
<td>支持面向桌面级应用(如Windows下的应用程序）的Java平台，提供了完整的Java核心API，此版本以前称为J2SE</td>
</tr>
<tr>
<td>Java EE（Enterprise Edition）企业版</td>
<td>是为开发企业环境下的应用程序提供的一套解决方案。该技术体系中包含的技术如:Servlet、Jsp等,主要针对于Web应用程序开发。版本以前称为J2EE</td>
</tr>
<tr>
<td>Java ME（Micro Edition）小型版</td>
<td>支持Java程序运行在移动终端(手机、PDA)上的平台，对Java API有所精简，并加入了钛对移动终端的支持，此版本以前称为J2ME</td>
</tr>
</tbody></table>
<h2 id="2-3-Java语言特点"><a href="#2-3-Java语言特点" class="headerlink" title="2.3 Java语言特点"></a>2.3 Java语言特点</h2><ul>
<li>Java 语言是面向对象的(<strong>oop</strong>)</li>
<li> Java 语言是健壮的。Java 的强类型机制、异常处理、垃圾的自动收集等是 Java 程序健壮性的重要保障</li>
<li>Java 语言是<strong>跨平台性的</strong>。[即: 一个编译好的.class 文件可以在多个系统下运行，这种特性称为跨平台]</li>
<li>Java 语言是解释型的</li>
</ul>
<h2 id="2-4-Java虚拟机及运行过程"><a href="#2-4-Java虚拟机及运行过程" class="headerlink" title="2.4 Java虚拟机及运行过程"></a>2.4 Java虚拟机及运行过程</h2><ul>
<li>JVM 是一个虚拟的计算机，具有指令集并使用不同的存储区域。负责执行指令，管理数据、内存、寄存器，包含在JDK 中. </li>
<li>程序运行过程</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">	A[Test.java]==编译javac==&gt;B[Test.class]==运行java==&gt;c&#123;JVM&#125;</span><br></pre></td></tr></table></figure>

<div class="mermaid"> 

graph LR
		A[Test.java]&#x3D;&#x3D;编译javac&#x3D;&#x3D;&gt;B[Test.class]&#x3D;&#x3D;运行java&#x3D;&#x3D;&gt;c{JVM}
</div>



<h2 id="2-5-JDK-JRE"><a href="#2-5-JDK-JRE" class="headerlink" title="2.5 JDK JRE"></a>2.5 JDK JRE</h2><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ul>
<li>JDK 的全称(Java Development Kit Java 开发工具包)</li>
</ul>
<p>​            <strong>JDK = JRE +</strong> <strong>开发工具集</strong>（例如 Javac,java 编译工具等)</p>
<ul>
<li>JRE(Java Runtime Environment Java 运行环境)</li>
</ul>
<p>​            <strong>JRE = JVM + Java SE</strong> <strong>标准类库</strong>（java 核心类库）</p>
</div>



<h2 id="2-6-Java注释"><a href="#2-6-Java注释" class="headerlink" title="2.6 Java注释"></a>2.6 Java注释</h2><ul>
<li><p>单行注释  //</p>
</li>
<li><p>多行注释 /*  */</p>
</li>
<li><p>文档注释  /**  */</p>
<ul>
<li><p>文档注释内容可以白JDK提供的工具javadoc所解析，生成一套以网页文件形式体现的该程序的说明文档。一般写在类和方法前。</p>
</li>
<li><p>javadoc -d d:\temp -author -version Test.java</p>
</li>
<li><p>javadoc标签</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@author</span> Durango</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="2-7-Java代码规范"><a href="#2-7-Java代码规范" class="headerlink" title="2.7 Java代码规范"></a>2.7 Java代码规范</h2><ul>
<li>类、方法的注释,要以javadoc的方式来写。</li>
<li>非Java Doc的注释，往往是给代码的维护者看的，着重告述读者为什么这样写,如何修改，注意什么问题等</li>
<li>使用tab操作,实现缩进,默认整体向右边移动，时候用shift+tab整体向左移4、运算符和=两边习惯性各加一个空格。比如:2 + 4 * 5 + 345  - 89</li>
<li>源文件使用<strong>utf-8编码</strong></li>
<li>行宽度不要超过80字符</li>
<li>代码编写<strong>次行风格</strong>（推荐）和行尾风格</li>
</ul>
<h1 id="第三章-基本数据类型"><a href="#第三章-基本数据类型" class="headerlink" title="第三章 基本数据类型"></a>第三章 基本数据类型</h1><h2 id="3-1-数据类型（必背）"><a href="#3-1-数据类型（必背）" class="headerlink" title="3.1 数据类型（必背）"></a>3.1 <font color="red">数据类型</font>（必背）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">	A[Java数据类型]--&gt;B[基本数据类型]</span><br><span class="line">	A--&gt;C[引用数据类型]</span><br><span class="line">        B--&gt;D[数值型]</span><br><span class="line">        	D--&gt;d1[&quot;整型: byte【1】,short【2】,int【4】,long【8】&quot;]</span><br><span class="line">        	D--&gt;d2[&quot;浮点型: float【4】,double【8】&quot;]</span><br><span class="line">        B--&gt;E[&quot;字符型: char【2】&quot;]</span><br><span class="line">        B--&gt;F[&quot;布尔型: boolean【1】&quot;]</span><br><span class="line">    C--&gt;G[类class]</span><br><span class="line">    C--&gt;H[接口interface]</span><br><span class="line">    C--&gt;I[&quot;数组[ ]&quot;]</span><br></pre></td></tr></table></figure>

<div class="mermaid">
graph LR
	A[Java数据类型]--&gt;B[基本数据类型]
	A--&gt;C[引用数据类型]
        B--&gt;D[数值型]
        	D--&gt;d1[&quot;整型: byte【1】,short【2】,int【4】,long【8】&quot;]
        	D--&gt;d2[&quot;浮点型: float【4】,double【8】&quot;]
        B--&gt;E[&quot;字符型: char【2】&quot;]
        B--&gt;F[&quot;布尔型: boolean【1】&quot;]
    C--&gt;G[类class]
    C--&gt;H[接口interface]
    C--&gt;I[&quot;数组[ ]&quot;]
</div>



<h2 id="3-2-整数类型"><a href="#3-2-整数类型" class="headerlink" title="3.2 整数类型"></a>3.2 整数类型</h2><ul>
<li>表示范围</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">占用空间</th>
<th align="center">范围</th>
</tr>
</thead>
<tbody><tr>
<td align="center">byte</td>
<td align="center">1字节</td>
<td align="center">-128 ~ 127</td>
</tr>
<tr>
<td align="center">short</td>
<td align="center">2字节</td>
<td align="center">-2^15  ~ 2^15-1</td>
</tr>
<tr>
<td align="center">int</td>
<td align="center">4字节</td>
<td align="center">-2^31 ~ 2^31-1</td>
</tr>
<tr>
<td align="center">long</td>
<td align="center">8字节</td>
<td align="center">-2^63  ~ 2^63-1</td>
</tr>
</tbody></table>
<p>​    </p>
<ul>
<li>注意细节</li>
</ul>
<p>​        java的整数常量默认为int，声明long型常量时，<strong>须后加’L’或‘l’</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> a = <span class="number">12L</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">12L</span>	<span class="comment">// 报错，long转化为int会有精度损失</span></span><br></pre></td></tr></table></figure>



<h2 id="3-3-浮点类型"><a href="#3-3-浮点类型" class="headerlink" title="3.3 浮点类型"></a>3.3 浮点类型</h2><ul>
<li>表示范围</li>
</ul>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">占用空间</th>
<th align="center">范围</th>
</tr>
</thead>
<tbody><tr>
<td align="center">float(单精度)</td>
<td align="center">4</td>
<td align="center">-3.403E38 ~ 3.403E38</td>
</tr>
<tr>
<td align="center">double(双精度)</td>
<td align="center">8</td>
<td align="center">-1.798E308 ~ 1.798E308</td>
</tr>
</tbody></table>
<ul>
<li>说明：浮点数=符号位+指数位+尾数位</li>
<li>注意细节：<ul>
<li>java的浮点型常量默认为double型，声明float型常量时，<strong>须后加‘F’或‘f’</strong></li>
<li>通常情况下使用double，它比float更加精确</li>
</ul>
</li>
<li><font color="red">两种表示形式</font><ul>
<li>十进制：5.12    0.512f    .512（0可以省略）</li>
<li>科学计数法：5.12e2 (5.12*10的2次方)    5.12E-2 (5.12/10的2次方)</li>
</ul>
</li>
<li>浮点数使用陷阱</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个重要的使用点: 当我们对运算结果是小数, 进行相等判断时要小心，应该是以两个数的差值的绝对值，在某个精度范围类判断</span></span><br><span class="line"><span class="keyword">double</span> num11 = <span class="number">2.7</span>;</span><br><span class="line"><span class="keyword">double</span> num12 = <span class="number">2.7</span>; <span class="comment">//8.1 / 3; //2.7</span></span><br><span class="line">System.out.println(num11);<span class="comment">//2.7</span></span><br><span class="line">System.out.println(num12);<span class="comment">//接近 2.7 的一个小数，而不是 2.7</span></span><br><span class="line"><span class="comment">// 错误写法</span></span><br><span class="line"><span class="keyword">if</span>( num11 == num12) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;num11 == num12 相等&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 正确写法</span></span><br><span class="line"><span class="keyword">if</span>(Math.abs(num11 - num12) &lt; <span class="number">0.000001</span> ) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;差值非常小，到我的规定精度，认为相等...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-4-字符类型"><a href="#3-4-字符类型" class="headerlink" title="3.4 字符类型"></a>3.4 字符类型</h2><ul>
<li><p>使用细节</p>
<ul>
<li>java中，char的本质是一个整数，在<strong>输出时，是Unicode码对应的字符</strong></li>
<li>char类型时可以进行运算法</li>
</ul>
</li>
<li><p>Java API</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.matools.com/">JavaAPI在线中文文档</a></li>
</ul>
</li>
<li><p>字符型的本质</p>
<ul>
<li>存储：‘a’ ==&gt; 码值97 ==&gt; 二进制（110 0001）==&gt; 存储</li>
<li>读取：二进制（110 0001）==&gt;  码值97 ==&gt; ‘a’ </li>
</ul>
</li>
<li><p>常见编码</p>
<ul>
<li><p>ASCII (ASCII编码表，一个字节表示，一共128个字符, 实际上一个字节可以表示256个字符,只用128个)</p>
</li>
<li><p><strong>Unicode</strong> (Unicode编码表固定大小的编码使用两个字节来表示字符，字母和汉字统一都是占用<strong>两个字节</strong>,这样浪费空间)</p>
</li>
<li><p>utf-8(编码表，大小可变的编码字母使用1个字节，汉字使用3个字节)gbk(可以表示汉字，而且范围广，字母使用1个字节，汉字2个字节)gb2312(可以表示汉字,gb2312 &lt;gbk)</p>
</li>
<li><p>big5码(繁体中文,台湾，香港)</p>
</li>
</ul>
</li>
</ul>
<h2 id="3-5-布尔类型"><a href="#3-5-布尔类型" class="headerlink" title="3.5 布尔类型"></a>3.5 布尔类型</h2><ul>
<li>占1个字节</li>
<li>true  or false</li>
<li>java中不可以用0或非0的整数替代false或true。（C语言中可以）</li>
</ul>
<h2 id="3-6-数据类型转换"><a href="#3-6-数据类型转换" class="headerlink" title="3.6 数据类型转换"></a>3.6 数据类型转换</h2><h3 id="3-6-1-自动类型转换（必背）"><a href="#3-6-1-自动类型转换（必背）" class="headerlink" title="3.6.1. 自动类型转换（必背）"></a>3.6.1. <font color="red">自动类型转换</font>（必背）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">	char--&gt;int--&gt;long--&gt;float--&gt;double</span><br><span class="line">	byte--&gt;short--&gt;int</span><br></pre></td></tr></table></figure>

<ul>
<li>注意和细节</li>
</ul>
<p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>​    （1）有多种类型的数据混合运算时，系统首先自动将所有数据<font color="red">转换成容量最大</font>的那种数据类型，然后再进行计算。</p>
<p>​    （2）当我们把精度(容量)大的数据类型赋值给精度(容量)小的数据类型时，就会报错，反之就会进行自动类型转换。</p>
<p>​    （3）(byte,short)和char之间不会相互自动转换。</p>
<p>​    （4）byte, short,char 他们三者可以参与计算，在<font color="red">计算时首先转换为int类型</font>。</p>
<p>​    （5）<strong>boolean不参与转换</strong></p>
<p>​    （6）自动提升原则：表达式结果的类型自动提升为操作数中最大的类型</p>
<p>​    </p>
</div></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自动类型转换细节</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutoConvertDetail</span> </span>&#123;</span><br><span class="line"><span class="comment">//编写一个 main 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//细节 1： 有多种类型的数据混合运算时，</span></span><br><span class="line">        <span class="comment">//系统首先自动将所有数据转换成容量最大的那种数据类型，然后再进行计算</span></span><br><span class="line">        <span class="keyword">int</span> n1 = <span class="number">10</span>; <span class="comment">//ok</span></span><br><span class="line">        <span class="keyword">float</span> d1 = n1 + <span class="number">1.1</span>;<span class="comment">//错误 n1 + 1.1 =&gt; 结果类型是 double</span></span><br><span class="line">        <span class="keyword">double</span> d1 = n1 + <span class="number">1.1</span>;<span class="comment">//对 n1 + 1.1 =&gt; 结果类型是 double</span></span><br><span class="line">        <span class="keyword">float</span> d1 = n1 + <span class="number">1.1F</span>;<span class="comment">//对 n1 + 1.1 =&gt; 结果类型是 float</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//细节 2: 当我们把精度(容量)大 的数据类型赋值给精度(容量)小 的数据类型时，</span></span><br><span class="line">        <span class="comment">//就会报错，反之就会进行自动类型转换。</span></span><br><span class="line">        <span class="keyword">int</span> n2 = <span class="number">1.1</span>;<span class="comment">//错误 double -&gt; int</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//细节 3: (byte, short) 和 char 之间不会相互自动转换</span></span><br><span class="line">        <span class="comment">//当把具体数赋给 byte 时，(1)先判断该数是否在 byte 范围内，如果是就可以</span></span><br><span class="line">        <span class="keyword">byte</span> b1 = <span class="number">10</span>; <span class="comment">//对 , -128-127</span></span><br><span class="line">        <span class="keyword">int</span> n2 = <span class="number">1</span>; <span class="comment">//n2 是 int</span></span><br><span class="line">        <span class="keyword">byte</span> b2 = n2; <span class="comment">//错误，原因： 如果是变量赋值，判断类型</span></span><br><span class="line">        <span class="keyword">char</span> c1 = b1; <span class="comment">//错误， 原因 byte 不能自动转成 char</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//细节 4: byte，short，char 他们三者可以计算，在计算时首先转换为 int 类型</span></span><br><span class="line">        <span class="keyword">byte</span> b2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">byte</span> b3 = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">short</span> s1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">short</span> s2 = b2 + s1;<span class="comment">//错, b2 + s1 =&gt; int</span></span><br><span class="line">        <span class="keyword">int</span> s2 = b2 + s1;<span class="comment">//对, b2 + s1 =&gt; int</span></span><br><span class="line">        <span class="keyword">byte</span> b4 = b2 + b3; <span class="comment">//错误: b2 + b3 =&gt; int</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//细节5boolean 不参与转换</span></span><br><span class="line">        <span class="keyword">boolean</span> pass = <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">//int num100 = pass;// 错误，boolean 不参与类型的自动转换</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//自动提升原则： 表达式结果的类型自动提升为 操作数中最大的类型</span></span><br><span class="line">        <span class="comment">//看一道题</span></span><br><span class="line">        <span class="keyword">byte</span> b4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">short</span> s3 = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">int</span> num200 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">float</span> num300 = <span class="number">1.1F</span>;</span><br><span class="line">        <span class="keyword">double</span> num500 = b4 + s3 + num200 + num300; <span class="comment">//float -&gt; double</span></span><br></pre></td></tr></table></figure>



<h3 id="3-6-2-强制类型转换"><a href="#3-6-2-强制类型转换" class="headerlink" title="3.6.2 强制类型转换"></a>3.6.2 强制类型转换</h3><ul>
<li>当进行数据<strong>从高精度到低精度转换时，需要使用强制转换</strong></li>
<li>强制转换符 如(int)  (byte)等</li>
<li>char类型可以用int常量值赋值，但是不能用int变量值赋值</li>
<li>byte, short, char类型在参与运算时，当做int类型处理</li>
</ul>
<h3 id="3-6-3-与字符串转换"><a href="#3-6-3-与字符串转换" class="headerlink" title="3.6.3 与字符串转换"></a>3.6.3 与字符串转换</h3><ul>
<li><p>基本数据类型 -&gt; 字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n1 = <span class="number">100</span>;</span><br><span class="line">String s1 = n1 + <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>字符串 -&gt; 基本数据类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String s5 = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num1 = Integer.parseInt(s5);</span><br><span class="line"><span class="keyword">double</span> num2 = Double.parseDouble(s5);</span><br><span class="line"><span class="keyword">float</span> num3 = Float.parseFloat(s5);</span><br><span class="line"><span class="keyword">long</span> num4 = Long.parseLong(s5);</span><br><span class="line"><span class="keyword">byte</span> num5 = Byte.parseByte(s5);</span><br><span class="line"><span class="keyword">boolean</span> b = Boolean.parseBoolean(<span class="string">&quot;true&quot;</span>);</span><br><span class="line"><span class="keyword">short</span> num6 = Short.parseShort(s5)</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="第四章-运算符"><a href="#第四章-运算符" class="headerlink" title="第四章 运算符"></a>第四章 运算符</h1><h2 id="4-1-算数运算符"><a href="#4-1-算数运算符" class="headerlink" title="4.1 算数运算符"></a>4.1 算数运算符</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230909141542866.png" alt="image-20230909141542866"></p>
<ul>
<li>注意事项</li>
</ul>
<p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>对于除号”/“，它的整数除和小数除是有区别的: **<font color="red">整数之间做除法时，只保留整数部分而舍弃小数部分</font>**。例如: int x= 10/3,结果是3</li>
<li>当对一个数取模时，可以等价<font color="red">a%b = a-a/b*b</font>，这样我们可以看到取模的一个本质运算。</li>
<li>当自增当做一个独立语言使用时，不管是 ++i 还是 i++ 都是一样的</li>
<li>当自增当做一个表达式使用时 j=++i 等价于 i=i+1; j=i<br>当自增当做一个表达式使用时 j=i++ 等价 j=i; i=i+1</li>
</ol>
<p>​    </p>
</div></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// % 取模 ,取余</span></span><br><span class="line"><span class="comment">// 在 % 的本质 看一个公式!!!! a % b = a - a / b * b</span></span><br><span class="line"><span class="comment">// -10 % 3 =&gt; -10 - (-10) / 3 * 3 = -10 + 9 = -1</span></span><br><span class="line"><span class="comment">// 10 % -3 = 10 - 10 / (-3) * (-3) = 10 - 9 = 1</span></span><br><span class="line"><span class="comment">// -10 % -3 = (-10) - (-10) / (-3) * (-3) = -10 + 9 = -1</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="number">10</span> % <span class="number">3</span>); <span class="comment">//1</span></span><br><span class="line">System.out.println(-<span class="number">10</span> % <span class="number">3</span>); <span class="comment">// -1</span></span><br><span class="line">System.out.println(<span class="number">10</span> % -<span class="number">3</span>); <span class="comment">//1</span></span><br><span class="line">System.out.println(-<span class="number">10</span> % -<span class="number">3</span>);<span class="comment">//-1</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="number">10</span> / <span class="number">3</span>); <span class="comment">//3</span></span><br></pre></td></tr></table></figure>



<h2 id="4-2-关系运算符"><a href="#4-2-关系运算符" class="headerlink" title="4.2 关系运算符"></a>4.2 关系运算符</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230909142820955.png" alt="image-20230909142820955"></p>
<h2 id="4-3-逻辑运算符"><a href="#4-3-逻辑运算符" class="headerlink" title="4.3 逻辑运算符"></a>4.3 逻辑运算符</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230909143251548.png" alt="image-20230909143251548"></p>
<ul>
<li><p>&amp;&amp; 和 &amp; 的区别</p>
<ul>
<li><p>&amp;&amp;短路与：如果第**<font color="red">一个条件为 false，则第二个条件不会判断</font>**，最终结果为 false，效率高</p>
</li>
<li><p>&amp; 逻辑与：不管第一个条件是否为 false，第二个条件都要判断，效率低</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对于&amp;&amp;短路与而言，如果第一个条件为 false ,后面的条件不再判断</span></span><br><span class="line"><span class="comment">//对于&amp;逻辑与而言，如果第一个条件为 false ,后面的条件仍然会判断</span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">9</span>;</span><br><span class="line"><span class="keyword">if</span>(a &lt; <span class="number">1</span> &amp;&amp; ++b &lt; <span class="number">50</span>) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b);<span class="comment">// 4 9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(a &lt; <span class="number">1</span> &amp; ++b &lt; <span class="number">50</span>) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b);<span class="comment">// 4 10</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>|| 和 | 的区别</p>
<ul>
<li>||短路或：如果**<font color="red">第一个条件为 true，则第二个条件不会判断</font>**，最终结果为 true，效率高</li>
<li>| 逻辑或：不管第一个条件是否为 true，第二个条件都要判断，效率低</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//(1)||短路或：如果第一个条件为 true，</span></span><br><span class="line"><span class="comment">//则第二个条件不会判断，最终结果为 true，效率高</span></span><br><span class="line"><span class="comment">//(2)| 逻辑或：不管第一个条件是否为 true，第二个条件都要判断，效率低</span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">9</span>;</span><br><span class="line"><span class="keyword">if</span>( a &gt; <span class="number">1</span> || ++b &gt; <span class="number">4</span>) &#123; <span class="comment">// 可以换成 | 测试</span></span><br><span class="line">	System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b); <span class="comment">//4 9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( a &gt; <span class="number">1</span> | ++b &gt; <span class="number">4</span>) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b); <span class="comment">//4 10</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-4-赋值运算符"><a href="#4-4-赋值运算符" class="headerlink" title="4.4 赋值运算符"></a>4.4 赋值运算符</h2><ul>
<li>复合赋值运算符会进行类型转换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> b = <span class="number">3</span>;</span><br><span class="line">b += <span class="number">2</span>;	<span class="comment">//等价于 b = (byte)(b + 2)</span></span><br><span class="line">b ++;	<span class="comment">//等价于 b = (byte)(b + 1)</span></span><br></pre></td></tr></table></figure>



<h2 id="4-5-三元运算符"><a href="#4-5-三元运算符" class="headerlink" title="4.5 三元运算符"></a>4.5 三元运算符</h2><p>条件表达式 ? 表达式 1: 表达式 2;</p>
<p>运算规则：</p>
<ol>
<li><p>如果条件表达式为 true，运算后的结果是表达式 1；</p>
</li>
<li><p>如果条件表达式为 false，运算后的结果是表达式 2；</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">99</span>;</span><br><span class="line"><span class="comment">// 解读</span></span><br><span class="line"><span class="comment">// 1. a &gt; b 为 false</span></span><br><span class="line"><span class="comment">// 2. 返回 b--, 先返回 b 的值,然后在 b-1</span></span><br><span class="line"><span class="comment">// 3. 返回的结果是 99</span></span><br><span class="line"><span class="keyword">int</span> result = a &gt; b ? a++ : b--;</span><br><span class="line">System.out.println(<span class="string">&quot;result=&quot;</span> + result);	<span class="comment">// 99</span></span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a);	<span class="comment">// 10</span></span><br><span class="line">System.out.println(<span class="string">&quot;b=&quot;</span> + b);	<span class="comment">// 98</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例：实现三个数的最大值</span></span><br><span class="line"><span class="keyword">int</span> n1 = <span class="number">553</span>;</span><br><span class="line"><span class="keyword">int</span> n2 = <span class="number">33</span>;</span><br><span class="line"><span class="keyword">int</span> n3 = <span class="number">123</span>;</span><br><span class="line"><span class="comment">//思路</span></span><br><span class="line"><span class="comment">//1. 先得到 n1 和 n2 中最大数 , 保存到 max1</span></span><br><span class="line"><span class="comment">//2. 然后再 求出 max1 和 n3 中的最大数，保存到 max2</span></span><br><span class="line"><span class="keyword">int</span> max1 = n1 &gt; n2 ? n1 : n2;</span><br><span class="line"><span class="keyword">int</span> max2 = max1 &gt; n3 ? max1 : n3;</span><br><span class="line">System.out.println(<span class="string">&quot;最大数=&quot;</span> + max2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用一条语句实现, 推荐使用上面方法</span></span><br><span class="line"><span class="comment">//老师提示: 后面我们可以使用更好方法,比如排序</span></span><br><span class="line"><span class="comment">// int max = (n1 &gt; n2 ? n1 : n2) &gt; n3 ?</span></span><br><span class="line"><span class="comment">// (n1 &gt; n2 ? n1 : n2) : n3;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;最大数=&quot; + max);</span></span><br></pre></td></tr></table></figure>



<h2 id="4-6-标识符"><a href="#4-6-标识符" class="headerlink" title="4.6 标识符"></a>4.6 标识符</h2><ul>
<li>标识符命名规则</li>
</ul>
<p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li><p>由26个英文字母大小写, 0-9，或 $ 组成</p>
</li>
<li><p>数字不可以开头。int 3ab = 1;//错误</p>
</li>
<li><p>不可以使用关键字和保留字，但能包含关键字和保留字。</p>
</li>
<li><p>Java中严格区分大小写，长度无限制。int totalNum = 10; int n = 90;</p>
</li>
<li><p>标识符不能包含空格。int a b = 90;</p>
</li>
</ol>
<p>​    </p>
</div></p>
<ul>
<li>标识符命名规范</li>
</ul>
<p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li><p> 包名：多单词组成时所有字母都小写：aaa.bbb.ccc //比如 com.hsp.crm</p>
</li>
<li><p>类名、接口名：多单词组成时，所有单词的首字母大写：XxxYyyZzz [大驼峰]</p>
</li>
<li><p>变量名、方法名：多单词组成时，第一个单词首字母小写，第二个单词开始每个单词首字母大写：xxxYyyZz[小驼峰， 简称 驼峰法]</p>
</li>
<li><p>常量名：所有字母都大写。多单词时每个单词用下划线连接：XXX_YYY_ZZZ</p>
</li>
</ol>
<p>​    </p>
</div></p>
<h2 id="4-7-键盘输入"><a href="#4-7-键盘输入" class="headerlink" title="4.7 键盘输入"></a>4.7 键盘输入</h2><p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li><p> next()：接收用户输入字符串</p>
</li>
<li><p> <font color="red">next().charAt(0)</font>：接收用户输入的一个字符</p>
</li>
<li><p> nextInt()：接收用户输入的int</p>
</li>
<li><p> nextDouble()：接收用户输入的Double</p>
</li>
</ol>
<p>​    </p>
</div></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;<span class="comment">//表示把 java.util 下的 Scanner 类导入</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Input</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//步骤</span></span><br><span class="line">        <span class="comment">//Scanner 类 表示 简单文本扫描器，在 java.util 包</span></span><br><span class="line">        <span class="comment">//1. 引入/导入 Scanner 类所在的包</span></span><br><span class="line">        <span class="comment">//2. 创建 Scanner 对象 , new 创建一个对象</span></span><br><span class="line">        Scanner myScanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="comment">//3. 接收用户输入了，使用相关的方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入名字&quot;</span>);</span><br><span class="line">        <span class="comment">//当程序执行到 next 方法时，会等待用户输入~~~ </span></span><br><span class="line">        String name = myScanner.next(); <span class="comment">//接收用户输入字符串</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入年龄&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> age = myScanner.nextInt(); <span class="comment">//接收用户输入 int</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入薪水&quot;</span>);</span><br><span class="line">        <span class="keyword">double</span> sal = myScanner.nextDouble(); <span class="comment">//接收用户输入 double</span></span><br><span class="line">        System.out.println(<span class="string">&quot;人的信息如下:&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;名字=&quot;</span> + name</span><br><span class="line">        + <span class="string">&quot; 年龄=&quot;</span> + age + <span class="string">&quot; 薪水=&quot;</span> + sal);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-8-进制（基本功）"><a href="#4-8-进制（基本功）" class="headerlink" title="4.8 进制（基本功）"></a>4.8 进制（基本功）</h2><h3 id="4-8-1-进制介绍"><a href="#4-8-1-进制介绍" class="headerlink" title="4.8.1 进制介绍"></a>4.8.1 进制介绍</h3><ul>
<li>对于整数，有四种表示方式：<ul>
<li>二进制：0,1 ，满 2 进 1. <font color="red">以 <strong>0b</strong> 或 <strong>0B</strong> 开头</font>。</li>
<li>十进制：0-9 ，满 10 进 1。</li>
<li>八进制：0-7 ，满 8 进 1. <font color="red">以数字 以数字 <strong>0</strong> 开头表示 开头表示</font>。</li>
<li>十六进制：0-9 及 A(10)-F(15)，满 16 进 1. <font color="red">以 <strong>0x 或 0X</strong> 开头表示</font>。此处的 A-F 不区分大小写。</li>
</ul>
</li>
</ul>
<h3 id="4-8-2-进制转化"><a href="#4-8-2-进制转化" class="headerlink" title="4.8.2 进制转化"></a>4.8.2 进制转化</h3><ul>
<li>k进制转十进制</li>
</ul>
<p>​        从最低位（右边）开始，将每个位上的数提取出来，乘以 k的(位数-1)次方 后再求和</p>
<ul>
<li><p>十进制转k进制</p>
<p>除k取余法</p>
</li>
<li><p>二进制转八进制（十六进制）</p>
</li>
</ul>
<p>​         从低位开始, 将二进制数（十六进制数）<strong>每三位（四位）</strong>一组，转成对应的八进制数（十六进制数）即可。</p>
<ul>
<li>八进制（十六进制）转二进制</li>
</ul>
<p>​        将八进制数（十六进制）每 1 位，转成对应的一个 3 位（4位）的二进制数即可。</p>
<h3 id="4-8-3-源码、反码、补码（必背）"><a href="#4-8-3-源码、反码、补码（必背）" class="headerlink" title="4.8.3 源码、反码、补码（必背）"></a>4.8.3 源码、反码、补码（必背）</h3><p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>二进制的<strong>最高位</strong>是符号位: 0表示正数,1表示负数</li>
<li>正数的原码，反码，补码都一样(三码合一)</li>
<li>负数的反码=它的原码<strong>符号位不变</strong>, 其它位取反(0-&gt;1,1-&gt;0)</li>
<li><strong>负数的补码=它的反码+1</strong>，负数的反码=负数的补码-1，0的反码，补码都是0</li>
<li>java没有无符号数,换言之,java中的数都是有符号的</li>
<li>在计算机运算的时候，都是<strong>以补码的方式来运算</strong>的.</li>
<li>当我们看运算结果的时候，要看他的原码(重点)</li>
</ol>
<p>​    </p>
</div></p>
<h2 id="4-9-位运算"><a href="#4-9-位运算" class="headerlink" title="4.9 位运算"></a>4.9 位运算</h2><ul>
<li>按位与&amp;：两位全为1,结果为1，否则为0</li>
<li>按位或：两位有一个为1，结果为1，否则为0</li>
<li>按位异或^：两位一个为0,一个为1，结果为1，否则为0</li>
<li>按位取反~：0-&gt;1,1-&gt;0</li>
<li>算术右移 &gt;&gt;：低位溢出,<strong>符号位不变</strong>,并用符号位补溢出的高位</li>
<li>算术左移 &lt;&lt;：<strong>符号位不变</strong>,低位补 0</li>
<li>无符号右移&gt;&gt;&gt;：运算规则是: 低位溢出，高位补 0</li>
<li>没有无符号左移</li>
</ul>
<ul>
<li>操作过程：先得到原码，再得到补码，在补码上进行操作，最后还原为原码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 先得到-2的原码（4字节） 10000000 00000000 00000000 00000010</span></span><br><span class="line"><span class="comment">// 2. -2的反码              11111111 11111111 11111111 11111101</span></span><br><span class="line"><span class="comment">// 3. -2的补码              11111111 11111111 11111111 11111110</span></span><br><span class="line"><span class="comment">// 4. ~(-2)操作             00000000 00000000 00000000 00000001 运算后的补码</span></span><br><span class="line"><span class="comment">// 5. 运算后的补码为正数，源码也为 00000000 00000000 00000000 00000001 =&gt; 1</span></span><br><span class="line">System.out.println(~(-<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 先得到2的原码（4字节） 00000000 00000000 00000000 00000010 （正数）</span></span><br><span class="line"><span class="comment">// 2. ~2操作               11111111 11111111 11111111 11111101 运算后的补码（负数）</span></span><br><span class="line"><span class="comment">// 3. -2补码的反码（补码-1） 11111111 11111111 11111111 11111100         </span></span><br><span class="line"><span class="comment">// 3. ~2补码的原码          10000000 00000000 00000000 00000011 =&gt; -3     </span></span><br><span class="line">System.out.println(~<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 00000000 00000000 00000000 00000001</span></span><br><span class="line"><span class="comment">// 00000000 00000000 00000000 00000000</span></span><br><span class="line">System.out.println(<span class="number">1</span>&gt;&gt;<span class="number">2</span>)</span><br><span class="line"><span class="comment">// 00000000 00000000 00000000 00000001</span></span><br><span class="line"><span class="comment">// 00000000 00000000 00000000 00000100</span></span><br><span class="line">System.out.println(<span class="number">1</span>&gt;&gt;<span class="number">2</span>)</span><br></pre></td></tr></table></figure>



<h1 id="第五章-程序控制结构"><a href="#第五章-程序控制结构" class="headerlink" title="第五章 程序控制结构"></a>第五章 程序控制结构</h1><h2 id="5-1-顺序结构"><a href="#5-1-顺序结构" class="headerlink" title="5.1 顺序结构"></a>5.1 顺序结构</h2><h2 id="5-2-分支控制"><a href="#5-2-分支控制" class="headerlink" title="5.2 分支控制"></a>5.2 分支控制</h2><ul>
<li><p>单分支</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件表达式) &#123;</span><br><span class="line">    执行代码块；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>双分支</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件表达式) &#123;</span><br><span class="line">    执行代码块<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    执行代码块<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>多分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">if(条件表达式) &#123;</span><br><span class="line">    执行代码块1;</span><br><span class="line">&#125;</span><br><span class="line">if else(条件表达式2) &#123;</span><br><span class="line">    执行代码块2;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">if else(条件表达式n) &#123;</span><br><span class="line">    执行代码块n;</span><br><span class="line">&#125;</span><br><span class="line">else &#123;					//可以没有else</span><br><span class="line">	 执行代码块n+1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>switch分支</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式) &#123;</span><br><span class="line">	<span class="keyword">case</span> 常量<span class="number">1</span>：</span><br><span class="line">		语句块<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> 常量<span class="number">2</span>：</span><br><span class="line">		语句块<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	...</span><br><span class="line">    <span class="keyword">case</span> 常量n：</span><br><span class="line">        语句块n;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    defalut:</span><br><span class="line">    	<span class="keyword">default</span>语句块;</span><br><span class="line">    	<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><font color="red"><strong>特别注意</strong>：当前一个case没有break时，会直接进入下一个case的语句块，而不需要判断</font></li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230910160242133.png" alt="image-20230910160242133"></p>
<ul>
<li>使用细节</li>
</ul>
<p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>表达式数据类型，应和case后的常量<strong>类型一致</strong>，或者是可以<strong>自动转换</strong>成可以相互比较的类型，比如输入的是字符，而常量是int</li>
<li>switch(表达式)中表达式的返回值必须是: <font color="red">byte, short, int, char, enum[枚举], String</font><br>double c = 1.1; switch(c)//错误</li>
<li>case子句中的值必须是<strong>常量</strong>,而不能是变量</li>
<li>default子句是可选的，当没有匹配的case时，执行default</li>
<li>break语句用来在执行完一个case分支后使程序跳出switch语句块; 如果没有写break，程序会顺序执行到switch结尾，除非遇到break; （穿透现象）</li>
</ol>
<p>​    </p>
</div></p>
</li>
</ul>
<ul>
<li>switch和if的比较<ul>
<li> 如果<strong>判断的具体数值不多</strong>，而且符合 byte、 short 、int、 char, enum[枚举], String 这 6 种类型。虽然两个语句都可以使用，建议使用 swtich 语句。</li>
<li> 其他情况：对区间判断，对结果为 boolean 类型判断，使用 if，if 的使用范围更广</li>
</ul>
</li>
</ul>
<h2 id="5-3-循环控制"><a href="#5-3-循环控制" class="headerlink" title="5.3 循环控制"></a>5.3 循环控制</h2><h3 id="5-3-1-for循环"><a href="#5-3-1-for循环" class="headerlink" title="5.3.1 for循环"></a>5.3.1 for循环</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (循环变量初始化; 循环条件; 循环变量迭代) &#123;</span><br><span class="line">	循环操作;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230911162316011.png" alt="image-20230911162316011"></p>
<ul>
<li><p>for 有四要素: (1)循环变量初始化 (2)循环条件 (3)循环操作 (4)循环变量迭代</p>
</li>
<li><p>for(; ;)表示无限循环</p>
</li>
<li><p>for(; 循环判断条件; ) 中的初始化和变量迭代可以写到其它地方，但是两边的分号不能省略。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>( ; i &lt;= <span class="number">10</span>; ) &#123;</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    i++</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></li>
<li><p>循环初始值<strong>可以有多条初始化语句，但要求类型一样，并且中间用逗号隔开</strong>，循环变量迭代也可以有多条变量迭代语句，中间用逗号隔开.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++, j += <span class="number">2</span>) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;i=&quot;</span> + i + <span class="string">&quot;j=&quot;</span> + j)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-3-2-while循环"><a href="#5-3-2-while循环" class="headerlink" title="5.3.2 while循环"></a>5.3.2 while循环</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">循环变量初始化；</span><br><span class="line"><span class="keyword">while</span>(循环条件) &#123;</span><br><span class="line">	循环体;</span><br><span class="line">	循环变量迭代;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230911163633782.png" alt="image-20230911163633782"></p>
<h3 id="5-3-3-do-while循环"><a href="#5-3-3-do-while循环" class="headerlink" title="5.3.3 do while循环"></a>5.3.3 do while循环</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">循环变量初始化;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    循环体(语句);	<span class="comment">// 至少执行一次循环体</span></span><br><span class="line">    循环变量迭代;</span><br><span class="line">&#125;<span class="keyword">while</span>(循环条件);</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230911163844949.png" alt="image-20230911163844949"></p>
<h3 id="5-3-4-嵌套循环"><a href="#5-3-4-嵌套循环" class="headerlink" title="5.3.4 嵌套循环"></a>5.3.4 嵌套循环</h3><p><font color="red">编程思想：化繁为简，先死后活</font></p>
<p>化繁为简：将复杂的程序简化为多个简单的步骤</p>
<p>先死后活：先考虑常量的情况，再考虑变量的情况</p>
<ul>
<li><p>打印九九乘法表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">        System.out.print(j + <span class="string">&quot;*&quot;</span> + i +<span class="string">&quot;=&quot;</span> + j * i);</span><br><span class="line">        System.out.print(<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230911165707995.png" alt="image-20230911165707995"></p>
</li>
</ul>
<ul>
<li><p>打印空心金字塔</p>
<ul>
<li>化繁为简</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一版</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">2</span> * i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二版</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 空格数 = 层数 - 当前层数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= <span class="number">5</span> - i; k++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">2</span> * i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三版</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= <span class="number">5</span> - i; k++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">2</span> * i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">        <span class="comment">// 每行只有第一个位置和最后一个位置打印*</span></span><br><span class="line">        <span class="comment">// 最后一行全部输出</span></span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">1</span> || j == <span class="number">2</span> * i - <span class="number">1</span> || i == <span class="number">5</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;	<span class="comment">//其他位置打印空格</span></span><br><span class="line">            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>先死后活</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 终版</span></span><br><span class="line">Scanner myScanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;请输入金字塔层数：&quot;</span>);</span><br><span class="line"><span class="keyword">int</span> level = myScanner.nextInt();</span><br><span class="line"><span class="comment">// 第三版</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= level; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= level - i; k++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">2</span> * i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">        <span class="comment">// 每行只有第一个位置和最后一个位置打印*</span></span><br><span class="line">        <span class="comment">// 最后一行全部输出</span></span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">1</span> || j == <span class="number">2</span> * i - <span class="number">1</span> || i == level) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;	<span class="comment">//其他位置打印空格</span></span><br><span class="line">            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230912104055452.png" alt="image-20230912104055452"></p>
</li>
</ul>
<h3 id="5-3-5-break跳转"><a href="#5-3-5-break跳转" class="headerlink" title="5.3.5 break跳转"></a>5.3.5 break跳转</h3><ul>
<li><p>跳出最近的循环体</p>
</li>
<li><p>break语句出现在多层嵌套的语句块中时，可以通过**<font color="red">标签</font>**指明要终止的是哪一层语句块。</p>
</li>
<li><p>label1: { …{break label1}… }</p>
</li>
<li><p>label1是标签，名字由程序员指定，可以是任意如abc1，ABC2</p>
</li>
<li><p>在实际开发中尽量不要使用标签</p>
</li>
<li><p>如果break没有指定标签，默认退出最近的循环体</p>
</li>
</ul>
<h3 id="5-3-6-continue跳转"><a href="#5-3-6-continue跳转" class="headerlink" title="5.3.6 continue跳转"></a>5.3.6 continue跳转</h3><ul>
<li>结束本次循环，继续执行下一次循环</li>
<li>continue 语句出现在多层嵌套的循环语句体中时，可以通过**<font color="red">标签</font>**指明要跳过的是哪一层循环 , 这个和前面的标签的使用的规则一样.</li>
</ul>
<h1 id="第六章-数组"><a href="#第六章-数组" class="headerlink" title="第六章 数组"></a>第六章 数组</h1><h2 id="6-1-数组初始化"><a href="#6-1-数组初始化" class="headerlink" title="6.1 数组初始化"></a>6.1 数组初始化</h2><h3 id="6-1-1-静态初始化"><a href="#6-1-1-静态初始化" class="headerlink" title="6.1.1 静态初始化"></a>6.1.1 静态初始化</h3><ul>
<li><p>语法：<font color="red">数据类型[]  数组名 = {元素值1，元素值2，….}</font>  或  <font color="red">数据类型 数组名[] = {元素值1，元素值2，….}</font>  或  <font color="red">数据类型 数组名[] = new 数据类型[ ]{元素值1，元素值2，….}</font> .</p>
</li>
<li><p>```java<br>int a[] = {1, 2, 3, 4};<br>int[] b = {5, 6, 7, 8};</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  int a[] = &#123;1, 2, 3, 4&#125;;</span><br><span class="line">  double b[] = &#123;1.1, 2.2, 3.4&#125;;</span><br><span class="line">  char c[] = &#123;&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p>```java<br>int a[] = new int[]{1, 2, 3, 4};<br>double b[] = new double[]{1.1, 2.2, 3.4};<br>char c[] = new char[]{‘a’, ‘b’, ‘c’};</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">### 6.1.2 动态初始化</span><br><span class="line"></span><br><span class="line">- 语法：&lt;font color=&#x27;red&#x27;&gt;数据类型[] 数组名  = new 数据类型[大小]&lt;/font&gt; 或 &lt;font color=&#x27;red&#x27;&gt;数据类型 数组名[]  = new 数据类型[大小]&lt;/font&gt;</span><br><span class="line">- ```java</span><br><span class="line">  int a[] = new int[4];</span><br><span class="line">  int[] b = new int[4];</span><br><span class="line">  </span><br><span class="line">  int c[]; // int[] c;</span><br><span class="line">  c = new int[4];</span><br></pre></td></tr></table></figure></li>
<li><p>```java<br>char[] table = new char[26];<br>for(int i = 0; i &lt; table.length; i++) {</p>
<pre><code>// &#39;a&#39; + i是int类型，需要强制转换为char
table[i] = (char)(&#39;a&#39; + i);
</code></pre>
<p>}<br>System.out.println(“==table数组===”);<br>for(int i = 0; i &lt; table.length; i++) {</p>
<pre><code>System.out.print(table[i] + &quot; &quot;);
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">## 6.2 使用细节</span><br><span class="line"></span><br><span class="line">- 数组是多个**相同类型数据**的组合，实现对这些数据的统一管理</span><br><span class="line">-  数组中的**元素可以是任何数据类型**，包括基本类型和引用类型，但是不能混用。</span><br><span class="line">- 数组创建后，如果没有赋值，有&lt;a id=&quot;myid&quot;&gt; **默认值** &lt;/a&gt;**int 0，short 0, byte 0, long 0, float 0.0,double 0.0，char \u0000，boolean false，String null**</span><br><span class="line">- 数组的**下标是从** **0** **开始的**。</span><br><span class="line">- 获取数组长度：&lt;font color=&#x27;red&#x27;&gt;数组名.length&lt;/font&gt;</span><br><span class="line">- 数组下标必须在指定范围内使用，否则报：下标越界异常</span><br><span class="line">- 数组属**引用类型**，数组型数据是对象(object)代码</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 6.3 数组赋值机制</span><br><span class="line"></span><br><span class="line">- 基本数据类型是&lt;font color=&#x27;red&#x27;&gt;值传递&lt;/font&gt;，赋值类型是&lt;font color=&#x27;red&#x27;&gt;值拷贝&lt;/font&gt;</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  // b的变化不会影响到a</span><br><span class="line">  int n1 = 10;</span><br><span class="line">  int n2 = a;</span><br><span class="line">  n2 = 80;</span><br><span class="line">  System.out.println(n1);	// 10</span><br><span class="line">  System.out.println(n2);	// 80</span><br></pre></td></tr></table></figure></li>
<li><p>数组在默认情况下是**<font color="red">引用传递，赋的值是地址</font>**，赋值方式为<font color="red"><strong>地址拷贝</strong></font>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b的变化会影响到a</span></span><br><span class="line"><span class="keyword">int</span>[] arr1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr2 = arr1;	<span class="comment">//把数组a赋值给b，赋的是地址</span></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class="line">	System.out.println(arr1[i]);</span><br><span class="line">&#125;	<span class="comment">// 10, 2, 3</span></span><br></pre></td></tr></table></figure></li>
<li><p>值传递和引用传递区别</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230913101848477.png" alt="image-20230913101848477"></p>
</li>
</ul>
<h2 id="6-4-数组拷贝"><a href="#6-4-数组拷贝" class="headerlink" title="6.4 数组拷贝"></a>6.4 数组拷贝</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[arr1.length];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class="line">    arr2[i] = arr1[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr2.length; i++) &#123;</span><br><span class="line">    System.out.print(arr1[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    System.out.println(arr2[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="6-5-数组反转"><a href="#6-5-数组反转" class="headerlink" title="6.5 数组反转"></a>6.5 数组反转</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr = &#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> len = arr.length;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len / <span class="number">2</span>; i++) &#123;</span><br><span class="line">    temp = arr[i];</span><br><span class="line">    arr[i] = arr[len - <span class="number">1</span> - i];</span><br><span class="line">    arr[len - <span class="number">1</span> - i] = temp;</span><br><span class="line">&#125;</span><br><span class="line">System.out.print(<span class="string">&quot;反转后的数组&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="6-6-数组扩容"><a href="#6-6-数组扩容" class="headerlink" title="6.6 数组扩容"></a>6.6 数组扩容</h2><ul>
<li><p>要求：实现动态的给数组添加元素效果，实现对数组扩容。</p>
</li>
<li><p>```Java<br>// 1. 定义初始数组 int[] arr = {1,2,3}//下标 0-2<br>// 2. 定义一个新的数组 int[] arrNew = new int[arr.length+1];<br>// 3. 遍历 arr 数组，依次将 arr 的元素拷贝到 arrNew 数组<br>// 4. 将 4 赋给 arrNew[arrNew.length - 1] = 4;把 4 赋给 arrNew 最后一个元素<br>// 5. 让 arr 指向 arrNew ; arr = arrNew; 那么 原来 arr 数组就被销毁<br>int[] arr = {1, 2, 3};<br>int[] arrNew = new int[arr.length + 1];<br>for(int i = 0; i &lt; arr.length; i++) {</p>
<pre><code>arrNew[i] = arr[i];   
</code></pre>
<p>}<br>arrNew[arrNew.length - 1] = 4;<br>arr = arrNew;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">## 6.7 冒泡排序</span><br><span class="line"></span><br><span class="line">- 基本思想：每一轮，依次比较相邻元素的值，若发现逆序则交换，使得较大的元素逐渐从前向后移动，就像水底的气泡一样逐渐向上冒。</span><br><span class="line"></span><br><span class="line">- 例子</span><br><span class="line"></span><br><span class="line">  ![image-20230914092459709](Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230914092459709.png)</span><br><span class="line"></span><br><span class="line">- 化繁为简，先死后活</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  int[] arr = [24, 69, 80, 57, 13]</span><br><span class="line">      int temp;</span><br><span class="line">  </span><br><span class="line">  // 第一轮，4次比较</span><br><span class="line">  for(int j = 0; j &lt; 4; j++) &#123;</span><br><span class="line">      if(arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">          temp = arr[j];</span><br><span class="line">          arr[j] = arr[j + 1];</span><br><span class="line">          arr[j + 1] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // 第二轮，3次比较</span><br><span class="line">  for(int j = 0; j &lt; 3; j++) &#123;</span><br><span class="line">      if(arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">          temp = arr[j];</span><br><span class="line">          arr[j] = arr[j + 1];</span><br><span class="line">          arr[j + 1] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // 第三轮，2次比较</span><br><span class="line">  for(int j = 0; j &lt; 2; j++) &#123;</span><br><span class="line">      if(arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">          temp = arr[j];</span><br><span class="line">          arr[j] = arr[j + 1];</span><br><span class="line">          arr[j + 1] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // 第四轮，1次比较</span><br><span class="line">  for(int j = 0; j &lt; 1; j++) &#123;</span><br><span class="line">      if(arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">          temp = arr[j];</span><br><span class="line">          arr[j] = arr[j + 1];</span><br><span class="line">          arr[j + 1] = temp;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 一共有四轮比较，可用i代表(轮数-1)，每轮比较4-i次</span><br><span class="line">  for(int i = 0; i &lt; 4; i++) &#123;</span><br><span class="line">      for(int j = 0; j &lt; 4 - i; j++) &#123;</span><br><span class="line">          if(arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">              temp = arr[j];</span><br><span class="line">              arr[j] = arr[j + 1];</span><br><span class="line">              arr[j + 1] = temp;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组长度length，一共需要比较length-1轮（冒泡length-1次），第i轮需要比较length-1-i次</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">            temp = arr[j];</span><br><span class="line">            arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">            arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6-8-二维数组"><a href="#6-8-二维数组" class="headerlink" title="6.8 二维数组"></a>6.8 二维数组</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230914102416900.png" alt="image-20230914102416900"></p>
<h3 id="6-8-1-初始化"><a href="#6-8-1-初始化" class="headerlink" title="6.8.1 初始化"></a>6.8.1 初始化</h3><ul>
<li><p>静态初始化：</p>
<ul>
<li><font color="red">数据类型[][] 数组名 = &lt;!–swig￼360–&gt;</font></li>
<li><font color="red">数据类型 数组名[][] = &lt;!–swig￼361–&gt;</font></li>
<li><font color="red">数据类型[] 数组名[] = &lt;!–swig￼362–&gt;</font></li>
</ul>
</li>
<li><p>动态初始化1：</p>
<ul>
<li><font color="red">数据类型[][] 数组名 = new 数据类型[大小][大小]</font></li>
<li><font color="red">数据类型 数组名[][] = new 数据类型[大小][大小]</font></li>
<li><font color="red">数据类型[] 数组名[] = new 数据类型[大小][大小]</font></li>
</ul>
</li>
<li><p>动态初始化2（列数不确定）：</p>
<ul>
<li><font color="red">数据类型[][] 数组名 = new 数据类型[大小][]</font></li>
<li><font color="red">数据类型 数组名[][] = new 数据类型[大小][]</font></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr[i].length; j++) &#123;</span><br><span class="line">		arr[i][j] = (i + <span class="number">1</span>) * (j + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明时列数不确定</span></span><br><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">	<span class="comment">//给每一个一维数组arr[i]开辟空间</span></span><br><span class="line">	arr[i] = <span class="keyword">new</span> <span class="keyword">int</span>[i + <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr[i].length; j++) &#123;</span><br><span class="line">		arr[i][j] = i + <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-8-2-应用-杨辉三角"><a href="#6-8-2-应用-杨辉三角" class="headerlink" title="6.8.2 应用-杨辉三角"></a>6.8.2 应用-杨辉三角</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">1 1</span></span><br><span class="line"><span class="comment">1 2 1</span></span><br><span class="line"><span class="comment">1 3 3 1</span></span><br><span class="line"><span class="comment">1 4 6 4 1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">规律：</span></span><br><span class="line"><span class="comment">1.第n行有n个元素</span></span><br><span class="line"><span class="comment">2. 每一行第一个和最后一个元素都为1</span></span><br><span class="line"><span class="comment">3. 从第三行开始，对于中间元素 </span></span><br><span class="line"><span class="comment">[i][j] = arr[i - 1][j] + arr[i - 1][j - 1]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span>[][] yanghui = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; yanghui.length; i++) &#123;</span><br><span class="line">    <span class="comment">// 给每一个一维数组开辟空间</span></span><br><span class="line">    yanghui[i] = <span class="keyword">new</span> <span class="keyword">int</span>[i + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 赋值</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; yanghui[i].length; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">0</span> || j == yanghui[i].length - <span class="number">1</span>) &#123;</span><br><span class="line">            yanghui[i][j] = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            yanghui[i][j] = yanghui[i - <span class="number">1</span>][j] + yanghui[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="第七章-面向对象编程（基础）"><a href="#第七章-面向对象编程（基础）" class="headerlink" title="第七章 面向对象编程（基础）"></a>第七章 面向对象编程（基础）</h1><h2 id="7-1-类与对象"><a href="#7-1-类与对象" class="headerlink" title="7.1 类与对象"></a>7.1 类与对象</h2><ul>
<li><p>案例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Cat &#123;</span><br><span class="line">	String name;</span><br><span class="line">	int age;</span><br><span class="line">	String color;</span><br><span class="line">	double weight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7-1-1-类与对象的区别和联系"><a href="#7-1-1-类与对象的区别和联系" class="headerlink" title="7.1.1 类与对象的区别和联系"></a>7.1.1 类与对象的区别和联系</h3><ul>
<li>类是<strong>抽象</strong>的，概念的，代表一类事物,比如人类,猫类.., 即它是数据类型. </li>
<li>对象是<strong>具体</strong>的，实际的，代表一个具体事物, 即 是实例. </li>
<li> 类是对象的模板，对象是类的一个个体，对应一个实例</li>
</ul>
<p>​        </p>
<h3 id="7-1-2-对象在内存中存在形式（重要！）"><a href="#7-1-2-对象在内存中存在形式（重要！）" class="headerlink" title="7.1.2 对象在内存中存在形式（重要！）"></a>7.1.2 对象在内存中存在形式（<font color="red">重要</font>！）</h3><p>​        <strong>栈</strong>中存放的是对象的<strong>引用</strong>（对象名），真正的对象在<strong>堆</strong>中。</p>
<p>​        年龄12是一个基本数据类型（整型），直接存放在堆中；名字和颜色是一个引用类型（字符串），在堆中存放的是地址，真正的数据存放在方法区的常量池中。</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230915192816359.png" alt="image-20230915192816359"></p>
<h3 id="7-1-3-成员变量-属性-字段"><a href="#7-1-3-成员变量-属性-字段" class="headerlink" title="7.1.3 成员变量|属性|字段"></a>7.1.3 成员变量|属性|字段</h3><ul>
<li><p>定义：<strong>访问修饰符 属性类型 属性名</strong></p>
</li>
<li><p>赋值：属性如果不赋值，有<a href="#myid">默认值</a>，规则和数组一致。具体说: int 0，short 0, byte 0, long 0, float 0.0,double 0.0，</p>
<p>char \u0000，boolean false，String null</p>
</li>
<li><p>访问属性：对象名.属性名</p>
</li>
</ul>
<h3 id="7-1-4-创建对象"><a href="#7-1-4-创建对象" class="headerlink" title="7.1.4 创建对象"></a>7.1.4 创建对象</h3><ul>
<li><p>先声明在创建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明时会在栈中创建一个值为空的变量,创建时会在堆中创建一个对象并把它的地址赋给这个变量</span></span><br><span class="line">Cat cat;</span><br><span class="line">cat = <span class="keyword">new</span> Cat();</span><br></pre></td></tr></table></figure></li>
<li><p>直接创建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cat cat = <span class="keyword">new</span> Cat();</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7-1-5-类和对象的内存分配机制（重要！）"><a href="#7-1-5-类和对象的内存分配机制（重要！）" class="headerlink" title="7.1.5 类和对象的内存分配机制（重要！）"></a>7.1.5 类和对象的内存分配机制（重要！）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Person p1 = <span class="keyword">new</span> Person();</span><br><span class="line">p1.name = <span class="string">&quot;小明&quot;</span>;</span><br><span class="line">p1.age = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">Person p2 = p1;</span><br><span class="line">p2.age = <span class="number">80</span>;</span><br><span class="line">System.out.print(p1.age);<span class="comment">//80</span></span><br><span class="line">System.out.print(p2.name);<span class="comment">//小明</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230916184807203.png" alt="image-20230916184807203"></p>
<ul>
<li>java的内存结构</li>
</ul>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>栈： 一般存放基本数据类型(局部变量)</li>
<li>堆： 存放对象(Cat cat , 数组等)</li>
<li>方法区：常量池(常量，比如字符串)， 类加载信息</li>
</ol>
</div>



<ul>
<li>java<font color="red">创建对象的流程</font></li>
</ul>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>先加载 Person 类信息到<strong>方法区</strong>中(属性和方法信息, 只会加载一次)</li>
<li>在<strong>堆</strong>中分配空间, 进行默认初始化(看规则)</li>
<li>把地址赋给<strong>栈</strong>中的变量p , p 就指向对象</li>
<li>进行指定初始化， 比如 p.name =”jack” p.age = 10</li>
</ol>
</div>



<h2 id="7-2-成员方法"><a href="#7-2-成员方法" class="headerlink" title="7.2 成员方法"></a>7.2 成员方法</h2><h3 id="7-2-1-方法的调用机制（重要！）"><a href="#7-2-1-方法的调用机制（重要！）" class="headerlink" title="7.2.1 方法的调用机制（重要！）"></a>7.2.1 方法的调用机制（重要！）</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230916191418109.png" alt="image-20230916191418109"></p>
<h3 id="7-2-2-方法的作用"><a href="#7-2-2-方法的作用" class="headerlink" title="7.2.2 方法的作用"></a>7.2.2 方法的作用</h3><ul>
<li>提高代码的<strong>复用性</strong></li>
<li>将实现的细节进行<strong>封装</strong>，然后供其他用户直接调用而不需要了解其内部细节</li>
</ul>
<h3 id="7-2-3-方法的定义"><a href="#7-2-3-方法的定义" class="headerlink" title="7.2.3 方法的定义"></a>7.2.3 方法的定义</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> 返回数据类型 方法名(形参列表...) &#123;</span><br><span class="line">	语句; <span class="comment">//方法体</span></span><br><span class="line">	<span class="keyword">return</span>;	<span class="comment">//可以没有return，此时返回数据类型为void</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-2-4-方法的使用细节"><a href="#7-2-4-方法的使用细节" class="headerlink" title="7.2.4 方法的使用细节"></a>7.2.4 方法的使用细节</h3><ul>
<li>访问修饰符：控制方法的使用范围，有 public，protected，默认，private</li>
<li>放回数据类型：<ul>
<li> 一个方法最多有一个返回值  [思考，如何返回多个结果 返回数组 ]</li>
<li> 返回类型可以为任意类型，包含基本类型或引用类型(数组，对象)</li>
<li> 如果方法要求有返回数据类型，则方法体中最后的执行语句必须为 return 值; 而且要求返回数据类型必须和 return 的值类型<strong>一致或兼容</strong>（可以自动转换）</li>
<li>如果方法是 void，则方法体中可以没有 return 语句，或者 只写 return ;</li>
</ul>
</li>
<li>方法名<ul>
<li>遵循小驼峰命名法</li>
<li>最好见名知义，如求和getSum</li>
</ul>
</li>
<li>形参列表<ul>
<li>调用带参数的列表时，传入的参数必须和参数列表是相同类型或兼容类型</li>
<li>方法定义时的参数成为<strong>形参</strong>，方法调用时传入的参数成为<strong>实参</strong>，实参和新参的类型必须一致或兼容，个数、顺序必须一致</li>
</ul>
</li>
<li>方法体：方法体里面不能再定义方法，即<font color="red"><strong>方法不能嵌套定义</strong></font>。</li>
</ul>
<h3 id="7-2-5-方法的调用"><a href="#7-2-5-方法的调用" class="headerlink" title="7.2.5 方法的调用"></a>7.2.5 方法的调用</h3><ul>
<li>同一个类中调用：直接调用即可</li>
<li>跨类中的方法调用：需要创建对象，对象名.方法名( )，能否调用与方法的访问修饰符有关</li>
</ul>
<h2 id="7-3-成员方法的传参机制（重要！）"><a href="#7-3-成员方法的传参机制（重要！）" class="headerlink" title="7.3 成员方法的传参机制（重要！）"></a>7.3 成员方法的传参机制（重要！）</h2><h3 id="7-3-1-值传递"><a href="#7-3-1-值传递" class="headerlink" title="7.3.1 值传递"></a>7.3.1 值传递</h3><ul>
<li>案例</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodParameter01</span> </span>&#123;</span><br><span class="line"><span class="comment">//编写一个 main 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">        <span class="comment">//创建 AA 对象 名字 obj</span></span><br><span class="line">        AA obj = <span class="keyword">new</span> AA();</span><br><span class="line">        obj.swap(a, b); <span class="comment">//调用 swap</span></span><br><span class="line">        System.out.println(<span class="string">&quot;main 方法 a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b);  <span class="comment">//a=10 b=20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\na 和 b 交换前的值\na=&quot;</span> + a + <span class="string">&quot;\tb=&quot;</span> + b);<span class="comment">//a=10 b=20</span></span><br><span class="line">        <span class="comment">//完成了 a 和 b 的交换</span></span><br><span class="line">        <span class="keyword">int</span> tmp = a;</span><br><span class="line">        a = b;</span><br><span class="line">        b = tmp;</span><br><span class="line">        System.out.println(<span class="string">&quot;\na 和 b 交换后的值\na=&quot;</span> + a + <span class="string">&quot;\tb=&quot;</span> + b);<span class="comment">//a=20 b=10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>基本数据类型的传参机制是<font color="red">值传递（值拷贝）</font>，形参的任何改变不会影响实参。</strong></li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230918132209849.png" alt="image-20230918132209849"></p>
<h3 id="7-3-2-地址传递"><a href="#7-3-2-地址传递" class="headerlink" title="7.3.2 地址传递"></a>7.3.2 地址传递</h3><ul>
<li><p>案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodParameter02</span> </span>&#123;</span><br><span class="line">    <span class="comment">//编写一个 main 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//测试</span></span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">        b.test100(arr);<span class="comment">//调用方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot; main 的 arr 数组 &quot;</span>);</span><br><span class="line">        <span class="comment">// 遍历数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        	System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);	<span class="comment">// &#123;200, 2, 3&#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//测试</span></span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        p.name = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">        p.age = <span class="number">10</span>;</span><br><span class="line">        b.test200(p);</span><br><span class="line">        <span class="comment">//测试题, 如果 test200 执行的是 p = null ,下面的结果是 10</span></span><br><span class="line">        <span class="comment">//测试题, 如果 test200 执行的是 p = new Person();..., 下面输出的是 10</span></span><br><span class="line">        System.out.println(<span class="string">&quot;main 的 p.age=&quot;</span> + p.age);<span class="comment">//10000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line"><span class="comment">//可以接收一个数组，在方法中修改该数组，看看原来的数组是否变化</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test100</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">200</span>;<span class="comment">//修改元素</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test200</span><span class="params">(Person p)</span> </span>&#123;</span><br><span class="line">	p.age = <span class="number">10000</span>; <span class="comment">//修改对象属性</span></span><br><span class="line">    <span class="comment">// 思考</span></span><br><span class="line">    <span class="comment">// p = new Person();</span></span><br><span class="line">    <span class="comment">// p.name = &quot;tom&quot;;</span></span><br><span class="line">    <span class="comment">// p.age = 99;</span></span><br><span class="line">    <span class="comment">// 思考</span></span><br><span class="line">    <span class="comment">// p = null;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><strong>引用数据类型的传参机制是<font color="red">地址传递（地址拷贝）</font>，形参的改变会影响实参</strong>。除非形参指向新的地址</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230918135155966.png" alt="image-20230918135155966"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230918140357919.png" alt="image-20230918140357919"></p>
<h2 id="7-4-递归调用"><a href="#7-4-递归调用" class="headerlink" title="7.4 递归调用"></a>7.4 递归调用</h2><h3 id="7-4-1-注意事项"><a href="#7-4-1-注意事项" class="headerlink" title="7.4.1 注意事项"></a>7.4.1 注意事项</h3><ul>
<li>执行一个方法时，就创建一个新的受保护的独立空间(栈空间)</li>
<li>方法的局部变量是独立的，不会相互影响, 比如n变量</li>
<li>如果方法中使用的是引用类型变量(比如数组，对象)，就会共享该引用类型的数据</li>
<li>递归必须向退出递归的条件逼近, 否则就是无限递归,出现StackOverflowError，栈溢出错误)</li>
<li>当一个方法执行完毕，或者遇到return时，就会返回，遵守谁调用，就将结果返回给谁</li>
</ul>
<h3 id="7-4-2-执行机制"><a href="#7-4-2-执行机制" class="headerlink" title="7.4.2 执行机制"></a>7.4.2 执行机制</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230918142149760.png" alt="image-20230918142149760"></p>
<ul>
<li><p>案例：阶乘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public int factorial(int n) &#123;</span><br><span class="line">	if(n == 1) &#123;</span><br><span class="line">		return 1</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return factorial(n - 2) * n;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230918142950520.png" alt="image-20230918142950520"></p>
</li>
</ul>
<ul>
<li><p>案例：迷宫</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MiGong</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 先创建迷宫，二维数组表示。规定0表示可以走，1表示障碍物</span></span><br><span class="line">		<span class="keyword">int</span>[][] map = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">8</span>][<span class="number">7</span>];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">			map[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">			map[<span class="number">7</span>][i] = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">			map[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">			map[i][<span class="number">6</span>] = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		map[<span class="number">3</span>][<span class="number">1</span>]= <span class="number">1</span>;</span><br><span class="line">		map[<span class="number">3</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">		map[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;========当前地图情况========&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">				System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 定义findWay给老鼠找路</span></span><br><span class="line">		T t = <span class="keyword">new</span> T();</span><br><span class="line">		t.findWay(map, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;========找路的情况========&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">				System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T</span> </span>&#123;</span><br><span class="line">	<span class="comment">//1. findWay 方法就是专门来找出迷宫的路径</span></span><br><span class="line">	<span class="comment">//2. 如果找到，就返回 true ,否则返回 false</span></span><br><span class="line">	<span class="comment">//3. map 就是二维数组，即表示迷宫</span></span><br><span class="line">	<span class="comment">//4. i,j 就是老鼠的位置，初始化的位置为(1,1)</span></span><br><span class="line">	<span class="comment">//5. 因为我们是递归的找路，所以我先规定 map 数组的各个值的含义</span></span><br><span class="line">	<span class="comment">// 	0 表示没有走过可以走（无障碍） 1 表示障碍物 2 表示走过且可以走通 3 表示走过，但是走不通是死路</span></span><br><span class="line">	<span class="comment">//6. 当 map[6][5] =2 就说明找到通路,就可以结束，否则就继续找. </span></span><br><span class="line">	<span class="comment">//7. 先确定老鼠找路策略 下-&gt;右-&gt;上-&gt;左</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">findWay</span><span class="params">(<span class="keyword">int</span>[][] map, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123;	<span class="comment">//找到出口</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(map[i][j] == <span class="number">0</span>) &#123;	<span class="comment">//当前位置没有障碍物可以走</span></span><br><span class="line">				<span class="comment">// 先假设这个位置可以走通</span></span><br><span class="line">				map[i][j] = <span class="number">2</span>;</span><br><span class="line">				<span class="comment">// 判断下一个位置（4个方向是否走得通）</span></span><br><span class="line">				<span class="keyword">if</span>(findWay(map, i + <span class="number">1</span>, j)) &#123;	<span class="comment">//下</span></span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i, j + <span class="number">1</span>))&#123;	<span class="comment">//右</span></span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i - <span class="number">1</span>, j))&#123;	<span class="comment">//上</span></span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i, j - <span class="number">1</span>))&#123;	<span class="comment">//左</span></span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;	<span class="comment">//当前位置四个方向都试过了，走不通</span></span><br><span class="line">					map[i][j] = <span class="number">3</span>;</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;	<span class="comment">//map[i][j]=1,2,3 当前位置是障碍物走不通，或者已经走过（2,3）</span></span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230919100158512.png" alt="image-20230919100158512"></p>
<h2 id="7-5-方法重载-Overload"><a href="#7-5-方法重载-Overload" class="headerlink" title="7.5 方法重载 Overload"></a>7.5 方法重载 Overload</h2><ul>
<li><p>java 中允许同一个类中，多个同名方法的存在，但要求**<font color="red">形参列表不一致</font>**！</p>
</li>
<li><p>减轻了起名和记名的麻烦</p>
</li>
<li><p>注意事项</p>
<ul>
<li>方法名必须相同</li>
<li>形参列表必须不同（<font color="red">形参类型、个数、顺序至少有一样不同，形参名无要求</font>）</li>
<li>返回类型无要求</li>
</ul>
</li>
<li><p>案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OverLoad</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Methods md = <span class="keyword">new</span> Methods();</span><br><span class="line">		System.out.println(md.max(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line">		System.out.println(md.max(<span class="number">10.2</span>, <span class="number">20.5</span>));</span><br><span class="line">		System.out.println(md.max(<span class="number">33.0</span>, <span class="number">20.1</span>, <span class="number">44.0</span>));</span><br><span class="line">		System.out.println(md.max(<span class="number">33.0</span>, <span class="number">20.1</span>, <span class="number">44</span>));</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Methods</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b, <span class="keyword">double</span> c)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (a &gt; b ? a : b) &gt; c ? (a &gt; b ? a : b) : c;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (a &gt; b ? a : b) &gt; c ? (a &gt; b ? a : b) : c;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="7-6-可变参数"><a href="#7-6-可变参数" class="headerlink" title="7.6 可变参数"></a>7.6 可变参数</h2><ul>
<li><p>java 允许将同一个类中多个同名同功能但<strong>参数个数不同</strong>的方法，封装成一个方法。就可以通过可变参数实现</p>
</li>
<li><p>访问修饰符 返回类型 方法名(<font color="red">数据类型… 形参名</font>) { }</p>
</li>
<li><p>注意事项</p>
<ul>
<li>可变参数的实参个数可以为<strong>0或者任意多个</strong></li>
<li>可变参数的<strong>实参可以为数组</strong></li>
<li>可变参数的本质就是数组</li>
<li>可变参数可以和普通类型的参数一起放在形参列表，单必须保证<strong>可变参数在最后</strong></li>
<li>一个新参列表只能出现一个可变参数</li>
</ul>
</li>
<li><p>案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VarParameterExercise</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        HspMethod hm = <span class="keyword">new</span> HspMethod();</span><br><span class="line">        System.out.println(hm.showScore(<span class="string">&quot;milan&quot;</span> , <span class="number">90.1</span>, <span class="number">80.0</span> ));</span><br><span class="line">        System.out.println(hm.showScore(<span class="string">&quot;terry&quot;</span> , <span class="number">90.1</span>, <span class="number">80.0</span>,<span class="number">10</span>,<span class="number">30.5</span>,<span class="number">70</span> ));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HspMethod</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    有三个方法，分别实现返回姓名和两门课成绩(总分)，</span></span><br><span class="line"><span class="comment">    返回姓名和三门课成绩(总分)，返回姓名和五门课成绩（总分）。</span></span><br><span class="line"><span class="comment">    封装成一个可变参数的方法</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//分析 1. 方法名 showScore 2. 形参(String ,double... ) 3. 返回 String</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showScore</span><span class="params">(String name ,<span class="keyword">double</span>... scores )</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> totalScore = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; scores.length; i++) &#123;</span><br><span class="line">            totalScore += scores[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> name + <span class="string">&quot; 有 &quot;</span> +scores.length + <span class="string">&quot;门课的成绩总分为=&quot;</span> + totalScore;</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="7-7-作用域"><a href="#7-7-作用域" class="headerlink" title="7.7 作用域"></a>7.7 作用域</h2><ul>
<li><p>基本作用</p>
<ul>
<li><p>全局变量：也就是属性（成员变量），作用域在整个类体中</p>
</li>
<li><p>局部变量：一般指在成员方法中定义的变量</p>
</li>
<li><p>全局变量可以不赋值直接使用，因为有默认值。局部变量必须先赋值再使用，因为没有默认值。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>注意事项</p>
<ol>
<li><p>属性和局部变量可以重名，访问时遵循就近原则。</p>
</li>
<li><p>在同一个作用域中，比如在同一个成员方法中, 两个局部变量，不能重名。</p>
</li>
<li><p>属性生命周期较长，伴随着对象的创建而创建，伴随着对象的销毁而销毁。局部变量,生命周期较短，伴随着它的代码块的执行而创建，伴随着代码块的结束而销毁。即在一次方法调用过程中。</p>
</li>
<li><p>作用域范围不同：全局变量/属性可以被本类使用，或其他类使用(通过对象调用)。局部变量只能在本类中对应的方法中使用</p>
</li>
<li><p>修饰符不同：全局变量/属性可以加修饰符局部变量不可以加修饰符</p>
</li>
</ol>
</li>
</ul>
<h2 id="7-8-构造方法"><a href="#7-8-构造方法" class="headerlink" title="7.8 构造方法"></a>7.8 构造方法</h2><h3 id="7-8-1-基本介绍"><a href="#7-8-1-基本介绍" class="headerlink" title="7.8.1 基本介绍"></a>7.8.1 基本介绍</h3><ul>
<li>构造方法又叫构造器(constructor)，是类的一种特殊的方法，它的主要作用是<font color="red">完成对新对象的初始化</font>（调用时对象已经创建）。</li>
</ul>
<h3 id="7-8-2-注意事项"><a href="#7-8-2-注意事项" class="headerlink" title="7.8.2 注意事项"></a>7.8.2 注意事项</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>构造器名与类名相同</li>
<li>构造器没有返回值，也不能加void</li>
<li>一个类中可以定义多个构造器，即构造器重载</li>
<li>构造器是完成对对象的初始化，并不是创建对象</li>
<li>在new创建对象时，系统自动调用该类的构造方法。</li>
<li>如果程序员没有定义构造器，系统会自动生成一个默认无参的构造器（<strong>默认构造器</strong>），如Dog(){}，使用<strong>javap指令反编译</strong>看看。javap dog.class</li>
<li>**一旦定义了自己的构造器，默认的构造器就被覆盖了，就不能再使用默认的无参构造器，除非显示的定义一下，即Dog(){}**（重要！）</li>
</ol>
</div>



<ul>
<li><p>案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	String name;</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//构造器</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		age = <span class="number">18</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String pName, <span class="keyword">int</span> pAge)</span> </span>&#123;</span><br><span class="line">		name = pName;</span><br><span class="line">		age = pAge;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="7-9-对象创建的流程分析（重要！）"><a href="#7-9-对象创建的流程分析（重要！）" class="headerlink" title="7.9 对象创建的流程分析（重要！）"></a>7.9 对象创建的流程分析（重要！）</h2><ul>
<li><p>案例</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230919151736302.png" alt="image-20230919151736302"></p>
</li>
<li><p>流程</p>
<ol>
<li>先加载Person类信息到方法区</li>
<li>在堆中开辟空间，进行默认初始化</li>
<li>然后运行构造方法，给属性赋值（基本数据类型保存在堆中，引用类型保存在常量词）</li>
</ol>
</li>
</ul>
<h2 id="7-10-this关键字"><a href="#7-10-this关键字" class="headerlink" title="7.10 this关键字"></a>7.10 this关键字</h2><ul>
<li><p>java虚拟机会给每个对象分配一个this，表示当前对象的引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	String name;</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//问题：构造器中的name和age是局部变量</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		name = Name;</span><br><span class="line">		age = Age;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//解决：用this关键字指明当前对象的属性</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String Name, <span class="keyword">int</span> Age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = Name;</span><br><span class="line">		<span class="keyword">this</span>.age = Age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-10-1-内存示意图"><a href="#7-10-1-内存示意图" class="headerlink" title="7.10.1 内存示意图"></a>7.10.1 内存示意图</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230920092051740.png" alt="image-20230920092051740"></p>
</li>
</ul>
<ul>
<li>使用**this.hashcode()**可以输出对象的唯一标识</li>
</ul>
<h3 id="7-10-2-this注意事项"><a href="#7-10-2-this注意事项" class="headerlink" title="7.10.2 this注意事项"></a>7.10.2 this注意事项</h3><ol>
<li>this 关键字可以用来<strong>访问本类的属性、方法、构造器</strong></li>
<li> this 用于<strong>区分当前类的属性和局部变量</strong></li>
<li><strong>访问成员方法</strong>的语法：this.方法名(参数列表);</li>
<li><strong>访问构造器语法</strong>：<font color="red">this(参数列表);</font> <font color="red">注意只能在构造器中使用(即只能在构造器中访问另外一个构造器, 必须放在第一条语句)</font></li>
<li>this <strong>不能在类定义的外部使用</strong>，只能在类定义的方法中使用。</li>
</ol>
<h1 id="第八章-面向对象编程（中级）"><a href="#第八章-面向对象编程（中级）" class="headerlink" title="第八章 面向对象编程（中级）"></a>第八章 面向对象编程（中级）</h1><h2 id="8-1-开发工具IDEA"><a href="#8-1-开发工具IDEA" class="headerlink" title="8.1 开发工具IDEA"></a>8.1 开发工具IDEA</h2><h3 id="8-1-1-目录结构"><a href="#8-1-1-目录结构" class="headerlink" title="8.1.1 目录结构"></a>8.1.1 目录结构</h3><ul>
<li>src：存放java源码文件</li>
<li>out：存放编译后的class文件</li>
</ul>
<h3 id="8-1-2-常用快捷键（重要！）"><a href="#8-1-2-常用快捷键（重要！）" class="headerlink" title="8.1.2 常用快捷键（重要！）"></a>8.1.2 常用快捷键（重要！）</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li> 删除当前行, 默认是 ctrl + Y 自己配置 <strong>ctrl + d</strong></li>
<li> 复制当前行, 自己配置 <strong>ctrl + alt + 向下光标</strong></li>
<li> 补全代码 <strong><font color="red">alt + /</font></strong></li>
<li> 添加注释和取消注释 <strong>ctrl + /</strong> </li>
<li> 导入该行需要的类 先配置 auto import , 然后使用 <strong><font color="red">alt+enter</font></strong> 即可</li>
<li> 快速格式化代码 <strong>ctrl + alt + L</strong></li>
<li> 快速运行程序，默认是shift + F10，自己定义<font color="red"> <strong>alt + R</strong></font></li>
<li> 生成构造器等 <strong>alt + insert</strong> [提高开发效率]</li>
<li> 查看一个类的层级关系<font color="red"> <strong>ctrl + H</strong></font> [学习继承后，非常有用]</li>
<li> 将光标放在一个方法上，输入 <strong><font color="red">ctrl + B</font></strong> , 可以定位到方法 [学继承后，非常有用]</li>
<li> 自动的分配变量名 , 通过在后面<font color="red"><strong>加.var</strong></font> [老师最喜欢的]</li>
<li> 另起一行编写代码，**<font color="red">shift + enter</font>**</li>
<li> 将当前行代码向上/下移动，<strong>ctrl + shift + ↑ / ↓</strong></li>
</ol>
</div>



<h3 id="8-1-3-自定义模板（提高开发速度）"><a href="#8-1-3-自定义模板（提高开发速度）" class="headerlink" title="8.1.3 自定义模板（提高开发速度）"></a>8.1.3 自定义模板（提高开发速度）</h3><ul>
<li>设置：file -&gt; settings -&gt; editor-&gt; Live templates -&gt;</li>
<li>如fori , sout等，多用多查孰能生巧</li>
</ul>
<h2 id="8-2-包"><a href="#8-2-包" class="headerlink" title="8.2 包"></a>8.2 包</h2><h3 id="8-4-1-作用"><a href="#8-4-1-作用" class="headerlink" title="8.4.1 作用"></a>8.4.1 作用</h3><ul>
<li>区分相同名字的类</li>
<li>当类很多时，便于管理类</li>
<li>控制访问范围</li>
</ul>
<h3 id="8-4-2-基本语法"><a href="#8-4-2-基本语法" class="headerlink" title="8.4.2 基本语法"></a>8.4.2 基本语法</h3><ul>
<li><p>package com.durango.xxx</p>
</li>
<li><p>package + 包名</p>
</li>
</ul>
<h3 id="8-4-3-包的本质"><a href="#8-4-3-包的本质" class="headerlink" title="8.4.3 包的本质"></a>8.4.3 包的本质</h3><p>​    包的本质实际上就是创建<strong>不同的文件夹/目录</strong>来保存类文件</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230922101528833.png" alt="image-20230922101528833"></p>
<h3 id="8-4-4-包的命名"><a href="#8-4-4-包的命名" class="headerlink" title="8.4.4 包的命名"></a>8.4.4 包的命名</h3><ul>
<li>命名规则<ul>
<li>只能包含数字、字母、下划线、小圆点</li>
<li>不能用数字开头 ，如demo.12a</li>
<li>不能是关键字或保留字，如demo.class.exec</li>
</ul>
</li>
<li> 命名规范</li>
<li>一般是 <strong>小写字母+小圆点</strong></li>
<li>包名一般是 <font color="red"><strong>com.公司名.项目名.业务模块名</strong></font></li>
<li>如，com.sina.crm.user    com.sina.crm.order    com.sina.vrm.utils</li>
</ul>
<h3 id="8-4-5-常用的包"><a href="#8-4-5-常用的包" class="headerlink" title="8.4.5 常用的包"></a>8.4.5 常用的包</h3><ol>
<li>java.lang.* ：lang 包是<strong>基本包，默认引入</strong>，不需要再引入. </li>
<li>java.util.* ：util 包，系统提供的工具包, 工具类，使用 Scanner</li>
<li> java.net.* ：网络包，网络开发</li>
<li> java.awt.* ：是做 java 界面的开发，GUI</li>
</ol>
<h3 id="8-4-6-包的导入"><a href="#8-4-6-包的导入" class="headerlink" title="8.4.6 包的导入"></a>8.4.6 包的导入</h3><ul>
<li><p>两种方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;	<span class="comment">//推荐，用到哪个导入哪个</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*</span><br></pre></td></tr></table></figure></li>
<li><p>使用系统提供Arrays完成数组排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Import01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用系统提供 Arrays 完成 数组排序</span></span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;-<span class="number">1</span>, <span class="number">20</span>, <span class="number">2</span>, <span class="number">13</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//输出排序结果</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length ; i++) &#123;</span><br><span class="line">        System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-4-9-注意事项"><a href="#8-4-9-注意事项" class="headerlink" title="8.4.9 注意事项"></a>8.4.9 注意事项</h3><ul>
<li><p>package的作用是声明当前类所在的包，需要放在类的<strong>最上面</strong>，一个类中最多只有一句package</p>
</li>
<li><p>import指令位置放在package的下面，在类定义前面,可以有多句且没有顺序要求</p>
</li>
</ul>
<h2 id="8-5-访问修饰符-Modifier"><a href="#8-5-访问修饰符-Modifier" class="headerlink" title="8.5 访问修饰符 Modifier"></a>8.5 访问修饰符 Modifier</h2><h3 id="8-5-1-基本介绍（必背）"><a href="#8-5-1-基本介绍（必背）" class="headerlink" title="8.5.1 基本介绍（必背）"></a>8.5.1 基本介绍（必背）</h3><ol>
<li><p>公开级别:用 public 修饰,对外公开</p>
</li>
<li><p>受保护级别:用 protected 修饰，对子类和同一个包中的类公开</p>
</li>
<li><p>默认级别:没有修饰符号,向同一个包的类公开. </p>
</li>
<li><p>私有级别:用 private 修饰,只有类本身可以访问,不对外公开.</p>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center">访问级别</th>
<th align="center">访问修饰符</th>
<th align="center">同类</th>
<th align="center">同包</th>
<th align="center">子类</th>
<th align="center">不同包</th>
</tr>
</thead>
<tbody><tr>
<td align="center">公开</td>
<td align="center">public</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
</tr>
<tr>
<td align="center">受保护</td>
<td align="center">protected</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">×</td>
</tr>
<tr>
<td align="center">默认</td>
<td align="center">无修饰符</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr>
<td align="center">私有</td>
<td align="center">private</td>
<td align="center">√</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>访问权限</th>
<th>可见性</th>
<th>访问性</th>
</tr>
</thead>
<tbody><tr>
<td>public</td>
<td>所有类、接口、方法、变量都可见</td>
<td>所有类、接口、方法、变量都可访问</td>
</tr>
<tr>
<td>protected</td>
<td>当前包中的所有类、接口、方法、变量都可见，其他包中的子类也可见</td>
<td><strong>当前包</strong>中的所有类、接口、方法、变量都可访问，<strong>其他包中的子类</strong>也可访问</td>
</tr>
<tr>
<td>default</td>
<td>当前包中的所有类、接口、方法、变量都可见</td>
<td><strong>当前包</strong>中的所有类、接口、方法、变量都可访问</td>
</tr>
<tr>
<td>private</td>
<td>当前类中的所有方法和变量都可见</td>
<td><strong>当前类</strong>中的所有方法和变量都可访问</td>
</tr>
</tbody></table>
<h3 id="8-5-2-注意事项"><a href="#8-5-2-注意事项" class="headerlink" title="8.5.2 注意事项"></a>8.5.2 注意事项</h3><ul>
<li>修饰符可以用来修饰类中的<strong>属性、成员方法以及类</strong></li>
<li><strong><font color="red">只有默认的和public才能修饰类</font></strong>!,并且遵循上述访问权限的特点。</li>
</ul>
<h2 id="8-6-封装-Encapsulation"><a href="#8-6-封装-Encapsulation" class="headerlink" title="8.6 封装 Encapsulation"></a>8.6 封装 Encapsulation</h2><h3 id="8-6-1-封装介绍"><a href="#8-6-1-封装介绍" class="headerlink" title="8.6.1 封装介绍"></a>8.6.1 封装介绍</h3><p>​    封装(<strong>encapsulation</strong>)就是把抽象出的数据[<font color="red">属性</font>]和对数据的操作[<font color="red">方法</font>]封装在一起，数据被保护在内部，程序的其它部分（比如不同类，不同包）<strong>只有通过被授权的操作[方法]，才能对数据进行操作</strong>。</p>
<h3 id="8-6-2-作用"><a href="#8-6-2-作用" class="headerlink" title="8.6.2 作用"></a>8.6.2 作用</h3><ul>
<li>隐藏实现细节</li>
<li>可以对数据进行验证，保证安全合理</li>
</ul>
<h3 id="8-6-3-封装实现步骤"><a href="#8-6-3-封装实现步骤" class="headerlink" title="8.6.3 封装实现步骤"></a>8.6.3 封装实现步骤</h3><ol>
<li><p>将属性进行私有化<strong>private</strong></p>
</li>
<li><p>提供一个公共的<strong>public</strong>  <strong>set方法</strong> ，用于对属性判断和赋值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setXxx</span><span class="params">(类型 参数名)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 加入数据验证的逻辑</span></span><br><span class="line">	属性 = 参数名;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>提供一个公共的<strong>public</strong>  <strong>get方法</strong> ，用于获取属性的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">puclic 类型 getXxx() &#123;</span><br><span class="line">	<span class="keyword">return</span> 属性;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="8-6-4-快速入门案例"><a href="#8-6-4-快速入门案例" class="headerlink" title="8.6.4 快速入门案例"></a>8.6.4 快速入门案例</h3><p>需求：新建一个Person类，不能随便查看人的年龄、工资等隐私，并对设置的年龄、姓名进行合理验证。年龄合理则设置，否则给默认值。年龄必须在1-120。name长度在2-6个字符之间</p>
<p><font color="red">alt + insert</font>：编写set和get方法的快捷键。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">        setName(name);</span><br><span class="line">        setAge(age);</span><br><span class="line">        setSalary(salary);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 手写get,set太慢。使用快捷键 alt + insert</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 增加对数据的校验</span></span><br><span class="line">        <span class="keyword">if</span> (name.length() &gt;= <span class="number">2</span> &amp;&amp; name.length() &lt;= <span class="number">6</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;输入的名字长度不对，必须为2-6个字符，已设置默认名字无名&quot;</span>);</span><br><span class="line">            <span class="keyword">this</span>.name = <span class="string">&quot;无名&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 增加数据的合理性判断</span></span><br><span class="line">        <span class="keyword">if</span> (age &gt;= <span class="number">1</span> &amp;&amp; age &lt;= <span class="number">120</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.age = age;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;输入年龄范围不对，必须为1-20，已设置默认年龄18&quot;</span>);</span><br><span class="line">            <span class="keyword">this</span>.age = <span class="number">18</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(<span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 可以增加对当前对象的权限判断</span></span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;信息为 name=&quot;</span> + <span class="keyword">this</span>.name + <span class="string">&quot; age=&quot;</span> + <span class="keyword">this</span>.age + <span class="string">&quot; salary=&quot;</span> + <span class="keyword">this</span>.salary);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="8-7-继承-Extends"><a href="#8-7-继承-Extends" class="headerlink" title="8.7 继承 Extends"></a>8.7 继承 Extends</h2><h3 id="8-7-1-继承介绍"><a href="#8-7-1-继承介绍" class="headerlink" title="8.7.1 继承介绍"></a>8.7.1 继承介绍</h3><ul>
<li><p>继承可以解决<strong>代码复用</strong>, 让我们的编程更加靠近人类思维.  当多个类存在相同的属性(变量)和方法时,可以从这些类中抽象出父类, 在父类中定义这些相同的属性和方法，所有的子类不需要重新定义这些属性和方法，只需要通过 extends 来声明继承父类即可。画出继承的示意图。</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230923164603231.png" alt="image-20230923164603231"></p>
</li>
</ul>
<ul>
<li><p>基本语法</p>
<p>class 子类 <font color="red"><strong>extends</strong> </font>父类 {    }</p>
<ul>
<li>子类会自动拥有父类定义的属性和方法</li>
<li>父类又叫<strong>超类、基类</strong>，子类又叫<strong>派生类</strong></li>
</ul>
</li>
<li><p>**<font color="red">ctrl + H</font>**：可以看到类的继承关系</p>
</li>
</ul>
<h3 id="8-7-2-继承细节"><a href="#8-7-2-继承细节" class="headerlink" title="8.7.2 继承细节"></a>8.7.2 继承细节</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>子类继承了所有的属性和方法，非私有的属性和方法可以在子类直接访问, 但是<strong>私有属性和方法不能在子类直接访问</strong>，<strong>要通过父类提供公共的方法去访问</strong></li>
</ol>
<ol start="2">
<li><p>子类必须<strong>调用父类的构造器</strong>， 完成父类的初始化</p>
</li>
<li><p>当创建子类对象时，不管使用子类的哪个构造器，<strong>默认情况下总会去调用父类的无参构造器</strong>，<strong>如果父类没有提供无参构造器（无参构造器被覆盖），则必须在子类的构造器中用 <font color="red">super </font>去指定使用父类的哪个构造器完成对父类的初始化工作</strong>，否则，编译不会通过(怎么理解。) [举例说明]。若父类提供了无参构造器，super写不写都行。</p>
</li>
<li><p>如果希望指定去调用父类的某个构造器，则显式的调用一下 : <strong>super(参数列表)</strong></p>
</li>
<li><p>super 在使用时，<strong>必须放在构造器<font color="red">第一行</font></strong>(super 只能在构造器中使用)</p>
</li>
<li><p><strong>super() 和 this()</strong> 都只能放在构造器<strong>第一行</strong>，因此这两个方法不能共存在一个构造器。<strong>如果写了this()，隐式的super()将不会被该构造器调用</strong>，<strong>而是会在this()中调用super()</strong></p>
</li>
<li><p>java 所有类都是 <strong>Object 类</strong>的子类, Object 是所有类的基类. <strong>ctrl + H</strong>可以看到类的继承关系</p>
</li>
<li><p>父类构造器的调用不限于直接父类！将一直往上追溯直到 Object 类(顶级父类)</p>
</li>
<li><p>子类最多只能继承一个父类(指直接继承)，即 java 中是<font color="red">单继承机制</font>。思考：如何让 A 类继承 B 类和 C 类？ 【A 继承 B， B 继承 C】</p>
</li>
<li><p>不能滥用继承，子类和父类之间必须满足 is-a 的逻辑关系</p>
</li>
</ol>
</div>



<h3 id="8-7-3-继承本质分析（重要！）"><a href="#8-7-3-继承本质分析（重要！）" class="headerlink" title="8.7.3 继承本质分析（重要！）"></a>8.7.3 继承本质分析（重要！）</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230924111103504.png" alt="image-20230924111103504"></p>
<ol>
<li>创建Son对象</li>
<li>在方法区中加载Son类及其父类信息</li>
<li>在堆中给GranPa开辟空间，并初始化其属性，引用数据类型时存放在方法区的常量池中</li>
<li>在堆中给Father开辟空间，并初始化其属性，基本数据类型直接存放在堆中</li>
<li>最后给Son开辟空间，并初始化其属性</li>
<li>这时请大家注意，要<strong>按照查找关系来返回信息</strong><ol>
<li>首先看子类是否有该属性，如果子类<strong>有这个属性，并且可以访问</strong>，则返回信息</li>
<li>如果子类没有这个属性，就看父类有没有这个属性(如果父类有该属性，并且可以访问，就返回信息..)</li>
<li>如果父类没有就按照2的规则，继续找上级父类，直到 Object… </li>
</ol>
</li>
</ol>
<h3 id="8-7-4-本质分析案例"><a href="#8-7-4-本质分析案例" class="headerlink" title="8.7.4 本质分析案例"></a>8.7.4 本质分析案例</h3><ul>
<li><p>Exercise01</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.extend;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendsExercise01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;a name&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">B</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">&quot;abc&quot;</span>);	<span class="comment">// 不会调用super()</span></span><br><span class="line">        System.out.println(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">B</span><span class="params">(String name)</span> </span>&#123;	<span class="comment">//会调用super()</span></span><br><span class="line">        System.out.println(<span class="string">&quot;b name&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="comment">// a</span></span><br><span class="line"><span class="comment">// b name</span></span><br><span class="line"><span class="comment">// </span></span><br></pre></td></tr></table></figure></li>
<li><p>Exercise02</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.extend;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendsExercise02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        C2 c = <span class="keyword">new</span> C2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A2</span> </span>&#123;<span class="comment">//A2 类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是 A2 类&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B2</span> <span class="keyword">extends</span> <span class="title">A2</span> </span>&#123; <span class="comment">//B2 类,继承 A2 类 //main 方法中： C2 c =new C2(); 输出么内容? 3min</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">B2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是 B2 类的无参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">B2</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot;我是 B2 类的有参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C2</span> <span class="keyword">extends</span> <span class="title">B2</span> </span>&#123; <span class="comment">//C2 类，继承 B2 类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">C2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;我是 c 类的无参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">C2</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="string">&quot;hahah&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;我是 c 类的有参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 我是 A2 类</span></span><br><span class="line"><span class="comment">// hahah我是 B2 类的有参构造</span></span><br><span class="line"><span class="comment">// 我是 c 类的有参构造</span></span><br><span class="line"><span class="comment">// 我是 c 类的无参构造</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-8-super关键字"><a href="#8-8-super关键字" class="headerlink" title="8.8 super关键字"></a>8.8 super关键字</h2><h3 id="8-8-1-基本介绍"><a href="#8-8-1-基本介绍" class="headerlink" title="8.8.1 基本介绍"></a>8.8.1 基本介绍</h3><ul>
<li>super 代表父类的引用，用于<strong>访问父类的属性、方法、构造器</strong></li>
<li>不能访问父类私有的private属性、方法<ul>
<li>访问父类属性：super.属性名</li>
<li>访问父类方法：super.方法名(参数列表)</li>
<li>访问父类构造器：super(参数列表) <strong>只能放在构造器第一句，只能出现一句</strong></li>
<li>如果父类中属性设置为private，则不能通过super访问。可以在父类中设置公共的get方法，然后在子类中调用get方法获取父类私有属性。</li>
</ul>
</li>
</ul>
<h3 id="8-8-2-作用和细节"><a href="#8-8-2-作用和细节" class="headerlink" title="8.8.2 作用和细节"></a>8.8.2 作用和细节</h3><ul>
<li>调用父类的构造器的好处(<strong>分工明确, 父类属性由父类初始化，子类的属性由子类初始</strong>)</li>
<li>当子类中有和父类中的成员**(属性和方法)重名时**，为了访问父类的成员，必须通过super。如果没有重名，使用super、this、直接访问是一样的效果!</li>
<li><strong>super的访问不限于直接父类</strong>，如果爷爷类和本类中有同名的成员，也可以使用super去访问爷爷类的成员; 如果多个基类(上级类)中都有同名的成员，使用super访问遵循就近原则。A-&gt;B-&gt;C，当然也需要遵守访问权限的相关规则</li>
</ul>
<h3 id="8-8-3-super和this的比较"><a href="#8-8-3-super和this的比较" class="headerlink" title="8.8.3 super和this的比较"></a>8.8.3 super和this的比较</h3><table>
<thead>
<tr>
<th align="center">区别点</th>
<th align="center">this</th>
<th align="center">super</th>
</tr>
</thead>
<tbody><tr>
<td align="center">访问属性</td>
<td align="center">访问本类中的属性，如果本类中没有此属性，则从父类中继续查找</td>
<td align="center">从父类开始查找属性</td>
</tr>
<tr>
<td align="center">调用方法</td>
<td align="center">访问本类中的方法，如果本类中没有此方法，则从父类中继续查找</td>
<td align="center">从父类开始查找方法</td>
</tr>
<tr>
<td align="center">调用构造器</td>
<td align="center">调用本类构造器，必须放在构造器的首行</td>
<td align="center">调用父类的构造器，必须放在子类构造器的首行</td>
</tr>
<tr>
<td align="center">特殊</td>
<td align="center">对当前对象的引用</td>
<td align="center">对父类对象的引用</td>
</tr>
</tbody></table>
<h2 id="8-9-方法重写-重构-覆盖-Override"><a href="#8-9-方法重写-重构-覆盖-Override" class="headerlink" title="8.9 方法重写/重构/覆盖 Override"></a>8.9 方法重写/重构/覆盖 Override</h2><h3 id="8-9-1-基本介绍"><a href="#8-9-1-基本介绍" class="headerlink" title="8.9.1 基本介绍"></a>8.9.1 基本介绍</h3><p>​    方法覆盖(重写)就是<strong>子类有一个方法和父类的某个方法的名称、返回类型、参数一样</strong>，那么我们就说子类的这个方法覆盖了父类的方法</p>
<h3 id="8-9-2-注意事项"><a href="#8-9-2-注意事项" class="headerlink" title="8.9.2 注意事项"></a>8.9.2 注意事项</h3><ul>
<li>子类的方法的<font color="red">方法名称，形参列表</font>要和父类方法的<strong>形参列表，方法名称</strong>完全一样。</li>
<li>子类方法的返回类型和父类方法<strong>返回类型一样</strong>，<font color="red">或者是父类返回类型的子类</font>。比如父类返回类型是Object,子类方法返回类型是String</li>
<li><font color="red">子类方法不能缩小父类方法的访问权限</font>。public &gt; protected &gt; 默认 &gt; privat</li>
</ul>
<h3 id="8-9-3-重写与重载的比较"><a href="#8-9-3-重写与重载的比较" class="headerlink" title="8.9.3 重写与重载的比较"></a>8.9.3 重写与重载的比较</h3><table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">发生范围</th>
<th>方法名</th>
<th align="center">形参列表</th>
<th align="center">返回类型</th>
<th align="center">修饰符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">重载overload</td>
<td align="center">本类</td>
<td>必须一样</td>
<td align="center">类型、个数、顺序至少一个不同</td>
<td align="center">无要求</td>
<td align="center">无要求</td>
</tr>
<tr>
<td align="center">重写override</td>
<td align="center">父子类</td>
<td>必须一样</td>
<td align="center">必须一样</td>
<td align="center">子类重写的方法的返回类型和父类放回类型一致，或者是其子类</td>
<td align="center">子类方法不能缩小父类方法的访问权限</td>
</tr>
</tbody></table>
<h3 id="8-9-4-案例"><a href="#8-9-4-案例" class="headerlink" title="8.9.4 案例"></a>8.9.4 案例</h3><ol>
<li><p>编写一个 Person 类，包括属性/private（name、age），构造器、方法 say(返回自我介绍的字符串）。</p>
</li>
<li><p>编写一个 Student 类，继承 Person 类，增加 id属性/private，、score 属性/private，以及构造器，定义 say 方法(返回自我介绍的信息)。</p>
</li>
<li><p>在 main 中,分别创建 Person 和 </p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.override_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我叫&quot;</span> + name + <span class="string">&quot;，今年&quot;</span> + age + <span class="string">&quot;岁。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.override_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age, String id, <span class="keyword">double</span> score)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, age);</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.say(); <span class="comment">// 父类的name和age是私有属性，不能直接访问</span></span><br><span class="line">        System.out.println(<span class="string">&quot;我的id是&quot;</span> + id + <span class="string">&quot;,考了&quot;</span> + score + <span class="string">&quot;分。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="8-10-多态-Polymorphic"><a href="#8-10-多态-Polymorphic" class="headerlink" title="8.10 多态 Polymorphic"></a>8.10 多态 Polymorphic</h2><h3 id="8-10-1-一个场景"><a href="#8-10-1-一个场景" class="headerlink" title="8.10.1 一个场景"></a>8.10.1 一个场景</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230925164315604.png" alt="image-20230925164315604"></p>
<p>需要在Master类中重载3*3=9个feed方法，才能完成“主人给什么动物喂什么食物”的信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完成主人给小狗 喂 骨头</span></span><br><span class="line"><span class="comment">//    public void feed(Dog dog, Bone bone) &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;主人&quot; + name + &quot;给&quot; + dog.getName() + &quot;吃&quot; + bone.getName());</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 完成主人给小猫 喂 鱼</span></span><br><span class="line"><span class="comment">//    public void feed(Cat cat, Fish fish) &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;主人&quot; + name + &quot;给&quot; + cat.getName() + &quot;吃&quot; + fish.getName());</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果动物很多，食物很多，需要写很多重载的feed，不利于维护和管理</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">feed</span><span class="params">(Animal animal, Food food)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;主人&quot;</span> + name + <span class="string">&quot;给&quot;</span> + animal.getName() + <span class="string">&quot;吃&quot;</span> + food.getName());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-10-2-基本介绍"><a href="#8-10-2-基本介绍" class="headerlink" title="8.10.2 基本介绍"></a>8.10.2 基本介绍</h3><p>多态：<font color="red">方法</font>或<font color="red">对象</font>具有多种形态，建立在封装和继承基础上。</p>
<p>（1）方法的多态：<strong>重写和重载</strong>就体现多态</p>
<p>（2）<strong>对象的多态</strong>（核心）</p>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>一个对象的编译类型和运行类型可以不一致</li>
<li>编译类型在定义对象时，就确定了，不能改变</li>
<li>运行类型是可以变化的.</li>
<li>编译类型看定义时=号的左边；运行类型看=号的右边</li>
</ol>
</div>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20230925165752251.png" alt="image-20230925165752251"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// animal 编译类型时Animal，运行类型是Dog</span><br><span class="line">Animal animal = new Dog(&quot;大黄&quot;);</span><br><span class="line">animal.cry();</span><br><span class="line"></span><br><span class="line">// 编译类型时Animal，运行类型是Cat</span><br><span class="line">animal = new Cat(&quot;小花&quot;);</span><br><span class="line">animal.cry();</span><br></pre></td></tr></table></figure>



<h3 id="8-10-3-注意事项"><a href="#8-10-3-注意事项" class="headerlink" title="8.10.3 注意事项"></a>8.10.3 注意事项</h3><ul>
<li><p>多态的前提：两个类存在继承关系</p>
</li>
<li><p><font color="red"><strong>多态的向上转型</strong></font></p>
<ul>
<li><p>本质：<strong>父类的引用指向了子类的对象</strong></p>
</li>
<li><p>语法：**<font color="red">父类类型 引用名 = new 子类类型( );</font>**</p>
</li>
<li><p>特点：</p>
<ul>
<li><p>编译类型看左边，运行类型看右边</p>
</li>
<li><p><font color="red">可以调用父类中的所有成员</font>（需要遵循访问权限）</p>
</li>
<li><p><font color="red">不能调用子类中的特有成员</font></p>
</li>
<li><p>方法的调用看运行类型，属性的调用看编译类型。</p>
</li>
<li><p>最终运行效果看子类的具体实现，即<strong>调用方法时，按照从子类开始查找方法，子类没有则查看父类。</strong></p>
</li>
</ul>
</li>
<li><p>Animal类有【public】cry,eat,run,sleep方法和【private】name属性，Cat类继承了Animal，重写了run方法，增加了一个catchMouse方法</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.poly_.detail;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolyDetail</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向上转型</span></span><br><span class="line">        Cat animal = <span class="keyword">new</span> Cat(<span class="string">&quot;小花&quot;</span>);</span><br><span class="line">        <span class="comment">// Object obj = new Cat(&quot;小花&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以调用父类中所有成员（遵守访问权限）</span></span><br><span class="line">        animal.cry();</span><br><span class="line">        <span class="comment">// animal.name 不能访问父类private的成员</span></span><br><span class="line">        <span class="comment">// annimal.catchMouse();  不能访问子类特有的方法</span></span><br><span class="line">        animal.eat();</span><br><span class="line">        animal.run();</span><br><span class="line">        animal.sleep();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 结果</span></span><br><span class="line">        <span class="comment">// 小猫叫</span></span><br><span class="line">        <span class="comment">// 动物吃</span></span><br><span class="line">        <span class="comment">// 动物跑</span></span><br><span class="line">        <span class="comment">// 动物睡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><font color="red"><strong>多态的向下转型</strong></font></p>
<ul>
<li>本质：子类的引用指向父类的<strong>引用</strong></li>
<li>语法：**<font color="red">子类类型 引用名 = （子类类型）父类引用</font>；**</li>
<li>特点：<ul>
<li>要求<strong>父类的引用必须指向的是当前目标类型的对象</strong>；</li>
<li>当向下转型后，<strong>可以调用子类类型中的所有成员</strong>（包括特有的）</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.poly_.detail;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolyDetail</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向上转型</span></span><br><span class="line">        Cat animal = <span class="keyword">new</span> Cat(<span class="string">&quot;小花&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// annimal.catchMouse();  不能访问子类特有的方法</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向下转型</span></span><br><span class="line">        <span class="comment">// 需要animal原本就指向Cat对象</span></span><br><span class="line">        <span class="comment">// 向下转型后可以访问子类特有对象</span></span><br><span class="line">        Cat cat = (Cat)animal;</span><br><span class="line">        cat.catchMouse();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>属性没有重写之说！属性的值看编译类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolyDetail02</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//属性没有重写之说！属性的值看编译类型</span></span><br><span class="line">    Base base = <span class="keyword">new</span> Sub();<span class="comment">//向上转型</span></span><br><span class="line">    System.out.println(base.count);<span class="comment">// ？ 看编译类型 10</span></span><br><span class="line">    Sub sub = <span class="keyword">new</span> Sub();</span><br><span class="line">    System.out.println(sub.count);<span class="comment">//? 20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123; <span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">10</span>;<span class="comment">//属性</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;<span class="comment">//子类</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">20</span>;<span class="comment">//属性</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><strong><font color="red">instanceOf</font></strong> 比较操作符，用于判断对象的**<font color="red">运行类型</font>**是否为 XX 类型或 XX 类型的子类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class PolyDetail03 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        BB bb = new BB();</span><br><span class="line">        System.out.println(bb instanceof BB);// true</span><br><span class="line">        System.out.println(bb instanceof AA);// true</span><br><span class="line">        </span><br><span class="line">        //aa 编译类型 AA, 运行类型是 BB</span><br><span class="line">        //BB 是 AA 子类</span><br><span class="line">        AA aa = new BB();</span><br><span class="line">        System.out.println(aa instanceof AA); // true</span><br><span class="line">        System.out.println(aa instanceof BB); // true, 判断的是aa的运行类型</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>一个题目</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">class Base &#123;</span><br><span class="line">	int count = 10;</span><br><span class="line">	public void display()&#123;</span><br><span class="line">		System.out.println(this.count);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Sub extends Base &#123;</span><br><span class="line">	int count = 20;</span><br><span class="line">	public void display()&#123;</span><br><span class="line">		System.out.println(this.count);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class test &#123;</span><br><span class="line">	public static void main(String[] args)&#123;</span><br><span class="line">		Sub s = new Sub();</span><br><span class="line">		System.out.println(s.count);	// 20</span><br><span class="line">		s.display();	// 20</span><br><span class="line">		</span><br><span class="line">		Base b = s;	//向上转型</span><br><span class="line">		System.out.println(b == s);	//True，指向同一个对象</span><br><span class="line">		System.out.println(b.count);	//10 属性看编译类型</span><br><span class="line">		b.display();	// 20 方法看运行类型</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-10-4-java的动态绑定机制（非常重要！）"><a href="#8-10-4-java的动态绑定机制（非常重要！）" class="headerlink" title="8.10.4 java的动态绑定机制（非常重要！）"></a>8.10.4 java的动态绑定机制（非常重要！）</h3><ul>
<li><p><font color="red"><strong>当调用对象方法的时候，该方法会和对象的内存地址/运行类型绑定（动态绑定）</strong></font></p>
</li>
<li><p><strong><font color="red">当调用对象属性的时候，没有动态绑定机制，哪里声明，哪里使用</font></strong></p>
</li>
<li><p>第一个案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicBanding</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A a = <span class="keyword">new</span> B();  <span class="comment">// 向上转型</span></span><br><span class="line">        <span class="comment">// 分析</span></span><br><span class="line">        <span class="comment">/* 调用方法时看运行类型</span></span><br><span class="line"><span class="comment">        	a.sum()调用的是B类中的sum()，返回getI+i=20+20</span></span><br><span class="line"><span class="comment">        	a.sum1()同理 i+20=20+20=40</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        System.out.println(a.sum()); <span class="comment">// 40</span></span><br><span class="line">        System.out.println(a.sum1()); <span class="comment">// 40</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;   <span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getI() + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;   <span class="comment">//子类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getI() + <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>第二个案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicBanding</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A a = <span class="keyword">new</span> B();  <span class="comment">// 向上转型</span></span><br><span class="line">        <span class="comment">// 分析</span></span><br><span class="line">        <span class="comment">/* 调用方法时看运行类型（动态绑定），子类中没有该方法则向上找父类</span></span><br><span class="line"><span class="comment">        a的运行类型是B，B中没有sum()方法，则调用父类A中的sum()方法。在A中的sum()方法中会调用</span></span><br><span class="line"><span class="comment">        getI()，这个getI()也会动态绑定运行类型，即调用B中的getI()。</span></span><br><span class="line"><span class="comment">        最终返回(B)getI+10=20+10=30</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        a的运行类型是B，B中没有sum1()方法，则调用父类A中的sum1()方法。属性i不会动态绑定</span></span><br><span class="line"><span class="comment">        返回(A)i+10=20</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        System.out.println(a.sum()); <span class="comment">// 30</span></span><br><span class="line">        System.out.println(a.sum1()); <span class="comment">// 20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;   <span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getI() + <span class="number">10</span>;	<span class="comment">//运行类型是B时，会调用B类的getI()</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;   <span class="comment">//子类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>第三个案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicBanding</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A a = <span class="keyword">new</span> B();  <span class="comment">// 向上转型</span></span><br><span class="line">        <span class="comment">// 分析</span></span><br><span class="line">        <span class="comment">/* 调用方法时看运行类型</span></span><br><span class="line"><span class="comment">        	a.sum()调用的是B类中的sum()，sum()会调用getI(),此时B类中没有getI()，</span></span><br><span class="line"><span class="comment">        	会向上查找调用父类A的getI()。属性没有动态绑定机制，A的getI()中返回的是A的i</span></span><br><span class="line"><span class="comment">        	最终结果 (A)getI+20 = (A)i+20 = 10+20 = 30</span></span><br><span class="line"><span class="comment">        	</span></span><br><span class="line"><span class="comment">        	a.sum1()返回(B)i+20 = 40</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        System.out.println(a.sum()); <span class="comment">// 30</span></span><br><span class="line">        System.out.println(a.sum1()); <span class="comment">// 40</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;   <span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getI() + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;   <span class="comment">//子类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getI() + <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-11-多态的应用"><a href="#8-11-多态的应用" class="headerlink" title="8.11 多态的应用"></a>8.11 多态的应用</h2><h3 id="8-11-1-多态数组"><a href="#8-11-1-多态数组" class="headerlink" title="8.11.1 多态数组"></a>8.11.1 多态数组</h3><ul>
<li><p>数组的定义类型为父类类型，里面保存的实际元素类型为子类类型</p>
</li>
<li><p>案例：</p>
<ul>
<li>Person类：name, age, say()；</li>
<li>Student类：继承Person：score, 重写say()，特有study()；</li>
<li>Teacher类：继承Person，salary，重写say()，特有teach()</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.poly_.polyarr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolyArr</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 多态数组</span></span><br><span class="line">        Person[] persons = <span class="keyword">new</span> Person[<span class="number">5</span>];</span><br><span class="line">        persons[<span class="number">0</span>] = <span class="keyword">new</span> Person(<span class="string">&quot;Jack&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        persons[<span class="number">1</span>] = <span class="keyword">new</span> Student(<span class="string">&quot;Mary&quot;</span>, <span class="number">18</span>, <span class="number">100</span>);</span><br><span class="line">        persons[<span class="number">2</span>] = <span class="keyword">new</span> Student(<span class="string">&quot;Smith&quot;</span>, <span class="number">19</span>, <span class="number">98</span>);</span><br><span class="line">        persons[<span class="number">3</span>] = <span class="keyword">new</span> Teacher(<span class="string">&quot;Scott&quot;</span>, <span class="number">30</span>, <span class="number">2000.0</span>);</span><br><span class="line">        persons[<span class="number">4</span>] = <span class="keyword">new</span> Teacher(<span class="string">&quot;King&quot;</span>, <span class="number">50</span>, <span class="number">40000.0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; persons.length; i++) &#123;</span><br><span class="line">            <span class="comment">//persons[i]的编译类型时Person，运行类型根据实际情况由jvm判断</span></span><br><span class="line">            System.out.println(persons[i].say());   <span class="comment">//动态绑定机制</span></span><br><span class="line"><span class="comment">//            persons[i].teach();</span></span><br><span class="line"><span class="comment">//            persons[i].study()    //向上转型无法调用子类特有方法</span></span><br><span class="line">            <span class="keyword">if</span>(persons[i] <span class="keyword">instanceof</span> Student)&#123;  <span class="comment">// 判断persons[i]的运行类型是不是Student</span></span><br><span class="line">                ((Student)persons[i]).study();  <span class="comment">// 向下转型才能调用子类特有的方法</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(persons[i] <span class="keyword">instanceof</span> Teacher)&#123;  <span class="comment">// 判断persons[i]的运行类型是不是Teacher</span></span><br><span class="line">                ((Teacher)persons[i]).teach();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="8-11-2-多态参数"><a href="#8-11-2-多态参数" class="headerlink" title="8.11.2 多态参数"></a>8.11.2 多态参数</h3><ul>
<li>方法定义的形参类型为父类类型，实参类型为子类类型。</li>
<li>案例<ul>
<li>Employee类：name, salary, getAnnual( )</li>
<li>Worker类：特有work()</li>
<li>Manager类：bonus, 重写getAnnual( ), 特有manage( )</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.poly_.polyparameter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolyParameter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Worker tom = <span class="keyword">new</span> Worker(<span class="string">&quot;tom&quot;</span>, <span class="number">2500</span>);</span><br><span class="line">        Manager willian = <span class="keyword">new</span> Manager(<span class="string">&quot;willian&quot;</span>, <span class="number">5000</span>, <span class="number">20000</span>);</span><br><span class="line"></span><br><span class="line">        PolyParameter polyParameter = <span class="keyword">new</span> PolyParameter();</span><br><span class="line">        polyParameter.showEmpAnnual(tom);   <span class="comment">//多态参数</span></span><br><span class="line">        polyParameter.showEmpAnnual(willian);</span><br><span class="line">        polyParameter.testWork(tom);   <span class="comment">//多态参数</span></span><br><span class="line">        polyParameter.testWork(willian);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showEmpAnnual</span><span class="params">(Employee e)</span> </span>&#123;</span><br><span class="line">        System.out.println(e.getAnnual());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWork</span><span class="params">(Employee e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e <span class="keyword">instanceof</span> Worker) &#123;</span><br><span class="line">            ((Worker) e).work();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> Manager) &#123;</span><br><span class="line">            ((Manager) e).manage();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;不做处理&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="8-12-Object类详解"><a href="#8-12-Object类详解" class="headerlink" title="8.12 Object类详解"></a>8.12 Object类详解</h2><h3 id="8-12-1-equals方法"><a href="#8-12-1-equals方法" class="headerlink" title="8.12.1 equals方法"></a>8.12.1 equals方法</h3><ul>
<li><font color="red"><strong>==</strong></font> 比较运算符<ul>
<li>如果判断基本数据类型，判断的是<strong>值</strong>是否相等</li>
<li>如果判断引用数据类型，判断的是<strong>地址</strong>是否相等</li>
</ul>
</li>
</ul>
<ul>
<li><p><font color="red"><strong>equals方法</strong></font></p>
<ul>
<li><p>equals: 是Object类中的方法，只能判断引用类型，<strong>默认判断的是地址是否相等</strong>，<strong>子类中往往重写该方法，用于判断内容(值)是否相等</strong>。比如Integer,String【看看String 和 Integer的equals 源代码】</p>
</li>
<li><p>Object类中的equals</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">this</span> == ojb); /默认比较两个引用地址是否相同（指向同一个对象）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>String中重写的equals</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object anObject)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == anObject) &#123;	<span class="comment">// 同一个对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (anObject <span class="keyword">instanceof</span> String) &#123;	<span class="comment">// 判断类型</span></span><br><span class="line">        String anotherString = (String)anObject;	<span class="comment">// 向下转型</span></span><br><span class="line">        <span class="keyword">int</span> n = value.length;</span><br><span class="line">        <span class="keyword">if</span> (n == anotherString.value.length) &#123;	<span class="comment">// 判断长度</span></span><br><span class="line">            <span class="keyword">char</span> v1[] = value;</span><br><span class="line">            <span class="keyword">char</span> v2[] = anotherString.value;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (n-- != <span class="number">0</span>) &#123;	<span class="comment">// 比较每一个字符</span></span><br><span class="line">                <span class="keyword">if</span> (v1[i] != v2[i])</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Integer中重写的equals</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">        <span class="keyword">return</span> value == ((Integer)obj).intValue();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong><font color="red">重写equals方法</font></strong></p>
<ul>
<li>重写Person类中的equals方法，当两个Person类的name, age, gender相同时，就返回true</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Equals02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person(<span class="string">&quot;jack&quot;</span>, <span class="number">10</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        Person person1 = <span class="keyword">new</span> Person(<span class="string">&quot;jack&quot;</span>, <span class="number">10</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        System.out.println(person.equals(person1));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">char</span> gender;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">char</span> gender)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写equals（参考String中的equals）</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == obj)&#123;   <span class="comment">//如果是同一个对象直接返回true</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Person) &#123;    <span class="comment">//判断(运行)类型，是Person类才（能）比较</span></span><br><span class="line">            <span class="comment">// 进行向下转型 (为什么？obj的运行类型虽然判断为Person类，但是</span></span><br><span class="line">            <span class="comment">// 编译类型是Object,不能访问子类Person中特有的属性方法，需要向下转型)</span></span><br><span class="line">            Person p = (Person)obj;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name.equals(p.name) &amp;&amp; <span class="keyword">this</span>.age == p.age &amp;&amp; <span class="keyword">this</span>.gender == p.gender;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-12-2-hashcode方法"><a href="#8-12-2-hashcode方法" class="headerlink" title="8.12.2 hashcode方法"></a>8.12.2 hashcode方法</h3><ul>
<li>6个结论<ul>
<li>提高具有哈希结构的容器的效率！如java.util.Hashtable中提供的哈希表</li>
<li>两个引用，如果指向的是同一个对象，则哈希值肯定是一样的！</li>
<li>两个引用，如果指向的是不同对象，则哈希值是不一样的</li>
<li> 哈希值一般是通过该对象的内部地址转换成一个整数来实现的，不能完全将哈希值等价于地址。</li>
</ul>
</li>
</ul>
<ul>
<li><p>案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashCode_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AA aa = <span class="keyword">new</span> AA();</span><br><span class="line">        AA aa1 = <span class="keyword">new</span> AA();</span><br><span class="line">        AA aa2 = aa;</span><br><span class="line"></span><br><span class="line">        System.out.println(aa.hashCode());</span><br><span class="line">        System.out.println(aa1.hashCode());</span><br><span class="line">        System.out.println(aa2.hashCode());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1163157884</span></span><br><span class="line"><span class="comment">// 1956725890</span></span><br><span class="line"><span class="comment">// 1163157884</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-12-2-toString方法"><a href="#8-12-2-toString方法" class="headerlink" title="8.12.2 toString方法"></a>8.12.2 toString方法</h3><ul>
<li><p>默认返回：**<font color="red">全类名+@+哈希值的十六进制</font>**，子类往往重写 toString 方法，用于返回对象的属性信息</p>
</li>
<li><p>查看 Object 的 toString 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (1)getClass().getName() 类的全类名(包名+类名 )</span></span><br><span class="line"><span class="comment">// (2)Integer.toHexString(hashCode()) 将对象的 hashCode 值转成 16 进制字符串</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> getClass().getName() + <span class="string">&quot;@&quot;</span> + Integer.toHexString(hashCode());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>重写toString方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> sal;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Monster</span><span class="params">(String name, String job, <span class="keyword">double</span> sal)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.job = job;</span><br><span class="line">        <span class="keyword">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写toString，快捷键alt+insert</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Monster&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, job=&#x27;&quot;</span> + job + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sal=&quot;</span> + sal +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>当直接输出一个对象时，toString 方法会被默认的调用, 比如 System.out.println(monster)； 就会默认调用</p>
<p>monster.toString()</p>
</li>
</ul>
<h3 id="8-12-3-finalize-方法"><a href="#8-12-3-finalize-方法" class="headerlink" title="8.12.3 finalize 方法"></a>8.12.3 finalize 方法</h3><ul>
<li>当对象被回收时，系统会自动调用该对象的finalize方法。子类可以重写该方法，做一些<strong>释放资源</strong>的操作。</li>
<li>什么时候回收：<strong>当某个对象没有任何引用时</strong>，则jvm就认为这个对象是一个垃圾对象，就会用垃圾回收机制来摧毁该对象，在摧毁该对象之前，会调用finalize方法。</li>
<li>垃圾回收机制的调用，是由系统来决定的（即有自己的GC算法），也可以通过<font color="red">System.gc()</font>主动触发垃圾回收机制。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Finalize_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Car bmw = <span class="keyword">new</span> Car(<span class="string">&quot;宝马&quot;</span>);</span><br><span class="line">        bmw = <span class="keyword">null</span>;</span><br><span class="line">        System.gc(); <span class="comment">// 主动调用垃圾回收器</span></span><br><span class="line">        <span class="comment">//这时候car对象没有任何引用，会被垃圾回收器回收（摧毁）</span></span><br><span class="line">        <span class="comment">//在销毁对象前，会调用该对象的 finalize 方法</span></span><br><span class="line">        <span class="comment">//程序员就可以在 finalize 中，写自己的业务逻辑代码(比如释放资源：数据库连接,或者打开文件..)</span></span><br><span class="line">        <span class="comment">//如果程序员不重写 finalize,那么就会调用 Object 类的 finalize, 即默认处理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Car</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写finalize</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我们销毁了&quot;</span> + name + <span class="string">&quot;汽车&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;释放了一些资源&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="8-13-断点调试-debug"><a href="#8-13-断点调试-debug" class="headerlink" title="8.13 断点调试 debug"></a>8.13 断点调试 debug</h2><h3 id="8-13-1-介绍"><a href="#8-13-1-介绍" class="headerlink" title="8.13.1 介绍"></a>8.13.1 介绍</h3><ul>
<li>—步一步的看源码执行的过程,从而发现错误所在。</li>
<li><strong><font color="red">重要提示:</font></strong> 在断点调试过程中，是运行状态，是以对象的运行类型来执行的</li>
<li>断点调试是指在程序的某一行设置一个断点，<strong>调试时，程序运行到这一行时就会停住，然后你可以一步一步往下调试，调试过程中可以看各个变量当前的值</strong>，出错的话，调试到出错的代码行即显示错误，停下。进行分析从而找到这个Bug</li>
<li>断点调试时程序员<strong>必须掌握的技能</strong></li>
<li>断点调试也能帮助我们查看java底层源代码的执行过程，提高程序员java水平</li>
</ul>
<h3 id="8-13-2-快捷键"><a href="#8-13-2-快捷键" class="headerlink" title="8.13.2  快捷键"></a>8.13.2  快捷键</h3><ul>
<li>F7跳入：跳入方法内</li>
<li>F8跳过：逐行执行代码</li>
<li>shift + F8：跳出方法</li>
<li>F9：resume执行到下一个断电</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231009104027696.png" alt="image-20231009104027696"></p>
<h3 id="8-13-3-案例"><a href="#8-13-3-案例" class="headerlink" title="8.13.3 案例"></a>8.13.3 案例</h3><ul>
<li>使用断点调试，追踪对象创建的过程</li>
<li>使用断点调试，查看动态绑定机制如何工作</li>
</ul>
<h2 id="8-14-案例：零钱通"><a href="#8-14-案例：零钱通" class="headerlink" title="8.14 案例：零钱通"></a>8.14 案例：零钱通</h2><p>使用 Java 开发 零钱通项目 , 可以完成收益入账，消费，查看明细，退出系统等功能.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1) 先完成显示菜单，并可以选择</span><br><span class="line">2) 完成零钱通明细.</span><br><span class="line">3) 完成收益入账</span><br><span class="line">4) 消费</span><br><span class="line">5) 退出</span><br></pre></td></tr></table></figure>





<h1 id="第九章-项目：房屋出租系统"><a href="#第九章-项目：房屋出租系统" class="headerlink" title="第九章 项目：房屋出租系统"></a>第九章 项目：房屋出租系统</h1><h2 id="9-1-项目需求"><a href="#9-1-项目需求" class="headerlink" title="9.1 项目需求"></a>9.1 项目需求</h2><ul>
<li>实现基于文本界面的《房屋出租软件》</li>
<li>能够实现对房屋信息的添加、修改和删除（用数组实现），并能够打印房屋明细表</li>
</ul>
<h2 id="9-2-界面设计"><a href="#9-2-界面设计" class="headerlink" title="9.2  界面设计"></a>9.2  界面设计</h2><ul>
<li><p>主菜单</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011095214080.png" alt="image-20231011095214080"></p>
</li>
<li><p>新增房屋</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011095238934.png" alt="image-20231011095238934"></p>
</li>
<li><p>查找房屋<img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011095306640.png" alt="image-20231011095306640"></p>
</li>
<li><p>删除房屋</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011095332012.png" alt="image-20231011095332012"></p>
</li>
<li><p>修改房屋</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011095347017.png" alt="image-20231011095347017"></p>
</li>
<li><p>房屋列表</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011095358271.png" alt="image-20231011095358271"></p>
</li>
<li><p>退出系统</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011095413116.png" alt="image-20231011095413116"></p>
</li>
</ul>
<h2 id="9-3-系统设计"><a href="#9-3-系统设计" class="headerlink" title="9.3 系统设计"></a>9.3 系统设计</h2><p>​    项目设计-程序框架图 (分层模式=&gt;当软件比较复杂，需要模式管理)</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231011100426182.png" alt="image-20231011100426182"></p>
<h2 id="9-4-系统实现"><a href="#9-4-系统实现" class="headerlink" title="9.4 系统实现"></a>9.4 系统实现</h2><h3 id="9-4-1-了解和使用工具库"><a href="#9-4-1-了解和使用工具库" class="headerlink" title="9.4.1 了解和使用工具库"></a>9.4.1 了解和使用工具库</h3><p>​    在实际开发中，公司都会提供相应的工具类和开发库，可以提高开发效率，程序员也需要能够看懂别人写的代码，并能够正确的调用。（造轮子的事情别人已经做好了）</p>
<ul>
<li><p>了解 Utility 类的使用</p>
</li>
<li><p> 测试 Utility 类</p>
</li>
<li><p>当作API使用，会用就行，有余力的可以读懂源码</p>
</li>
</ul>
<h3 id="9-4-2-完成House类"><a href="#9-4-2-完成House类" class="headerlink" title="9.4.2 完成House类"></a>9.4.2 完成House类</h3><p>编号 房主 电话 地址 月租 状态(未出租/已出租）</p>
<h3 id="9-4-3-显示主菜单和完成退出软件功能"><a href="#9-4-3-显示主菜单和完成退出软件功能" class="headerlink" title="9.4.3 显示主菜单和完成退出软件功能"></a>9.4.3 显示主菜单和完成退出软件功能</h3><p>实现功能的三部曲 [<strong>明确完成功能-&gt;思路分析-&gt;代码实现</strong>]</p>
<ul>
<li><p>功能说明: 用户打开软件，可以看到主菜单，可以退出软件. </p>
</li>
<li><p>思路分析: 在 HouseView.java 中，编写一个方法 mainMenu,显示菜单.</p>
</li>
</ul>
<h3 id="9-4-4-显示房屋列表的功能"><a href="#9-4-4-显示房屋列表的功能" class="headerlink" title="9.4.4 显示房屋列表的功能"></a>9.4.4 显示房屋列表的功能</h3><ul>
<li><p>功能说明: 用户输入对应的key，可以显示房屋信息列表</p>
</li>
<li><p>思路分析: </p>
<ul>
<li>在 HouseView.java 中，编写一个方法 <strong>listHouses</strong>显示房屋信息列表.</li>
<li>在HouseService.java中，编写一个方法<strong>list</strong>可以返回所有的房屋信息</li>
</ul>
</li>
</ul>
<h3 id="9-4-5-添加房屋信息的功能"><a href="#9-4-5-添加房屋信息的功能" class="headerlink" title="9.4.5 添加房屋信息的功能"></a>9.4.5 添加房屋信息的功能</h3><ul>
<li><p>功能说明：显示添加房屋信息的界面，用户输入相关信息，可以添加房屋信息到系统，新增的房屋id按照自增长来定</p>
</li>
<li><p>思路分析</p>
<ul>
<li>在 HouseView.java 中，编写一个方法 <strong>addHouse</strong>接收用户输入</li>
<li>在HouseService.java中，编写一个方法<strong>add</strong>可以添加新增的房屋信息到系统。<strong>需要判断数组容量是否满了</strong></li>
</ul>
</li>
</ul>
<h3 id="9-4-6-删除房屋信息的功能"><a href="#9-4-6-删除房屋信息的功能" class="headerlink" title="9.4.6 删除房屋信息的功能"></a>9.4.6 删除房屋信息的功能</h3><ul>
<li>功能说明：<ul>
<li>显示删除房屋信息的界面</li>
<li>用户输入房源编号（-1退出）</li>
<li>Y确认删除，N 取消</li>
</ul>
</li>
<li>思路分析<ul>
<li>在 HouseView.java 中，编写一个方法 <strong>delHouse</strong>接收用户输入id</li>
<li>在HouseService.java中，编写一个方法<strong>del</strong>可以根据房源id从系统中删除相关信息。<strong>需要判断该id是否存在</strong></li>
</ul>
</li>
</ul>
<h3 id="9-4-7-退出确认功能"><a href="#9-4-7-退出确认功能" class="headerlink" title="9.4.7 退出确认功能"></a>9.4.7 退出确认功能</h3><ul>
<li>功能说明：显示退出界面，根据用户输入确认是否退出</li>
</ul>
<h3 id="9-4-8-查找房屋信息功能"><a href="#9-4-8-查找房屋信息功能" class="headerlink" title="9.4.8 查找房屋信息功能"></a>9.4.8 查找房屋信息功能</h3><ul>
<li>功能说明：根据用户输入的id显示对应的房屋信息</li>
<li>思路分析：<ul>
<li>在 HouseView.java 中，编写一个方法 <strong>findHouse</strong>接收用户输入id，并显示房屋信息</li>
<li>在HouseService.java中，编写一个方法<strong>find</strong>可以根据房源id从系统中查找相关信息。</li>
</ul>
</li>
</ul>
<h3 id="9-4-9-修改房屋信息功能"><a href="#9-4-9-修改房屋信息功能" class="headerlink" title="9.4.9 修改房屋信息功能"></a>9.4.9 修改房屋信息功能</h3><ul>
<li>功能说明：根据用户输入的id显示原始房屋信息，并可以修改</li>
<li>思路分析：<ul>
<li>在 HouseView.java 中，编写一个方法 <strong>updateHouse</strong>接收用户输入id，并显示原始房屋信息。接收新的房屋信息。</li>
<li>在HouseService.java中，编写一个方法<strong>update</strong>可以根据用户输入的新信息进行更新</li>
</ul>
</li>
</ul>
<h1 id="—-第二阶段-—"><a href="#—-第二阶段-—" class="headerlink" title="— 第二阶段 —"></a>— 第二阶段 —</h1><h1 id="第十章-面向对象编程（高级）"><a href="#第十章-面向对象编程（高级）" class="headerlink" title="第十章 面向对象编程（高级）"></a>第十章 面向对象编程（高级）</h1><h2 id="10-1-类变量和类方法（static）"><a href="#10-1-类变量和类方法（static）" class="headerlink" title="10.1 类变量和类方法（static）"></a>10.1 类变量和类方法（static）</h2><h3 id="10-1-1-类变量快速入门"><a href="#10-1-1-类变量快速入门" class="headerlink" title="10.1.1 类变量快速入门"></a>10.1.1 类变量快速入门</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.static_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChildGame</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Child child1 = <span class="keyword">new</span> Child(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        child1.join();</span><br><span class="line">        child1.count++;</span><br><span class="line">        Child child2 = <span class="keyword">new</span> Child(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        child2.join();</span><br><span class="line">        child1.count++;</span><br><span class="line">        Child child3 = <span class="keyword">new</span> Child(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">        child3.join();</span><br><span class="line">        child1.count++;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 类变量可以通过类名访问</span></span><br><span class="line">        System.out.println(<span class="string">&quot;共有&quot;</span> + Child.count + <span class="string">&quot;个小孩加入了游戏&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;child1.count=&quot;</span> + child1.count); <span class="comment">//3</span></span><br><span class="line">        System.out.println(<span class="string">&quot;child2.count=&quot;</span> + child2.count); <span class="comment">//3</span></span><br><span class="line">        System.out.println(<span class="string">&quot;child3.count=&quot;</span> + child3.count); <span class="comment">//3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 类变量（静态变量），被所有实例所共享</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Child</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;有一个小孩加入&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="10-1-2-类变量内存布局"><a href="#10-1-2-类变量内存布局" class="headerlink" title="10.1.2 类变量内存布局"></a>10.1.2 类变量内存布局</h3><p>​    有不同说法：在堆中（jdk8以后）； 在方法区的静态域中。与jdk版本有关</p>
<ul>
<li>共识<ul>
<li><font color="red">static变量是同一个类的所有对象共享的</font></li>
<li><font color="red">static变量在类加载时就生成了</font></li>
</ul>
</li>
<li>参考文章<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/x_iya/article/details/81260154/">https://blog.csdn.net/x_iya/article/details/81260154/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/59174759/answer/163207831">https://www.zhihu.com/question/59174759/answer/163207831</a></li>
</ul>
</li>
</ul>
<h3 id="10-2-3-类变量基本介绍"><a href="#10-2-3-类变量基本介绍" class="headerlink" title="10.2.3 类变量基本介绍"></a>10.2.3 类变量基本介绍</h3><ol>
<li><p>概念</p>
<p>类变量也叫<strong>静态变量/静态属性</strong>，是<strong>该类的所有对象共享的</strong>变量,任何一个该类的对象去访问它时,取到的都是相同的值,同样任何一个该类的对象去修改它时,修改的也是同一个变量。</p>
</li>
<li><p>定义</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">访问修饰符 <span class="keyword">static</span> 数据类型 变量名; 【推荐】</span><br><span class="line"><span class="keyword">static</span> 访问修饰符 数据类型 变量名;</span><br></pre></td></tr></table></figure></li>
<li><p>访问</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">类名.变量名; 【推荐】</span><br><span class="line">对象名.变量名;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-2-4-类变量注意事项"><a href="#10-2-4-类变量注意事项" class="headerlink" title="10.2.4 类变量注意事项"></a>10.2.4 类变量注意事项</h3><p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li><p>什么时候需要用类变量</p>
<pre><code>当我们需要让某个类的**所有对象都共享一个变量时**，就可以考虑使用类变量(静态变量)，比如:定义学生类,统计所有学生共交多少钱。Student (name, static fee)
</code></pre>
</li>
<li><p>类变量与实例变量(普通属性)区别类变量是该类的所有对象共享的,而实例变量是每个对象独享的。类变量是该类的所有对象共享的，而实例变量是每个对象独享的.</p>
</li>
<li><p>加上static称为类变量或静态变量，否则称为实例变量/普通变量/非静态变量</p>
</li>
<li><p>类变量可以通过<strong>类名.变量名</strong>或者<strong>对象名.变量名</strong>来访问，但java设计者推荐类名.类变量名我们使用类名.类变量名方式访问。【前提是满足访问修饰符的访问权限和范围】</p>
</li>
<li><p>实例变量不能通过类名.类变量名方式访问。</p>
</li>
<li><p>类变量是<strong>在类加载时就初始化了</strong>，也就是说，即使你没有创建对象，只要类加载了,就可以使用类变量了。</p>
</li>
<li><p>类变量的生命周期是随类的加载开始,随着类消亡而销毁</p>
</li>
</ol>
<p>​    </p>
</div></p>
<h3 id="10-2-5-类方法基本介绍"><a href="#10-2-5-类方法基本介绍" class="headerlink" title="10.2.5 类方法基本介绍"></a>10.2.5 类方法基本介绍</h3><ol>
<li><p>概念</p>
<p>类方法也叫<strong>静态方法</strong>，是<strong>该类的所有对象共享的</strong>方法</p>
</li>
<li><p>定义</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">访问修饰符 <span class="keyword">static</span> 返回数据类型 方法名; 【推荐】</span><br><span class="line"><span class="keyword">static</span> 访问修饰符 返回数据类型 方法名;</span><br></pre></td></tr></table></figure></li>
<li><p>访问</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">类名.方法名; 【推荐】</span><br><span class="line">对象名.方法名;</span><br></pre></td></tr></table></figure></li>
<li><p>快速入门</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.static_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Stu t1 = <span class="keyword">new</span> Stu(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">        Stu t2 = <span class="keyword">new</span> Stu(<span class="string">&quot;tom1&quot;</span>);</span><br><span class="line">        Stu t3 = <span class="keyword">new</span> Stu(<span class="string">&quot;tom2&quot;</span>);</span><br><span class="line">        t1.payFee(<span class="number">100</span>);</span><br><span class="line">        t2.payFee(<span class="number">200</span>);</span><br><span class="line">        t3.payFee(<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">        Stu.showFee();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stu</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 静态变量累计学生交的学费</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> fee = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Stu</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">payFee</span><span class="params">(<span class="keyword">double</span> fee)</span> </span>&#123;</span><br><span class="line">        Stu.fee += fee; <span class="comment">//累计学费</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showFee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;总学费=&quot;</span> + Stu.fee);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-2-5-类方法使用场景"><a href="#10-2-5-类方法使用场景" class="headerlink" title="10.2.5 类方法使用场景"></a>10.2.5 类方法使用场景</h3><p>如果我们希望不创建实例，也可以调用某个方法时（当做工具来使用）</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231012103815736.png" alt="image-20231012103815736"></p>
<h3 id="10-2-5-类方法注意事项"><a href="#10-2-5-类方法注意事项" class="headerlink" title="10.2.5 类方法注意事项"></a>10.2.5 类方法注意事项</h3><p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>类方法和普通方法都是随着类的加载而加载，将结构信息存储在<strong>方法区</strong>。类方法中无this的参数，普通方法中隐含着this的参数</li>
<li>类方法可以通过类名调用，也可以通过对象名调用。</li>
<li>普通方法和对象有关，需要通过对象名调用，比如对象名.方法名(参数)，不能通过类名调用。</li>
<li>类方法中不允许使用和对象有关的关键字，比如<strong>this和super</strong>。普通方法(成员方法)可以。</li>
<li>**<font color="red">类方法(静态方法)中只能访问静态成员（变量和方法）</font>**。</li>
<li><strong>普通方法，既可以访问非静态成员,也可以访问静态成员</strong>。</li>
</ol>
<p>​    </p>
</div></p>
<h2 id="10-2-main方法"><a href="#10-2-main方法" class="headerlink" title="10.2 main方法"></a>10.2 main方法</h2><h3 id="10-2-1-深入理解main方法"><a href="#10-2-1-深入理解main方法" class="headerlink" title="10.2.1 深入理解main方法"></a>10.2.1 深入理解main方法</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231012105301547.png" alt="image-20231012105301547"></p>
<h3 id="10-2-2-特别提示"><a href="#10-2-2-特别提示" class="headerlink" title="10.2.2 特别提示"></a>10.2.2 特别提示</h3><ul>
<li>在 main()方法中，我们<strong>可以直接调用 main 方法所在类的静态方法或静态属性</strong>。</li>
<li>但是，<strong>不能直接访问该类中的非静态成员</strong>，必须创建该类的一个实例对象后，才能通过这个对象去访问类中的非静态成员</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.main_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sun.applet.Main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//静态变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String name = <span class="string">&quot;Durango&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非静态变量</span></span><br><span class="line">    <span class="keyword">private</span> String name1 = <span class="string">&quot;Jack&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 静态方法可以直接访问本类的静态成员</span></span><br><span class="line">        System.out.println(name);</span><br><span class="line">        hi();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 静态方法不可以直接访问本类的非静态成员</span></span><br><span class="line"><span class="comment">//        System.out.println(name1);</span></span><br><span class="line"><span class="comment">//        hi1();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 静态方法中要访问本类的静态成员，需要先创建本类对象，再调用</span></span><br><span class="line">        Main01 main01 = <span class="keyword">new</span> Main01();</span><br><span class="line">        System.out.println(main01.name1);</span><br><span class="line">        main01.hi1();</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// 非静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="10-2-2-在IDEA中给Main-传参"><a href="#10-2-2-在IDEA中给Main-传参" class="headerlink" title="10.2.2 在IDEA中给Main()传参"></a>10.2.2 在IDEA中给Main()传参</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231012142744360.png" alt="image-20231012142744360"></p>
<h2 id="10-3-代码块"><a href="#10-3-代码块" class="headerlink" title="10.3 代码块"></a>10.3 代码块</h2><h3 id="10-3-1-基本介绍"><a href="#10-3-1-基本介绍" class="headerlink" title="10.3.1 基本介绍"></a>10.3.1 基本介绍</h3><ul>
<li>代码化块又称为<strong>初始化块</strong>,属于类中的成员[即是类的一部分，类似于方法，将逻辑语句封装在方法体中，通过{ }包围起来</li>
<li>但和方法不同，没有方法名，没有返回，没有参数，只有方法体，而且不用通过对象或类显式调用，而是加载类时，或创建对象时隐式调用。</li>
</ul>
<h3 id="10-3-2-基本语法"><a href="#10-3-2-基本语法" class="headerlink" title="10.3.2 基本语法"></a>10.3.2 基本语法</h3><ul>
<li>语法：【修饰符】{ 代码块内容 };</li>
<li>【修饰符】可选项，写的话只能写static。分为静态代码块和普通代码块。“；”可以省略</li>
</ul>
<h3 id="10-3-3-使用场景和好处"><a href="#10-3-3-使用场景和好处" class="headerlink" title="10.3.3 使用场景和好处"></a>10.3.3 使用场景和好处</h3><ul>
<li>相当于另外一种形式的构造器(对构造器的补充机制)，可以<strong>做初始化的操作</strong></li>
<li>场景: 如果多个构造器中都有重复的语句，可以抽取到初始化块中，<strong>提高代码的重用性</strong>。代码块调用的顺序优先于构造器</li>
</ul>
<h3 id="10-3-4-注意事项（重要！！）"><a href="#10-3-4-注意事项（重要！！）" class="headerlink" title="10.3.4 注意事项（重要！！）"></a>10.3.4 注意事项（重要！！）</h3><ul>
<li><p><font color="red">类加载时（3种情况）执行静态代码块，创建类对象时执行普通代码块</font></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231012150553113.png" alt="image-20231012150553113"></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.codeblock_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeBlockDetail01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 类加载时会执行静态代码块，之后执行一次</span></span><br><span class="line">        <span class="comment">// 类加载的3种情况</span></span><br><span class="line">        <span class="comment">// 1. 创建类对象时</span></span><br><span class="line">        AA aa = <span class="keyword">new</span> AA();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 创建子类对象时，父类信息会先被加载</span></span><br><span class="line">        BB bb = <span class="keyword">new</span> BB();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 使用类的静态成员时，也会加载类(其父类信息也会被加载)</span></span><br><span class="line">        System.out.println(CC.n1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 普通代码块（只有）在创建类对象时会被调用；如果只是使用类的静态成员，则不会被调用</span></span><br><span class="line">        DD dd = <span class="keyword">new</span> DD();</span><br><span class="line">        DD dd1 = <span class="keyword">new</span> DD();</span><br><span class="line">        System.out.println(DD.n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态代码块</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AA类的静态代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BB</span> <span class="keyword">extends</span> <span class="title">AA</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BB类的静态代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CC</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> n1 = <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CC类的静态代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DD</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> n = <span class="number">999</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DD类的静态代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DD类的普通代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">AA类的静态代码块</span><br><span class="line"></span><br><span class="line">BB类的静态代码块 <span class="comment">//这里由于父类AA已经加载过，不会再执行AA类的静态代码块</span></span><br><span class="line"></span><br><span class="line">CC类的静态代码块</span><br><span class="line"><span class="number">1000</span></span><br><span class="line">    </span><br><span class="line">DD类的静态代码块</span><br><span class="line">DD类的普通代码块</span><br><span class="line">DD类的普通代码块</span><br><span class="line"><span class="number">999</span></span><br></pre></td></tr></table></figure>



<ul>
<li><p><font color="red">调用顺序</font>（重点，难点）</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231012160942764.png" alt="image-20231012160942764"></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.codeblock_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeBlockDetail02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 调用顺序</span></span><br><span class="line">        <span class="comment">//1. 调用静态代码块和静态属性初始化</span></span><br><span class="line">        <span class="comment">//2. 调用普通代码块和普通属性初始化</span></span><br><span class="line">        <span class="comment">//3. 调用构造方法</span></span><br><span class="line">        A a = <span class="keyword">new</span> A();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态属性初始化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> n1 = getN1();</span><br><span class="line">    <span class="comment">//普通属性初始化</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> n2 = getN2();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行A类的构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//普通代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行A类的普通代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行A类的静态代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getN1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;getN1被调用...静态属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getN2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;getN2被调用...普通属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">getN1被调用...静态属性初始化</span><br><span class="line">执行A类的静态代码块</span><br><span class="line">getN2被调用...普通属性初始化</span><br><span class="line">执行A类的普通代码块</span><br><span class="line">执行A类的构造方法</span><br></pre></td></tr></table></figure>



<ul>
<li><p><font color="red">构造器前面其实隐含了super()、调用普通代码块和普通属性初始化！！！</font></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231012162629060.png" alt="image-20231012162629060"></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.codeblock_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeBlockDetail03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> BBB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AAA</span> </span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AAA类的普通代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AAA</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AAA类构造器被调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BBB</span> <span class="keyword">extends</span> <span class="title">AAA</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n = getN();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getN</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;调用getN...普通属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BBB类的普通代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BBB</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 构造器前面其实隐含了super()、调用普通代码块和普通属性初始化</span></span><br><span class="line">        <span class="comment">// super();</span></span><br><span class="line">        <span class="comment">// 调用BBB的普通代码块和普通属性初始化</span></span><br><span class="line">        System.out.println(<span class="string">&quot;BBB类构造器被调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">AAA类的普通代码块</span><br><span class="line">AAA类的构造器被调用</span><br><span class="line">调用getN...普通属性初始化</span><br><span class="line">BBB类的普通代码块</span><br><span class="line">BBB类的构造器被调用</span><br></pre></td></tr></table></figure>



<ul>
<li><p><font color="red"><strong>存在继承关系时，静态代码块，静态属性初始化，普通代码块，普通属性初始化，构造方法调用顺序</strong>&lt;/font</font></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231012163641321.png" alt="image-20231012163641321"></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.codeblock_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeBlockDetail04</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> CCCC();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AAAA</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n1 = getN1();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> n2 = getN2();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AAAA</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AAAA类的构造器被调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AAAA类的普通代码块被执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AAAA类的静态代码块被执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getN1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AAAA类的普通属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getN2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AAAA类的静态属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BBBB</span> <span class="keyword">extends</span> <span class="title">AAAA</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n3 = getN3();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> n4 = getN4();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BBBB</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BBBB类的构造器被调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BBBB类的普通代码块被执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BBBB类的静态代码块被执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getN3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BBBB类的普通属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getN4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BBBB类的静态属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CCCC</span> <span class="keyword">extends</span> <span class="title">BBBB</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n5 = getN5();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> n6 = getN6();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CCCC</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CCCC类的构造器被调用&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CCCC类的普通代码块被执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CCCC类的静态代码块被执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getN5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CCCC类的普通属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getN6</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CCCC类的静态属性初始化&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：</span><br><span class="line">AAAA类的静态属性初始化</span><br><span class="line">AAAA类的静态代码块被执行</span><br><span class="line">BBBB类的静态属性初始化</span><br><span class="line">BBBB类的静态代码块被执行</span><br><span class="line">CCCC类的静态属性初始化</span><br><span class="line">CCCC类的静态代码块被执行</span><br><span class="line"></span><br><span class="line">AAAA类的普通属性初始化</span><br><span class="line">AAAA类的普通代码块被执行</span><br><span class="line">AAAA类的构造器被调用</span><br><span class="line">BBBB类的普通属性初始化</span><br><span class="line">BBBB类的普通代码块被执行</span><br><span class="line">BBBB类的构造器被调用</span><br><span class="line">CCCC类的普通属性初始化</span><br><span class="line">CCCC类的普通代码块被执行</span><br><span class="line">CCCC类的构造器被调用</span><br></pre></td></tr></table></figure>



<h2 id="10-4-单例设计模式（static实践）"><a href="#10-4-单例设计模式（static实践）" class="headerlink" title="10.4 单例设计模式（static实践）"></a>10.4 单例设计模式（static实践）</h2><h3 id="10-4-1-设计模式"><a href="#10-4-1-设计模式" class="headerlink" title="10.4.1 设计模式"></a>10.4.1 设计模式</h3><p>​    <strong>是为解决软件设计中通用问题而被提出的一套指导性思想</strong>。它是一种被反复验证、经过实践证明并被广泛应用的<strong>代码设计经验和思想总结</strong>，可以帮助开发者通过一定的模式来快速的<strong>开发高质量、可维护性强</strong>的软件。</p>
<h3 id="10-4-2-单例模式"><a href="#10-4-2-单例模式" class="headerlink" title="10.4.2 单例模式"></a>10.4.2 单例模式</h3><ul>
<li>所谓类的单例设计模式，就是采取一定的方法保证在整个的软件系统中，<strong>对某个类只能存在一个对象实例</strong>, 并<strong>且该类只提供一个取得其对象实例的方法</strong></li>
</ul>
<h3 id="10-4-3-设计步骤"><a href="#10-4-3-设计步骤" class="headerlink" title="10.4.3 设计步骤"></a>10.4.3 设计步骤</h3><p>​    <div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>先将<strong>构造器私有化</strong>，防止外部直接new 对象</li>
<li>在类的内部<strong>直接创建一个静态对象</strong>（恶汉式：在属性处创建；懒汉式：在方法中创建）</li>
<li>向外部<strong>暴露一个公共的静态方法</strong>，返回这个对象实例</li>
</ol>
<p>​    </p>
</div></p>
<h3 id="10-4-4-恶汉式和懒汉式"><a href="#10-4-4-恶汉式和懒汉式" class="headerlink" title="10.4.4 恶汉式和懒汉式"></a>10.4.4 恶汉式和懒汉式</h3><ul>
<li><p>恶汉式（类加载时就创建了实例，存在资源浪费问题）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.single_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleTon01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(GirlFriend.n1); <span class="comment">// 此时已经创建对象实例</span></span><br><span class="line"></span><br><span class="line">        GirlFriend instance = GirlFriend.getInstance();</span><br><span class="line">        System.out.println(instance);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GirlFriend</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> n1 = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> GirlFriend gf = <span class="keyword">new</span> GirlFriend(<span class="string">&quot;小花&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 饿汉式</span></span><br><span class="line">    <span class="comment">// 1. 先将构造器私有化</span></span><br><span class="line">    <span class="comment">// 2. 在类的内部直接创建一个静态对象</span></span><br><span class="line">    <span class="comment">// 3. 用公共的静态方法返回这个对象实例</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">GirlFriend</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;构造器被调用&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> GirlFriend <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;GirlFriend&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>懒汉式（类使用时才创建实例，存在线程安全问题）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.single_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleTon02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Cat.n1); <span class="comment">// 此时不会创建对象实例</span></span><br><span class="line"></span><br><span class="line">        Cat cat = Cat.getInstance();    <span class="comment">// 会创建单例</span></span><br><span class="line">        System.out.println(cat.toString());</span><br><span class="line"></span><br><span class="line">        Cat cat1 = Cat.getInstance();    <span class="comment">// 不会重复创建实例</span></span><br><span class="line">        System.out.println(cat1.toString());</span><br><span class="line"></span><br><span class="line">        System.out.println(cat == cat1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> n1 = <span class="number">999</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Cat cat;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 懒汉式</span></span><br><span class="line">    <span class="comment">// 1. 先将构造器私有化</span></span><br><span class="line">    <span class="comment">// 2. 在类的内部（getInstance方法）直接创建一个静态对象</span></span><br><span class="line">    <span class="comment">// 3. 用公共的静态方法返回这个对象实例</span></span><br><span class="line">    <span class="comment">// 用户调用getInstance方法时才创建对象，重复调用会返回上次创建的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Cat</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;构造器被调用&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Cat <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cat == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cat = <span class="keyword">new</span> Cat(<span class="string">&quot;小花&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Cat&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231013162756514.png" alt="image-20231013162756514"></p>
</li>
</ul>
<h2 id="10-5-final关键字"><a href="#10-5-final关键字" class="headerlink" title="10.5 final关键字"></a>10.5 final关键字</h2><h3 id="10-5-1-基本介绍"><a href="#10-5-1-基本介绍" class="headerlink" title="10.5.1 基本介绍"></a>10.5.1 基本介绍</h3><ul>
<li>final可以修饰类、属性、方法、局部变量<ul>
<li>修饰类时，该类<strong>不能被继承</strong></li>
<li>修饰属性（成员变量）时，属性的值<strong>不能被修改</strong><ul>
<li>属性是基本数据类型，值是数值，不能被修改</li>
<li>属性是引用数据类型，值是地址，不能被修改</li>
</ul>
</li>
<li>修饰方法时，方法<strong>不能被重写/覆盖</strong></li>
<li>修饰局部变量时，变量的值<strong>不能被修改</strong></li>
</ul>
</li>
</ul>
<h3 id="10-5-2-注意事项"><a href="#10-5-2-注意事项" class="headerlink" title="10.5.2 注意事项"></a>10.5.2 注意事项</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>final修饰的属性又叫<strong>常量</strong>,一般用XX_XX_XX来命名</li>
<li>final修饰的属性<strong>在定义时,必须赋初值</strong>,并且以后不能再修改，赋值可以在如<br> 下位置之一【选择一个位置赋初值即可】:<br> ①定义时:如public final double TAX_RATE=0.08;     ②在构造器中    ③在代码块中。</li>
<li>如果final修饰的属性是静态的，则初始化的位置只能是  ①定义时    ②在静态代码块。不能在构造器中赋值。</li>
<li>final类不能继承,但是可以实例化对象。</li>
<li>如果类不是final类，但是含有final方法，则该方法虽然不能重写，但是可以被继承。</li>
<li>一般来说，如果一个类已经是final类了，就没有必要再将方法修饰成final方法。6) final不能修饰构造方法(即构造器</li>
<li>final和 static往往搭配使用，效率更高，<font color="red">不会导致类加载</font>！！！底层编译器做了优化处理。</li>
</ol>
</div>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.final_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Final02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(AAA.num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> </span>&#123;</span><br><span class="line">    <span class="comment">// final修饰的属性必须赋初始值，赋值的位置有三个</span></span><br><span class="line">    <span class="comment">// 1. 定义时；2. 在构造器中 3. 在代码块中</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">double</span> TAX_RATE = <span class="number">0.08</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">double</span> TAX_RATE2;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">double</span> TAX_RATE3;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        TAX_RATE2 = <span class="number">0.09</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        TAX_RATE3 = <span class="number">0.07</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BB</span> </span>&#123;</span><br><span class="line">    <span class="comment">// final修饰的属性如果是static的，则初始化位置只能是</span></span><br><span class="line">    <span class="comment">// 1. 定义时；2. 在静态代码块中</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> TAX_RATE = <span class="number">0.08</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> TAX_RATE1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        TAX_RATE1 = <span class="number">0.07</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AAA</span> </span>&#123;</span><br><span class="line">    <span class="comment">// final和static搭配使用效率更高，不会导致类加载</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> num = <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BBB类被加载，静态代码块被执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="10-6-抽象类"><a href="#10-6-抽象类" class="headerlink" title="10.6  抽象类"></a>10.6  抽象类</h2><h3 id="10-6-1-基本介绍"><a href="#10-6-1-基本介绍" class="headerlink" title="10.6.1 基本介绍"></a>10.6.1 基本介绍</h3><ul>
<li>当父类的某些方法，需要声明，但是又不确定如何实现时，可以将其声明为抽象（abstract）方法, 那么这个类就是抽象类</li>
<li>抽象方法必须存在于抽象类中，用abstract关键字修饰。</li>
<li>抽象类的价值更多是在于设计，是设计者设计好后，让子类继承并实现抽象类()</li>
</ul>
<h3 id="10-6-2-注意事项-（面试常考）"><a href="#10-6-2-注意事项-（面试常考）" class="headerlink" title="10.6.2 注意事项 （面试常考）"></a>10.6.2 注意事项 （面试常考）</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>抽象类<strong>不能被实例化</strong></li>
<li><strong>抽象类不一定要包含抽象方法；但是抽象方法一定要存在于抽象类</strong></li>
<li>abstract只能修饰类和方法，不能修饰属性和其他的</li>
<li>抽象类可以有任意成员，如非抽象方法、构造器、静态属性等等</li>
<li><strong>抽象方法不能有方法体</strong>，即不能实现</li>
<li><strong>如果一个类继承了抽象类，则他<font color="red">必须实现</font>抽象类的所有抽象方法</strong>，除非它还是声明为抽象类</li>
<li>抽象方法<strong>不能用private、final和static来修饰</strong>，这些关键字都是和重写相违背的</li>
</ol>
</div>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.abstract_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Animal</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cat</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;小猫吃鱼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="10-7-模板设计模式（abstract实践）"><a href="#10-7-模板设计模式（abstract实践）" class="headerlink" title="10.7 模板设计模式（abstract实践）"></a>10.7 模板设计模式（abstract实践）</h2><ul>
<li><p>有不同的几个类，需要完成不同的job，但都需要计算完成job的时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.abstract_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TemplateTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> AA().calculateTime();</span><br><span class="line">        <span class="keyword">new</span> BB().calculateTime();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Template</span> </span>&#123;   <span class="comment">// 模板类</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">job</span><span class="params">()</span></span>; <span class="comment">// 模板方法</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calculateTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        job();  <span class="comment">// 动态绑定机制</span></span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;job执行了&quot;</span> + (end - start) + <span class="string">&quot;毫秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> <span class="keyword">extends</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">job</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">            num += i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BB</span> <span class="keyword">extends</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">job</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">            num -= i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="10-8-接口（interface）"><a href="#10-8-接口（interface）" class="headerlink" title="10.8 接口（interface）"></a>10.8 接口（interface）</h2><h3 id="10-8-1-基本介绍"><a href="#10-8-1-基本介绍" class="headerlink" title="10.8.1 基本介绍"></a>10.8.1 基本介绍</h3><ul>
<li><p>接口就是给出一些没有实现的方法,封装到一起,到某个类要使用的时候,在根据具体情况把这些方法写出来</p>
</li>
<li><p>语法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> 接口名 </span>&#123;</span><br><span class="line">	属性；（默认是<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>修饰的，需要赋初值）</span><br><span class="line">	方法；（<span class="number">1.</span> 抽象方法【<span class="keyword">abstract</span>可以省略】； <span class="number">2.</span>默认实现方法【<span class="keyword">default</span>】；<span class="number">3.</span>静态方法【<span class="keyword">static</span>】）</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> 类名 <span class="keyword">implements</span> 接口名 </span>&#123;</span><br><span class="line">	自己的属性；</span><br><span class="line">	自己的方法；</span><br><span class="line">	必须实现的接口的抽象方法；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>小结</p>
<ul>
<li><p>在JDK7以前，接口里的方法都是抽象方法，没有方法体</p>
</li>
<li><p>在JDK8以后，接口里面也可以有<strong>静态方法、默认方法</strong>（default），也就是说可以有方法具体实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">AInterface</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> n = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//jdk8以后可以有默认方法和静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ok</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ok~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="10-8-2-应用场景"><a href="#10-8-2-应用场景" class="headerlink" title="10.8.2 应用场景"></a>10.8.2 应用场景</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231014101020720.png" alt="image-20231014101020720"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231014101059395.png" alt="image-20231014101059395"></p>
<ul>
<li><p>举例：项目需要实现对三个不同数据库的连接操作，如果直接编写三个连接的类，类中的连接方法名可能不统一；在项目使用数据库时，需要<strong>重载</strong>三种不同形参类型的方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package com.durango.interface_;</span><br><span class="line"></span><br><span class="line">public class Interface03 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        DBManager manager = new DBManager();</span><br><span class="line">        manager.toDatabase(new MysqlDB());</span><br><span class="line">        manager.toDatabase(new OracleDB());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class DBManager &#123;</span><br><span class="line">    public void toDatabase(DBInterface dbInterface) &#123;</span><br><span class="line">        dbInterface.connect();</span><br><span class="line">        dbInterface.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MysqlDB implements DBInterface &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void connect() &#123;</span><br><span class="line">        System.out.println(&quot;连接Mysql数据库&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void close() &#123;</span><br><span class="line">        System.out.println(&quot;关闭Mysql数据库&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class OracleDB implements DBInterface &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void connect() &#123;</span><br><span class="line">        System.out.println(&quot;连接Oracle数据库&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void close() &#123;</span><br><span class="line">        System.out.println(&quot;关闭Oracle数据库&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="10-8-3-注意事项"><a href="#10-8-3-注意事项" class="headerlink" title="10.8.3 注意事项"></a>10.8.3 注意事项</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>接口<strong>不能被实例化</strong></li>
<li>接口中所有**<font color="red">方法都是public的</font><strong>（可以省略public），接口中的抽象方法</strong>可以不用abstract修饰**</li>
<li>普通类实现接口，就必须实现接口中的所有抽象方法。快捷键 alt+enter</li>
<li>抽象类实现接口，可以不用实现接口中的抽象方法</li>
<li>一个类可以<strong>实现多个接口</strong>。</li>
<li>接口中的**<font color="red">属性是public static final的</font><strong>，比如 int n1 = 100 实际上是 public static final int n1 = 100;（必须初始化）。实现了接口的类也</strong>可以调用接口中的属性，但是不能修改**（接口中的变量默认是public static final修饰的，需要赋初值）。</li>
<li>接口不能继承其他的类，但是可以<strong>继承多个别的接口</strong></li>
<li>接口的修饰符只能是public和默认，这点和类的修饰符是一样的</li>
</ol>
</div>



<h3 id="10-8-4-实现接口-VS-继承类"><a href="#10-8-4-实现接口-VS-继承类" class="headerlink" title="10.8.4 实现接口 VS 继承类"></a>10.8.4 实现接口 VS 继承类</h3><ol>
<li>接口和继承解决的问题不同<ul>
<li>继承的价值在于：解决代码的<strong>复用性和可维护性</strong></li>
<li>接口的价值在于：设计并<strong>设计好各种规范</strong>（方法），让其他类去实现这些方法，即更加灵活</li>
</ul>
</li>
<li>接口比继承更加灵活<ul>
<li>继承是 is-a 的关系</li>
<li>接口是 like-a 的关系</li>
</ul>
</li>
<li>接口在一定程度上实现了代码解耦 【接口规范性+动态绑定】</li>
</ol>
<h3 id="10-8-5-接口的多态特性"><a href="#10-8-5-接口的多态特性" class="headerlink" title="10.8.5 接口的多态特性"></a>10.8.5 接口的多态特性</h3><ul>
<li><p><font color="red">多态参数</font></p>
<ul>
<li><strong>接口的引用可以指向实现了接口的类的对象</strong>，比如在前面的连接数据库案例中，DBInterface dbInterface既可以接收MysqlDB，也可以接收OrcalDB</li>
</ul>
</li>
<li><p><font color="red">多态数组</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">USBInterface[] usbs = <span class="keyword">new</span> USBInterface[<span class="number">2</span>];</span><br><span class="line">usbs[<span class="number">0</span>] = <span class="keyword">new</span> Phone();</span><br><span class="line">usbs[<span class="number">1</span>] = <span class="keyword">new</span> Camera();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; usbs.length; i++) &#123;</span><br><span class="line">    usbs[i].start();    <span class="comment">// 动态绑定</span></span><br><span class="line">    <span class="keyword">if</span> (usbs[i] <span class="keyword">instanceof</span> Phone) &#123;</span><br><span class="line">        ((Phone) usbs[i]).call();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (usbs[i] <span class="keyword">instanceof</span> Camera) &#123;</span><br><span class="line">        ((Camera) usbs[i]).photo();</span><br><span class="line">    &#125;</span><br><span class="line">    usbs[i].end();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><font color="red">多态传递</font></p>
<ul>
<li>接口的父级接口的引用也可以指向实现了该接口的类的对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.interface_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterfacePolyPass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Teacher实现了IG，IG继承了IH。</span></span><br><span class="line">        IG ig = <span class="keyword">new</span> Teacher();</span><br><span class="line">        IH ih = <span class="keyword">new</span> Teacher();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IH</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IG</span> <span class="keyword">extends</span> <span class="title">IH</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">implements</span> <span class="title">IG</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="10-9-内部类"><a href="#10-9-内部类" class="headerlink" title="10.9 内部类"></a>10.9 内部类</h2><h3 id="10-9-1-基本介绍"><a href="#10-9-1-基本介绍" class="headerlink" title="10.9.1 基本介绍"></a>10.9.1 基本介绍</h3><ul>
<li><p>类的五大成员：属性；方法；构造器；代码块；<strong>内部类</strong></p>
</li>
<li><p>一个类的内部又完整的嵌套了另一个类结构。被嵌套的类称为内部类(inner class),嵌套其他类的类称为外部类(outer class)。内部类的最大特点：<strong>可以直接访问私有属性，并且可以体现类与类之间的包含关系</strong></p>
</li>
<li><p>基本语法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123;	<span class="comment">// 外部类</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;	<span class="comment">// 内部类</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Other</span></span>&#123;	<span class="comment">// 外部其他类</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="10-9-2-分类"><a href="#10-9-2-分类" class="headerlink" title="10.9.2 分类"></a>10.9.2 分类</h3><ul>
<li>定义在外部类<strong>局部位置</strong>上（比如方法内，代码块中），本质是局部变量<ul>
<li>局部内部类（有类名）</li>
<li>匿名内部类（无类名，重点！！！）</li>
</ul>
</li>
<li>定义在外部类<strong>成员位置</strong>上，本质是类的成员<ul>
<li>成员内部类（没有static修饰）</li>
<li>静态内部类（使用static修饰）</li>
</ul>
</li>
</ul>
<h3 id="10-9-3-局部内部类"><a href="#10-9-3-局部内部类" class="headerlink" title="10.9.3 局部内部类"></a>10.9.3 局部内部类</h3><ol>
<li>可以<strong>直接访问</strong>外部类的所有成员,包含私有的</li>
<li><strong>不能添加访问修饰符</strong>, 因为它的地位就是一个局部变量。局部变量是不能使用修饰符的。但是可以使用final修饰, 因为局部变量也可以使用final</li>
<li><strong>作用域</strong>: 仅仅在<strong>定义它的方法或代码块中</strong>。</li>
<li>局部内部类—访问—-&gt;外部类的成员，访问方式:<strong>直接访问</strong></li>
<li>外部类—&gt;访问—-&gt;局部内部类的成员，访问方式:<strong>创建对象, 再访问</strong>(注意:<strong>必须在作用域内</strong>)<ul>
<li>(1)局部内部类定义在方法中/代码块</li>
<li>(2)作用域在方法体或者代码块中    </li>
<li>(3)本质仍然是个类</li>
</ul>
</li>
<li>外部其他类—不能访问—–&gt;局部内部类（因为局部内部类地位是一个<strong>局部变量</strong>)</li>
<li>如果外部类和局部内部类的成员重名时，默认遵循<strong>就近原则</strong>，如果想访问外部类的成员，则可以使用**<font color="red">(外部类名.this.成员</font>**)去访问【演示】</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.innerclass_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalInnerClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer02 outer02 = <span class="keyword">new</span> Outer02();</span><br><span class="line">        outer02.m1();</span><br><span class="line">        System.out.println(<span class="string">&quot;outer02的hashcode=&quot;</span> + outer02.hashCode());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer02</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Outer02 m2()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//局部内部类：</span></span><br><span class="line">    <span class="comment">// 1. 可以直接访问外部类成员（包括私有）</span></span><br><span class="line">    <span class="comment">// 2. 不能添加访问修饰符，相当于局部变量，可以加final修饰</span></span><br><span class="line">    <span class="comment">// 3. 作用域，定义它的方法或代码块中</span></span><br><span class="line">    <span class="comment">// 4. 外部类访问内部类成员，需要new对象。注意必须在作用域中</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner02</span> </span>&#123; <span class="comment">//方法中的局部内部类</span></span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">200</span>;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">f1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;n1=&quot;</span> + n1); <span class="comment">//遵循就近原则</span></span><br><span class="line">                <span class="comment">// Outer02.this本质是外部类的对象，哪个对象调用了m1，Outer02.this就指向哪个对象</span></span><br><span class="line">                System.out.println(<span class="string">&quot;外部类的n1=&quot;</span> + Outer02.<span class="keyword">this</span>.n1);</span><br><span class="line">                System.out.println(<span class="string">&quot;Outer02.this的hashcode=&quot;</span> + Outer02.<span class="keyword">this</span>.hashCode());</span><br><span class="line">                m2();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        m2();</span><br><span class="line">        <span class="keyword">new</span> Inner02().f1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Inner03</span> </span>&#123;  <span class="comment">//代码块中的局部内部类</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">f2</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出:</span><br><span class="line"><span class="function">Outer02 <span class="title">m2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">n1</span>=<span class="number">200</span></span><br><span class="line">外部类的n1=<span class="number">100</span></span><br><span class="line">Outer02.<span class="keyword">this</span>的hashcode=<span class="number">1163157884</span></span><br><span class="line"><span class="function">Outer02 <span class="title">m2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">outer02的hashcode</span>=<span class="number">1163157884</span></span><br></pre></td></tr></table></figure>



<h3 id="10-9-4-匿名内部类（重要！！！）"><a href="#10-9-4-匿名内部类（重要！！！）" class="headerlink" title="10.9.4 匿名内部类（重要！！！）"></a>10.9.4 匿名内部类（重要！！！）</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>（1）本质是类；（2）内部类；（3）该类没有名字；（4）同时还是一个对象<ul>
<li><font color="red">new 类或接口（参数列表）{ 类体 };</font></li>
</ul>
</li>
<li>因为匿名内部类<strong>既是一个类的定义，同时它本身也是一个对象</strong>，因此从语法上看，它既有定义类的特征，也有创建对象的特征。调用匿名内部类的成员有两种方式：赋值后调用；直接调用。</li>
<li>可以直接访问外部类成员，包括私有的</li>
<li>不能添加访问修饰符，本质是一个局部变量，可以加final修饰</li>
<li>作用域：定义它的方法或代码块中</li>
<li>匿名内部类 –&gt; 访问 –&gt; 外部类 成员 : 直接访问</li>
<li> 外部类 –&gt; 访问 –&gt; 匿名内部类 成员：new对象赋值后调用； new对象直接调用</li>
<li>如果外部类和匿名内部类的成员重名时，匿名内部类访问的话，默认遵循就近原则,如果想访问外部类的成员，则可以使用(<strong>外部类名.this.成员</strong>)去访问</li>
<li>底层给匿名内部类分配的名字为：<strong>外部类名$X</strong>，可以用**getClass()**查看，即运行类型</li>
</ol>
</div>



<ul>
<li><p>基于接口实现的匿名内部类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.innerclass_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnonymousInnerClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer04 outer04 = <span class="keyword">new</span> Outer04();</span><br><span class="line">        outer04.method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer04</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 基于接口的匿名内部类</span></span><br><span class="line">        <span class="comment">// 1. 需求：使用A接口，并创建对象</span></span><br><span class="line">        <span class="comment">// 2. 传统做法：写一个类实现A接口，然后创建这个类的对象</span></span><br><span class="line">        <span class="comment">// 3. 需求是 Tiger/Dog 类只是使用一次，后面不再使用</span></span><br><span class="line">        <span class="comment">// 4. 可以使用匿名内部类来简化开发</span></span><br><span class="line">        <span class="comment">// 5. tiger 的编译类型 ? A</span></span><br><span class="line">        <span class="comment">// 6. tiger 的运行类型 ? 就是匿名内部类 (名字由jvm分配为Outer04$1)</span></span><br><span class="line">        <span class="comment">// 7. jvm底层在创建匿名内部类Outer04$1，并创建了Outer04$1实例把地址返回给tiger</span></span><br><span class="line">        <span class="comment">// 8. 这个匿名内部类只能使用一次，是指不能再创建这个匿名内部类的实例了。</span></span><br><span class="line">        <span class="comment">//    tiger是已经创建的唯一匿名内部类对象，可以使用多次</span></span><br><span class="line">        A tiger = <span class="keyword">new</span> A() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;老虎叫唤&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;tiger的运行类型=&quot;</span> + tiger.getClass());</span><br><span class="line">        tiger.cry();</span><br><span class="line">        tiger.cry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">cry</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">tiger的运行类型=<span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">durango</span>.<span class="title">innerclass_</span>.<span class="title">Outer04</span>$1</span></span><br><span class="line"><span class="class">老虎叫唤</span></span><br><span class="line"><span class="class">老虎叫唤</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>基于类或抽象类继承的匿名内部类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.innerclass_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnonymousInnerClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer04 outer04 = <span class="keyword">new</span> Outer04();</span><br><span class="line">        outer04.method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer04</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 基于类的匿名内部类</span></span><br><span class="line">        <span class="comment">// 1. father 编译类型 Father</span></span><br><span class="line">        <span class="comment">// 2. father 运行类型 Outer04$2</span></span><br><span class="line">        <span class="comment">// 3. 底层会创建匿名内部类Outer04$2继承Father，并创建Outer04$2实例返回给father</span></span><br><span class="line">        Father father = <span class="keyword">new</span> Father(<span class="string">&quot;jack&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;这是匿名内部类的Test&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;father对象的运行类型=&quot;</span> + father.getClass());</span><br><span class="line">        father.test();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Father</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        System.out.println(<span class="string">&quot;接收到name&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这是Father的test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：</span><br><span class="line">接收到name</span><br><span class="line">father对象的运行类型=<span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">durango</span>.<span class="title">innerclass_</span>.<span class="title">Outer04</span>$2</span></span><br><span class="line"><span class="class">这是匿名内部类的<span class="title">Test</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>调用匿名内部类的成员</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer05</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">99</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">f1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 先赋值再调用</span></span><br><span class="line">        Person p = <span class="keyword">new</span> Person()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;匿名内部类重写了hi方法&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        p.hi(); <span class="comment">//动态绑定，运行类型时Outer05$1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//也可以直接调用，匿名内部类创建类并返回了一个实例</span></span><br><span class="line">        <span class="keyword">new</span> Person()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;匿名内部类重写了hi方法&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.hi();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="10-9-5-匿名内部类最佳实践"><a href="#10-9-5-匿名内部类最佳实践" class="headerlink" title="10.9.5 匿名内部类最佳实践"></a>10.9.5 匿名内部类最佳实践</h3><ul>
<li><p><strong><font color="red">匿名内部类当作实参直接传递，简洁高效</font></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.innerclass_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerClassExercise01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 匿名内部类当做实参直接传递</span></span><br><span class="line">        f1(<span class="keyword">new</span> IL() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;匿名内部类当做实参直接传递&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//传统方式</span></span><br><span class="line">        f1(<span class="keyword">new</span> Tr());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态方法，形参是接口类型</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">f1</span><span class="params">(IL il)</span> </span>&#123;</span><br><span class="line">        il.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IL</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tr</span> <span class="keyword">implements</span> <span class="title">IL</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;传统方式，实现接口再传参&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>形参有多个接口，<strong>实参可以是多个匿名内部类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.innerclass_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerClassExercise02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CellPhone cp = <span class="keyword">new</span> CellPhone();</span><br><span class="line">        cp.alarmClock(<span class="keyword">new</span> Bell() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ring</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;懒猪起床了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="keyword">new</span> Bell() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ring</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;上班要迟到了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Bell</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ring</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CellPhone</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 形参是接口类型，实参可以用匿名内部类</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">alarmClock</span><span class="params">(Bell b1, Bell b2)</span></span>&#123;</span><br><span class="line">        b1.ring();</span><br><span class="line">        System.out.println(b1.getClass());</span><br><span class="line">        b2.ring();</span><br><span class="line">        System.out.println(b2.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：</span><br><span class="line">懒猪起床了</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">durango</span>.<span class="title">innerclass_</span>.<span class="title">InnerClassExercise02</span>$1</span></span><br><span class="line"><span class="class">上班要迟到了</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">com</span>.<span class="title">durango</span>.<span class="title">innerclass_</span>.<span class="title">InnerClassExercise02</span>$2</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="10-9-6-成员内部类"><a href="#10-9-6-成员内部类" class="headerlink" title="10.9.6 成员内部类"></a>10.9.6 成员内部类</h3><ol>
<li><p>可以直接访问外部类成员，包括私有的</p>
</li>
<li><p>可以添加任意访问修饰符，本质是类的成员</p>
</li>
<li><p>作用域：定义它的整个类体</p>
</li>
<li><p>成员内部类访问外部类成员：直接访问</p>
</li>
<li><p>外部类访问内部类成员：创建对象访问</p>
</li>
<li><p>成员重名时遵循就近原则，可以通过 外部类名.this.成员 访问外部成员</p>
</li>
<li><p>外部其他类 可以 访问 内部类：有两种方式如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MemberInnerClass01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer08 outer08 = <span class="keyword">new</span> Outer08();</span><br><span class="line">        outer08.hi();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 外部其他类，使用成员内部类的三种方式(遵循访问权限)</span></span><br><span class="line">        <span class="comment">// 1. new Outer08().new Inner08()相当于把new Inner08()当做是new Outer08()的成员</span></span><br><span class="line">        Outer08.Inner08 inner08 = <span class="keyword">new</span> Outer08().<span class="function">new <span class="title">Inner08</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 在外部类中编写一个方法，放回Inner08的实例</span></span><br><span class="line">        Outer08.Inner08 inner08_1 = <span class="keyword">new</span> Outer08().getInner();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer08</span> </span>&#123; <span class="comment">//外部类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">public</span> String name = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员内部类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner08</span> </span>&#123;  <span class="comment">// 可以添加访问修饰符</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">99</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 可以直接访问外部类成员，包括私有的</span></span><br><span class="line">            System.out.println(<span class="string">&quot;n1 = &quot;</span> + n1 + <span class="string">&quot; name=&quot;</span> + name);</span><br><span class="line">            <span class="comment">// 重名时遵守就近原则，通过&quot;外部类.this.成员&quot;访问外部类成员</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Outer n1=&quot;</span>+Outer08.<span class="keyword">this</span>.n1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 成员内部类的作用域是定义它的整个类体</span></span><br><span class="line">        <span class="comment">// 外部类访问内部类成员，需要new对象</span></span><br><span class="line">        Inner08 inner08 = <span class="keyword">new</span> Inner08();</span><br><span class="line">        inner08.say();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Inner08 <span class="title">getInner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Inner08();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-9-6-静态内部类"><a href="#10-9-6-静态内部类" class="headerlink" title="10.9.6 静态内部类"></a>10.9.6 静态内部类</h3><ol>
<li><p>可以直接访问外部类<strong>静态的</strong>成员，包括私有的。不能访问外部类非静态成员</p>
</li>
<li><p>可以添加任意访问修饰符，本质是类的成员</p>
</li>
<li><p>作用域：定义它的整个类体</p>
</li>
<li><p>成员内部类访问外部类<strong>静态的</strong>成员：直接访问</p>
</li>
<li><p>外部类访问静态内部类成员：创建对象访问</p>
</li>
<li><p>成员重名时遵循就近原则，可以通过 <strong><font color="red">外部类名.成员</font></strong> 访问外部成员</p>
</li>
<li><p>外部其他类 可以 访问 静态内部类：有两种方式如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MemberInnerClass02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 外部其他类访问静态内部类</span></span><br><span class="line">        <span class="comment">// 1. 静态成员可以直接通过类名访问Outer09.Inner09(),无需创建外部类对象</span></span><br><span class="line">        Outer09.Inner09 inner09 = <span class="keyword">new</span> Outer09.Inner09();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.编写一个(静态)方法，可以返回静态内部类的对象实例</span></span><br><span class="line">        Outer09.Inner09 inner09_1 = <span class="keyword">new</span> Outer09().getInner();</span><br><span class="line">        Outer09.Inner09 inner09_2 = Outer09.getInner_();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer09</span> </span>&#123; <span class="comment">//外部类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> n1 = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String name = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态内部类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner09</span> </span>&#123;  <span class="comment">// 可以添加访问修饰符</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> n1 = <span class="number">99</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 可以直接访问外部类的静态成员(不能访问非静态成员)</span></span><br><span class="line">            System.out.println(<span class="string">&quot;n1 = &quot;</span> + n1 + <span class="string">&quot; name=&quot;</span> + name);</span><br><span class="line">            <span class="comment">// 重名时遵守就近原则，通过&quot;外部类.成员&quot;访问外部类成员</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Outer n1=&quot;</span> + Outer09.n1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 静态内部类的作用域是定义它的整个类体</span></span><br><span class="line">        <span class="comment">// 外部类访问静态内部类成员，需要new对象</span></span><br><span class="line">        Inner09 inner09 = <span class="keyword">new</span> Inner09();</span><br><span class="line">        inner09.say();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Inner09 <span class="title">getInner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Inner09();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Inner09 <span class="title">getInner_</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Inner09();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="第十一章-枚举和注解"><a href="#第十一章-枚举和注解" class="headerlink" title="第十一章 枚举和注解"></a>第十一章 枚举和注解</h1><h2 id="11-1-自定义类实现枚举"><a href="#11-1-自定义类实现枚举" class="headerlink" title="11.1 自定义类实现枚举"></a>11.1 自定义类实现枚举</h2><ol>
<li><p><strong>构造器私有化</strong>，防止直接new对象</p>
</li>
<li><p>本类<strong>内部创建一组对象</strong> [四个 春夏秋冬]</p>
</li>
<li><p>对外<strong>暴露对象</strong>（通过为对象添加 public final static 修饰符）</p>
</li>
<li><p><strong>可以提供 get 方法</strong>，但是不要提供 set</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Season</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义了四个对象, 固定.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season SPRING = <span class="keyword">new</span> Season(<span class="string">&quot;春天&quot;</span>, <span class="string">&quot;温暖&quot;</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season WINTER = <span class="keyword">new</span> Season(<span class="string">&quot;冬天&quot;</span>, <span class="string">&quot;寒冷&quot;</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season AUTUMN = <span class="keyword">new</span> Season(<span class="string">&quot;秋天&quot;</span>, <span class="string">&quot;凉爽&quot;</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season SUMMER = <span class="keyword">new</span> Season(<span class="string">&quot;夏天&quot;</span>, <span class="string">&quot;炎热&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Season</span><span class="params">(String name, String desc)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="11-2-enum关键字实现枚举"><a href="#11-2-enum关键字实现枚举" class="headerlink" title="11.2 enum关键字实现枚举"></a>11.2 enum关键字实现枚举</h2><h3 id="11-2-1-说明"><a href="#11-2-1-说明" class="headerlink" title="11.2.1 说明"></a>11.2.1 说明</h3><ol>
<li>用enum关键字替代class</li>
<li>将定义的常量对象写在最前面，<strong>常量名（实参列表）</strong>，多个常量用 “<strong>，</strong>”隔开</li>
<li>最后加上构造器和get方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Enumeration02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Season2.SPRING);	<span class="comment">//春天</span></span><br><span class="line">        Season2 spring1 = Season2.SPRING;</span><br><span class="line">        Season2 spring2 = Season2.SPRING;</span><br><span class="line">        System.out.println(spring1 == spring2);	<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//使用 enum 来实现枚举类</span></span><br><span class="line"><span class="comment">//1. 使用关键字 enum 替代 class</span></span><br><span class="line"><span class="comment">//2. public static final Season SPRING = new Season(&quot;春天&quot;, &quot;温暖&quot;) 直接替换成</span></span><br><span class="line"><span class="comment">// SPRING(&quot;春天&quot;, &quot;温暖&quot;) 解读 常量名(实参列表)</span></span><br><span class="line"><span class="comment">//3. 如果有多个常量(对象)， 使用 ,号间隔即可</span></span><br><span class="line"><span class="comment">//4. 如果使用 enum 来实现枚举，要求将定义常量对象，写在前面</span></span><br><span class="line"><span class="comment">//5. 如果我们使用的是无参构造器，创建常量对象，则可以省略 ()</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Season2</span> </span>&#123;</span><br><span class="line">    SPRING(<span class="string">&quot;春天&quot;</span>, <span class="string">&quot;温暖&quot;</span>),	<span class="comment">//调用有参构造器</span></span><br><span class="line">    WINTER(<span class="string">&quot;冬天&quot;</span>, <span class="string">&quot;寒冷&quot;</span>),</span><br><span class="line">    AUTUMN(<span class="string">&quot;秋天&quot;</span>, <span class="string">&quot;凉爽&quot;</span>),</span><br><span class="line">    SUMMER(<span class="string">&quot;夏天&quot;</span>, <span class="string">&quot;炎热&quot;</span>),</span><br><span class="line">    Other;	<span class="comment">//调用无参构造器</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Season2</span><span class="params">(String name, String desc)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Season2</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="11-2-2-注意事项"><a href="#11-2-2-注意事项" class="headerlink" title="11.2.2 注意事项"></a>11.2.2 注意事项</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>当我们使用 enum 关键字开发一个枚举类时，默认会<strong>继承 Enum 类</strong>, 而且是一个 final 类[如何证明],使用 javap 工具来演示</li>
</ol>
<ol start="2">
<li><p>传统的 public static final Season2 SPRING = new Season2(“春天”, “温暖”); 简化成 SPRING(“春天”, “温暖”)， 这里必须知道，它调用的是哪个构造器. </p>
</li>
<li><p>如果使用无参构造器 创建 枚举对象，则<strong>实参列表和小括号都可以省略</strong></p>
</li>
<li><p>当有多个枚举对象时，<strong>使用”,”间隔，最后有一个分号结尾</strong></p>
</li>
<li><p>枚举对象必须放在枚举类的行首</p>
</li>
</ol>
</div>



<h3 id="11-2-3-Enum类常用方法"><a href="#11-2-3-Enum类常用方法" class="headerlink" title="11.2.3 Enum类常用方法"></a>11.2.3 Enum类常用方法</h3><ul>
<li>说明：使用关键字 enum 时，会隐式继承 Enum 类, 这样我们就可以使用 Enum 类相关的方法。</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231018101743063.png" alt="image-20231018101743063"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Season2 autumn = Season2.AUTUMN;</span><br><span class="line"></span><br><span class="line">        System.out.println(autumn.name());  <span class="comment">//枚举对象的名称（常量名）</span></span><br><span class="line">        System.out.println(autumn.ordinal());   <span class="comment">//枚举对象的次序</span></span><br><span class="line"></span><br><span class="line">        Season2[] values = Season2.values();    <span class="comment">// 返回所有枚举对象的数组</span></span><br><span class="line">        <span class="keyword">for</span> (Season2 season : values) &#123;</span><br><span class="line">            System.out.println(season.name());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据输入字符串查找对应的枚举对象</span></span><br><span class="line">        Season2 winter = Season2.valueOf(<span class="string">&quot;WINTER&quot;</span>);</span><br><span class="line">        System.out.println(winter.name());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 比较两个枚举常量的编号 self.ordinal - other.ordinal</span></span><br><span class="line">        System.out.println(autumn.compareTo(winter));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="11-2-4-enum实现接口"><a href="#11-2-4-enum实现接口" class="headerlink" title="11.2.4 enum实现接口"></a>11.2.4 enum实现接口</h3><ul>
<li>使用 enum 关键字后，就<strong>不能再继承其它类</strong>了，因为 enum 会隐式继承 Enum，而 Java 是单继承机制。</li>
<li>枚举类和普通类一样，<strong>可以实现接口</strong>，如下形式。enum 类名 implements 接口 1，接口 2{}</li>
</ul>
<h2 id="11-3-注解（Annotation）"><a href="#11-3-注解（Annotation）" class="headerlink" title="11.3 注解（Annotation）"></a>11.3 注解（Annotation）</h2><ul>
<li><p>注解(Annotation)也被称为元数据(Metadata)，用于修饰解释 包、类、方法、属性、构造器、局部变量等数据信息。</p>
</li>
<li><p>和注释一样，注解不影响程序逻辑，<strong>但注解可以被编译或运行</strong>，<strong>相当于嵌入在代码中的补充信息</strong>。</p>
</li>
<li><p>在 JavaSE 中，注解的使用目的比较简单，例如标记过时的功能，忽略警告等。在 JavaEE 中注解占据了更重要的角色，例如用来配置应用程序的任何切面，代替 java EE 旧版中所遗留的繁冗代码和 XML 配置等。</p>
</li>
</ul>
<h2 id="11-4-三个基本的Annotation"><a href="#11-4-三个基本的Annotation" class="headerlink" title="11.4 三个基本的Annotation"></a>11.4 三个基本的Annotation</h2><ol>
<li><p><strong>@Override</strong>: 限定某个方法，是重写父类方法, 该注解只能用于方法</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231019093232279.png" alt="image-20231019093232279"></p>
</li>
<li><p><strong>@Deprecated</strong>: 用于表示某个程序元素(类, 方法等)已过时</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231019093638120.png" alt="image-20231019093638120"></p>
</li>
<li><p><strong>@SuppressWarnings</strong>: 抑制编译器警告</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231019094220353.png" alt="image-20231019094220353"></p>
<ul>
<li>(1) 放置的位置就是 TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE</li>
<li>(2) 该注解类有数组 String[] values() 设置一个数组比如 {“rawtypes”, “unchecked”, “unused”}</li>
</ul>
</li>
</ol>
<h2 id="11-5-JDK的元注解（了解）"><a href="#11-5-JDK的元注解（了解）" class="headerlink" title="11.5 JDK的元注解（了解）"></a>11.5 JDK的元注解（了解）</h2><h3 id="11-5-1-基本介绍"><a href="#11-5-1-基本介绍" class="headerlink" title="11.5.1 基本介绍"></a>11.5.1 基本介绍</h3><ul>
<li>JDK 的元 Annotation 用于修饰其他 Annotation</li>
<li>四种<ul>
<li><strong>Retention</strong> //指定注解的作用时间范围，三种 SOURCE,CLASS,RUNTIME</li>
<li><strong>Target</strong> // 指定注解可以在哪些地方使用</li>
<li><strong>Documented</strong> //指定该注解是否会在 javadoc 体现</li>
<li><strong>Inherited</strong> //子类会继承父类注解</li>
</ul>
</li>
</ul>
<h3 id="11-5-2-Retention"><a href="#11-5-2-Retention" class="headerlink" title="11.5.2 Retention"></a>11.5.2 Retention</h3><ul>
<li><p>只能用于修饰一个 Annotation 定义, 用于指定该 Annotation 可以保留多长时间, @Rentention 包含一个 RetentionPolicy类型的成员变量, 使用 @Rentention 时必须为该 value 成员变量指定值:</p>
</li>
<li><p>@Retention 的三种值</p>
<ul>
<li>RetentionPolicy.SOURCE: 编译器使用后，直接丢弃这种策略的注释</li>
<li>RetentionPolicy.CLASS: 编译器将把注解记录在 class 文件中. 当运行 Java 程序时, JVM 不会保留注解。 这是默认值</li>
<li> RetentionPolicy.RUNTIME:编译器将把注解记录在 class 文件中. 当运行 Java 程序时, JVM 会保留注解. 程序可以通过反射获取该注解</li>
</ul>
</li>
<li><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231019100145122.png" alt="image-20231019100145122"></p>
</li>
</ul>
<h3 id="11-5-3-Target"><a href="#11-5-3-Target" class="headerlink" title="11.5.3 Target"></a>11.5.3 Target</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231019100225152.png" alt="image-20231019100225152"></p>
<h3 id="11-5-4-Documented"><a href="#11-5-4-Documented" class="headerlink" title="11.5.4 Documented"></a>11.5.4 Documented</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231019100259358.png" alt="image-20231019100259358"></p>
<h3 id="11-5-5-Inherited"><a href="#11-5-5-Inherited" class="headerlink" title="11.5.5 Inherited"></a>11.5.5 Inherited</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231019100325048.png" alt="image-20231019100325048"> </p>
<h1 id="第十二章-异常"><a href="#第十二章-异常" class="headerlink" title="第十二章 异常"></a>第十二章 异常</h1><h2 id="12-1-基本概念"><a href="#12-1-基本概念" class="headerlink" title="12.1 基本概念"></a>12.1 基本概念</h2><ul>
<li>Java语言中，将程序执行中发生的不正常情况称为“异常”。(开发过程中的语法错误和逻辑错误不是异常)</li>
<li>执行过程中所发生的异常事件可分为两大类<ul>
<li><strong>Error(错误):</strong> Java虚拟机无法解决的严重问题。如:JVM系统内部错误、资源耗尽等严重情况。比如:<strong>StackOverflowError[栈溢出]和OOM(out of memory)</strong>. Error是严重错误,程序会崩溃。</li>
<li><strong>Exception(异常)</strong>: 其它因编程错误或偶然的外在因素导致的一般性问题，可以使用针对性的代码进行处理。例如<strong>空指针访问，试图读取不存在的文件，网络连接中断</strong>等等，Exception分为两大类: <font color="red">运行时异常</font>[程序运行时，发生的异常]和<font color="red">编译时异常</font>[编程时,编译器检查出的异常]。</li>
</ul>
</li>
<li>处理异常快捷键：<strong>Ctrl +Alt + T</strong></li>
</ul>
<h2 id="12-2-异常体系图"><a href="#12-2-异常体系图" class="headerlink" title="12.2 异常体系图"></a>12.2 异常体系图</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231020100303282.png" alt="image-20231020100303282"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231020100407648.png" alt="image-20231020100407648"></p>
<h2 id="12-3-常见运行时异常"><a href="#12-3-常见运行时异常" class="headerlink" title="12.3 常见运行时异常"></a>12.3 常见运行时异常</h2><ul>
<li><strong>NullPointerException</strong> 空指针异常<ul>
<li>当应用程序试图在需要对象的地方使用 null 时，抛出该异常</li>
</ul>
</li>
<li><strong>ArithmeticException</strong> 数学运算异常<ul>
<li>当出现异常的运算条件时，抛出此异常。例如，一个整数“除以零”时</li>
</ul>
</li>
<li><strong>ArrayIndexOutOfBoundsException</strong> 数组下标越界异常<ul>
<li>用非法索引访问数组时抛出的异常。如果索引为负或大于等于数组大小，则该索引为非法索引</li>
</ul>
</li>
<li><strong>ClassCastException</strong> 类型转换异<ul>
<li>当试图将对象强制转换为不是实例的子类时，抛出该异常。</li>
</ul>
</li>
<li><strong>NumberFormatException</strong> 数字格式不正确异常<ul>
<li>当应用程序试图将字符串转换成一种数值类型，但该字符串不能转换为适当格式时，抛出该异常</li>
</ul>
</li>
</ul>
<h2 id="12-4-常见编译异常"><a href="#12-4-常见编译异常" class="headerlink" title="12.4 常见编译异常"></a>12.4 常见编译异常</h2><ul>
<li><strong>SQLException</strong>  操作数据库时，查询表可能发生异常</li>
<li><strong>IOException</strong>  操作文件时，发生的异常</li>
<li><strong>FileNotFoundException</strong>   当操作一个不存在的文件时，发生异常</li>
<li><strong>ClassNotFoundException</strong>    加载类,，而该类不存在时,异常</li>
<li><strong>EOFException</strong>   操作文件，到文件末尾,发生异常</li>
<li><strong>IllegalArguementException</strong>   参数异常</li>
</ul>
<h2 id="12-5-异常处理"><a href="#12-5-异常处理" class="headerlink" title="12.5 异常处理"></a>12.5 异常处理</h2><ul>
<li><p>**<font color="red">try-catch-finally</font>**：程序员在代码中捕获发生的异常，自行处理</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231020102616097.png" alt="image-20231020102616097"></p>
</li>
</ul>
<ul>
<li><p>**<font color="red">throws</font>**：将发生的异常抛出，交给调用者(方法)来处理，最顶级的处理者就是JVM。如果没有try-catch处理，则默认采用throws处理</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231020102734625.png" alt="image-20231020102734625"></p>
</li>
</ul>
<h2 id="12-6-try-catch-异常处理"><a href="#12-6-try-catch-异常处理" class="headerlink" title="12.6 try-catch 异常处理"></a>12.6 try-catch 异常处理</h2><ol>
<li><p>如果异常发生了，则<strong>异常发生后面的代码不会执行</strong>，直接进入到catch块；如果异常没有发生，则顺序执行try的代码块，不会进入到catch.</p>
</li>
<li><p>如果异常没有发生，则<strong>顺序执行 try 的代码块</strong>，不会进入到 catch</p>
</li>
<li><p>如果希望不管是否发生异常，都执行某段代码(比如关闭连接，释放资源等)则使用如下代码- finally</p>
</li>
<li><p><strong>可以有多个catch语句，捕获不同的异常</strong>(进行不同的业务处理)，**要求<font color="red">父类异常在后，子类异常在前</font>**，比如(Exception在后，NullPointerException在前)，如果发生异常，只会匹配一个catch</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TryCatchDetail02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.如果 try 代码块有可能有多个异常</span></span><br><span class="line">        <span class="comment">//2.可以使用多个 catch 分别捕获不同的异常，相应处理</span></span><br><span class="line">        <span class="comment">//3.要求子类异常写在前面，父类异常写在后面</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Person person = <span class="keyword">new</span> Person();</span><br><span class="line">            <span class="comment">// person = null;</span></span><br><span class="line">            System.out.println(person.getName());<span class="comment">//NullPointerException</span></span><br><span class="line">            <span class="keyword">int</span> n1 = <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">int</span> n2 = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> res = n1 / n2;<span class="comment">//ArithmeticException</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;空指针异常=&quot;</span> + e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;算术异常=&quot;</span> + e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">         &#125; <span class="keyword">finally</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>可以进行<strong>try-finally</strong> 配合使用，这种用法<strong>相当于没有捕获异常</strong>，因此程序会直接崩掉/退出。应用场景，就是<strong>执行一段代码，不管是否发生异常，都必须执行某个业务逻辑</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TryCatchDetail02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> n1 = <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">int</span> n2 = <span class="number">0</span>;</span><br><span class="line">            System.out.println(n1 / n2);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;执行了finally...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;程序继续执行...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：</span><br><span class="line">执行了<span class="keyword">finally</span>...    </span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="12-7-try-catch-异常处理练习"><a href="#12-7-try-catch-异常处理练习" class="headerlink" title="12.7 try-catch 异常处理练习"></a>12.7 try-catch 异常处理练习</h2><ul>
<li><p>Exercise01</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TryCatchExercise01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(method());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String[] names = <span class="keyword">new</span> String[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span> (names[<span class="number">1</span>].equals(<span class="string">&quot;durango&quot;</span>)) &#123;</span><br><span class="line">                System.out.println(names[<span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                names[<span class="number">3</span>] = <span class="string">&quot;zlx&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;  <span class="comment">// finally必须执行</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：<span class="number">4</span></span><br></pre></td></tr></table></figure></li>
<li><p>Exercise02</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TryCatchExercise02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(method());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            i++;    <span class="comment">// i=2</span></span><br><span class="line">            String[] names = <span class="keyword">new</span> String[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span> (names[<span class="number">1</span>].equals(<span class="string">&quot;durango&quot;</span>)) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                System.out.println(names[<span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                i++;</span><br><span class="line">                names[<span class="number">3</span>] = <span class="string">&quot;zlx&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> ++i;     <span class="comment">// i=3</span></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;  <span class="comment">// finally必须执行</span></span><br><span class="line">            <span class="keyword">return</span> ++i;     <span class="comment">// i=4</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：<span class="number">4</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>Exercise03</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.trycatch_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TryCatchExercise03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(method());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            i++;    <span class="comment">// i=2</span></span><br><span class="line">            String[] names = <span class="keyword">new</span> String[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span> (names[<span class="number">1</span>].equals(<span class="string">&quot;durango&quot;</span>)) &#123;</span><br><span class="line">                System.out.println(names[<span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                names[<span class="number">3</span>] = <span class="string">&quot;zlx&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> ++i;     <span class="comment">// i=3 ==&gt; 保存到临时变量temp=3并执行完finally后再return!!</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;  <span class="comment">// finally必须执行</span></span><br><span class="line">            ++i;     <span class="comment">// i=4</span></span><br><span class="line">            System.out.println(<span class="string">&quot;i=&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：</span><br><span class="line">i=<span class="number">4</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="12-8-throws异常处理"><a href="#12-8-throws异常处理" class="headerlink" title="12.8 throws异常处理"></a>12.8 throws异常处理</h2><ol>
<li><p>如果一个方法(中的语句执行时)可能生成某种异常，但是并不能确定如何处理这种异常，则此方法应显示地声明抛出异常，表明该方法将不对这些异常进行处理,而<strong>由该方法的调用者负责处理</strong>。</p>
</li>
<li><p>在方法声明中用<strong>throws语句可以声明抛出异常的列表</strong>，throws后面的异常类型可以是方法中产生的异常类型，也可以是它的父类。</p>
</li>
<li><p>注意事项：</p>
<ul>
<li>对于<strong>编译异常</strong>，程序中必须<strong>显式地处理</strong>，比如try-catch或者throws</li>
<li>对于<strong>运行时异常</strong>，程序中如果没有处理，<strong>默认就是抛出的方式处理</strong>（隐式地处理）</li>
<li>子类重写父类的方法时，对抛出异常的规定: <strong>子类重写的方法，所抛出的异常类型要么和父类抛出的异常一致，要么为父类抛出的异常的类型的子类型</strong></li>
<li>在throws 过程中，如果有方法 try-catch,就相当于处理异常，就可以不必throws</li>
</ul>
</li>
<li><p>throw和throws的区别</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231021155142632.png" alt="image-20231021155142632"></p>
</li>
<li><p>一个练习</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.throws_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThrowExercise01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ReturnExceptionDemo.methodA();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ReturnExceptionDemo.methodB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReturnExceptionDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">methodA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;进入方法A&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;制造异常&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;A方法的finally&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;进入方法B&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;B方法的finally&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">输出：</span><br><span class="line">进入方法A</span><br><span class="line">A方法的<span class="keyword">finally</span></span><br><span class="line">制造异常</span><br><span class="line">进入方法B</span><br><span class="line">B方法的<span class="keyword">finally</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="12-9-自定义异常"><a href="#12-9-自定义异常" class="headerlink" title="12.9 自定义异常"></a>12.9 自定义异常</h2><h3 id="12-9-1-基本概念"><a href="#12-9-1-基本概念" class="headerlink" title="12.9.1 基本概念"></a>12.9.1 基本概念</h3><p>​    当程序中出现了某些“错误”，但该错误信息并没有在Throwable子类中描述处理，这个时候可以自己设计异常类,用于描述该错误信息。</p>
<h3 id="12-9-2-步骤"><a href="#12-9-2-步骤" class="headerlink" title="12.9.2 步骤"></a>12.9.2 步骤</h3><ul>
<li>定义类:自定义异常类名(程序员自己写)继承Exception或RuntimeException</li>
<li><strong>如果继承Exception，属于编译异常</strong></li>
<li><strong>如果继承RuntimeException,属于运行异常</strong>(一般来说,继承RuntimeException，好处是可以使用默认处理机制)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> age = <span class="number">180</span>;</span><br><span class="line">        <span class="keyword">if</span> (!(age &gt;= <span class="number">18</span> &amp;&amp; age &lt;= <span class="number">120</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AgeException(<span class="string">&quot;年龄需要再18-120之间&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;输入年龄范围正确&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义异常</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AgeException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AgeException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="第十三章-常用类"><a href="#第十三章-常用类" class="headerlink" title="第十三章 常用类"></a>第十三章 常用类</h1><h2 id="13-1-包装类"><a href="#13-1-包装类" class="headerlink" title="13.1 包装类"></a>13.1 包装类</h2><h3 id="13-1-1-包装类的分类"><a href="#13-1-1-包装类的分类" class="headerlink" title="13.1.1 包装类的分类"></a>13.1.1 包装类的分类</h3><ul>
<li><p>针对八种基本数据类型相应的引用类型—包装类</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023093841832.png" alt="image-20231023093841832"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023093942360.png" alt="image-20231023093942360"></p>
</li>
</ul>
<p>​            <img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023093958943-16980252473951.png" alt="image-20231023093958943"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023094111547.png" alt="image-20231023094111547"></p>
<h3 id="13-1-2-包装类与基本数据类型转换"><a href="#13-1-2-包装类与基本数据类型转换" class="headerlink" title="13.1.2 包装类与基本数据类型转换"></a>13.1.2 包装类与基本数据类型转换</h3><ul>
<li><p>jdk5前的<strong>手动</strong>装箱和拆箱方式，装箱: 基本类型-&gt;包装类型，反之，拆箱</p>
</li>
<li><p>jdk5 以后(含jdk5)的<strong>自动</strong>装箱和拆箱方式</p>
</li>
<li><p><strong>自动装箱底层调用的是valueOf方法</strong>，比如Integer.valueOf()</p>
</li>
<li><p>其它包装类的用法类似，不举例</p>
</li>
<li><p>基本方法：<strong>Interger.<font color="red">valueOf(n)</font>，integer.<font color="red">intValue()</font></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.wrapper_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Integer01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//int &lt;--&gt; Integer</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//jdk5以前是手动装箱和拆箱</span></span><br><span class="line">        <span class="keyword">int</span> n1 = <span class="number">100</span>;</span><br><span class="line">        Integer integer = <span class="keyword">new</span> Integer(n1);</span><br><span class="line">        Integer integer1 = Integer.valueOf(n1);</span><br><span class="line">        <span class="keyword">int</span> i = integer.intValue();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//jdk5以后，就可以自动装箱和拆箱</span></span><br><span class="line">        <span class="keyword">int</span> n2 = <span class="number">100</span>;</span><br><span class="line">        Integer integer2 = n2;  <span class="comment">//底层仍然是使用Integer.valueOf(n2)</span></span><br><span class="line">        <span class="keyword">int</span> j = integer2;       <span class="comment">//底层仍然使用的是 intValue()方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>一个经典面试题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Object obj = <span class="keyword">true</span> ? <span class="keyword">new</span> Integer(<span class="number">1</span>) : <span class="keyword">new</span> Double(<span class="number">2.0</span>);</span><br><span class="line">System.out.println(obj);    <span class="comment">// 输出为1.0，三元运算符是一个整体，结果会向高精度类型转换</span></span><br><span class="line"></span><br><span class="line">Object obj2;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">    obj2 = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    obj2 = <span class="keyword">new</span> Double(<span class="number">2.0</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(obj2);   <span class="comment">// 输出为1</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="13-1-3-包装类与String相互转化"><a href="#13-1-3-包装类与String相互转化" class="headerlink" title="13.1.3 包装类与String相互转化"></a>13.1.3 包装类与String相互转化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.wrapper_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WrapperVSString</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 包装类 --&gt; String</span></span><br><span class="line">        Integer i = <span class="number">100</span>;    <span class="comment">//自动装箱</span></span><br><span class="line">        <span class="comment">// 方式1</span></span><br><span class="line">        String str1 = i + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// 方式2</span></span><br><span class="line">        String str2 = i.toString();</span><br><span class="line">        <span class="comment">// 方式3</span></span><br><span class="line">        String str3 = String.valueOf(i);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// String --&gt; 包装类</span></span><br><span class="line">        String str4 = <span class="string">&quot;1234&quot;</span>;</span><br><span class="line">        <span class="comment">// 方式一</span></span><br><span class="line">        Integer i2 = Integer.parseInt(str4); <span class="comment">//parseInt返回的是int类型，使用到自动装箱</span></span><br><span class="line">        <span class="comment">// 方式二</span></span><br><span class="line">        Integer i3 = <span class="keyword">new</span> Integer(str4);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="13-1-4-Integer类-和-Character类的常用方法"><a href="#13-1-4-Integer类-和-Character类的常用方法" class="headerlink" title="13.1.4 Integer类 和 Character类的常用方法"></a>13.1.4 Integer类 和 Character类的常用方法</h3><ul>
<li>即用即查</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(Integer.MIN_VALUE); <span class="comment">//返回最小值</span></span><br><span class="line">System.out.println(Integer.MAX_VALUE);<span class="comment">//返回最大值</span></span><br><span class="line">System.out.println(Character.isDigit(<span class="string">&#x27;a&#x27;</span>));<span class="comment">//判断是不是数字</span></span><br><span class="line">System.out.println(Character.isLetter(<span class="string">&#x27;a&#x27;</span>));<span class="comment">//判断是不是字母</span></span><br><span class="line">System.out.println(Character.isUpperCase(<span class="string">&#x27;a&#x27;</span>));<span class="comment">//判断是不是大写</span></span><br><span class="line">System.out.println(Character.isLowerCase(<span class="string">&#x27;a&#x27;</span>));<span class="comment">//判断是不是小写</span></span><br><span class="line">System.out.println(Character.isWhitespace(<span class="string">&#x27;a&#x27;</span>));<span class="comment">//判断是不是空格</span></span><br><span class="line">System.out.println(Character.toUpperCase(<span class="string">&#x27;a&#x27;</span>));<span class="comment">//转成大写</span></span><br><span class="line">System.out.println(Character.toLowerCase(<span class="string">&#x27;A&#x27;</span>));<span class="comment">//转成小写</span></span><br></pre></td></tr></table></figure>



<h3 id="13-1-5-经典面试题"><a href="#13-1-5-经典面试题" class="headerlink" title="13.1.5 经典面试题"></a>13.1.5 经典面试题</h3><ul>
<li><p>Exercise01</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Object obj = <span class="keyword">true</span> ? <span class="keyword">new</span> Integer(<span class="number">1</span>) : <span class="keyword">new</span> Double(<span class="number">2.0</span>);</span><br><span class="line">System.out.println(obj);    <span class="comment">// 输出为1.0，三元运算符是一个整体，结果会向高精度类型转换</span></span><br><span class="line"></span><br><span class="line">Object obj2;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">    obj2 = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    obj2 = <span class="keyword">new</span> Double(<span class="number">2.0</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(obj2);   <span class="comment">// 输出为1</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><strong>Exercise02</strong>：<font color="red">查看valueOf源码</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">Integer j = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">System.out.println(i == j); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 如果 i 在 IntegerCache.low(-128)~IntegerCache.high(127),就直接从数组返回</span></span><br><span class="line"><span class="comment">//2. 如果不在 -128~127,就 new Integer(i)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        public static Integer valueOf(int i) &#123;</span></span><br><span class="line"><span class="comment">            if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span></span><br><span class="line"><span class="comment">                return IntegerCache.cache[i + (-IntegerCache.low)];</span></span><br><span class="line"><span class="comment">            return new Integer(i);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Integer m = Integer.valueOf(<span class="number">1</span>); <span class="comment">// 查看valueOf源码</span></span><br><span class="line">Integer n = Integer.valueOf(<span class="number">1</span>);</span><br><span class="line">System.out.println(m == n); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">Integer x = <span class="number">128</span>;    <span class="comment">// 自动包装，底层也是调用Integer.valueOf，看源码</span></span><br><span class="line">Integer y = <span class="number">128</span>;</span><br><span class="line">System.out.println(x == y); <span class="comment">//false</span></span><br></pre></td></tr></table></figure></li>
<li><p>Exercise03</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Integer i1 = <span class="keyword">new</span> Integer(<span class="number">127</span>);</span><br><span class="line">Integer i2 = <span class="keyword">new</span> Integer(<span class="number">127</span>);</span><br><span class="line">System.out.println(i1 == i2);   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">Integer i3 = <span class="keyword">new</span> Integer(<span class="number">128</span>);</span><br><span class="line">Integer i4 = <span class="keyword">new</span> Integer(<span class="number">128</span>);</span><br><span class="line">System.out.println(i3 == i4);   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">Integer i5 = <span class="number">127</span>;</span><br><span class="line">Integer i6 = <span class="number">127</span>;</span><br><span class="line">System.out.println(i5 == i6);   <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">Integer i7 = <span class="number">128</span>;</span><br><span class="line">Integer i8 = <span class="number">128</span>;</span><br><span class="line">System.out.println(i7 == i8);   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">Integer i9 = <span class="number">127</span>;</span><br><span class="line">Integer i10 = <span class="keyword">new</span> Integer(<span class="number">127</span>);</span><br><span class="line">System.out.println(i9 == i10);  <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只要有基本数据类型，判断的就是值是否相等</span></span><br><span class="line">Integer i11 = <span class="number">127</span>;</span><br><span class="line"><span class="keyword">int</span> i12 = <span class="number">127</span>;</span><br><span class="line">System.out.println(i11 == i12); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">Integer i13 = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">int</span> i14 = <span class="number">128</span>;</span><br><span class="line">System.out.println(i13 == i14); <span class="comment">//true</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-2-String类-（重要！）"><a href="#13-2-String类-（重要！）" class="headerlink" title="13.2 String类 （重要！）"></a>13.2 String类 （重要！）</h2><h3 id="13-2-1-String基本介绍"><a href="#13-2-1-String基本介绍" class="headerlink" title="13.2.1 String基本介绍"></a>13.2.1 String基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023104323731.png" alt="image-20231023104323731"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023104356952.png" alt="image-20231023104356952"></p>
<ul>
<li>构造器<ul>
<li>String s1 = new String();</li>
<li>String s2 = new String(String original);</li>
<li>String s3 = new String(char[] a);</li>
<li>String s4 = new String(char[] a,int startIndex,int count)</li>
<li> String s5 = new String(byte[] b)</li>
</ul>
</li>
<li>String 类实现了接口 Serializable【String 可以串行化:可以在网络传输】 接口 Comparable [String 对象可以比较大小]</li>
<li>String 是 <strong>final 类</strong>，因此不能被其他的类继承</li>
<li>String 有属性 <strong><font color="red">private final char value[]; 用于存放字符串内容</font></strong></li>
<li>**<font color="red">一定要注意</font>**：value 是一个 final 类型（的引用类型）， 不可以修改：即 <strong>value 不能指向新的地址</strong>，但是单个字符内容是可以变化</li>
</ul>
<h3 id="13-2-2-创建-String-对象的两种方式"><a href="#13-2-2-创建-String-对象的两种方式" class="headerlink" title="13.2.2 创建 String 对象的两种方式"></a>13.2.2 创建 String 对象的两种方式</h3><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44273302/article/details/115343069">字符串常量 VS 字符串对象</a></li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023110429072.png" alt="image-20231023110429072"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231023110742572.png" alt="image-20231023110742572"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建String对象</span></span><br><span class="line"><span class="comment">// 1.直接赋值 字符串常量</span></span><br><span class="line"><span class="comment">// 2.调用构造器 创建字符串对象</span></span><br><span class="line">String str1 = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">String str2 = <span class="keyword">new</span> String(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">System.out.println(str1 == str2);   <span class="comment">//false（比较的是引用地址）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// str1指向的是常量池中的&quot;abc&quot;</span></span><br><span class="line"><span class="comment">// str2指向的是堆中的String对象空间，其中维护的一个value属性指向常量池中的&quot;abc&quot;</span></span><br></pre></td></tr></table></figure>



<h3 id="13-2-3-练习题"><a href="#13-2-3-练习题" class="headerlink" title="13.2.3 练习题"></a>13.2.3 练习题</h3><ul>
<li><p>Exercise01</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String a = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">String b = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">System.out.println(a.equals(b)); <span class="comment">//true 查看equals源码，equals比较的是value数组的每一个字符</span></span><br><span class="line">System.out.println(a == b); <span class="comment">//true 都是指向常量池中的&quot;abc&quot;，==比较的是地址</span></span><br></pre></td></tr></table></figure></li>
<li><p>Exercise02</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String c = <span class="keyword">new</span> String(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">String d = <span class="keyword">new</span> String(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">System.out.println(c.equals(d)); <span class="comment">//true</span></span><br><span class="line">System.out.println(c == b); <span class="comment">//false c和d指向堆中不同的对象空间，都维护了value属性指向常量池中的&quot;abc&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Exercise03</p>
<ul>
<li><font color="red">当调用<strong>intern方法</strong>时，如果池已经包含一个等于此String对象的字符串(用equals(Object)方法确定），则返回池中的字符串。否则，将此 String 对象加到池中，并返回此String 对象的引用</font></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String a = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">String b = <span class="keyword">new</span> String(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">System.out.println(a.equals(b)); <span class="comment">//true</span></span><br><span class="line">System.out.println(a == b); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">System.out.println(a == b.intern()); <span class="comment">// true b.intern()返回的是常量池的地址(value指向的地址)</span></span><br><span class="line">System.out.println(b == b.intern()); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-3-字符串特性及面试题"><a href="#13-3-字符串特性及面试题" class="headerlink" title="13.3 字符串特性及面试题"></a>13.3 字符串特性及面试题</h2><h3 id="13-3-1-字符串特性"><a href="#13-3-1-字符串特性" class="headerlink" title="13.3.1 字符串特性"></a>13.3.1 字符串特性</h3><ul>
<li><p>String是一个<strong>final</strong>类，代表不可变的字符序列</p>
</li>
<li><p>字符串是不可变的。一个<strong>字符串对象一旦被分配，其内容是不可变的</strong>。（区分对象的引用和对象本身）</p>
<ul>
<li>```java<br>String s1 = “hello”;<br>s1 = “haha”;<br>// 创建了几个对象，画出内存布局图<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  ![image-20231024103622642](Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231024103622642.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 13.3.2 面试题</span><br><span class="line"></span><br><span class="line">- 题目1</span><br><span class="line"></span><br><span class="line">  ![image-20231024103856817](Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231024103856817.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 题目2</span><br><span class="line"></span><br><span class="line">  - &lt;font color=&#x27;red&#x27;&gt;两个字符串**常量相加**，直接在**池**中创建新常量。引用直接指向池中的这个常量&lt;/font&gt;</span><br><span class="line">  - &lt;font color=&#x27;red&#x27;&gt;两个字符串**变量相加**，在**堆**中创建字符串对象，value[]指向池中的新常量。引用指向的是堆中的字符串对象。&lt;/font&gt;</span><br><span class="line">  - 常量相加指向池，变量相加指向堆</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  String a = &quot;hello&quot;;</span><br><span class="line">  String b = &quot;haha&quot;;</span><br><span class="line">  String c = &quot;hello&quot; + &quot;haha&quot;;</span><br><span class="line">  // 优化等价于String c = &quot;hellohaha&quot;;</span><br><span class="line">  // c指向池中的&quot;hellohaha&quot;</span><br><span class="line">  </span><br><span class="line">  System.out.println(c == &quot;hellohaha&quot;); // true</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String a = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">String b = <span class="string">&quot;haha&quot;</span>;</span><br><span class="line">String c = a + b;</span><br><span class="line"><span class="comment">// 1. 先创建一个StringBuilder sb = StringBuilder()</span></span><br><span class="line"><span class="comment">// 2. 执行 sb.append(&quot;hello&quot;)</span></span><br><span class="line"><span class="comment">// 3. 执行 sb.append(&quot;haha&quot;)</span></span><br><span class="line"><span class="comment">// 4. 调用 sb.toString(), 返回一个new String(&quot;hellohaha&quot;)给c</span></span><br><span class="line"><span class="comment">// 最终效果，c指向堆中的对象(String), value[]指向池中的&quot;hellohaha&quot;</span></span><br><span class="line"></span><br><span class="line">System.out.println(c == <span class="string">&quot;hellohaha&quot;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
<li><p>题目3</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231024111346679.png" alt="image-20231024111346679"></p>
</li>
</ul>
<ul>
<li><p>题目4</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.string_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">String07</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test1 ex = <span class="keyword">new</span> Test1();</span><br><span class="line">        ex.change(ex.str, ex.ch);</span><br><span class="line">        System.out.println(ex.str); <span class="comment">//hsp</span></span><br><span class="line">        System.out.println(ex.ch);  <span class="comment">//hava</span></span><br><span class="line">        <span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>];</span><br><span class="line"><span class="comment">//        ex.ch = new char[]&#123;&#x27;a&#x27;, &#x27;b&#x27;&#125;; 报错，ex.ch是final类型，不能重新指向新对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    String str = <span class="keyword">new</span> String(<span class="string">&quot;hsp&quot;</span>);</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">char</span>[] ch = &#123;<span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;a&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(String str, <span class="keyword">char</span>[] ch)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//str是形参，调用时指向实参对象</span></span><br><span class="line">        str = <span class="string">&quot;java&quot;</span>;	<span class="comment">//str重新指向新的对象后不会影响实参对象</span></span><br><span class="line">        ch[<span class="number">0</span>] = <span class="string">&#x27;h&#x27;</span>;</span><br><span class="line">        ch = <span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>&#125;;</span><br><span class="line">        System.out.println(str); <span class="comment">//java</span></span><br><span class="line">        System.out.println(ch); <span class="comment">// ab</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BB%98%E5%9B%BE1.jpg" alt="绘图1"></p>
</li>
</ul>
<h2 id="13-4-String类常见方法"><a href="#13-4-String类常见方法" class="headerlink" title="13.4 String类常见方法"></a>13.4 String类常见方法</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231025164812593.png" alt="image-20231025164812593"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. equals 比较内容是否相同，区分大小写</span></span><br><span class="line">String str1 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">String str2 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">System.out.println(str1.equals(str2));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.equalsIgnoreCase 忽略大小写的判断内容是否相等</span></span><br><span class="line">String username = <span class="string">&quot;johN&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="string">&quot;john&quot;</span>.equalsIgnoreCase(username)) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Success!&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Failure!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.length 获取字符的个数，字符串的长度</span></span><br><span class="line">System.out.println(<span class="string">&quot;韩顺平&quot;</span>.length());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.indexOf 获取字符在字符串对象中第一次出现的索引，索引从 0 开始，如果找不到，返回-1</span></span><br><span class="line">String s1 = <span class="string">&quot;wer@terwe@g&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> index = s1.indexOf(<span class="string">&#x27;@&#x27;</span>);</span><br><span class="line">System.out.println(index);<span class="comment">// 3</span></span><br><span class="line">System.out.println(<span class="string">&quot;weIndex=&quot;</span> + s1.indexOf(<span class="string">&quot;we&quot;</span>));<span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.lastIndexOf 获取字符在字符串中最后一次出现的索引，索引从 0 开始，如果找不到，返回-1</span></span><br><span class="line">s1 = <span class="string">&quot;wer@terwe@g@&quot;</span>;</span><br><span class="line">index = s1.lastIndexOf(<span class="string">&#x27;@&#x27;</span>);</span><br><span class="line">System.out.println(index);<span class="comment">//11</span></span><br><span class="line">System.out.println(<span class="string">&quot;ter 的位置=&quot;</span> + s1.lastIndexOf(<span class="string">&quot;ter&quot;</span>));<span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.substring 截取指定范围的子串[start, end)</span></span><br><span class="line">String name = <span class="string">&quot;hello,张三&quot;</span>;</span><br><span class="line"><span class="comment">//下面 name.substring(6) 从索引 6 开始截取后面所有的内容</span></span><br><span class="line">System.out.println(name.substring(<span class="number">6</span>));<span class="comment">//截取后面的字符</span></span><br><span class="line"><span class="comment">//name.substring(0,5)表示从索引 0 开始截取，截取到索引 5-1=4 位置</span></span><br><span class="line">System.out.println(name.substring(<span class="number">2</span>,<span class="number">5</span>));<span class="comment">//llo</span></span><br></pre></td></tr></table></figure>



<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231025165410347.png" alt="image-20231025165410347"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.toUpperCase 转换成大写</span></span><br><span class="line">String s = <span class="string">&quot;heLLo&quot;</span>;</span><br><span class="line">System.out.println(s.toUpperCase());<span class="comment">//HELLO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.toLowerCase</span></span><br><span class="line">System.out.println(s.toLowerCase());<span class="comment">//hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.concat 拼接字符串</span></span><br><span class="line">String s1 = <span class="string">&quot;宝玉&quot;</span>;</span><br><span class="line">s1 = s1.concat(<span class="string">&quot;林黛玉&quot;</span>).concat(<span class="string">&quot;薛宝钗&quot;</span>).concat(<span class="string">&quot;together&quot;</span>);</span><br><span class="line">System.out.println(s1);<span class="comment">//宝玉林黛玉薛宝钗 together</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.replace 替换字符串中的字符</span></span><br><span class="line">s1 = <span class="string">&quot;宝玉 and 林黛玉 林黛玉 林黛玉&quot;</span>;</span><br><span class="line"><span class="comment">//在 s1 中，将 所有的 林黛玉 替换成薛宝钗</span></span><br><span class="line"><span class="comment">// s1.replace() 方法执行后，返回的结果才是替换过的. // 注意对 s1 没有任何影响</span></span><br><span class="line">String s11 = s1.replace(<span class="string">&quot;林黛玉&quot;</span>, <span class="string">&quot;薛宝钗&quot;</span>);</span><br><span class="line">System.out.println(s1);<span class="comment">//宝玉 and 林黛玉 林黛玉 林黛玉</span></span><br><span class="line">System.out.println(s11);<span class="comment">//宝玉 and 薛宝钗 薛宝钗 薛宝钗</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.split 分割字符串, 对于某些分割字符，我们需要 转义比如 | \\等</span></span><br><span class="line">String poem = <span class="string">&quot;锄禾日当午,汗滴禾下土,谁知盘中餐,粒粒皆辛苦&quot;</span>;</span><br><span class="line">String[] split = poem.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">poem = <span class="string">&quot;E:\\aaa\\bbb&quot;</span>;</span><br><span class="line">split = poem.split(<span class="string">&quot;\\\\&quot;</span>); <span class="comment">//分隔符为&quot;\\&quot;</span></span><br><span class="line">System.out.println(<span class="string">&quot;==分割后内容===&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; split.length; i++) &#123;</span><br><span class="line">    System.out.println(split[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.toCharArray 转换成字符数组</span></span><br><span class="line">s = <span class="string">&quot;happy&quot;</span>;</span><br><span class="line"><span class="keyword">char</span>[] chs = s.toCharArray();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; chs.length; i++) &#123;</span><br><span class="line">    System.out.println(chs[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7.compareTo 比较两个字符串的大小，如果前者大，</span></span><br><span class="line"><span class="comment">// 则返回正数，后者大，则返回负数，如果相等，返回 0</span></span><br><span class="line"><span class="comment">// (1) 如果长度相同，并且每个字符也相同，就返回 0</span></span><br><span class="line"><span class="comment">// (2) 如果长度相同或者不相同，但是在进行比较时，可以区分大小</span></span><br><span class="line"><span class="comment">// 就返回 if (c1 != c2) &#123;</span></span><br><span class="line"><span class="comment">// return c1 - c2;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// (3) 如果前面的部分都相同，就返回 str1.len - str2.len</span></span><br><span class="line">String a = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">String b = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">System.out.println(a.compareTo(b)); <span class="comment">// 返回值是0</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">b = <span class="string">&quot;jcck&quot;</span>;</span><br><span class="line">System.out.println(a.compareTo(b)); <span class="comment">// 返回值是&#x27;a&#x27;-&#x27;c&#x27;=-2</span></span><br><span class="line">a = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">b = <span class="string">&quot;jckcc&quot;</span>;</span><br><span class="line">System.out.println(a.compareTo(b)); <span class="comment">// 返回值是&#x27;a&#x27;-&#x27;c&#x27;=-2</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">b = <span class="string">&quot;jackabc&quot;</span>;</span><br><span class="line">System.out.println(a.compareTo(b)); <span class="comment">// 返回值是str1.len - str2.len = -3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 8.format 格式字符串</span></span><br><span class="line"><span class="comment">/* 占位符有:</span></span><br><span class="line"><span class="comment">         * %s 字符串 %c 字符 %d 整型 %.2f 浮点型</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">String name = <span class="string">&quot;john&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> age = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">double</span> score = <span class="number">56.857</span>;</span><br><span class="line"><span class="keyword">char</span> gender = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="comment">//将所有的信息都拼接在一个字符串.</span></span><br><span class="line">String info =</span><br><span class="line">    <span class="string">&quot;我的姓名是&quot;</span> + name + <span class="string">&quot;年龄是&quot;</span> + age + <span class="string">&quot;,成绩是&quot;</span> + score + <span class="string">&quot;性别是&quot;</span> + gender + <span class="string">&quot;。希望大家喜欢我！&quot;</span>;</span><br><span class="line">System.out.println(info);</span><br><span class="line"><span class="comment">//1. %s , %d , %.2f %c 称为占位符</span></span><br><span class="line"><span class="comment">//2. 这些占位符由后面变量来替换</span></span><br><span class="line"><span class="comment">//3. %s 表示后面由 字符串来替换</span></span><br><span class="line"><span class="comment">//4. %d 是整数来替换</span></span><br><span class="line"><span class="comment">//5. %.2f 表示使用小数来替换，替换后，只会保留小数点两位, 并且进行四舍五入的处理</span></span><br><span class="line"><span class="comment">//6. %c 使用 char 类型来替换</span></span><br><span class="line">String formatStr = <span class="string">&quot;我的姓名是%s 年龄是%d，成绩是%.2f 性别是%c.希望大家喜欢我！&quot;</span>;</span><br><span class="line">String info2 = String.format(formatStr, name, age, score, gender);</span><br><span class="line">System.out.println(<span class="string">&quot;info2=&quot;</span> + info2);</span><br></pre></td></tr></table></figure>



<h2 id="13-5-StringBuffer类"><a href="#13-5-StringBuffer类" class="headerlink" title="13.5 StringBuffer类"></a>13.5 StringBuffer类</h2><h3 id="13-5-1-基本介绍"><a href="#13-5-1-基本介绍" class="headerlink" title="13.5.1 基本介绍"></a>13.5.1 基本介绍</h3><ul>
<li>String类是保存字符串常量的<strong>。每次更新都需要重新开辟空间(new 对象)，效率较低</strong>, 因此java设计者还提供了String Builder 和 StringBuffer 来增强String的功能并提高效率。</li>
<li>java.lang.StringBuffer代表<strong>可变的字符序列</strong>，可以对字符串内容进行增删</li>
<li>很多方法与String相同，但StringBuffer是<strong>可变长度的</strong>。</li>
<li>StringBuffer是一个<strong>容器</strong>。</li>
</ul>
<ul>
<li><p>继承关系图</p>
<ol>
<li>StringBuffer 的直接父类 是 AbstractStringBuilder</li>
<li> StringBuffer 实现了 Serializable, 即 StringBuffer 的对象可以串行化</li>
<li> 在父类中 AbstractStringBuilder <strong><font color="red">有属性 char[] value, 不是 final， 该value数组存放字符串内容，存放在堆中（而不是存放在常量池）</font></strong></li>
<li>StringBuffer 是一个 final 类，不能被继承</li>
<li>因为 StringBuffer字符内容是存放在 char[] value, 所以变化(增加/删除)，<strong>不用每次</strong>都更换地址(即不是每次创建新对象)， 所以效率高于 String</li>
</ol>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231026102141270.png" alt="image-20231026102141270"></p>
</li>
</ul>
<p>​    </p>
<h3 id="13-5-2-StingBuffer-VS-String-（重要！）"><a href="#13-5-2-StingBuffer-VS-String-（重要！）" class="headerlink" title="13.5.2 StingBuffer VS String （重要！）"></a>13.5.2 StingBuffer VS String （重要！）</h3><ul>
<li><p>​    <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/640172085">Java中的String类真的不可变吗？java面试常见问题</a></p>
</li>
<li><p>String通过 <font color="red">private final char value[]</font>属性 保存的是<strong>字符串常量</strong>，保存在<strong>常量池</strong>。</p>
<ul>
<li>value是private的，且String内部没有提供setValue方法修改value数组里面的内容，即从String类外部无法修改value数组里面的内容（不代表不能修改）【value内容的不可变性】；</li>
<li>value是final的，所以value不能重新指向新的字符串常量【value地址的不可变性】</li>
<li>因为有这两个不可变性，我们对String的更新既不能通过改变value的内容实现，也不能通过改变value的地址实现。每次String类的更新，实际上是在堆中new了一个新的String对象，这个对象的value属性指向了常量池中新的字符串常量，因此效率较低 。</li>
</ul>
</li>
<li><p>StringBuffer通过 <font color="red">char[] value</font>属性 保存的是<strong>字符串变量</strong>，保存在<strong>堆</strong>中。</p>
<ul>
<li>value数组里面的内容可以修改，value的地址也可以修改。</li>
<li>StringBuffer的更新实际上可以修改内容，<strong>不用每次修改地址</strong>（除非数组要扩容），因此效率较高。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> String a = <span class="string">&quot;avd&quot;</span>;</span><br><span class="line"><span class="comment">//a = &quot;ac&quot;; 报错 final修饰的引用类型不能修改其地址（引用类型赋值是赋地址）</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">char</span>[] b = <span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;v&#x27;</span>,<span class="string">&#x27;d&#x27;</span>&#125;;</span><br><span class="line">b[<span class="number">1</span>] = <span class="string">&#x27;c&#x27;</span>; <span class="comment">// final修饰的char数组内容可以修改</span></span><br><span class="line"><span class="comment">// b = new char[]&#123;&#x27;a&#x27;,&#x27;c&#x27;&#125;; 报错 // final修饰的char数组地址不可以修改</span></span><br></pre></td></tr></table></figure>



<h3 id="13-5-3-StringBuffer与String相互转化"><a href="#13-5-3-StringBuffer与String相互转化" class="headerlink" title="13.5.3 StringBuffer与String相互转化"></a>13.5.3 StringBuffer与String相互转化</h3><ul>
<li><p>StringBuffer构造器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//StringBuffer构造器</span></span><br><span class="line"><span class="comment">//1. 创建一个大小为 16 的char[] value,用于存放字符内容</span></span><br><span class="line">StringBuffer stringBuffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"><span class="comment">//2. 通过构造器指定char[] value的大小</span></span><br><span class="line">stringBuffer = <span class="keyword">new</span> StringBuffer(<span class="number">100</span>);</span><br><span class="line"><span class="comment">//3. 通过给一个String创建StringBuffer,char[] value大小是str.length()+16</span></span><br></pre></td></tr></table></figure></li>
<li><p>String–&gt;StringBuffer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// String --&gt; StringBuffer</span></span><br><span class="line"><span class="comment">// 1. 通过构造器</span></span><br><span class="line">String str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">StringBuffer stringBuffer1 = <span class="keyword">new</span> StringBuffer(str);</span><br><span class="line"><span class="comment">// 2.通过append</span></span><br><span class="line">StringBuffer stringBuffer2 = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">stringBuffer2.append(str);</span><br></pre></td></tr></table></figure></li>
<li><p>StringBuffer–&gt;String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//StringBuffer -&gt;String</span></span><br><span class="line">StringBuffer stringBuffer3 = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;hello,world&quot;</span>);</span><br><span class="line"><span class="comment">//1.使用构造器来搞定</span></span><br><span class="line">String s = <span class="keyword">new</span> String(stringBuffer3);</span><br><span class="line"><span class="comment">//2. 使用 StringBuffer 提供的 toString 方法</span></span><br><span class="line">String s1 = stringBuffer3.toString();</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="13-5-4-StringBuffer常用方法"><a href="#13-5-4-StringBuffer常用方法" class="headerlink" title="13.5.4 StringBuffer常用方法"></a>13.5.4 StringBuffer常用方法</h3><ul>
<li>增<ul>
<li>s.<strong>append</strong>(string)</li>
</ul>
</li>
<li>删<ul>
<li>s.<strong>delete</strong>(start, end)，删除索引在区间 [start,end) 处的字符</li>
</ul>
</li>
<li>改<ul>
<li>s.<strong>replace</strong>(start, end, string)，替换区间[start,end) 处的字符</li>
</ul>
</li>
<li>查<ul>
<li>s.<strong>indexOf</strong>(string)，查找指定的子串在字符串第一次出现的索引，如果找不到返回-1</li>
</ul>
</li>
<li>插<ul>
<li>s.<strong>insert</strong>(index, string)，在指定索引index前插入</li>
</ul>
</li>
<li>长度<ul>
<li>s.<strong>length</strong>()</li>
</ul>
</li>
<li>注意！！String类型的修改会返回一个新的String对象，不会影响原String对象，因此需要一个新的引用或者将原引用指向这个新的String对象。<strong>StringBuffer的修改会直接影响到原StringBuffer对象，原引用即指向修改后的StringBuffer对象。</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer s = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="comment">//增</span></span><br><span class="line">s.append(<span class="string">&#x27;,&#x27;</span>);<span class="comment">// &quot;hello,&quot;</span></span><br><span class="line">s.append(<span class="string">&quot;张三丰&quot;</span>);<span class="comment">//&quot;hello,张三丰&quot;</span></span><br><span class="line">s.append(<span class="string">&quot;赵敏&quot;</span>).append(<span class="number">100</span>).append(<span class="keyword">true</span>).append(<span class="number">10.5</span>);<span class="comment">//&quot;hello,张三丰赵敏 100true10.5&quot;</span></span><br><span class="line">System.out.println(s);<span class="comment">//&quot;hello,张三丰赵敏 100true10.5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 删除索引为&gt;=start &amp;&amp; &lt;end 处的字符</span></span><br><span class="line"><span class="comment">* 解读: 删除 11~14 的字符 [11, 14)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">s.delete(<span class="number">11</span>, <span class="number">14</span>);</span><br><span class="line">System.out.println(s);<span class="comment">//&quot;hello,张三丰赵敏 true10.5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//改</span></span><br><span class="line"><span class="comment">//老韩解读，使用 周芷若 替换 索引 9-11 的字符 [9,11)</span></span><br><span class="line">s.replace(<span class="number">9</span>, <span class="number">11</span>, <span class="string">&quot;周芷若&quot;</span>);</span><br><span class="line">System.out.println(s);<span class="comment">//&quot;hello,张三丰周芷若 true10.5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查</span></span><br><span class="line"><span class="comment">//查找指定的子串在字符串第一次出现的索引，如果找不到返回-1</span></span><br><span class="line"><span class="keyword">int</span> indexOf = s.indexOf(<span class="string">&quot;张三丰&quot;</span>);</span><br><span class="line">System.out.println(indexOf);<span class="comment">//6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//插</span></span><br><span class="line"><span class="comment">//老韩解读，在索引为 9 的位置插入 &quot;赵敏&quot;,原来索引为 9 的内容自动后移</span></span><br><span class="line">s.insert(<span class="number">9</span>, <span class="string">&quot;赵敏&quot;</span>);</span><br><span class="line">System.out.println(s);<span class="comment">//&quot;hello,张三丰赵敏周芷若 true10.5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//长度</span></span><br><span class="line">System.out.println(s.length());<span class="comment">//22</span></span><br><span class="line">System.out.println(s);</span><br></pre></td></tr></table></figure>



<h3 id="13-5-5-测试题"><a href="#13-5-5-测试题" class="headerlink" title="13.5.5 测试题"></a>13.5.5 测试题</h3><ul>
<li><p>Exercise01 区分<strong>空指针 和 空字符串</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="keyword">null</span>;  <span class="comment">// str是个空指针，没有赋值（地址）</span></span><br><span class="line">StringBuffer stringBuffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">stringBuffer.append(str);   <span class="comment">////需要看源码,底层调用的是AbstractStringBuilder的appendNull</span></span><br><span class="line">System.out.println(stringBuffer.length()); <span class="comment">// 4</span></span><br><span class="line">System.out.println(stringBuffer); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//下面的构造器，会抛出NullpointerException</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    StringBuffer stringBuffer1 = <span class="keyword">new</span> StringBuffer(str); <span class="comment">// 看底层源码super(str.length()+16);</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">String str1 = <span class="string">&quot;&quot;</span>;   <span class="comment">//str1不是空指针，指向看内存中一个空字符串</span></span><br><span class="line">StringBuffer stringBuffer2 = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">stringBuffer.append(str1);   <span class="comment">////需要看源码,底层调用的是AbstractStringBuilder的appendNull</span></span><br><span class="line">System.out.println(stringBuffer2.length()); <span class="comment">// 0</span></span><br><span class="line">System.out.println(stringBuffer2); <span class="comment">// 无输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//下面的构造器，不会报错</span></span><br><span class="line">StringBuffer stringBuffer3 = <span class="keyword">new</span> StringBuffer(str1); <span class="comment">// 看底层源码super(str.length()+16);</span></span><br><span class="line">System.out.println(stringBuffer2.length()); <span class="comment">// 0</span></span><br><span class="line">System.out.println(stringBuffer3); <span class="comment">//无输出</span></span><br></pre></td></tr></table></figure></li>
<li><p>Exercise02 将价格格式化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String price = <span class="string">&quot;123443545123.57&quot;</span>;</span><br><span class="line">StringBuffer sb = <span class="keyword">new</span> StringBuffer(price);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = sb.lastIndexOf(<span class="string">&quot;.&quot;</span>) - <span class="number">3</span>; i &gt; <span class="number">0</span>; i -= <span class="number">3</span>) &#123;</span><br><span class="line">    sb.insert(i, <span class="string">&quot;,&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(sb);<span class="comment">//123,443,545,123.57</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-6-StringBuilder"><a href="#13-6-StringBuilder" class="headerlink" title="13.6 StringBuilder"></a>13.6 StringBuilder</h2><h3 id="13-6-1-基本介绍"><a href="#13-6-1-基本介绍" class="headerlink" title="13.6.1 基本介绍"></a>13.6.1 基本介绍</h3><ul>
<li>一个可变的字符序列。此类提供一个与 StringBuffer兼容的API, 但不保证同步(<font color="red">StringBuilder 不是线程安全</font>)。该类被设计用作 StringBuffer的一个简易替换，<strong>用在<font color="red">字符串缓冲区被单个线程使用</font>的时候</strong>。如果可能，建议优先采用该类因为在大多数实现中，它比 StringBuffer 要快[后面测]。</li>
<li>在StringBuilder上的主要操作是 append和insert方法，可重载这些方法,以接受任意类型的数据。</li>
</ul>
<ul>
<li><p>继承关系图</p>
<ul>
<li>StringBuilder 继承 AbstractStringBuilder 类</li>
<li> 实现了 Serializable ,说明 StringBuilder 对象是可以串行化(对象可以网络传输,可以保存到文件)</li>
<li>StringBuilder 是 final 类, 不能被继承</li>
<li>StringBuilder 对象字符序列仍然是存放在其父类AbstractStringBuilder 的 <strong>char[] value;</strong> 因此，字符序列是堆中</li>
<li>StringBuilder 的方法，<font color="red">没有做互斥的处理,即没有 <strong>synchronized</strong> 关键字,因此在<strong>单线程</strong>的情况下使用</font></li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231028145818607.png" alt="image-20231028145818607"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231028150627951.png" alt="image-20231028150627951"></p>
</li>
</ul>
<h3 id="13-6-2-String-StringBuffer-StringBuilder比较（重要！）"><a href="#13-6-2-String-StringBuffer-StringBuilder比较（重要！）" class="headerlink" title="13.6.2 String StringBuffer StringBuilder比较（重要！）"></a>13.6.2 String StringBuffer StringBuilder比较（重要！）</h3><ul>
<li><p>字符串生成器和StringBuffer非常类似，均代表可变的字符序列，而且方法也一样</p>
</li>
<li><p>字符串：不可变字符序列(final char value[])，<font color="red">效率低，但是复用率高</font>.</p>
</li>
<li><p>StringBuffer：可变字符序列(char[] value)、<font color="red">效率较高(增删)、线程安全</font>，看源码</p>
</li>
<li><p>StringBuilder：可变字符序列、<font color="red">效率最高、线程不安全</font></p>
</li>
<li><p>如何选择</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231028151831369.png" alt="image-20231028151831369"></p>
</li>
</ul>
<h3 id="13-6-3-效率测试"><a href="#13-6-3-效率测试" class="headerlink" title="13.6.3 效率测试"></a>13.6.3 效率测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> startTime = <span class="number">0L</span>;</span><br><span class="line"><span class="keyword">long</span> endTime = <span class="number">0L</span>;</span><br><span class="line">StringBuffer buffer = <span class="keyword">new</span> StringBuffer(<span class="string">&quot;&quot;</span>);</span><br><span class="line">startTime = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">80000</span>; i++) &#123;<span class="comment">//StringBuffer 拼接 20000 次</span></span><br><span class="line">    buffer.append(String.valueOf(i));</span><br><span class="line">&#125;</span><br><span class="line">endTime = System.currentTimeMillis();</span><br><span class="line">System.out.println(<span class="string">&quot;StringBuffer 的执行时间：&quot;</span> + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">StringBuilder builder = <span class="keyword">new</span> StringBuilder(<span class="string">&quot;&quot;</span>);</span><br><span class="line">startTime = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">80000</span>; i++) &#123;<span class="comment">//StringBuilder 拼接 20000 次</span></span><br><span class="line">    builder.append(String.valueOf(i));</span><br><span class="line">&#125;</span><br><span class="line">endTime = System.currentTimeMillis();</span><br><span class="line">System.out.println(<span class="string">&quot;StringBuilder 的执行时间：&quot;</span> + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">String text = <span class="string">&quot;&quot;</span>;</span><br><span class="line">startTime = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">80000</span>; i++) &#123;<span class="comment">//String 拼接 20000</span></span><br><span class="line">    text = text + i;</span><br><span class="line">&#125;</span><br><span class="line">endTime = System.currentTimeMillis();</span><br><span class="line">System.out.println(<span class="string">&quot;String 的执行时间：&quot;</span> + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">StringBuffer 的执行时间：<span class="number">6</span></span><br><span class="line">StringBuilder 的执行时间：<span class="number">4</span></span><br><span class="line">String 的执行时间：<span class="number">5644</span></span><br></pre></td></tr></table></figure>





<h2 id="13-7-Math类"><a href="#13-7-Math类" class="headerlink" title="13.7 Math类"></a>13.7 Math类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//看看 Math 常用的方法(静态方法)</span></span><br><span class="line"><span class="comment">//1.abs 绝对值</span></span><br><span class="line"><span class="keyword">int</span> abs = Math.abs(-<span class="number">9</span>);</span><br><span class="line">System.out.println(abs);<span class="comment">//9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.pow 求幂</span></span><br><span class="line"><span class="keyword">double</span> pow = Math.pow(<span class="number">2</span>, <span class="number">4</span>);<span class="comment">//2 的 4 次方</span></span><br><span class="line">System.out.println(pow);<span class="comment">//16</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.ceil 向上取整,返回&gt;=该参数的最小整数(转成 double);</span></span><br><span class="line"><span class="keyword">double</span> ceil = Math.ceil(<span class="number">3.9</span>);</span><br><span class="line">System.out.println(ceil);<span class="comment">//4.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.floor 向下取整，返回&lt;=该参数的最大整数(转成 double)</span></span><br><span class="line"><span class="keyword">double</span> floor = Math.floor(<span class="number">4.001</span>);</span><br><span class="line">System.out.println(floor);<span class="comment">//4.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.round 四舍五入 Math.floor(该参数+0.5)</span></span><br><span class="line"><span class="keyword">long</span> round = Math.round(<span class="number">5.51</span>);</span><br><span class="line">System.out.println(round);<span class="comment">//6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.sqrt 求开方</span></span><br><span class="line"><span class="keyword">double</span> sqrt = Math.sqrt(<span class="number">9.0</span>);</span><br><span class="line">System.out.println(sqrt);<span class="comment">//3.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//7.random 求随机数</span></span><br><span class="line"><span class="comment">// random 返回的是 0 &lt;= x &lt; 1 之间的一个随机小数</span></span><br><span class="line"><span class="comment">// 思考：请写出获取 a-b 之间的一个随机整数,a,b 均为整数 ，比如 a = 2, b=7</span></span><br><span class="line"><span class="comment">// 即返回一个数 x 2 &lt;= x &lt;= 7</span></span><br><span class="line"><span class="comment">// Math.random() * (b-a) 返回的就是 0 &lt;= 数 &lt;= b-a</span></span><br><span class="line"><span class="comment">// (1) (int)(a) &lt;= x &lt;= (int)(a + Math.random() * (b-a +1) )</span></span><br><span class="line"><span class="comment">// (2) 使用具体的数给小伙伴介绍 a = 2 b = 7</span></span><br><span class="line"><span class="comment">// (int)(a + Math.random() * (b-a +1) ) = (int)( 2 + Math.random()*6)</span></span><br><span class="line"><span class="comment">// Math.random()*6 返回的是 0 &lt;= x &lt; 6 小数</span></span><br><span class="line"><span class="comment">// 2 + Math.random()*6 返回的就是 2 &lt;= x &lt; 8 小数</span></span><br><span class="line"><span class="comment">// (int)(2 + Math.random()*6) = 2 &lt;= x &lt;= 7 整数</span></span><br><span class="line"><span class="comment">// (3) 公式就是 (int)(a + Math.random() * (b-a +1) )</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">System.out.println((<span class="keyword">int</span>)(<span class="number">2</span> + Math.random() * (<span class="number">7</span> - <span class="number">2</span> + <span class="number">1</span>)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//8. max , min 返回最大值和最小值</span></span><br><span class="line"><span class="keyword">int</span> min = Math.min(<span class="number">1</span>, <span class="number">9</span>);</span><br><span class="line"><span class="keyword">int</span> max = Math.max(<span class="number">45</span>, <span class="number">90</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;min=&quot;</span> + min);</span><br><span class="line">System.out.println(<span class="string">&quot;max=&quot;</span> + max);</span><br></pre></td></tr></table></figure>



<h2 id="13-8-Arrays类"><a href="#13-8-Arrays类" class="headerlink" title="13.8 Arrays类"></a>13.8 Arrays类</h2><h3 id="13-8-1-常用方法"><a href="#13-8-1-常用方法" class="headerlink" title="13.8.1 常用方法"></a>13.8.1 常用方法</h3><ul>
<li><p><strong>toString</strong>：返回数组的字符串形式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer[] integers = &#123;<span class="number">1</span>, <span class="number">23</span>, <span class="number">44</span>&#125;;</span><br><span class="line">System.out.println(Arrays.toString(integers)); <span class="comment">// [1, 23, 44]</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>sort</strong>：默认排序或定制排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. sort：默认排序和定制排序</span></span><br><span class="line"><span class="comment">// 数组是引用类型，排序后会直接印象实参</span></span><br><span class="line"><span class="comment">// 重载的sort，也可以通过传入一个接口 Comparator 实现定制排序</span></span><br><span class="line"><span class="comment">// 调用 定制排序 时，传入两个参数</span></span><br><span class="line"><span class="comment">// (1) 排序的数组 arr</span></span><br><span class="line"><span class="comment">// (2) 实现了 Comparator 接口的匿名内部类 , 要求实现 compare 方法</span></span><br><span class="line">Integer[] arr = &#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">88</span>, <span class="number">20</span>&#125;;</span><br><span class="line">Arrays.sort(arr);   <span class="comment">//默认排序（从小到大）</span></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定制排序</span></span><br><span class="line">Arrays.sort(arr, <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> o2 - o1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line"><span class="comment">// 源码分析</span></span><br><span class="line"><span class="comment">//(1) Arrays.sort(arr, new Comparator()&#123;&#125;);</span></span><br><span class="line"><span class="comment">//(2) 最终到 TimSort 类的 private static &lt;T&gt; void binarySort(T[] a, int lo, int hi, int start, Comparator&lt;? super T&gt; c)()</span></span><br><span class="line"><span class="comment">//(3) 执行到 binarySort 方法的代码, 会根据动态绑定机制 c.compare()执行我们传入的匿名内部类的 compare ()</span></span><br><span class="line"><span class="comment">// while (left &lt; right) &#123;</span></span><br><span class="line"><span class="comment">// int mid = (left + right) &gt;&gt;&gt; 1;</span></span><br><span class="line"><span class="comment">// if (c.compare(pivot, a[mid]) &lt; 0)</span></span><br><span class="line"><span class="comment">//     right = mid;</span></span><br><span class="line"><span class="comment">// else</span></span><br><span class="line"><span class="comment">//     left = mid + 1;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//(4) new Comparator() &#123;</span></span><br><span class="line"><span class="comment">// @Override</span></span><br><span class="line"><span class="comment">// public int compare(Object o1, Object o2) &#123;</span></span><br><span class="line"><span class="comment">// Integer i1 = (Integer) o1;</span></span><br><span class="line"><span class="comment">// Integer i2 = (Integer) o2;</span></span><br><span class="line"><span class="comment">// return i2 - i1;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//(5) public int compare(Object o1, Object o2) 返回的值&gt;0 还是 &lt;0</span></span><br><span class="line"><span class="comment">// 会影响整个排序结果, 这就充分体现了 接口编程+动态绑定+匿名内部类的综合使用</span></span><br><span class="line"><span class="comment">// 将来的底层框架和源码的使用方式，会非常常见</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定制冒泡排序</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArraySortCustom</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">20</span>&#125;;</span><br><span class="line"></span><br><span class="line">        bubble(arr);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line">        bubble(arr, <span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">int</span> i1 = (Integer)o1;</span><br><span class="line">                <span class="keyword">int</span> i2 = (Integer)o2;</span><br><span class="line">                <span class="keyword">return</span> i2 - i1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubble</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubble</span><span class="params">(<span class="keyword">int</span>[] arr, Comparator c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="comment">// 排序规则由c.compare(arr[j], arr[j + 1])返回值决定</span></span><br><span class="line">                <span class="keyword">if</span> (c.compare(arr[j], arr[j + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><strong>binarySearch</strong>：二分查找</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Integer[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">90</span>, <span class="number">123</span>, <span class="number">567</span>&#125;;</span><br><span class="line"><span class="comment">// binarySearch 通过二分搜索法进行查找，要求必须排好</span></span><br><span class="line"><span class="comment">//1. 使用 binarySearch 二叉查找</span></span><br><span class="line"><span class="comment">//2. 要求该数组是有序的. 如果该数组是无序的，不能使用 binarySearch</span></span><br><span class="line"><span class="comment">//3. 如果数组中不存在该元素，就返回 return -(low + 1); // key not found.</span></span><br><span class="line"><span class="comment">// low是指元素应该插入的位置</span></span><br><span class="line"><span class="keyword">int</span> index = Arrays.binarySearch(arr, <span class="number">100</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;index=&quot;</span> + index);   <span class="comment">// -4</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><strong>copyOf</strong>：数组拷贝</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// copyOf 数组拷贝</span></span><br><span class="line"><span class="comment">//1. 从 arr 数组中，拷贝 length 个元素到 newArr 数组中</span></span><br><span class="line"><span class="comment">//2. 如果拷贝的长度length &gt; oldArr.length 就在新数组的后面 增加 null</span></span><br><span class="line"><span class="comment">//3. 如果拷贝长度length &lt; 0 就抛出异常 NegativeArraySizeException</span></span><br><span class="line"><span class="comment">//4. 该方法的底层使用的是 System.arraycopy()</span></span><br><span class="line">Integer[] newArr = Arrays.copyOf(oldArr, length);</span><br><span class="line">System.out.println(<span class="string">&quot;==拷贝执行完毕后==&quot;</span>);</span><br><span class="line">System.out.println(Arrays.toString(newArr));</span><br></pre></td></tr></table></figure></li>
<li><p><strong>fill</strong>：数组填充</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//fill 数组元素的填充</span></span><br><span class="line">Integer[] num = <span class="keyword">new</span> Integer[]&#123;<span class="number">9</span>,<span class="number">3</span>,<span class="number">2</span>&#125;;</span><br><span class="line"><span class="comment">//1. 使用 99 去填充 num 数组，可以理解成是替换原理的元素</span></span><br><span class="line">Arrays.fill(num, <span class="number">99</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;==num 数组填充后==&quot;</span>);</span><br><span class="line">System.out.println(Arrays.toString(num));</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><strong>equals</strong>：数组比对</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//equals 比较两个数组元素内容是否完全一致</span></span><br><span class="line">Integer[] arr2 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">90</span>, <span class="number">123</span>&#125;;</span><br><span class="line"><span class="comment">//1. 如果 arr 和 arr2 数组的元素一样，则方法 true;</span></span><br><span class="line"><span class="comment">//2. 如果不是完全一样，就返回 false</span></span><br><span class="line"><span class="keyword">boolean</span> equals = Arrays.equals(arr, arr2);</span><br><span class="line">System.out.println(<span class="string">&quot;equals=&quot;</span> + equals);</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><strong>asList</strong>：将一组数据转换成 list</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. asList 方法，会将 (2,3,4,5,6,1)数据转成一个 List 集合</span></span><br><span class="line"><span class="comment">//2. 返回的 asList编译类型：List(是接口)</span></span><br><span class="line"><span class="comment">//3. 返回的 asList运行类型：java.util.Arrays#ArrayList,</span></span><br><span class="line"><span class="comment">// ArrayList是 Arrays 类的静态内部类 private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span></span><br><span class="line"><span class="comment">// implements RandomAccess, java.io.Serializable</span></span><br><span class="line">List asList = Arrays.asList(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;asList=&quot;</span> + asList);</span><br><span class="line">System.out.println(<span class="string">&quot;asList 的运行类型&quot;</span> + asList.getClass());</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="13-8-2-练习题"><a href="#13-8-2-练习题" class="headerlink" title="13.8.2 练习题"></a>13.8.2 练习题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">// 定制排序</span><br><span class="line">// 1.实现自定义book类数组按price从小到大排序</span><br><span class="line">// 2.实现自定义book类数组按price从大到小排序</span><br><span class="line">// 3.实现自定义book类数组按name的长度从小到大排序</span><br><span class="line"></span><br><span class="line">public class ArrayExercise &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Book[] books = new Book[4];</span><br><span class="line">        books[0] = new Book(&quot;红楼梦&quot;, 100);</span><br><span class="line">        books[1] = new Book(&quot;金瓶梅新&quot;, 90);</span><br><span class="line">        books[2] = new Book(&quot;青年文摘 20 年&quot;, 5);</span><br><span class="line">        books[3] = new Book(&quot;java 从入门到放弃~&quot;, 300);</span><br><span class="line"></span><br><span class="line">        // 按price从小到大排序</span><br><span class="line">        Arrays.sort(books, new Comparator&lt;Book&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Book o1, Book o2) &#123;</span><br><span class="line">                double priceVal = o1.getPrice() - o2.getPrice();</span><br><span class="line">                if (priceVal &gt; 0) &#123;</span><br><span class="line">                    return 1;</span><br><span class="line">                &#125; else if (priceVal &lt; 0) &#123;</span><br><span class="line">                    return -1;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    return 0;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(Arrays.toString(books));</span><br><span class="line"></span><br><span class="line">        // 按price从大到小排序</span><br><span class="line">        Arrays.sort(books, new Comparator&lt;Book&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Book o1, Book o2) &#123;</span><br><span class="line">                double priceVal = o1.getPrice() - o2.getPrice();</span><br><span class="line">                if (priceVal &gt; 0) &#123;</span><br><span class="line">                    return 1;</span><br><span class="line">                &#125; else if (priceVal &lt; 0) &#123;</span><br><span class="line">                    return -1;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    return 0;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(Arrays.toString(books));</span><br><span class="line"></span><br><span class="line">        // 按照name长度从小到大排序</span><br><span class="line">        Arrays.sort(books, new Comparator&lt;Book&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Book o1, Book o2) &#123;</span><br><span class="line">                double nameVal = o1.getName().length() - o2.getName().length();</span><br><span class="line">                if (nameVal &gt; 0) &#123;</span><br><span class="line">                    return -1;</span><br><span class="line">                &#125; else if (nameVal &lt; 0) &#123;</span><br><span class="line">                    return 1;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    return 0;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(Arrays.toString(books));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Book &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private double price;</span><br><span class="line"></span><br><span class="line">    public Book(String name, double price) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getPrice() &#123;</span><br><span class="line">        return price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPrice(double price) &#123;</span><br><span class="line">        this.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Book&#123;&quot; +</span><br><span class="line">                &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br><span class="line">                &quot;, price=&quot; + price +</span><br><span class="line">                &#x27;&#125;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="13-9-System类"><a href="#13-9-System类" class="headerlink" title="13.9 System类"></a>13.9 System类</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231030182047674.png" alt="image-20231030182047674"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//exit 退出当前程序</span></span><br><span class="line">System.out.println(<span class="string">&quot;ok1&quot;</span>);</span><br><span class="line"><span class="comment">//1. exit(0) 表示程序退出</span></span><br><span class="line"><span class="comment">//2. 0 表示一个状态 , 正常的状态</span></span><br><span class="line">System.exit(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//arraycopy ：复制数组元素，比较适合底层调用，</span></span><br><span class="line"><span class="comment">// 一般使用 Arrays.copyOf 完成复制数组</span></span><br><span class="line"><span class="keyword">int</span>[] src=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] dest = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];<span class="comment">// dest 当前是 &#123;0,0,0&#125;</span></span><br><span class="line"><span class="comment">//1. 主要是搞清楚这五个参数的含义</span></span><br><span class="line"><span class="comment">// * @param     src         源数组</span></span><br><span class="line"><span class="comment">// * @param     srcPos      从源数组的哪个索引位置开始拷贝</span></span><br><span class="line"><span class="comment">// * @param     dest        目标数组，即把源数组的数据拷贝到哪个数组</span></span><br><span class="line"><span class="comment">// * @param     destPos     把源数组的数据拷贝到 目标数组的哪个索引</span></span><br><span class="line"><span class="comment">// * @param     length      从源数组拷贝多少个数据到目标数组</span></span><br><span class="line">System.arraycopy(src, <span class="number">0</span>, dest, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// int[] src=&#123;1,2,3&#125;;</span></span><br><span class="line">System.out.println(<span class="string">&quot;dest=&quot;</span> + Arrays.toString(dest));<span class="comment">//[0, 1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//currentTimeMillens:返回当前时间距离 1970-1-1 的毫秒数</span></span><br><span class="line">System.out.println(System.currentTimeMillis());</span><br></pre></td></tr></table></figure>



<h2 id="13-10-BigInteger-和-BigDecimal-类"><a href="#13-10-BigInteger-和-BigDecimal-类" class="headerlink" title="13.10 BigInteger 和 BigDecimal 类"></a>13.10 BigInteger 和 BigDecimal 类</h2><ul>
<li><p>应用场景：</p>
<ul>
<li>Biglnteger适合保存比较大的整型</li>
<li>BigDecimal适合保存精度更高的浮点型(小数)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当我们编程中，需要处理很大的整数，long 不够用</span></span><br><span class="line"><span class="comment">// 可以使用 BigInteger 的类来搞定</span></span><br><span class="line"><span class="comment">//long l = 23788888899999999999999999999l;</span></span><br><span class="line"><span class="comment">//System.out.println(&quot;l=&quot; + l);</span></span><br><span class="line"></span><br><span class="line">BigInteger bigInteger = <span class="keyword">new</span> BigInteger(<span class="string">&quot;23788888899999999999999999999&quot;</span>);</span><br><span class="line">System.out.println(bigInteger);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当我们需要保存一个精度很高的数时，double 不够用</span></span><br><span class="line"><span class="comment">// 可以用 BigDecimal</span></span><br><span class="line"><span class="comment">//double d = 1999.11111111111999999999999977788d;</span></span><br><span class="line"><span class="comment">//System.out.println(d); //会缩减精度</span></span><br><span class="line">BigDecimal bigDecimal = <span class="keyword">new</span> BigDecimal(<span class="string">&quot;1999.11&quot;</span>);</span><br><span class="line">BigDecimal bigDecimal2 = <span class="keyword">new</span> BigDecimal(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">System.out.println(bigDecimal);</span><br></pre></td></tr></table></figure></li>
<li><p>加、减、乘、除操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 在对 BigInteger 进行加减乘除的时候，需要使用对应的方法，不能直接进行 + - * /</span></span><br><span class="line"><span class="comment">//2. 可以创建一个 要操作的 BigInteger 然后进行相应操作</span></span><br><span class="line">BigInteger add = bigInteger.add(bigInteger2);</span><br><span class="line">System.out.println(add);<span class="comment">//加</span></span><br><span class="line">BigInteger subtract = bigInteger.subtract(bigInteger2);</span><br><span class="line">System.out.println(subtract);<span class="comment">//减</span></span><br><span class="line">BigInteger multiply = bigInteger.multiply(bigInteger2);</span><br><span class="line">System.out.println(multiply);<span class="comment">//乘</span></span><br><span class="line">BigInteger divide = bigInteger.divide(bigInteger2);</span><br><span class="line">System.out.println(divide);<span class="comment">//除</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 如果对 BigDecimal 进行运算，比如加减乘除，需要使用对应的方法</span></span><br><span class="line"><span class="comment">//2. 创建一个需要操作的 BigDecimal 然后调用相应的方法即可</span></span><br><span class="line">System.out.println(bigDecimal.add(bigDecimal2));</span><br><span class="line">System.out.println(bigDecimal.subtract(bigDecimal2));</span><br><span class="line">System.out.println(bigDecimal.multiply(bigDecimal2));</span><br><span class="line"><span class="comment">//System.out.println(bigDecimal.divide(bigDecimal2));//可能抛出异常ArithmeticException，无限循环小数</span></span><br><span class="line"><span class="comment">//在调用 divide 方法时，指定精度即可. BigDecimal.ROUND_CEILING</span></span><br><span class="line"><span class="comment">//如果有无限循环小数，就会保留 和“被除数”一致的 精度</span></span><br><span class="line">System.out.println(bigDecimal.divide(bigDecimal2, BigDecimal.ROUND_CEILING));</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-11-日期类"><a href="#13-11-日期类" class="headerlink" title="13.11 日期类"></a>13.11 日期类</h2><h3 id="13-11-1-第一代日期类-Date"><a href="#13-11-1-第一代日期类-Date" class="headerlink" title="13.11.1 第一代日期类 Date"></a>13.11.1 第一代日期类 Date</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231031093802564.png" alt="image-20231031093802564"></p>
<ul>
<li><p>获取日期</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 获取当前系统时间</span></span><br><span class="line"><span class="comment">//2. 这里的 Date 类是在 java.util 包的</span></span><br><span class="line"><span class="comment">//3. 默认输出的日期格式是国外的方式, 因此通常需要对格式进行转换</span></span><br><span class="line">Date d1 = <span class="keyword">new</span> Date(); <span class="comment">//获取当前系统时间</span></span><br><span class="line">System.out.println(<span class="string">&quot;当前日期=&quot;</span> + d1);</span><br><span class="line"></span><br><span class="line">Date d2 = <span class="keyword">new</span> Date(<span class="number">9234567</span>); <span class="comment">//通过指定毫秒数得到时间</span></span><br><span class="line">System.out.println(<span class="string">&quot;d2=&quot;</span> + d2);</span><br><span class="line"></span><br><span class="line">System.out.println(d1.getTime());   <span class="comment">//获取某个时间对应的毫秒数</span></span><br></pre></td></tr></table></figure></li>
<li><p>Date转格式化String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 创建 SimpleDateFormat 对象，将Date转换成格式化字符串</span></span><br><span class="line"><span class="comment">//2. 这里的格式使用的字母是规定好，不能乱写</span></span><br><span class="line">SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy年MM月dd日 hh:mm:ss E&quot;</span>);</span><br><span class="line">String format = sdf.format(d1); <span class="comment">// format:将日期转换成指定格式的字符串</span></span><br><span class="line">System.out.println(<span class="string">&quot;当前日期=&quot;</span> + format);</span><br></pre></td></tr></table></figure></li>
<li><p>格式化String转Date</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 可以把一个格式化的 String 转成对应的 Date</span></span><br><span class="line"><span class="comment">//2. 得到 Date 在输出时，仍然还是按照国外的形式，如果希望指定格式输出，还是需要转换</span></span><br><span class="line"><span class="comment">//3. 在把 String -&gt; Date ， String 的格式 需要和 定义的sdf格式 一致，否则会抛出转换异常</span></span><br><span class="line">String s = <span class="string">&quot;1996 年 01 月 01 日 10:20:30 星期一&quot;</span>;</span><br><span class="line">Date parse = sdf.parse(s); <span class="comment">//可能会报异常ParseException</span></span><br><span class="line">System.out.println(<span class="string">&quot;parse=&quot;</span> + sdf.format(parse));</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="13-11-2-第二代日期类-Calendar"><a href="#13-11-2-第二代日期类-Calendar" class="headerlink" title="13.11.2 第二代日期类 Calendar"></a>13.11.2 第二代日期类 Calendar</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231031095901376.png" alt="image-20231031095901376"></p>
<ul>
<li><p>获取Calendar对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. Calendar 是一个抽象类， 并且构造器是 private</span></span><br><span class="line"><span class="comment">//2. 可以通过 getInstance() 来获取实例</span></span><br><span class="line"><span class="comment">//3. 提供大量的方法和字段提供给程序员</span></span><br><span class="line"><span class="comment">//4. Calendar 没有提供对应的格式化的类，因此需要程序员自己组合来输出(灵活)</span></span><br><span class="line"><span class="comment">//5. 如果我们需要按照 24 小时进制来获取时间， Calendar.HOUR ==改成=&gt; Calendar.HOUR_OF_DAY</span></span><br><span class="line">Calendar c = Calendar.getInstance(); <span class="comment">//创建日历类对象，比较简单，自由</span></span><br><span class="line">System.out.println(<span class="string">&quot;c=&quot;</span> + c); <span class="comment">//会输出很多字段信息</span></span><br></pre></td></tr></table></figure></li>
<li><p>获取日历字段</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取日历对象的某个日历字段</span></span><br><span class="line">System.out.println(<span class="string">&quot;年：&quot;</span> + c.get(Calendar.YEAR));</span><br><span class="line"><span class="comment">// 这里为什么要 + 1, 因为 Calendar 返回月时候，是按照 0 开始编号</span></span><br><span class="line">System.out.println(<span class="string">&quot;月：&quot;</span> + (c.get(Calendar.MONTH) + <span class="number">1</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;日：&quot;</span> + c.get(Calendar.DAY_OF_MONTH));</span><br><span class="line">System.out.println(<span class="string">&quot;小时：&quot;</span> + c.get(Calendar.HOUR));</span><br><span class="line">System.out.println(<span class="string">&quot;分钟：&quot;</span> + c.get(Calendar.MINUTE));</span><br><span class="line">System.out.println(<span class="string">&quot;秒：&quot;</span> + c.get(Calendar.SECOND));</span><br></pre></td></tr></table></figure></li>
<li><p>格式化输出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Calender 没有专门的格式化方法，所以需要程序员自己来组合显示</span></span><br><span class="line">System.out.println(c.get(Calendar.YEAR) + <span class="string">&quot;-&quot;</span> + (c.get(Calendar.MONTH) + <span class="number">1</span>) + <span class="string">&quot;-&quot;</span> +</span><br><span class="line">c.get(Calendar.DAY_OF_MONTH) +</span><br><span class="line"><span class="string">&quot; &quot;</span> + c.get(Calendar.HOUR_OF_DAY) + <span class="string">&quot;:&quot;</span> + c.get(Calendar.MINUTE) + <span class="string">&quot;:&quot;</span> + c.get(Calendar.SECOND) );</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="13-11-3-第三代日期类-LocalDateTime"><a href="#13-11-3-第三代日期类-LocalDateTime" class="headerlink" title="13.11.3 第三代日期类 LocalDateTime"></a>13.11.3 第三代日期类 LocalDateTime</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231031100935458.png" alt="image-20231031100935458"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231031101058708.png" alt="image-20231031101058708"></p>
<ul>
<li><p>获取日期时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 使用 now() 返回表示当前日期时间的 对象</span></span><br><span class="line">LocalDateTime ldt = LocalDateTime.now();</span><br><span class="line">System.out.println(ldt);</span><br><span class="line">LocalDate now = LocalDate.now(); <span class="comment">//可以获取年月日</span></span><br><span class="line">LocalTime now2 = LocalTime.now();<span class="comment">//获取到时分秒</span></span><br></pre></td></tr></table></figure></li>
<li><p>格式化输出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2. 使用 DateTimeFormatter 对象来进行格式化</span></span><br><span class="line"><span class="comment">// 创建 DateTimeFormatter 对象</span></span><br><span class="line">DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">String format = dateTimeFormatter.format(ldt);</span><br><span class="line">System.out.println(<span class="string">&quot;格式化的日期=&quot;</span> + format);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以向Calendar一样输出各个字段，组合显示</span></span><br><span class="line">System.out.println(<span class="string">&quot;年=&quot;</span> + ldt.getYear());</span><br><span class="line">System.out.println(<span class="string">&quot;月=&quot;</span> + ldt.getMonth());</span><br><span class="line">System.out.println(<span class="string">&quot;月=&quot;</span> + ldt.getMonthValue());</span><br><span class="line">System.out.println(<span class="string">&quot;日=&quot;</span> + ldt.getDayOfMonth());</span><br><span class="line">System.out.println(<span class="string">&quot;时=&quot;</span> + ldt.getHour());</span><br><span class="line">System.out.println(<span class="string">&quot;分=&quot;</span> + ldt.getMinute());</span><br><span class="line">System.out.println(<span class="string">&quot;秒=&quot;</span> + ldt.getSecond());</span><br></pre></td></tr></table></figure></li>
<li><p>对当前时间进行加减</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//提供 plus 和 minus 方法可以对当前时间进行加或者减</span></span><br><span class="line"><span class="comment">//看看 890 天后，是什么时候 把 年月日-时分秒</span></span><br><span class="line">LocalDateTime ldt2 = ldt.plusDays(<span class="number">890</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;890 天后=&quot;</span> + dateTimeFormatter.format(ldt2));</span><br><span class="line"><span class="comment">//看看在 3456 分钟前是什么时候，把 年月日-时分秒输出</span></span><br><span class="line">LocalDateTime ldt3 = ldt.minusMinutes(<span class="number">3456</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;3456 分钟前 日期=&quot;</span> + dateTimeFormatter.format(ldt3));</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="第十四章-集合"><a href="#第十四章-集合" class="headerlink" title="第十四章 集合"></a>第十四章 集合</h1><h2 id="14-1-集合介绍"><a href="#14-1-集合介绍" class="headerlink" title="14.1 集合介绍"></a>14.1 集合介绍</h2><ul>
<li>数组的不足<ul>
<li>长度开始时必须指定，而且一旦指定，不能更改</li>
<li>保存的必须为同一类型的元素</li>
<li>使用数组进行增加/删除元素比较麻烦（需要创建一个新数组）</li>
</ul>
</li>
<li>集合的好处<ul>
<li>可以<strong>动态保存</strong>任意多个对象，使用比较方便!</li>
<li>提供了一系列方便的操作对象的方法:add、remove、set、get等</li>
<li>使用集合添加，删除新元素的代码-<strong>简洁</strong>明了</li>
</ul>
</li>
</ul>
<h2 id="14-2-框架体系图（必背）"><a href="#14-2-框架体系图（必背）" class="headerlink" title="14.2 框架体系图（必背）"></a>14.2 框架体系图（必背）</h2><ol>
<li><p>集合主要是两组(单列集合 , 双列集合)</p>
</li>
<li><p>Collection 接口有两个重要的子接口 List和Set , 他们的实现子类都是单列集合</p>
</li>
<li><p>Map 接口的实现子类 是双列集合，存放的是 K-V</p>
</li>
</ol>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ul>
<li>Collection<ul>
<li><strong>List</strong><ul>
<li>Vector</li>
<li>ArrayList</li>
<li>LinkedList</li>
</ul>
</li>
<li><strong>Set</strong><ul>
<li>TreeSet</li>
<li>HashSet</li>
</ul>
</li>
</ul>
</li>
<li><strong>Map</strong><ul>
<li>TreeMap</li>
<li>HashMap<ul>
<li>LinkedHashMap</li>
</ul>
</li>
<li>Hashtable<ul>
<li>Properties</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>​    </p>
</div>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101093437236.png" alt="image-20231101093437236"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101093444815.png" alt="image-20231101093444815"></p>
<h2 id="14-3-Collection接口"><a href="#14-3-Collection接口" class="headerlink" title="14.3 Collection接口"></a>14.3 Collection接口</h2><h3 id="14-3-1-实现类的特点和常用方法"><a href="#14-3-1-实现类的特点和常用方法" class="headerlink" title="14.3.1 实现类的特点和常用方法"></a>14.3.1 实现类的特点和常用方法</h3><ol>
<li><p>收集实现子类可以存放多个元素，每个元素可以是Object</p>
</li>
<li><p>有些Collection的实现类，可以存放重复的元素，有些不可以</p>
</li>
<li><p>有些的实现类，有些是<strong>有序的(List)<strong>，有些是</strong>无序的(Set)</strong></p>
</li>
<li><p>集合接口没有直接的实现子类，是通过它的子接口<strong>Set</strong>和<strong>List</strong>来实现的</p>
</li>
</ol>
<ul>
<li><p>常用方法：以ArrayList为例</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101095156361.png" alt="image-20231101095156361"></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line"><span class="comment">// 1.add：添加单个元素</span></span><br><span class="line">list.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">list.add(<span class="number">10</span>); <span class="comment">//会自动装箱list.add(Integer.valueOf(10))</span></span><br><span class="line">list.add(<span class="keyword">true</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.contains：查找元素是否存在</span></span><br><span class="line">System.out.println(list.contains(<span class="string">&quot;jack&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.remove：删除指定元素</span></span><br><span class="line">list.remove(<span class="number">0</span>); <span class="comment">//按索引删除</span></span><br><span class="line">list.remove(Integer.valueOf(<span class="number">10</span>)); <span class="comment">//按元素删除</span></span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.size：获取元素个数</span></span><br><span class="line">System.out.println(list.size());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.isEmpty：判断集合是否为空</span></span><br><span class="line">System.out.println(list.isEmpty());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.clear：清空集合 (list.removeAll(list)与之等价)</span></span><br><span class="line">list.clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7.addAll：添加多个元素</span></span><br><span class="line">List list2 = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list2.add(<span class="string">&quot;红楼梦&quot;</span>);</span><br><span class="line">list2.add(<span class="string">&quot;三国演义&quot;</span>);</span><br><span class="line">list.addAll(list2);</span><br><span class="line">System.out.println(list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8.containAll：判断多个元素是否同时存在</span></span><br><span class="line">System.out.println(list.containsAll(list2));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 9.removeAll：删除多个元素</span></span><br><span class="line">list.add(<span class="string">&quot;西游记&quot;</span>);</span><br><span class="line">list.removeAll(list2);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br></pre></td></tr></table></figure>



<h3 id="14-3-2-遍历1-Iterator迭代器"><a href="#14-3-2-遍历1-Iterator迭代器" class="headerlink" title="14.3.2 遍历1 - Iterator迭代器"></a>14.3.2 遍历1 - Iterator迭代器</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101101622869.png" alt="image-20231101101622869"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101101905703.png" alt="image-20231101101905703"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101102225179.png" alt="image-20231101102225179"></p>
<ul>
<li>快捷键 <font color="red">itit</font></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Collection col = <span class="keyword">new</span> ArrayList();</span><br><span class="line">col.add(<span class="keyword">new</span> Book(<span class="string">&quot;三国演义&quot;</span>, <span class="string">&quot;罗贯中&quot;</span>, <span class="number">10.1</span>));</span><br><span class="line">col.add(<span class="keyword">new</span> Book(<span class="string">&quot;小李飞刀&quot;</span>, <span class="string">&quot;古龙&quot;</span>, <span class="number">5.1</span>));</span><br><span class="line">col.add(<span class="keyword">new</span> Book(<span class="string">&quot;红楼梦&quot;</span>, <span class="string">&quot;曹雪芹&quot;</span>, <span class="number">34.6</span>));</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;col=&quot;</span> + col);</span><br><span class="line"><span class="comment">// 1.先得到col的Iterator对象</span></span><br><span class="line">Iterator iterator = col.iterator();</span><br><span class="line"><span class="comment">// 2. 使用while循环遍历  快捷键 itit (ctrl+j可以查看所有快捷键)</span></span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    Object obj = iterator.next();</span><br><span class="line">    System.out.println(<span class="string">&quot;obj=&quot;</span> + obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 当退出 while 循环后 , 这时 iterator 迭代器，指向最后的元素</span></span><br><span class="line"><span class="comment">// iterator.next();//NoSuchElementException</span></span><br><span class="line"><span class="comment">//4. 如果希望再次遍历，需要重置我们的迭代器</span></span><br><span class="line">iterator = col.iterator();</span><br><span class="line">System.out.println(<span class="string">&quot;===第二次遍历===&quot;</span>);</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    Object obj = iterator.next();</span><br><span class="line">    System.out.println(<span class="string">&quot;obj=&quot;</span> + obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="14-3-2-遍历3-for循环增强"><a href="#14-3-2-遍历3-for循环增强" class="headerlink" title="14.3.2 遍历3 - for循环增强"></a>14.3.2 遍历3 - for循环增强</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101103127471.png" alt="image-20231101103127471"></p>
<ul>
<li>快捷键：<font color="red">I</font></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Collection col = <span class="keyword">new</span> ArrayList();</span><br><span class="line">col.add(<span class="keyword">new</span> Book(<span class="string">&quot;三国演义&quot;</span>, <span class="string">&quot;罗贯中&quot;</span>, <span class="number">10.1</span>));</span><br><span class="line">col.add(<span class="keyword">new</span> Book(<span class="string">&quot;小李飞刀&quot;</span>, <span class="string">&quot;古龙&quot;</span>, <span class="number">5.1</span>));</span><br><span class="line">col.add(<span class="keyword">new</span> Book(<span class="string">&quot;红楼梦&quot;</span>, <span class="string">&quot;曹雪芹&quot;</span>, <span class="number">34.6</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用增强for循环遍历集合</span></span><br><span class="line"><span class="comment">// 底层仍然使用的是Iterator，debug看源码</span></span><br><span class="line"><span class="comment">// 快捷键 I</span></span><br><span class="line"><span class="keyword">for</span>(Object obj : col) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;obj=&quot;</span> + obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增强for循环也可以遍历数组</span></span><br></pre></td></tr></table></figure>



<h2 id="14-4-List接口"><a href="#14-4-List接口" class="headerlink" title="14.4 List接口"></a>14.4 List接口</h2><h3 id="14-4-1-基本介绍"><a href="#14-4-1-基本介绍" class="headerlink" title="14.4.1 基本介绍"></a>14.4.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231101104403257.png" alt="image-20231101104403257"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. List 集合类中元素有序(即添加顺序和取出顺序一致)、且可重复</span></span><br><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;mary&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;hsp&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"><span class="comment">//2. List 集合中的每个元素都有其对应的顺序索引，即支持索引</span></span><br><span class="line"><span class="comment">// 使用get()方法获取元素，索引是从 0 开始的</span></span><br><span class="line">System.out.println(list.get(<span class="number">3</span>));<span class="comment">//hsp</span></span><br></pre></td></tr></table></figure>



<h3 id="14-4-2-常用方法"><a href="#14-4-2-常用方法" class="headerlink" title="14.4.2 常用方法"></a>14.4.2 常用方法</h3><ol>
<li>add</li>
<li>addAll</li>
<li><strong>get</strong></li>
<li>indexOf</li>
<li>lastIndexOf</li>
<li>remove</li>
<li><strong>set</strong>：替换或设置</li>
<li><strong>subList</strong>：子集合或切片</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="string">&quot;张三丰&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;贾宝玉&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.void add(int index, Object ele):在 index 位置插入 ele 元素</span></span><br><span class="line"><span class="comment">//在 index = 1 的位置插入一个对象</span></span><br><span class="line">list.add(<span class="number">1</span>, <span class="string">&quot;韩顺平&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.boolean addAll(int index, Collection eles):从 index 位置开始将 eles 中的所有元素添加进来</span></span><br><span class="line">List list2 = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list2.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">list2.add(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">list.addAll(<span class="number">1</span>, list2);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.Object get(int index):获取指定 index 位置的元素</span></span><br><span class="line">System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.int indexOf(Object obj):返回 obj 在集合中首次出现的位置</span></span><br><span class="line">System.out.println(list.indexOf(<span class="string">&quot;tom&quot;</span>));<span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.int lastIndexOf(Object obj):返回 obj 在当前集合中末次出现的位置</span></span><br><span class="line">list.add(<span class="string">&quot;韩顺平&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line">System.out.println(list.lastIndexOf(<span class="string">&quot;韩顺平&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.Object remove(int index):移除指定 index 位置的元素，并返回此元素</span></span><br><span class="line">list.remove(<span class="number">0</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7.Object set(int index, Object ele):设置指定 index 位置的元素为 ele , 相当于是替换. list.set(1, &quot;玛丽&quot;);</span></span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8.List subList(int fromIndex, int toIndex):返回从 fromIndex 到 toIndex 位置的子集合. </span></span><br><span class="line"><span class="comment">// 注意返回的子集合 fromIndex &lt;= subList &lt; toIndex</span></span><br><span class="line">List returnlist = list.subList(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;returnlist=&quot;</span> + returnlist);</span><br></pre></td></tr></table></figure>



<h3 id="14-3-3-遍历方式"><a href="#14-3-3-遍历方式" class="headerlink" title="14.3.3 遍历方式"></a>14.3.3 遍历方式</h3><ul>
<li><p>Iterator迭代器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="keyword">new</span> Book(<span class="string">&quot;三国演义&quot;</span>, <span class="string">&quot;罗贯中&quot;</span>, <span class="number">10.1</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> Book(<span class="string">&quot;小李飞刀&quot;</span>, <span class="string">&quot;古龙&quot;</span>, <span class="number">5.1</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> Book(<span class="string">&quot;红楼梦&quot;</span>, <span class="string">&quot;曹雪芹&quot;</span>, <span class="number">34.6</span>));</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.先得到list的Iterator对象</span></span><br><span class="line">Iterator iterator = list.iterator();</span><br><span class="line"><span class="comment">// 2. 使用while循环遍历  快捷键 itit (ctrl+j可以查看所有快捷键)</span></span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    Object obj = iterator.next();</span><br><span class="line">    System.out.println(<span class="string">&quot;obj=&quot;</span> + obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>增强for循环</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用增强for循环遍历集合</span></span><br><span class="line"><span class="comment">// 底层仍然使用的是Iterator，debug看源码</span></span><br><span class="line"><span class="comment">// 快捷键 I</span></span><br><span class="line"><span class="keyword">for</span>(Object obj : list) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;obj=&quot;</span> + obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>普通for循环</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;obj=&quot;</span> + list.get(i))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="14-5-List-ArrayList"><a href="#14-5-List-ArrayList" class="headerlink" title="14.5 List - ArrayList"></a>14.5 List - ArrayList</h2><h3 id="14-5-1-注意事项"><a href="#14-5-1-注意事项" class="headerlink" title="14.5.1 注意事项"></a>14.5.1 注意事项</h3><ul>
<li>ArrayList允许所有元素，包括null；ArrayList<strong>可以加入null</strong>、并且多个</li>
<li>ArrayList是由<strong>数组来实现</strong>数据存储的</li>
<li>ArrayList基本等同于Vector，除了<strong>ArrayList是线程不安全</strong>(执行效率高)看源码。在多线程情况下，不建议使用数组列表</li>
</ul>
<h3 id="14-5-2-底层操作机制（重要！）"><a href="#14-5-2-底层操作机制（重要！）" class="headerlink" title="14.5.2 底层操作机制（重要！）"></a>14.5.2 底层操作机制（重要！）</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>ArrayList中维护了一个**<font color="red">Object类型的数组elementData</font><strong>. [debug 看源码]<strong>。transient Object[] elementData</strong>; //<strong>transient</strong>表示瞬间,短暂的,表示该属性</strong>不会被序列号**</li>
<li>当创建ArrayList对象时，如果使用的是<strong>无参构造器</strong>，则初始elementData容量为**<font color="red">0</font><strong>，第1次添加，则扩容elementData为<font color="red"><strong>10</strong></font>，如需要再次扩容，则扩容elementData为</strong><font color="red">1.5</font>**倍（即第一次扩容为15，第二次22……）。</li>
<li>如果使用的是<strong>指定大小的构造器</strong>，则初始elementData容量为**<font color="red">指定大小</font><strong>，如果需要扩容,则直接扩容elementData为</strong><font color="red">1.5</font>**倍。</li>
</ol>
</div>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用无参构造器创建 ArrayList 对象</span></span><br><span class="line"><span class="comment">//ArrayList list = new ArrayList();</span></span><br><span class="line"><span class="comment">// 使用有参构造器创建 ArrayList 对象</span></span><br><span class="line">ArrayList list = <span class="keyword">new</span> ArrayList(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 for 给 list 集合添加 1-10个 数据</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">list.add(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用 for 给 list 集合添加 11-15 数据</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">11</span>; i &lt;= <span class="number">15</span>; i++) &#123;</span><br><span class="line">list.add(i);</span><br><span class="line">&#125;</span><br><span class="line">list.add(<span class="number">100</span>);</span><br><span class="line">list.add(<span class="number">200</span>);</span><br><span class="line">list.add(<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231102155326382.png" alt="image-20231102155326382"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231102155512644.png" alt="image-20231102155512644"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231102155550922.png" alt="image-20231102155550922"></p>
<h2 id="14-6-List-Vector"><a href="#14-6-List-Vector" class="headerlink" title="14.6 List - Vector"></a>14.6 List - Vector</h2><h3 id="14-6-1-注意事项"><a href="#14-6-1-注意事项" class="headerlink" title="14.6.1 注意事项"></a>14.6.1 注意事项</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231103100547672.png" alt="image-20231103100547672"></p>
<h3 id="14-6-2-底层操作机制（重要！）"><a href="#14-6-2-底层操作机制（重要！）" class="headerlink" title="14.6.2 底层操作机制（重要！）"></a>14.6.2 底层操作机制（重要！）</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>Vector中维护了一个**<font color="red">Object类型的数组elementData</font><strong>. 。</strong>protected Object[] elementData**; </li>
<li>当创建Vector对象时，如果使用的是<strong>无参构造器</strong>，则初始elementData容量为**<font color="red">10</font><strong>（调用有参构造器</strong>super(10)<strong>），之后每次扩容为原容量的</strong><font color="red"> 2 </font>**倍，即20, 40, 80…</li>
<li>如果使用的是<strong>指定大小的构造器</strong>，则初始elementData容量为**<font color="red">指定大小</font><strong>，如果需要扩容,则扩容elementData为原容量的</strong><font color="red"> 2 </font>**倍。</li>
</ol>
</div>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231103102804447.png" alt="image-20231103102804447"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231103103955275.png" alt="image-20231103103955275"><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231103103955355.png" alt="image-20231103103955355"></p>
<h3 id="14-6-3-Vector-和-ArrayList-的比较"><a href="#14-6-3-Vector-和-ArrayList-的比较" class="headerlink" title="14.6.3 Vector 和 ArrayList 的比较"></a>14.6.3 Vector 和 ArrayList 的比较</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">底层结构</th>
<th align="center">版本</th>
<th align="center">线程安全（同步）效率</th>
<th align="center">扩容倍数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ArrayList</td>
<td align="center">可变数组 transient Object[] elementData</td>
<td align="center">jdk1.2</td>
<td align="center">不安全，效率高</td>
<td align="center">（1）无参构造器：默认容量0，第一次扩容为10，后面每次扩容为1.5倍；（2）有参构造器：1.5倍</td>
</tr>
<tr>
<td align="center">Vector</td>
<td align="center">可变数组 protected Object[] elementData</td>
<td align="center">jdk1.0</td>
<td align="center">安全，效率低</td>
<td align="center">（1）无参构造器：默认容量为10，后面每次扩容为2倍；（2）有参构造器：2倍</td>
</tr>
</tbody></table>
<h2 id="14-7-List-LinkedList"><a href="#14-7-List-LinkedList" class="headerlink" title="14.7 List - LinkedList"></a>14.7 List - LinkedList</h2><h3 id="14-7-1-LinkedList-的全面说明"><a href="#14-7-1-LinkedList-的全面说明" class="headerlink" title="14.7.1 LinkedList 的全面说明"></a>14.7.1 LinkedList 的全面说明</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231103105431067.png" alt="image-20231103105431067"></p>
<h3 id="14-7-2-底层操作机制"><a href="#14-7-2-底层操作机制" class="headerlink" title="14.7.2 底层操作机制"></a>14.7.2 底层操作机制</h3><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>LinkedList底层维护了一个**<font color="red">双向链表</font>**</li>
<li>LinedList中维护了两个属性 <font color="red">first</font> 和<font color="red"> last</font>，分别只想首节点和为节点</li>
<li>每个节点（Node）里面又维护了 <font color="red">pre、next、item</font>三个属性。pre指向前一个、next指向后一个节点，item存储数据</li>
<li>所以LinkedList元素的<font color="red">添加和删除</font>不是通过数组完成，相对来说<strong>效率较高</strong></li>
</ol>
</div>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231103105629283.png" alt="image-20231103105629283"></p>
<ul>
<li><p>模拟一个简单的双向链表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//模拟一个简单的双向链表</span></span><br><span class="line">        Node jack = <span class="keyword">new</span> Node(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">        Node tom = <span class="keyword">new</span> Node(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">        Node hsp = <span class="keyword">new</span> Node(<span class="string">&quot;老韩&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//连接三个结点，形成双向链表</span></span><br><span class="line">        <span class="comment">//jack -&gt; tom -&gt; hsp</span></span><br><span class="line">        jack.next = tom;</span><br><span class="line">        tom.next = hsp;</span><br><span class="line">        <span class="comment">//hsp -&gt; tom -&gt; jack</span></span><br><span class="line">        hsp.pre = tom;</span><br><span class="line">        tom.pre = jack;</span><br><span class="line">        Node first = jack;<span class="comment">//让 first 引用指向 jack,就是双向链表的头结点</span></span><br><span class="line">        Node last = hsp; <span class="comment">//让 last 引用指向 hsp,就是双向链表的尾结点</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//演示，从头到尾进行遍历</span></span><br><span class="line">        System.out.println(<span class="string">&quot;===从头到尾进行遍历===&quot;</span>);</span><br><span class="line">        Node cur = first;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(cur == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//输出 first 信息</span></span><br><span class="line">            System.out.println(cur);</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//演示，从尾到头的遍历</span></span><br><span class="line">        System.out.println(<span class="string">&quot;====从尾到头的遍历====&quot;</span>);</span><br><span class="line">        cur = last;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(cur == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//输出 last 信息</span></span><br><span class="line">            System.out.println(cur);</span><br><span class="line">            cur = cur.pre;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//演示 链表的添加对象/数据</span></span><br><span class="line">        <span class="comment">//要求，是在 tom 和 hsp 之间，插入一个对象 smith</span></span><br><span class="line">        <span class="comment">//1. 先创建一个 Node 结点，name 就是 smith</span></span><br><span class="line">        Node smith = <span class="keyword">new</span> Node(<span class="string">&quot;smith&quot;</span>);</span><br><span class="line">        <span class="comment">//下面就把 smith 加入到双向链表了</span></span><br><span class="line">        smith.next = hsp;</span><br><span class="line">        smith.pre = tom;</span><br><span class="line">        hsp.pre = smith;</span><br><span class="line">        tom.next = smith;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个 Node 类，Node对象 表示双向链表的一个结点</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> Object item; <span class="comment">//真正存放数据</span></span><br><span class="line">    <span class="keyword">public</span> Node next; <span class="comment">//指向后一个结点</span></span><br><span class="line">    <span class="keyword">public</span> Node pre; <span class="comment">//指向前一个结点</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Object name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.item = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Node name=&quot;</span> + item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>LinkedList增删改查及其源码分析</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListMethod</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 增删改查及其源码分析</span></span><br><span class="line">        LinkedList linkedList = <span class="keyword">new</span> LinkedList();</span><br><span class="line">        linkedList.add(<span class="number">1</span>);</span><br><span class="line">        linkedList.add(<span class="number">2</span>);</span><br><span class="line">        linkedList.add(<span class="number">3</span>);</span><br><span class="line">        linkedList.add(<span class="number">4</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;linkedlist=&quot;</span> + linkedList);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        linkedList.remove();    <span class="comment">// 默认删除第一个节点</span></span><br><span class="line">        linkedList.remove(<span class="number">1</span>); <span class="comment">//删除第二个节点</span></span><br><span class="line">        System.out.println(<span class="string">&quot;linkedlist=&quot;</span> + linkedList);</span><br><span class="line"></span><br><span class="line">        linkedList.set(<span class="number">1</span>, <span class="number">999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;linkedlist=&quot;</span> + linkedList);</span><br><span class="line"></span><br><span class="line">        linkedList.get(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3种遍历</span></span><br><span class="line">        Iterator iterator = linkedList.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;    <span class="comment">// 快捷键itit</span></span><br><span class="line">            Object next =  iterator.next();</span><br><span class="line">            System.out.println(next);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Object o : linkedList) &#123;   <span class="comment">// 快捷键I</span></span><br><span class="line">            System.out.println(o);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; linkedList.size(); i++) &#123;</span><br><span class="line">            System.out.println(linkedList.get(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>增</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231105143229015.png" alt="image-20231105143229015"></p>
</li>
<li><p>删</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231105143254333.png" alt="image-20231105143254333"><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231105143340454.png" alt="image-20231105143340454"></p>
</li>
<li><p>改</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231105143408422.png" alt="image-20231105143408422"></p>
</li>
<li><p>查</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231105143421789.png" alt="image-20231105143421789"></p>
</li>
</ul>
<h3 id="14-7-3-ArrayList和Linked比较"><a href="#14-7-3-ArrayList和Linked比较" class="headerlink" title="14.7.3 ArrayList和Linked比较"></a>14.7.3 ArrayList和Linked比较</h3><table>
<thead>
<tr>
<th></th>
<th>底层结构</th>
<th>增删效率</th>
<th>改查效率</th>
</tr>
</thead>
<tbody><tr>
<td>ArrayList</td>
<td>可变数组</td>
<td>较低（数组扩容，创建新数组，数组拷贝）</td>
<td>较高（顺序存储，通过索引直接定位目标）</td>
</tr>
<tr>
<td>LinkedList</td>
<td>双向链表</td>
<td>较高（通过链表追加和删除节点）</td>
<td>较低（非顺序存储，通过索引不能直接定位目标节点，需要顺着链表依次定位到目标节点）</td>
</tr>
</tbody></table>
<ul>
<li>怎么选择ArrayList和LinkedList<ul>
<li>如果我们<strong>改查</strong>的操作多，选择<strong>ArrayList</strong></li>
<li>如果我们<strong>增删</strong>的操作多，选择<strong>LinkedList</strong></li>
<li>一般来说，在程序中，80%-90%的都是查询，因此大部分情况下会选择ArrayList</li>
<li>在一个项目中，根据业务灵活选择，也可能这样，一个模块使用的是ArrayList，另外一个模块是LinkedList。</li>
</ul>
</li>
</ul>
<h2 id="14-8-Set接口"><a href="#14-8-Set接口" class="headerlink" title="14.8 Set接口"></a>14.8 Set接口</h2><h3 id="14-8-1-基本介绍"><a href="#14-8-1-基本介绍" class="headerlink" title="14.8.1 基本介绍"></a>14.8.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231105150701433.png" alt="image-20231105150701433"></p>
<h3 id="14-8-2-常用方法"><a href="#14-8-2-常用方法" class="headerlink" title="14.8.2 常用方法"></a>14.8.2 常用方法</h3><ul>
<li><p>和 List 接口一样, Set 接口也是 Collection 的子接口，因此，常用方法和 Collection 接口一样.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 以HashSet为例，说明Set的方法</span><br><span class="line">//1. 以 Set 接口的实现类 HashSet 来讲解 Set 接口的方法</span><br><span class="line">//2. set 接口的实现类的对象(Set 接口对象), 不能存放重复的元素, 可以添加一个 null</span><br><span class="line">//3. set 接口对象存放数据是无序(即添加的顺序和取出的顺序不一致)</span><br><span class="line">//4. 注意：取出的顺序的顺序虽然不是添加的顺序，但是他的固定.</span><br><span class="line">Set set = new HashSet();</span><br><span class="line">set.add(&quot;john&quot;);</span><br><span class="line">set.add(&quot;lucy&quot;);</span><br><span class="line">set.add(&quot;john&quot;);//重复</span><br><span class="line">set.add(&quot;jack&quot;);</span><br><span class="line">set.add(&quot;hsp&quot;);</span><br><span class="line">set.add(&quot;mary&quot;);</span><br><span class="line">set.add(null);//</span><br><span class="line">set.add(null);//再次添加 null</span><br><span class="line">System.out.println(&quot;set=&quot; + set);</span><br><span class="line"></span><br><span class="line">// 其他方法参考Collection</span><br><span class="line">输出：</span><br><span class="line">set=[null, hsp, mary, john, lucy, jack]</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="14-8-3-遍历方式"><a href="#14-8-3-遍历方式" class="headerlink" title="14.8.3 遍历方式"></a>14.8.3 遍历方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//遍历</span></span><br><span class="line"><span class="comment">//方式 1： 使用迭代器</span></span><br><span class="line">System.out.println(<span class="string">&quot;=====使用迭代器====&quot;</span>);</span><br><span class="line">Iterator iterator = set.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">Object obj = iterator.next();</span><br><span class="line">System.out.println(<span class="string">&quot;obj=&quot;</span> + obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式 2: 增强 for</span></span><br><span class="line">System.out.println(<span class="string">&quot;=====增强 for====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (Object o : set) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;o=&quot;</span> + o);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//set 接口对象，不能通过索引来获取</span></span><br><span class="line"><span class="comment">//所以不能通过普通for循环遍历</span></span><br></pre></td></tr></table></figure>



<h2 id="14-9-Set-HashSet"><a href="#14-9-Set-HashSet" class="headerlink" title="14.9 Set - HashSet"></a>14.9 Set - HashSet</h2><h3 id="14-9-1-基本说明"><a href="#14-9-1-基本说明" class="headerlink" title="14.9.1 基本说明"></a>14.9.1 基本说明</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231105152549978.png" alt="image-20231105152549978"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">HashSet set = <span class="keyword">new</span> HashSet();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public HashSet() &#123;</span></span><br><span class="line"><span class="comment">map = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">set.add(<span class="keyword">null</span>);</span><br><span class="line">set.add(<span class="keyword">null</span>);  <span class="comment">// 会返回false表示添加失败</span></span><br><span class="line">System.out.println(<span class="string">&quot;set=&quot;</span> + set);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 在执行 add 方法后，会返回一个 boolean 值</span></span><br><span class="line"><span class="comment">//2. 如果添加成功，返回 true, 否则返回 false</span></span><br><span class="line"><span class="comment">//3. 可以通过 remove 指定删除哪个对象</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;john&quot;</span>));<span class="comment">//T</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;lucy&quot;</span>));<span class="comment">//T</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;john&quot;</span>));<span class="comment">//F</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;jack&quot;</span>));<span class="comment">//T</span></span><br><span class="line">System.out.println(set.add(<span class="string">&quot;Rose&quot;</span>));<span class="comment">//T</span></span><br><span class="line">System.out.println(<span class="string">&quot;set=&quot;</span> + set);</span><br><span class="line"><span class="comment">// 输出顺序：set=[null, Rose, john, lucy, jack]</span></span><br></pre></td></tr></table></figure>



<ul>
<li><p>怎么理解**<font color="red">不能添加重复的元素或对象</font>**</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HashSet set = <span class="keyword">new</span> HashSet();</span><br><span class="line">set.add(<span class="string">&quot;lucy&quot;</span>);<span class="comment">//添加成功T</span></span><br><span class="line">set.add(<span class="string">&quot;lucy&quot;</span>);<span class="comment">//加入不了F</span></span><br><span class="line">set.add(<span class="keyword">new</span> Dog(<span class="string">&quot;tom&quot;</span>));<span class="comment">//T</span></span><br><span class="line">set.add(<span class="keyword">new</span> Dog(<span class="string">&quot;tom&quot;</span>));<span class="comment">//T（是两个不同的对象）</span></span><br><span class="line">System.out.println(<span class="string">&quot;set=&quot;</span> + set);</span><br><span class="line"></span><br><span class="line">set.add(<span class="keyword">new</span> String(<span class="string">&quot;hsp&quot;</span>));<span class="comment">//T</span></span><br><span class="line">set.add(<span class="keyword">new</span> String(<span class="string">&quot;hsp&quot;</span>));<span class="comment">//F 添加失败，为什么？看add源码（调用equals进行比较）</span></span><br><span class="line">System.out.println(<span class="string">&quot;set=&quot;</span> + set);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="14-9-2-HashSet底层机制"><a href="#14-9-2-HashSet底层机制" class="headerlink" title="14.9.2 HashSet底层机制"></a>14.9.2 HashSet底层机制</h3><ul>
<li><p>HashSet底层是**<font color="red">HashMap</font>**，底层原理是<font color="red"> <strong>数组 + 链表 + 红黑树</strong></font></p>
</li>
<li><p>HashSet只使用到了HashMap中的Key，value是一个常量PRESENT。</p>
</li>
<li><p>模拟一个简单的 数组+链表结构</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetStructure</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 模拟HashSet底层的 数组+链表结构</span></span><br><span class="line">        <span class="comment">// 1.创建数组(也叫作表)</span></span><br><span class="line">        Node[] table = <span class="keyword">new</span> Node[<span class="number">16</span>];</span><br><span class="line">        <span class="comment">// 2.创建节点</span></span><br><span class="line">        Node john = <span class="keyword">new</span> Node(<span class="string">&quot;john&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        table[<span class="number">2</span>] = john;</span><br><span class="line">        Node jack = <span class="keyword">new</span> Node(<span class="string">&quot;jack&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        john.next = jack;   <span class="comment">//挂载到john节点之后</span></span><br><span class="line">        Node rose = <span class="keyword">new</span> Node(<span class="string">&quot;rose&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        jack.next = rose;</span><br><span class="line"></span><br><span class="line">        Node lucy = <span class="keyword">new</span> Node(<span class="string">&quot;lucy&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">        table[<span class="number">3</span>] = lucy;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    Object item;    <span class="comment">//存放数据</span></span><br><span class="line">    Node next;      <span class="comment">//指向下一个节点</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(String john, Object o)</span> </span>&#123;</span><br><span class="line">        item = john;</span><br><span class="line">        next = (Node) o;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><a id="hashset"><strong>add底层源码分析</strong></a></li>
</ul>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>HashSet底层是<strong>HashMap</strong></li>
<li>添加一个元素时，先得到**<font color="red">hash值-会转成-&gt;索引值</font>**</li>
<li>找到存储数据表table，看这个索引位置是否已经存放的有元素<ul>
<li>如果没有，直接加入</li>
<li>如果有，调用 <strong><font color="red">equals</font></strong> 比较。如果相同，就放弃添加；如果不相同，则添加到最后</li>
</ul>
</li>
<li>在Java 8中，如果一条<strong>链表的元素个数</strong>到达TREEIFY_THRESHOLD(默认是<font color="red">8</font>)，并且<strong>table的大小</strong>&gt;=<br>MIN_TREEIFY_CAPACITY(默认<font color="red">64</font>)，就会进行<font color="red"><strong>树化(红黑树)</strong></font></li>
</ol>
</div>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HashSet hashSet = <span class="keyword">new</span> HashSet();</span><br><span class="line">hashSet.add(<span class="string">&quot;java&quot;</span>);<span class="comment">//到此位置，第 1 次 add 分析完毕.</span></span><br><span class="line">hashSet.add(<span class="string">&quot;php&quot;</span>);<span class="comment">//到此位置，第 2 次 add 分析完毕</span></span><br><span class="line">hashSet.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;set=&quot;</span> + hashSet);</span><br></pre></td></tr></table></figure>

<img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108123806622.png" alt="image-20231108123806622">

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108123834886.png" alt="image-20231108123834886"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108123910809.png" alt="image-20231108123910809"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108123936587.png" alt="image-20231108123936587"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108124038555.png" alt="image-20231108124038555"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108124055848.png" alt="image-20231108124055848"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108124106708.png" alt="image-20231108124106708"></p>
<ul>
<li><font color="red"><strong>扩容和转化成红黑树机制</strong></font></li>
</ul>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>HashSet底层是HashMap，第一次添加时，table数组扩容到**<font color="red">16</font><strong>，临界值(threshold)是</strong><font color="red">12</font>** 【16 * 加载因子<br>(loadFactor)0.75 = 12】</li>
<li>如果table数组使用到了临界值12，就会扩容到16 * 2 = <strong>32</strong>，新的临界值就是32 * 0.75 =<strong>24</strong>，依次类推</li>
<li>在Java8中, 如果一条链表的<font color="red">元素个数到达 TREEIFY_THRESHOLD(默认是8)</font>.并且<font color="red">table的大小&gt;=MIN TREEIFY CAPACITY(默认64),</font>就会进行**<font color="red">树化</font>**(红黑树)，否则仍然采用数组扩容机制</li>
</ol>
</div>

<p>【小技巧】怎么让不同对象挂载到table的统一条列表。重写类的hashCode方法使其返回同一个固定值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HashSet hashSet = <span class="keyword">new</span> HashSet();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">    hashSet.add(i);<span class="comment">//1,2,3,4,5...100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108125936570.png" alt="image-20231108125936570"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">12</span>; i++) &#123;</span><br><span class="line">    hashSet.add(<span class="keyword">new</span> A(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108130926446.png" alt="image-20231108130926446"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108131551385.png" alt="image-20231108131551385"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231108131821816.png" alt="image-20231108131821816"></p>
<h3 id="14-9-3-HashSet练习题"><a href="#14-9-3-HashSet练习题" class="headerlink" title="14.9.3 HashSet练习题"></a>14.9.3 HashSet练习题</h3><ul>
<li><p>定义一个Employee类，该类包含：私有成员属性名称，年龄要求；<br>1.创建3个雇员对象放入HashSet中<br>2.当名称和Aage的值相同时，认为是相同员工，不能添加到HashSet集合中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Employee&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Employee employee = (Employee) o;</span><br><span class="line">        <span class="keyword">return</span> age == employee.age &amp;&amp; Objects.equals(name, employee.name);	<span class="comment">//当name和age相同时会返回true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name, age); <span class="comment">//name和age(哈希值)相同会返回相同哈希值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>定义一个Employee类，该类包含:private成员属性name,sal,birthday(MyDate类型)，其中 birthday 为MyDate类型(属性包括:year, month, day),要求:<br>1.创建3个Employee放入HashSet中<br>2.当name和birthday的值相同时，认为是相同员工,不能添加到HashSet集合中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee2</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> sal;</span><br><span class="line">    <span class="keyword">private</span> MyDate birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee2</span><span class="params">(String name, <span class="keyword">double</span> sal, MyDate birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.sal = sal;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Employee2 employee2 = (Employee2) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(name, employee2.name) &amp;&amp; Objects.equals(birthday, employee2.birthday);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name, birthday);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> year;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> day;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDate</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">        <span class="keyword">this</span>.month = month;</span><br><span class="line">        <span class="keyword">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        MyDate myDate = (MyDate) o;</span><br><span class="line">        <span class="keyword">return</span> year == myDate.year &amp;&amp; month == myDate.month &amp;&amp; day == myDate.day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(year, month, day); <span class="comment">// year,month,day的哈希值相同，会返回相同的哈希值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>看看Objects.hash()源码</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231109093116457.png" alt="image-20231109093116457"></p>
</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231109093157377.png" alt="image-20231109093157377"></p>
<ul>
<li><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231115103348306.png" alt="image-20231115103348306"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">说明：修改之后的p1对象和原p1对象的hash值不一致，所以p1.name=&quot;CC&quot;以后，现在的p1对象用的是原p1对象的hash值索引位置，而不是它现在的hash值索引位置。</span></span><br><span class="line"><span class="comment">当set.add(new Person(1001, &quot;CC&quot;))后，在该对象的hash值索引位置不会比较到相同元素（原因如上），所以可以添加成功</span></span><br><span class="line"><span class="comment">当set.add(new Person(1001, &quot;AA&quot;))后，该对象会加在现p1对象链表的后面，因为hash值相同且和p1不equals</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetExercise3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        HashSet set = <span class="keyword">new</span> HashSet();</span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person(<span class="number">1001</span>, <span class="string">&quot;AA&quot;</span>);</span><br><span class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="number">1002</span>, <span class="string">&quot;BB&quot;</span>);</span><br><span class="line">        set.add(p1);</span><br><span class="line">        set.add(p2);</span><br><span class="line">        System.out.println(set);</span><br><span class="line">        <span class="comment">//[Person&#123;name=&#x27;BB&#x27;, age=1002&#125;, Person&#123;name=&#x27;AA&#x27;, age=1001&#125;]</span></span><br><span class="line"></span><br><span class="line">        p1.name = <span class="string">&quot;CC&quot;</span>;</span><br><span class="line">        System.out.println(set);</span><br><span class="line">        <span class="comment">//[Person&#123;name=&#x27;BB&#x27;, age=1002&#125;, Person&#123;name=&#x27;CC&#x27;, age=1001&#125;]</span></span><br><span class="line">        System.out.println(set.remove(p1)); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="number">1001</span>, <span class="string">&quot;CC&quot;</span>));</span><br><span class="line">        System.out.println(set);</span><br><span class="line">        <span class="comment">//[Person&#123;name=&#x27;BB&#x27;, age=1002&#125;, Person&#123;name=&#x27;CC&#x27;, age=1001&#125;, Person&#123;name=&#x27;CC&#x27;, age=1001&#125;]</span></span><br><span class="line"></span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="number">1001</span>, <span class="string">&quot;AA&quot;</span>));</span><br><span class="line">        System.out.println(set);</span><br><span class="line">        <span class="comment">//[Person&#123;name=&#x27;BB&#x27;, age=1002&#125;, Person&#123;name=&#x27;CC&#x27;, age=1001&#125;, Person&#123;name=&#x27;CC&#x27;, age=1001&#125;, Person&#123;name=&#x27;AA&#x27;, age=1001&#125;]</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="14-10-Set-LinkedHashSet"><a href="#14-10-Set-LinkedHashSet" class="headerlink" title="14.10 Set - LinkedHashSet"></a>14.10 Set - LinkedHashSet</h2><h3 id="14-10-1-基本说明"><a href="#14-10-1-基本说明" class="headerlink" title="14.10.1 基本说明"></a>14.10.1 基本说明</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231109103359524.png" alt="image-20231109103359524"></p>
<h3 id="14-10-2-LinkedHashSet底层机制"><a href="#14-10-2-LinkedHashSet底层机制" class="headerlink" title="14.10.2 LinkedHashSet底层机制"></a>14.10.2 LinkedHashSet底层机制</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231109111130186.png" alt="image-20231109111130186"></p>
<ul>
<li>节点是LinkedHashMap$Entry类型（继承了HashMap$Node），有自身的before和tail属性，同时也有父类的next属性</li>
<li><strong>p.next = newNode(hash, key, value, null);</strong> 其实做了两件事：一是创建新节点(Entry类型)，且将新节点 **linkNodeLast()**接到双向列表tail尾节点处；二是将p.next指向新节点</li>
<li>疑问？afterNodeAccess(e);和afterNodeInsertion(evict);的作用是什么</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashSetSource</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LinkedHashSet linkedHashSet = <span class="keyword">new</span> LinkedHashSet();</span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> Car(<span class="string">&quot;奥拓&quot;</span>, <span class="number">1000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> Car(<span class="string">&quot;奥迪&quot;</span>, <span class="number">300000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> Car(<span class="string">&quot;法拉利&quot;</span>, <span class="number">10000000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> Car(<span class="string">&quot;奥迪&quot;</span>, <span class="number">300000</span>));<span class="comment">//加入不了</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> Car(<span class="string">&quot;保时捷&quot;</span>, <span class="number">70000000</span>));<span class="comment">//OK</span></span><br><span class="line">        linkedHashSet.add(<span class="keyword">new</span> Car(<span class="string">&quot;奥迪&quot;</span>, <span class="number">300000</span>));<span class="comment">//加入不了</span></span><br><span class="line">        System.out.println(<span class="string">&quot;linkedHashSet=&quot;</span> + linkedHashSet);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. LinkedHashSet 加入顺序和取出元素顺序一致</span></span><br><span class="line">        <span class="comment">// 2. LinkedHashSet 底层维护的是一个LinkedHashMap(HashMap的子类)</span></span><br><span class="line">        <span class="comment">// 3. LinkedHashSet 底层结构 （数组table+双向链表）</span></span><br><span class="line">        <span class="comment">// 4. 第一次添加时，直接将数组table扩容到16，</span></span><br><span class="line">        <span class="comment">// 5. 数组table是HashMap$Node[]类型，存放的节点类型是LinkedHashMap$Entry（继承了HashMap$Node）</span></span><br><span class="line">        <span class="comment">/* Entry继承关系是在内部类完成的</span></span><br><span class="line"><span class="comment">        static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; &#123;</span></span><br><span class="line"><span class="comment">            LinkedHashMap.Entry&lt;K,V&gt; before, after;</span></span><br><span class="line"><span class="comment">            Entry(int hash, K key, V value, HashMap.Node&lt;K,V&gt; next) &#123;</span></span><br><span class="line"><span class="comment">                super(hash, key, value, next);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Car</span><span class="params">(String name, <span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;\nCar&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写 equals 方法 和 hashCode</span></span><br><span class="line">    <span class="comment">//当 name 和 price 相同时， 就返回相同的 hashCode 值, equals 返回 t</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Car car = (Car) o;</span><br><span class="line">        <span class="keyword">return</span> Double.compare(car.price, price) == <span class="number">0</span> &amp;&amp;</span><br><span class="line">                Objects.equals(name, car.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name, price);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="14-11-Map接口"><a href="#14-11-Map接口" class="headerlink" title="14.11 Map接口"></a>14.11 Map接口</h2><h3 id="14-11-1-基本介绍"><a href="#14-11-1-基本介绍" class="headerlink" title="14.11.1 基本介绍"></a>14.11.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231113103555012.png" alt="image-20231113103555012"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231113104451042.png" alt="image-20231113104451042"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">    map.put(<span class="string">&quot;no1&quot;</span>, <span class="string">&quot;韩顺平&quot;</span>);<span class="comment">//k-v</span></span><br><span class="line">    map.put(<span class="string">&quot;no2&quot;</span>, <span class="string">&quot;张无忌&quot;</span>);<span class="comment">//k-v</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1. k-v存储在 HashMap$Node node = new Node(hash,key,value,null)</span></span><br><span class="line"><span class="comment">        2. k-v为了方便遍历，还会创建 entrySet 集合，该集合存放的元素类型是 Entry</span></span><br><span class="line"><span class="comment">            而一个Entry对象有k,v  即 transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span></span><br><span class="line"><span class="comment">        3. entrySet中，定义的类型是Map.Entry，但实际存放的还是HashMap$Node</span></span><br><span class="line"><span class="comment">            因为hashMap$Node 实现了Map.Entry接口，即static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt;&#123;&#125;</span></span><br><span class="line"><span class="comment">        4. 当把hashMap$Node 对象存放到 entrySet 就方便我们遍历，因为 Map.Entry提供了两个重要的方法</span></span><br><span class="line"><span class="comment">            K getKey(); V getValue();</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    Set set = map.entrySet();</span><br><span class="line">    System.out.println(set.getClass()); <span class="comment">//HashMap$EntrySet</span></span><br><span class="line">    <span class="keyword">for</span> (Object obj : set) &#123;</span><br><span class="line">        System.out.println(obj.getClass()); <span class="comment">//HashMap$Node</span></span><br><span class="line">        <span class="comment">// 为了从HashMap$Node中取出k-v</span></span><br><span class="line">        <span class="comment">// 1.先向下转型</span></span><br><span class="line">        Map.Entry entry = (Map.Entry)obj;</span><br><span class="line">        System.out.println(entry.getKey() + <span class="string">&quot;-&quot;</span> + entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Set set1 = map.keySet();</span><br><span class="line">    System.out.println(set1.getClass()); <span class="comment">//HashMap$KeySet</span></span><br><span class="line">    Collection values = map.values();</span><br><span class="line">    System.out.println(values.getClass()); <span class="comment">//HashMap$Values</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="14-11-2-常用方法"><a href="#14-11-2-常用方法" class="headerlink" title="14.11.2 常用方法"></a>14.11.2 常用方法</h3><ol>
<li> put：添加k-v，若k存在则<strong>更新</strong>v</li>
<li>remove：根据键删除映射关系</li>
<li>get：根据键获取值</li>
<li>size:获取元素个数</li>
<li> isEmpty:判断个数是否为 0</li>
<li>clear:清除 所有k-v</li>
<li>containsKey:查找键是否存在</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//演示 map 接口常用方法</span></span><br><span class="line">        <span class="comment">// put：添加k-v，若k存在则更新v</span></span><br><span class="line">        Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">        map.put(<span class="string">&quot;邓超&quot;</span>, <span class="keyword">new</span> Object());<span class="comment">//OK</span></span><br><span class="line">        map.put(<span class="string">&quot;邓超&quot;</span>, <span class="string">&quot;孙俪&quot;</span>);<span class="comment">//替换-&gt; 一会分析源码</span></span><br><span class="line">        map.put(<span class="string">&quot;王宝强&quot;</span>, <span class="string">&quot;马蓉&quot;</span>);<span class="comment">//OK</span></span><br><span class="line">        map.put(<span class="string">&quot;宋喆&quot;</span>, <span class="string">&quot;马蓉&quot;</span>);<span class="comment">//OK</span></span><br><span class="line">        map.put(<span class="string">&quot;刘令博&quot;</span>, <span class="keyword">null</span>);<span class="comment">//OK</span></span><br><span class="line">        map.put(<span class="keyword">null</span>, <span class="string">&quot;刘亦菲&quot;</span>);<span class="comment">//OK</span></span><br><span class="line">        map.put(<span class="string">&quot;鹿晗&quot;</span>, <span class="string">&quot;关晓彤&quot;</span>);<span class="comment">//OK</span></span><br><span class="line">        map.put(<span class="string">&quot;hsp&quot;</span>, <span class="string">&quot;hsp 的老婆&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map=&quot;</span> + map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// remove:根据键删除映射关系</span></span><br><span class="line">        map.remove(<span class="keyword">null</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;map=&quot;</span> + map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get：根据键获取值</span></span><br><span class="line">        Object val = map.get(<span class="string">&quot;鹿晗&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;val=&quot;</span> + val);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// size:获取元素个数</span></span><br><span class="line">        System.out.println(<span class="string">&quot;k-v=&quot;</span> + map.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// isEmpty:判断个数是否为 0</span></span><br><span class="line">        System.out.println(map.isEmpty());<span class="comment">//F</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// clear:清除 k-v</span></span><br><span class="line">        <span class="comment">//map.clear();</span></span><br><span class="line">        System.out.println(<span class="string">&quot;map=&quot;</span> + map);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// containsKey:查找键是否存在</span></span><br><span class="line">        System.out.println(<span class="string">&quot;结果=&quot;</span> + map.containsKey(<span class="string">&quot;hsp&quot;</span>));<span class="comment">//T</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="14-11-3-遍历方式"><a href="#14-11-3-遍历方式" class="headerlink" title="14.11.3 遍历方式"></a>14.11.3 遍历方式</h3><ol>
<li><p>第一组: <strong>先取出 所有的 Key , 通过 Key 取出对应的 Value</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Set keyset = map.keySet();</span><br><span class="line"><span class="comment">//(1) 增强 for</span></span><br><span class="line">System.out.println(<span class="string">&quot;-----第一种方式-------&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (Object key : keyset) &#123;</span><br><span class="line">System.out.println(key + <span class="string">&quot;-&quot;</span> + map.get(key));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//(2) 迭代器</span></span><br><span class="line">System.out.println(<span class="string">&quot;----第二种方式--------&quot;</span>);</span><br><span class="line">Iterator iterator = keyset.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">Object key = iterator.next();</span><br><span class="line">System.out.println(key + <span class="string">&quot;-&quot;</span> + map.get(key));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第二组: <strong>把所有的 values 取出</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Collection values = map.values();</span><br><span class="line"><span class="comment">//这里可以使用所有的 Collections 使用的遍历方法</span></span><br><span class="line"><span class="comment">//(1) 增强 for</span></span><br><span class="line">System.out.println(<span class="string">&quot;---取出所有的 value 增强 for----&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (Object value : values) &#123;</span><br><span class="line">    System.out.println(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//(2) 迭代器</span></span><br><span class="line">System.out.println(<span class="string">&quot;---取出所有的 value 迭代器----&quot;</span>);</span><br><span class="line">Iterator iterator2 = values.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator2.hasNext()) &#123;</span><br><span class="line">    Object value = iterator2.next();</span><br><span class="line">    System.out.println(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>第三组: <strong>通过 EntrySet 来获取 k-v</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Set entrySet = map.entrySet();<span class="comment">// EntrySet&lt;Map.Entry&lt;K,V&gt;&gt;</span></span><br><span class="line"><span class="comment">//(1) 增强 for</span></span><br><span class="line">System.out.println(<span class="string">&quot;----使用 EntrySet 的 for 增强(第 3 种)----&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (Object entry : entrySet) &#123;</span><br><span class="line">    <span class="comment">//将 entry 转成 Map.Entry</span></span><br><span class="line">    Map.Entry m = (Map.Entry) entry;</span><br><span class="line">    System.out.println(m.getKey() + <span class="string">&quot;-&quot;</span> + m.getValue());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//(2) 迭代器</span></span><br><span class="line">System.out.println(<span class="string">&quot;----使用 EntrySet 的 迭代器(第 4 种)----&quot;</span>);</span><br><span class="line">Iterator iterator3 = entrySet.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator3.hasNext()) &#123;</span><br><span class="line">    Object entry = iterator3.next();</span><br><span class="line">    <span class="comment">//System.out.println(entry.getClass());//HashMap$Node -实现-&gt; Map.Entry (getKey,getValue)</span></span><br><span class="line">    <span class="comment">//向下转型 Map.Entry</span></span><br><span class="line">    Map.Entry m = (Map.Entry) entry;</span><br><span class="line">    System.out.println(m.getKey() + <span class="string">&quot;-&quot;</span> + m.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="14-12-Map-HashMap"><a href="#14-12-Map-HashMap" class="headerlink" title="14.12 Map - HashMap"></a>14.12 Map - HashMap</h2><h3 id="14-12-1-基本说明"><a href="#14-12-1-基本说明" class="headerlink" title="14.12.1 基本说明"></a>14.12.1 基本说明</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231113160440645.png" alt="image-20231113160440645"></p>
<h3 id="14-12-2-HashMap底层源码"><a href="#14-12-2-HashMap底层源码" class="headerlink" title="14.12.2 HashMap底层源码"></a>14.12.2 HashMap底层源码</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231113163611349.png" alt="image-20231113163611349"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231113163812898.png" alt="image-20231113163812898"></p>
<ul>
<li><p>put底层源码分析：具体流程与<a href="#hashset">HashSet底层机制</a>一样</p>
</li>
<li><p>需要补充的一点：当Key相同时，会更新对应的Value</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231113164722020.png" alt="image-20231113164722020"></p>
</li>
<li><p>扩容和树化机制</p>
</li>
</ul>
<h2 id="14-13-Map-Hashtable"><a href="#14-13-Map-Hashtable" class="headerlink" title="14.13 Map - Hashtable"></a>14.13 Map - Hashtable</h2><h3 id="14-13-1-基本介绍"><a href="#14-13-1-基本介绍" class="headerlink" title="14.13.1 基本介绍"></a>14.13.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231114101200404.png" alt="image-20231114101200404"></p>
<h3 id="14-13-2-底层机制"><a href="#14-13-2-底层机制" class="headerlink" title="14.13.2 底层机制"></a>14.13.2 底层机制</h3><ol>
<li>底层有Entry[]类型的数组table 初始化大小为**<font color="red">11</font>**</li>
<li>初始临界值 threshold <strong><font color="red">8</font></strong> = 11 * 0.75</li>
<li>扩容机制:<ul>
<li> 执行 addEntry(hash, key, value, index); 封装k-v到一个Entry</li>
<li>  当if (count &gt;= threshold) 满足时就扩容，指向rehash()</li>
<li> 按照 int newCapacity = (oldCapacity &lt;&lt; 1) + 1; 方式扩容</li>
</ul>
</li>
</ol>
<h3 id="14-13-2-Hashtable-VS-HashMap"><a href="#14-13-2-Hashtable-VS-HashMap" class="headerlink" title="14.13.2 Hashtable VS HashMap"></a>14.13.2 Hashtable VS HashMap</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231114101241707.png" alt="image-20231114101241707"></p>
<h2 id="14-14-Map-Properties"><a href="#14-14-Map-Properties" class="headerlink" title="14.14 Map - Properties"></a>14.14 Map - Properties</h2><h3 id="14-14-1-基本介绍"><a href="#14-14-1-基本介绍" class="headerlink" title="14.14.1 基本介绍"></a>14.14.1 <a id="properties">基本介绍</a></h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231114103553427.png" alt="image-20231114103553427"></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xudong-bupt/p/3758136.html">Java读取Properties配置文件</a></p>
<h2 id="14-15-开发中如何选择集合实现类（记住！）"><a href="#14-15-开发中如何选择集合实现类（记住！）" class="headerlink" title="14.15 开发中如何选择集合实现类（记住！）"></a>14.15 开发中如何选择集合实现类（记住！）</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231114104350142.png" alt="image-20231114104350142"></p>
<h2 id="14-16-TreeSet-和-TreeMap"><a href="#14-16-TreeSet-和-TreeMap" class="headerlink" title="14.16 TreeSet 和 TreeMap"></a>14.16 TreeSet 和 TreeMap</h2><h3 id="14-16-1-TreeSet"><a href="#14-16-1-TreeSet" class="headerlink" title="14.16.1 TreeSet"></a>14.16.1 TreeSet</h3><ul>
<li><font color="red">注意：</font>如果TreeSet使用的是无参构造器，即没有传入Comparator接口的匿名内部类。使用add(key)时，底层会调用key实现的Comparable接口进行比较，Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key; 如果Key没有实现Comparable接口，则会报错 ClassCastException</li>
<li><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231115102142671.png" alt="image-20231115102142671"></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSet_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1. 当我们使用无参构造器，创建 TreeSet 时，仍然是无序的</span></span><br><span class="line">        <span class="comment">//2. 希望添加的元素，按照字符串大小（或字符串长度）来排序</span></span><br><span class="line">        <span class="comment">//3. 使用 TreeSet 提供的一个构造器，可以传入一个比较器(匿名内部类)</span></span><br><span class="line">        <span class="comment">// 并指定排序规则</span></span><br><span class="line">        TreeSet treeSet = <span class="keyword">new</span> TreeSet(<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//下面调用 String 的 compareTo 方法进行字符串大小比较</span></span><br><span class="line">                <span class="comment">//如果老韩要求加入的元素，按照长度大小排序</span></span><br><span class="line">                <span class="comment">//return ((String) o2).compareTo((String) o1);</span></span><br><span class="line">                <span class="keyword">return</span> ((String) o1).length() - ((String) o2).length();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加数据.</span></span><br><span class="line">        treeSet.add(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">        treeSet.add(<span class="string">&quot;tom&quot;</span>);<span class="comment">//3</span></span><br><span class="line">        treeSet.add(<span class="string">&quot;sp&quot;</span>);</span><br><span class="line">        treeSet.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        treeSet.add(<span class="string">&quot;abc&quot;</span>);<span class="comment">//3 比较规则是长度，已经存在长度为3的元素，&quot;abc&quot;添加不了</span></span><br><span class="line">        System.out.println(<span class="string">&quot;treeSet=&quot;</span> + treeSet);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 简单看看源码</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1. 构造器把传入的比较器对象，赋给了 TreeSet 的底层的 TreeMap 的属性 this.comparator</span></span><br><span class="line"><span class="comment">            public TreeMap(Comparator&lt;? super K&gt; comparator) &#123;</span></span><br><span class="line"><span class="comment">                this.comparator = comparator;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        2. 在 调用 treeSet.add(&quot;tom&quot;), 在底层会执行到</span></span><br><span class="line"><span class="comment">            if (cpr != null) &#123; //cpr 就是我们的匿名内部类(对象)</span></span><br><span class="line"><span class="comment">                do &#123;</span></span><br><span class="line"><span class="comment">                    parent = t;</span></span><br><span class="line"><span class="comment">                    //动态绑定到我们的匿名内部类(对象)compare</span></span><br><span class="line"><span class="comment">                    cmp = cpr.compare(key, t.key);</span></span><br><span class="line"><span class="comment">                    if (cmp &lt; 0)</span></span><br><span class="line"><span class="comment">                        t = t.left;</span></span><br><span class="line"><span class="comment">                    else if (cmp &gt; 0)</span></span><br><span class="line"><span class="comment">                        t = t.right;</span></span><br><span class="line"><span class="comment">                    else //如果相等，即返回 0,这个 Key 就没有加入</span></span><br><span class="line"><span class="comment">                        return t.setValue(value);</span></span><br><span class="line"><span class="comment">                &#125; while (t != null);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="14-16-2-TreeMap"><a href="#14-16-2-TreeMap" class="headerlink" title="14.16.2 TreeMap"></a>14.16.2 TreeMap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMap_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TreeMap treeMap = <span class="keyword">new</span> TreeMap(<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//按照传入的 key(String) 的大小进行排序</span></span><br><span class="line">                <span class="comment">//按照 Key(String) 的长度大小排序</span></span><br><span class="line">                <span class="comment">//return ((String) o2).compareTo((String) o1);</span></span><br><span class="line">                <span class="keyword">return</span> ((String) o2).length() - ((String) o1).length();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        treeMap.put(<span class="string">&quot;jack&quot;</span>, <span class="string">&quot;杰克&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="string">&quot;tom&quot;</span>, <span class="string">&quot;汤姆&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="string">&quot;kristina&quot;</span>, <span class="string">&quot;克瑞斯提诺&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="string">&quot;smith&quot;</span>, <span class="string">&quot;斯密斯&quot;</span>);</span><br><span class="line">        treeMap.put(<span class="string">&quot;hsp&quot;</span>, <span class="string">&quot;韩顺平&quot;</span>);<span class="comment">//加入不了,比较规则是Key的长度，已存在长度为3的Key</span></span><br><span class="line">        System.out.println(<span class="string">&quot;treemap=&quot;</span> + treeMap);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 源码解读</span></span><br><span class="line"><span class="comment">        1. 构造器. 把传入的实现了 Comparator 接口的匿名内部类(对象)，传给给 TreeMap 的 comparator</span></span><br><span class="line"><span class="comment">            public TreeMap(Comparator&lt;? super K&gt; comparator) &#123;</span></span><br><span class="line"><span class="comment">                this.comparator = comparator;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        2. 调用 put 方法</span></span><br><span class="line"><span class="comment">        2.1 第一次添加, 把 k-v 封装到 Entry 对象，放入 root</span></span><br><span class="line"><span class="comment">            Entry&lt;K,V&gt; t = root;</span></span><br><span class="line"><span class="comment">            if (t == null) &#123;</span></span><br><span class="line"><span class="comment">                compare(key, key); // type (and possibly null) check</span></span><br><span class="line"><span class="comment">                root = new Entry&lt;&gt;(key, value, null);</span></span><br><span class="line"><span class="comment">                size = 1;</span></span><br><span class="line"><span class="comment">                modCount++;</span></span><br><span class="line"><span class="comment">                return null;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        2.2 以后添加</span></span><br><span class="line"><span class="comment">            Comparator&lt;? super K&gt; cpr = comparator;</span></span><br><span class="line"><span class="comment">            if (cpr != null) &#123;</span></span><br><span class="line"><span class="comment">                do &#123; //遍历所有的 key , 给当前 key 找到适当位置</span></span><br><span class="line"><span class="comment">                    parent = t;</span></span><br><span class="line"><span class="comment">                    cmp = cpr.compare(key, t.key);//动态绑定到我们的匿名内部类的 compare</span></span><br><span class="line"><span class="comment">                    if (cmp &lt; 0)</span></span><br><span class="line"><span class="comment">                        t = t.left;</span></span><br><span class="line"><span class="comment">                    else if (cmp &gt; 0)</span></span><br><span class="line"><span class="comment">                        t = t.right;</span></span><br><span class="line"><span class="comment">                    else //如果遍历过程中，发现准备添加 Key 和当前已有的 Key 相等，就不添加</span></span><br><span class="line"><span class="comment">                         return t.setValue(value);</span></span><br><span class="line"><span class="comment">                &#125; while (t != null);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="14-17-Collections工具类"><a href="#14-17-Collections工具类" class="headerlink" title="14.17 Collections工具类"></a>14.17 Collections工具类</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231114143658150.png" alt="image-20231114143658150"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231114143810012.png" alt="image-20231114143810012"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建 ArrayList 集合，用于测试.</span></span><br><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;smith&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;king&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;milan&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1）reverse(List)：反转 List 中元素的顺序</span></span><br><span class="line">Collections.reverse(list);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2） shuffle(List)：对 List 集合元素进行随机排序</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">Collections.shuffle(list);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3）sort(List)：根据元素的自然顺序对指定 List 集合元素按升序排序</span></span><br><span class="line">Collections.sort(list);</span><br><span class="line">System.out.println(<span class="string">&quot;自然排序后&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4）sort(List，Comparator)：根据指定的 Comparator 产生的顺序对 List 集合元素进行排序</span></span><br><span class="line"><span class="comment">// 比如我们希望按照 字符串的长度大小排序</span></span><br><span class="line">Collections.sort(list, <span class="keyword">new</span> Comparator() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> ((String) o2).length() - ((String) o1).length();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;字符串长度大小排序=&quot;</span> + list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6）swap(List，int， int)：将指定 list 集合中的 i 处元素和 j 处元素进行交换</span></span><br><span class="line">Collections.swap(list, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;交换后的情况&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list=&quot;</span> + list);</span><br></pre></td></tr></table></figure>



<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231114144446373.png" alt="image-20231114144446373"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1）Object max(Collection)：根据元素的自然顺序，返回给定集合中的最大元素</span></span><br><span class="line">System.out.println(<span class="string">&quot;自然顺序最大元素=&quot;</span> + Collections.max(list));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2）Object max(Collection，Comparator)：根据 Comparator 指定的顺序，返回给定集合中的最大元素</span></span><br><span class="line"><span class="comment">//比如，我们要返回长度最大的元素</span></span><br><span class="line">Object maxObject = Collections.max(list, <span class="keyword">new</span> Comparator() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> ((String)o1).length() - ((String)o2).length();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;长度最大的元素=&quot;</span> + maxObject);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3）Object min(Collection)</span></span><br><span class="line"><span class="comment">// 4）Object min(Collection，Comparator)</span></span><br><span class="line"><span class="comment">//上面的两个方法，参考 max 即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5）int frequency(Collection，Object)：返回指定集合中指定元素的出现次数</span></span><br><span class="line">System.out.println(<span class="string">&quot;tom 出现的次数=&quot;</span> + Collections.frequency(list, <span class="string">&quot;tom&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6）void copy(List dest,List src)：将 src 中的内容复制到 dest 中</span></span><br><span class="line">ArrayList dest = <span class="keyword">new</span> ArrayList();</span><br><span class="line"><span class="comment">//为了完成一个完整拷贝，我们需要先给 dest 赋值，大小和 list.size()一样</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">dest.add(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//拷贝</span></span><br><span class="line">Collections.copy(dest, list);</span><br><span class="line">System.out.println(<span class="string">&quot;dest=&quot;</span> + dest);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7）boolean replaceAll(List list，Object oldVal，Object newVal)：使用新值替换 List 对象的所有旧值</span></span><br><span class="line">Collections.replaceAll(list, <span class="string">&quot;tom&quot;</span>, <span class="string">&quot;汤姆&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;list 替换后=&quot;</span> + list);</span><br></pre></td></tr></table></figure>



<h1 id="第十五章-泛型"><a href="#第十五章-泛型" class="headerlink" title="第十五章 泛型"></a>第十五章 泛型</h1><h2 id="15-1-泛型入门"><a href="#15-1-泛型入门" class="headerlink" title="15.1 泛型入门"></a>15.1 泛型入门</h2><h3 id="15-1-1-传统方法问题分析"><a href="#15-1-1-传统方法问题分析" class="headerlink" title="15.1.1 传统方法问题分析"></a>15.1.1 传统方法问题分析</h3><ul>
<li>不能对加入到集合ArrayList中的数据类型进行约束(不安全)</li>
<li>遍历的时候，需要进行类型转换，如果集合中的数据量较大，对效率有影响</li>
</ul>
<h3 id="15-1-2-泛型的好处"><a href="#15-1-2-泛型的好处" class="headerlink" title="15.1.2  泛型的好处"></a>15.1.2  泛型的好处</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231115152106005.png" alt="image-20231115152106005"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 当我们 ArrayList&lt;Dog&gt; 表示存放到 ArrayList 集合中的元素是 Dog 类型 (细节后面说...)</span></span><br><span class="line"><span class="comment">//2. 如果编译器发现添加的类型，不满足要求，就会报错</span></span><br><span class="line"><span class="comment">//3. 在遍历的时候，可以直接取出 Dog 类型而不是 Object</span></span><br><span class="line"><span class="comment">//4. public class ArrayList&lt;E&gt; &#123;&#125; E 称为泛型,那么 Dog-&gt;E</span></span><br><span class="line">ArrayList&lt;Dog&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;Dog&gt;();</span><br><span class="line">arrayList.add(<span class="keyword">new</span> Dog(<span class="string">&quot;旺财&quot;</span>, <span class="number">10</span>));</span><br><span class="line">arrayList.add(<span class="keyword">new</span> Dog(<span class="string">&quot;发财&quot;</span>, <span class="number">1</span>));</span><br><span class="line">arrayList.add(<span class="keyword">new</span> Dog(<span class="string">&quot;小黄&quot;</span>, <span class="number">5</span>));</span><br><span class="line"><span class="comment">//假如我们的程序员，不小心，添加了一只猫</span></span><br><span class="line"><span class="comment">//arrayList.add(new Cat(&quot;招财猫&quot;, 8)); 编译会报错</span></span><br><span class="line">System.out.println(<span class="string">&quot;===使用泛型====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (Dog dog : arrayList) &#123;</span><br><span class="line">    System.out.println(dog.getName() + <span class="string">&quot;-&quot;</span> + dog.getAge());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="15-2-泛型介绍"><a href="#15-2-泛型介绍" class="headerlink" title="15.2 泛型介绍"></a>15.2 泛型介绍</h2><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li><strong>泛型</strong>又称**<font color="red">参数化类型</font><strong>，是Jdk5.0出现的新特性，解决</strong>数据类型的安全性问题**</li>
<li>在类声明或实例化时只要指定好需要的具体的类型即可。</li>
<li>JAVA泛型可以保证如果程序在编译时没有发出警告，运行时就不会产生<strong>ClassCastException异常</strong>.同时，代码更加<strong>简洁、健壮</strong></li>
<li>泛型的作用是:可以在类声明时通过一个标识表示类中<strong>某个属性的类型</strong>，或者是某个方法<strong>返回值的类型</strong>，或者是某个方法的<strong>参数类型</strong>.</li>
</ol>
</div>



<h2 id="15-3-泛型的语法"><a href="#15-3-泛型的语法" class="headerlink" title="15.3 泛型的语法"></a>15.3 泛型的语法</h2><ul>
<li><p>声明</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231115154817021.png" alt="image-20231115154817021"></p>
</li>
<li><p>实例化</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231115154942951.png" alt="image-20231115154942951"></p>
</li>
<li><p>举例</p>
<ul>
<li><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231115160310713.png" alt="image-20231115160310713"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericExercise</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用泛型方式给 HashSet 放入 3 个学生对象</span></span><br><span class="line">        HashSet&lt;Student&gt; students = <span class="keyword">new</span> HashSet&lt;Student&gt;();</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="string">&quot;tom&quot;</span>, <span class="number">28</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> Student(<span class="string">&quot;mary&quot;</span>, <span class="number">19</span>));</span><br><span class="line">        <span class="comment">//遍历</span></span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用泛型方式给 HashMap 放入 3 个学生对象</span></span><br><span class="line">        <span class="comment">//K -&gt; String   V-&gt;Student</span></span><br><span class="line">        HashMap&lt;String, Student&gt; hm = <span class="keyword">new</span> HashMap&lt;String, Student&gt;();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            public class HashMap&lt;K,V&gt; &#123;&#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        hm.put(<span class="string">&quot;milan&quot;</span>, <span class="keyword">new</span> Student(<span class="string">&quot;milan&quot;</span>, <span class="number">38</span>));</span><br><span class="line">        hm.put(<span class="string">&quot;smith&quot;</span>, <span class="keyword">new</span> Student(<span class="string">&quot;smith&quot;</span>, <span class="number">48</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123;</span></span><br><span class="line"><span class="comment">                Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</span></span><br><span class="line"><span class="comment">                return (es = entrySet) == null ? (entrySet = new EntrySet()) : es;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        Set&lt;Map.Entry&lt;String, Student&gt;&gt; entries = hm.entrySet();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            public final Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123;</span></span><br><span class="line"><span class="comment">                return new EntryIterator();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        Iterator&lt;Map.Entry&lt;String, Student&gt;&gt; iterator = entries.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Map.Entry&lt;String, Student&gt; next =  iterator.next();</span><br><span class="line">            System.out.println(next.getKey() + <span class="string">&quot;=&quot;</span> + next.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="15-4-注意事项"><a href="#15-4-注意事项" class="headerlink" title="15.4 注意事项"></a>15.4 注意事项</h2><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ol>
<li>泛型的参数化类型只能是<strong>引用类型</strong>，不能是基本数据类型</li>
<li>在给泛型指定具体类型后，可以<strong>传入该类型或其子类类型</strong>。</li>
<li>不指定泛型的具体类型时，<strong>默认的泛型是Object</strong></li>
<li>泛型的使用形式：<ul>
<li><strong>List&lt;Integer&gt; list1 = new ArrayList&lt;Integer&gt;();</strong></li>
<li><strong>List&lt;Integer&gt; list1 = new ArrayList&lt;&gt;();</strong> 【推荐】</li>
</ul>
</li>
</ol>
</div>



<h2 id="15-5-练习题"><a href="#15-5-练习题" class="headerlink" title="15.5 练习题"></a>15.5 练习题</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231115172404368.png" alt="image-20231115172404368"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericExercise01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Employee&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">&quot;durango&quot;</span>, <span class="number">18000</span>, <span class="keyword">new</span> MyDate(<span class="number">1999</span>, <span class="number">4</span>, <span class="number">2</span>)));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">&quot;durango&quot;</span>, <span class="number">18000</span>, <span class="keyword">new</span> MyDate(<span class="number">1999</span>, <span class="number">1</span>, <span class="number">2</span>)));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">&quot;durango&quot;</span>, <span class="number">18000</span>, <span class="keyword">new</span> MyDate(<span class="number">1999</span>, <span class="number">4</span>, <span class="number">20</span>)));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">&quot;aoiegn&quot;</span>, <span class="number">18000</span>, <span class="keyword">new</span> MyDate(<span class="number">2000</span>, <span class="number">7</span>, <span class="number">2</span>)));</span><br><span class="line">        System.out.println(list);</span><br><span class="line"></span><br><span class="line">        list.sort(<span class="keyword">new</span> Comparator&lt;Employee&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Employee o1, Employee o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Employee</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> sal;</span><br><span class="line">    <span class="keyword">private</span> MyDate birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, <span class="keyword">double</span> sal, MyDate birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.sal = sal;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSal</span><span class="params">(<span class="keyword">double</span> sal)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyDate <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(MyDate birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Employee&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&quot;</span> + name +</span><br><span class="line">                <span class="string">&quot;, sal=&quot;</span> + sal +</span><br><span class="line">                <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Employee o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> c;</span><br><span class="line">        <span class="keyword">if</span> ((c = <span class="keyword">this</span>.name.compareTo(o.name)) != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果名字相同，则比较生日</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.birthday.compareTo(o.birthday);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDate</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">MyDate</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> year;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> day;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDate</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">        <span class="keyword">this</span>.month = month;</span><br><span class="line">        <span class="keyword">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getYear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setYear</span><span class="params">(<span class="keyword">int</span> year)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMonth</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMonth</span><span class="params">(<span class="keyword">int</span> month)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.month = month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDay</span><span class="params">(<span class="keyword">int</span> day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> year + <span class="string">&quot;-&quot;</span> + month + <span class="string">&quot;-&quot;</span> + day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(MyDate o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> y, m;</span><br><span class="line"><span class="comment">//        if ((y = this.year - o.year) == 0) &#123;</span></span><br><span class="line"><span class="comment">//            if ((m = this.month - o.month) == 0) &#123;</span></span><br><span class="line"><span class="comment">//                return this.day - o.day;</span></span><br><span class="line"><span class="comment">//            &#125; else &#123;</span></span><br><span class="line"><span class="comment">//                return m;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125; else &#123;</span></span><br><span class="line"><span class="comment">//            return y;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">// 简洁写法</span></span><br><span class="line">        <span class="keyword">if</span> ((y = <span class="keyword">this</span>.year - o.year) != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 年份相同则比较月份</span></span><br><span class="line">        <span class="keyword">if</span> ((m = <span class="keyword">this</span>.month - o.month) != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 月份相同比较天数</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.day - o.day;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="15-6-自定义泛型"><a href="#15-6-自定义泛型" class="headerlink" title="15.6 自定义泛型"></a>15.6 自定义泛型</h2><h3 id="15-6-1-自定义泛型类"><a href="#15-6-1-自定义泛型类" class="headerlink" title="15.6.1 自定义泛型类"></a>15.6.1 自定义泛型类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231116104904262.png" alt="image-20231116104904262"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. Tiger 后面泛型，所以我们把 Tiger 就称为自定义泛型类</span></span><br><span class="line"><span class="comment">//2, T, R, M 泛型的标识符, 一般是单个大写字母</span></span><br><span class="line"><span class="comment">//3. 泛型标识符可以有多个. //4. 普通成员可以使用泛型 (属性、方法)</span></span><br><span class="line"><span class="comment">//5. 使用泛型的数组，不能初始化</span></span><br><span class="line"><span class="comment">//6. 静态方法中不能使用类的泛型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tiger</span>&lt;<span class="title">T</span>, <span class="title">R</span>, <span class="title">M</span>&gt; </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    R r; <span class="comment">//属性使用到泛型</span></span><br><span class="line">    M m;</span><br><span class="line">    T t;</span><br><span class="line">    <span class="comment">// T[] ts = new T[8];</span></span><br><span class="line">    <span class="comment">//因为数组在 new 时不能确定 T 的类型，就无法在内存中开辟空间</span></span><br><span class="line">    T[] ts;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Tiger</span><span class="params">(String name, R r, M m, T t)</span> </span>&#123;<span class="comment">//构造器使用泛型</span></span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.r = r;</span><br><span class="line">        <span class="keyword">this</span>.m = m;</span><br><span class="line">        <span class="keyword">this</span>.t = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//因为静态是和类相关的，在类加载时，对象还没有创建</span></span><br><span class="line">    <span class="comment">//所以，如果静态方法和静态属性使用了泛型，JVM 就无法完成初始化</span></span><br><span class="line">    <span class="comment">// static R r2;</span></span><br><span class="line">    <span class="comment">// public static void m1(M m) &#123;</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法使用泛型</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">getR</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setR</span><span class="params">(R r)</span> </span>&#123;<span class="comment">//方法使用到泛型</span></span><br><span class="line">        <span class="keyword">this</span>.r = r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> M <span class="title">getM</span><span class="params">()</span> </span>&#123;<span class="comment">//返回类型可以使用泛型. return m;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setM</span><span class="params">(M m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.m = m;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setT</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.t = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Tiger&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, r=&quot;</span> + r +</span><br><span class="line">                <span class="string">&quot;, m=&quot;</span> + m +</span><br><span class="line">                <span class="string">&quot;, t=&quot;</span> + t +</span><br><span class="line">                <span class="string">&quot;, ts=&quot;</span> + Arrays.toString(ts) +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="15-6-2-自定义泛型接口"><a href="#15-6-2-自定义泛型接口" class="headerlink" title="15.6.2 自定义泛型接口"></a>15.6.2 自定义泛型接口</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231116110621493.png" alt="image-20231116110621493"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 泛型接口使用的说明</span></span><br><span class="line"><span class="comment"> * 1. 接口中，静态成员也不能使用泛型</span></span><br><span class="line"><span class="comment"> * 2. 泛型接口的类型, 在继承接口或者实现接口时确定</span></span><br><span class="line"><span class="comment"> * 3. 没有指定类型，默认为 Object</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在继承接口 指定泛型接口的类型</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IA</span> <span class="keyword">extends</span> <span class="title">IUsb</span>&lt;<span class="title">String</span>, <span class="title">Double</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当我们去实现 IA 接口时，因为 IA 在继承 IUsu 接口时，指定了 U 为 String R 为 Double</span></span><br><span class="line"><span class="comment">//在实现 IUsu 接口的方法时，使用 String 替换 U, 使用 Double 替换 R</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AA</span> <span class="keyword">implements</span> <span class="title">IA</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Double <span class="title">get</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">(Double aDouble)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Double r1, Double r2, String u1, String u2)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现接口时，直接指定泛型接口的类型</span></span><br><span class="line"><span class="comment">//给 U 指定 Integer，给 R 指定了 Float</span></span><br><span class="line"><span class="comment">//所以，当我们实现 IUsb 方法时，会使用 Integer 替换 U, 使用 Float 替换 R</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BB</span> <span class="keyword">implements</span> <span class="title">IUsb</span>&lt;<span class="title">Integer</span>, <span class="title">Float</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Float <span class="title">get</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">(Float aFloat)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Float r1, Float r2, Integer u1, Integer u2)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//没有指定类型，默认为 Object</span></span><br><span class="line"><span class="comment">//建议直接写成 IUsb&lt;Object,Object&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CC</span> <span class="keyword">implements</span> <span class="title">IUsb</span> </span>&#123; <span class="comment">//等价 class CC implements IUsb&lt;Object,Object&gt;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Object r1, Object r2, Object u1, Object u2)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IUsb</span>&lt;<span class="title">U</span>, <span class="title">R</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//U name; 不能这样使用</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//普通方法中，可以使用接口泛型</span></span><br><span class="line">    <span class="function">R <span class="title">get</span><span class="params">(U u)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">hi</span><span class="params">(R r)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">(R r1, R r2, U u1, U u2)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在 jdk8 中，可以在接口中使用默认方法, 也是可以使用泛型</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> R <span class="title">method</span><span class="params">(U u)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="15-6-3-自定义泛型方法"><a href="#15-6-3-自定义泛型方法" class="headerlink" title="15.6.3 自定义泛型方法"></a>15.6.3 自定义泛型方法</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119145951717.png" alt="image-20231119145951717"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomMethodGeneric</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Car car = <span class="keyword">new</span> Car();</span><br><span class="line">        car.fly(<span class="string">&quot;宝马&quot;</span>, <span class="number">100</span>);<span class="comment">//当调用方法时，传入参数，编译器，就会确定类型</span></span><br><span class="line">        System.out.println(<span class="string">&quot;=======&quot;</span>);</span><br><span class="line">        car.fly(<span class="number">300</span>, <span class="number">100.1</span>);<span class="comment">//当调用方法时，传入参数，编译器，就会确定类型</span></span><br><span class="line">        <span class="comment">//测试</span></span><br><span class="line">        <span class="comment">//T-&gt;String, R-&gt; ArrayList</span></span><br><span class="line">        Fish&lt;String, ArrayList&gt; fish = <span class="keyword">new</span> Fish&lt;&gt;();</span><br><span class="line">        fish.hello(<span class="keyword">new</span> ArrayList(), <span class="number">11.3f</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//泛型方法，可以定义在普通类中, 也可以定义在泛型类中</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;<span class="comment">//普通类</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;<span class="comment">//普通方法</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//说明 泛型方法</span></span><br><span class="line">    <span class="comment">//1. &lt;T,R&gt; 就是泛型</span></span><br><span class="line">    <span class="comment">//2. 是提供给 fly 使用的</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T, R&gt; <span class="function"><span class="keyword">void</span> <span class="title">fly</span><span class="params">(T t, R r)</span> </span>&#123;<span class="comment">//泛型方法</span></span><br><span class="line">        System.out.println(t.getClass());<span class="comment">//String</span></span><br><span class="line">        System.out.println(r.getClass());<span class="comment">//Integer</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>&#123;<span class="comment">//泛型类</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;<span class="comment">//普通方法</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;U, M&gt; <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">(U u, M m)</span> </span>&#123;<span class="comment">//泛型方法</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//说明</span></span><br><span class="line">    <span class="comment">//1. 下面 hi 方法不是泛型方法</span></span><br><span class="line">    <span class="comment">//2. 只是 hi 方法使用了类声明的 泛型</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//泛型方法，可以使用类声明的泛型，也可以使用自己声明泛型</span></span><br><span class="line">    <span class="keyword">public</span> &lt;K&gt; <span class="function"><span class="keyword">void</span> <span class="title">hello</span><span class="params">(R r, K k)</span> </span>&#123;</span><br><span class="line">        System.out.println(r.getClass());<span class="comment">//ArrayList</span></span><br><span class="line">        System.out.println(k.getClass());<span class="comment">//Float</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="15-7-泛型的继承和通配符"><a href="#15-7-泛型的继承和通配符" class="headerlink" title="15.7 泛型的继承和通配符"></a>15.7 泛型的继承和通配符</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119151234218.png" alt="image-20231119151234218"></p>
<h2 id="15-8-JUnit单元测试类"><a href="#15-8-JUnit单元测试类" class="headerlink" title="15.8 JUnit单元测试类"></a>15.8 JUnit单元测试类</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119152211721.png" alt="image-20231119152211721"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119152603009.png" alt="image-20231119152603009"></p>
<h1 id="第十六章-坦克大战【1】"><a href="#第十六章-坦克大战【1】" class="headerlink" title="第十六章 坦克大战【1】"></a>第十六章 坦克大战【1】</h1><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231120105005091.png" alt="image-20231120105005091"></p>
<h2 id="16-1-绘制坦克"><a href="#16-1-绘制坦克" class="headerlink" title="16.1 绘制坦克"></a>16.1 绘制坦克</h2><h3 id="16-1-1-坐标和像素"><a href="#16-1-1-坐标和像素" class="headerlink" title="16.1.1 坐标和像素"></a>16.1.1 坐标和像素</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119155510069.png" alt="image-20231119155510069"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119155552024.png" alt="image-20231119155552024"></p>
<ul>
<li><p>绘制一个圆形</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DrawCircle</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123; <span class="comment">// DrawCircle继承JFrame，画框类（一个窗口）</span></span><br><span class="line">    <span class="keyword">private</span> MyPanel mp = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> DrawCircle();</span><br><span class="line">        System.out.println(<span class="string">&quot;退出程序~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DrawCircle</span><span class="params">()</span> </span>&#123; <span class="comment">//构造器</span></span><br><span class="line">        <span class="comment">// 初始化画板</span></span><br><span class="line">        mp = <span class="keyword">new</span> MyPanel();</span><br><span class="line">        <span class="comment">// 把画板加入到画框（窗口）</span></span><br><span class="line">        <span class="keyword">this</span>.add(mp);</span><br><span class="line">        <span class="comment">// 设置窗口大小</span></span><br><span class="line">        <span class="keyword">this</span>.setSize(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">        <span class="comment">//当点击窗口的小×，程序完全退出.</span></span><br><span class="line">        <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="comment">// 设置可以显示</span></span><br><span class="line">        <span class="keyword">this</span>.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.先定义一个MyPanel，继承JPanel类，画板类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123;</span><br><span class="line">    <span class="comment">//说明:</span></span><br><span class="line">    <span class="comment">//1. MyPanel 对象就是一个画板</span></span><br><span class="line">    <span class="comment">//2. Graphics g 把 g 理解成一支画笔</span></span><br><span class="line">    <span class="comment">//3. Graphics 提供了很多绘图的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123; <span class="comment">//绘图方法</span></span><br><span class="line">        <span class="keyword">super</span>.paint(g);</span><br><span class="line">        System.out.println(<span class="string">&quot;paint方法被调用了&quot;</span>);</span><br><span class="line">        <span class="comment">// 画圆形</span></span><br><span class="line">        g.drawOval(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="16-1-2-绘图原理"><a href="#16-1-2-绘图原理" class="headerlink" title="16.1.2 绘图原理"></a>16.1.2 绘图原理</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119163054954.png" alt="image-20231119163054954"></p>
<h3 id="16-1-3-Graphics类"><a href="#16-1-3-Graphics类" class="headerlink" title="16.1.3 Graphics类"></a>16.1.3 Graphics类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119163153997.png" alt="image-20231119163153997"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 画圆形</span></span><br><span class="line">g.drawOval(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示绘制不同的图形..</span></span><br><span class="line"><span class="comment">//画直线 drawLine(int x1,int y1,int x2,int y2)</span></span><br><span class="line">g.drawLine(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//画矩形边框 drawRect(int x, int y, int width, int height)</span></span><br><span class="line">g.drawRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//画椭圆边框 drawOval(int x, int y, int width, int height)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//填充矩形 fillRect(int x, int y, int width, int height)</span></span><br><span class="line"><span class="comment">//设置画笔的颜色</span></span><br><span class="line">g.setColor(Color.blue);</span><br><span class="line">g.fillRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//填充椭圆 fillOval(int x, int y, int width, int height)</span></span><br><span class="line">g.setColor(Color.red);</span><br><span class="line">g.fillOval(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//画图片 drawImage(Image img, int x, int y, ..)</span></span><br><span class="line"><span class="comment">//1. 获取图片资源, /bg.png 表示在该项目的根目录[chapter16/out/production/chapter16]去获取 bq.png 图片资源</span></span><br><span class="line">Image image = Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/bq.png&quot;</span>));</span><br><span class="line">g.drawImage(image, <span class="number">10</span>, <span class="number">10</span>, <span class="number">175</span>, <span class="number">221</span>, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//画字符串 drawString(String str, int x, int y)//写字</span></span><br><span class="line"><span class="comment">//给画笔设置颜色和字体</span></span><br><span class="line">g.setColor(Color.red);</span><br><span class="line">g.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;隶书&quot;</span>, Font.BOLD, <span class="number">50</span>));</span><br><span class="line"><span class="comment">//这里设置的 100， 100， 是 &quot;北京你好&quot;左下角</span></span><br><span class="line">g.drawString(<span class="string">&quot;北京你好&quot;</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>



<h3 id="16-1-4-绘制坦克"><a href="#16-1-4-绘制坦克" class="headerlink" title="16.1.4 绘制坦克"></a>16.1.4 绘制坦克</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231119174509641.png" alt="image-20231119174509641"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> </span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">    Hero hero = <span class="keyword">null</span>; <span class="comment">// 定义我的坦克</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        hero = <span class="keyword">new</span> Hero(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">// 初始化坦克</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.paint(g);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">750</span>); <span class="comment">//填充背景，默认是黑色</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 画出坦克-封装成方法</span></span><br><span class="line">        drawTank(hero.getX(), hero.getY(), g, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        drawTank(hero.getX() - <span class="number">50</span>, hero.getY(), g, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 画坦克</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x      左上角坐标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> y      右上角坐标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> g      画笔</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> direct 方向（上下左右）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type   坦克类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawTank</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, Graphics g, <span class="keyword">int</span> direct, <span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 根据不同坦克类型，设置不同颜色</span></span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//我们的坦克</span></span><br><span class="line">                g.setColor(Color.cyan);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//敌人的坦克</span></span><br><span class="line">                g.setColor(Color.yellow);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据坦克方向，绘制坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//向上</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">10</span>, <span class="number">60</span>, <span class="keyword">false</span>); <span class="comment">//左边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">30</span>, y, <span class="number">10</span>, <span class="number">60</span>, <span class="keyword">false</span>); <span class="comment">//右边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="keyword">false</span>); <span class="comment">//中间部分</span></span><br><span class="line">                g.fillOval(x + <span class="number">10</span>, y + <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>); <span class="comment">//中间的圆</span></span><br><span class="line">                g.drawLine(x + <span class="number">20</span>, y + <span class="number">30</span>, x + <span class="number">20</span>, y); <span class="comment">//炮筒</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;没有处理&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="16-2-java事件处理机制"><a href="#16-2-java事件处理机制" class="headerlink" title="16.2 java事件处理机制"></a>16.2 java事件处理机制</h2><h3 id="16-2-1-小球移动"><a href="#16-2-1-小球移动" class="headerlink" title="16.2.1 小球移动"></a>16.2.1 小球移动</h3><ul>
<li>MyPanel要实现KeyListener键盘监听器，并实现对应监听方法（逻辑是 哪个键 ==&gt; 哪个变量变化），注意要**repaint()**才能看到画面变化</li>
<li>BallMove窗口要添加这个监听器</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BallMove</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> MyPanel mp = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> BallMove();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BallMove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mp = <span class="keyword">new</span> MyPanel();</span><br><span class="line">        <span class="keyword">this</span>.add(mp);</span><br><span class="line">        <span class="comment">// 使窗口 JFrame 对象可以监听键盘事件, 即可以监听到面板发生的键盘事件</span></span><br><span class="line">        <span class="keyword">this</span>.addKeyListener(mp);</span><br><span class="line">        <span class="keyword">this</span>.setSize(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">        <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="keyword">this</span>.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// KeyListener监听器，可以监听键盘事件KeyEvent</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">Panel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">10</span>; <span class="comment">//小球初始坐标</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.paint(g);</span><br><span class="line">        g.fillOval(x, y, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有字符输出时，该方法触发</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyTyped</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有按键按下时，该方法触发</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">        System.out.println((<span class="keyword">char</span>) e.getKeyCode() + <span class="string">&quot;被按下..&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据按下的键控制小球移动(每个键分配了一个int值)</span></span><br><span class="line">        <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_DOWN) &#123; <span class="comment">//向下</span></span><br><span class="line">            y++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_UP) &#123; <span class="comment">//向上</span></span><br><span class="line">            y--;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_LEFT) &#123; <span class="comment">//向左</span></span><br><span class="line">            x--;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_RIGHT) &#123; <span class="comment">//向右</span></span><br><span class="line">            x++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 重新绘制面板</span></span><br><span class="line">        <span class="keyword">this</span>.repaint();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有按键松开时，该方法出发</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyReleased</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="16-2-2-事件处理机制"><a href="#16-2-2-事件处理机制" class="headerlink" title="16.2.2 事件处理机制"></a>16.2.2 事件处理机制</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231120094737864.png" alt="image-20231120094737864"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231120094802149.png" alt="image-20231120094802149"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231120095147376.png" alt="image-20231120095147376"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231120095208027.png" alt="image-20231120095208027"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231120095314114.png" alt="image-20231120095314114"></p>
<h2 id="16-3-坦克移动"><a href="#16-3-坦克移动" class="headerlink" title="16.3 坦克移动"></a>16.3 坦克移动</h2><ul>
<li><p>绘制不同方向的坦克</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">drawTank</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, Graphics g, <span class="keyword">int</span> direct, <span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 根据不同坦克类型，设置不同颜色</span></span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// 根据不同方向，绘制坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//向上</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">10</span>, <span class="number">60</span>, <span class="keyword">false</span>); <span class="comment">//左边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">30</span>, y, <span class="number">10</span>, <span class="number">60</span>, <span class="keyword">false</span>); <span class="comment">//右边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="keyword">false</span>); <span class="comment">//中间部分</span></span><br><span class="line">                g.fillOval(x + <span class="number">10</span>, y + <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>); <span class="comment">//中间的圆</span></span><br><span class="line">                g.drawLine(x + <span class="number">20</span>, y + <span class="number">30</span>, x + <span class="number">20</span>, y); <span class="comment">//炮筒</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//向右</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">60</span>, <span class="number">10</span>, <span class="keyword">false</span>); <span class="comment">//左边轮子</span></span><br><span class="line">                g.fill3DRect(x, y + <span class="number">30</span>, <span class="number">60</span>, <span class="number">10</span>, <span class="keyword">false</span>); <span class="comment">//右边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="keyword">false</span>); <span class="comment">//中间部分</span></span><br><span class="line">                g.fillOval(x + <span class="number">20</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>); <span class="comment">//中间的圆</span></span><br><span class="line">                g.drawLine(x + <span class="number">30</span>, y + <span class="number">20</span>, x + <span class="number">60</span>, y + <span class="number">20</span>); <span class="comment">//炮筒</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//向下</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">10</span>, <span class="number">60</span>, <span class="keyword">false</span>); <span class="comment">//右边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">30</span>, y, <span class="number">10</span>, <span class="number">60</span>, <span class="keyword">false</span>); <span class="comment">//左边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="keyword">false</span>); <span class="comment">//中间部分</span></span><br><span class="line">                g.fillOval(x + <span class="number">10</span>, y + <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>); <span class="comment">//中间的圆</span></span><br><span class="line">                g.drawLine(x + <span class="number">20</span>, y + <span class="number">30</span>, x + <span class="number">20</span>, y + <span class="number">60</span>); <span class="comment">//炮筒</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//向左</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">60</span>, <span class="number">10</span>, <span class="keyword">false</span>); <span class="comment">//左边轮子</span></span><br><span class="line">                g.fill3DRect(x, y + <span class="number">30</span>, <span class="number">60</span>, <span class="number">10</span>, <span class="keyword">false</span>); <span class="comment">//右边轮子</span></span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="keyword">false</span>); <span class="comment">//中间部分</span></span><br><span class="line">                g.fillOval(x + <span class="number">20</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>); <span class="comment">//中间的圆</span></span><br><span class="line">                g.drawLine(x + <span class="number">30</span>, y + <span class="number">20</span>, x, y + <span class="number">20</span>); <span class="comment">//炮筒</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;没有处理&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>监听键盘事件，让坦克移动。注意：repaint() 和 addListener()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(e.getKeyCode() == KeyEvent.VK_W) &#123; <span class="comment">//W 上</span></span><br><span class="line">        <span class="comment">// 修改方向</span></span><br><span class="line">        hero.setDirect(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 修改坐标</span></span><br><span class="line">        hero.moveUp();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_D) &#123; <span class="comment">// D 右</span></span><br><span class="line">        hero.setDirect(<span class="number">1</span>);</span><br><span class="line">        hero.moveRight();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_S) &#123; <span class="comment">// S 下</span></span><br><span class="line">        hero.setDirect(<span class="number">2</span>);</span><br><span class="line">        hero.moveDown();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_A) &#123; <span class="comment">// A 左</span></span><br><span class="line">        hero.setDirect(<span class="number">3</span>);</span><br><span class="line">        hero.moveLeft();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重写绘制画板</span></span><br><span class="line">    <span class="keyword">this</span>.repaint();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="16-4-作业"><a href="#16-4-作业" class="headerlink" title="16.4 作业"></a>16.4 作业</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231120103410941.png" alt="image-20231120103410941"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span> </span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">    Hero hero = <span class="keyword">null</span>; <span class="comment">// 定义我的坦克</span></span><br><span class="line">    <span class="comment">// 定义敌人的坦克，放入Vector集合中（线程安全）</span></span><br><span class="line">    Vector&lt;Enemy&gt; enemies = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> enemySize = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        hero = <span class="keyword">new</span> Hero(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">// 初始化自己的坦克</span></span><br><span class="line">        hero.setSpeed(<span class="number">5</span>); <span class="comment">// 初始化坦克速度</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化敌人坦克</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemySize; i++) &#123;</span><br><span class="line">            Enemy enemy = <span class="keyword">new</span> Enemy(<span class="number">100</span> * (i + <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">            enemy.setDirect(<span class="number">2</span>); <span class="comment">// 设置初始炮筒方向</span></span><br><span class="line">            enemies.add(enemy);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.paint(g);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">750</span>); <span class="comment">//填充背景，默认是黑色</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 画出坦克-封装成方法</span></span><br><span class="line">        drawTank(hero.getX(), hero.getY(), g, hero.getDirect(), <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 画出敌人坦克(遍历Vector)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">            <span class="comment">// 取出坦克并绘制</span></span><br><span class="line">            Enemy enemy = enemies.get(i);</span><br><span class="line">            drawTank(enemy.getX(), enemy.getY(), g, enemy.getDirect(), <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="第十七章-多线程基础"><a href="#第十七章-多线程基础" class="headerlink" title="第十七章 多线程基础"></a>第十七章 多线程基础</h1><h2 id="17-1-线程相关概念"><a href="#17-1-线程相关概念" class="headerlink" title="17.1 线程相关概念"></a>17.1 线程相关概念</h2><ol>
<li>程序、<ul>
<li>是为完成特定任务、用某种语言编写的一组指令的集合。简单的说:就是我们写的代码</li>
</ul>
</li>
<li>进程<ul>
<li>进程是指<strong>运行中的程序</strong>，比如我们使用QQ，就启动了一个进程，操作系统就会为该进程分配内存空间。当我们使用迅雷，又启动了一个进程，操作系统将为迅雷分配新的内存空间.</li>
<li>进程是<strong>程序的一次执行过程</strong>，或是正在运行的一个程序.是动态过程:有它自身的产生、存在和消亡过程</li>
</ul>
</li>
<li>线程<ul>
<li>线程由进程创建的，是进程的一个实体</li>
<li>一个进程可以拥有多个线程</li>
</ul>
</li>
<li>其他概念<ul>
<li><strong>单线程</strong>: 同一个时刻，只允许执行一个线程</li>
<li><strong>多线程</strong>: 同一个时刻，可以执行多个线程，比如:一个QQ进程，可以同时打开多个聊天窗口，一个迅雷进程，可以同时下载多个文件</li>
<li><strong>并发</strong>: 同一个时刻，多个任务<strong>交替执行</strong>，造成一种<strong>“貌似同时”的错觉</strong>，简单的说, 单核cpu实现的多任务就是并发。</li>
<li><strong>并行</strong>: 同一个时刻，多个任务同时执行。多核cpu可以实现并行。</li>
</ul>
</li>
</ol>
<h2 id="17-2-线程基本使用"><a href="#17-2-线程基本使用" class="headerlink" title="17.2 线程基本使用"></a>17.2 线程基本使用</h2><h3 id="17-2-1-创建线程的两种方式"><a href="#17-2-1-创建线程的两种方式" class="headerlink" title="17.2.1 创建线程的两种方式"></a>17.2.1 创建线程的两种方式</h3><ol>
<li><p><strong>继承Thread 类</strong>, 重写run方法</p>
</li>
<li><p><strong>实现Runnable接口</strong>, 重写run方法</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121104552926.png" alt="image-20231121104552926"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121093524733.png" alt="image-20231121093524733"></p>
</li>
</ol>
<h3 id="17-2-2-继承Thread类"><a href="#17-2-2-继承Thread类" class="headerlink" title="17.2.2 继承Thread类"></a>17.2.2 继承Thread类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121095419896.png" alt="image-20231121095419896"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121101159823.png" alt="image-20231121101159823"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121101613160.png" alt="image-20231121101613160"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建 Cat 对象，可以当做线程使用</span></span><br><span class="line">        Cat cat = <span class="keyword">new</span> Cat();</span><br><span class="line">        cat.start(); <span class="comment">////启动线程-&gt;start0()-&gt; 最终会执行cat的run方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        (1)</span></span><br><span class="line"><span class="comment">        public synchronized void start() &#123;</span></span><br><span class="line"><span class="comment">            ...</span></span><br><span class="line"><span class="comment">            start0();</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        (2)</span></span><br><span class="line"><span class="comment">        start0() 是本地方法，是 JVM 调用, 底层是 c/c++实现真正实现多线程的效果， 是 start0(), 而不是 run</span></span><br><span class="line"><span class="comment">        private native void start0();</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//cat.run();//run 方法就是一个普通的方法, 没有真正的启动一个线程，就会把 run方法执行完毕，然后才向下执行</span></span><br><span class="line">        <span class="comment">//说明: 当 main 线程启动一个子线程 Thread-0, 主线程不会阻塞, 会继续执行</span></span><br><span class="line">        <span class="comment">//这时 主线程和子线程是交替执行..</span></span><br><span class="line">        System.out.println(<span class="string">&quot;主线程继续执行&quot;</span> + Thread.currentThread().getName());<span class="comment">//名字 main</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">60</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;主线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; i=&quot;</span> + i);</span><br><span class="line">            <span class="comment">//让主线程休眠</span></span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 当一个类继承了 Thread 类， 该类就可以当做线程使用</span></span><br><span class="line"><span class="comment">//2. 我们会重写 run 方法，写上自己的业务代码</span></span><br><span class="line"><span class="comment">//3. Thread类 实现了 Runnable接口 的 run 方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Override</span></span><br><span class="line"><span class="comment">public void run() &#123;</span></span><br><span class="line"><span class="comment">    if (target != null) &#123;</span></span><br><span class="line"><span class="comment">        target.run();</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> times = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">//该线程每隔 1 秒。在控制台输出 “喵喵, 我是小猫咪”</span></span><br><span class="line">            System.out.println(<span class="string">&quot;喵喵, 我是小猫咪&quot;</span> + (++times) + <span class="string">&quot; 线程名=&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>); <span class="comment">// 让线程休眠一秒</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (times == <span class="number">80</span>) &#123; <span class="comment">// times到达80时，子线程执行完毕</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="17-2-3-实现Runnable接口"><a href="#17-2-3-实现Runnable接口" class="headerlink" title="17.2.3 实现Runnable接口"></a>17.2.3 实现Runnable接口</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121102613498.png" alt="image-20231121102613498"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Dog dog = <span class="keyword">new</span> Dog();</span><br><span class="line">        <span class="comment">//dog.start() //错误，Dog类没有start</span></span><br><span class="line">        <span class="comment">//创建Thread对象，把Dog对象（实现了Runnable）放入Thread</span></span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(dog);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123; <span class="comment">//实现Runnable接口来开发线程</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小狗汪汪叫..hi&quot;</span> + (++count) + Thread.currentThread().getName());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>模拟一个简单的Thread代理类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Tiger tiger = new Tiger();//实现了 Runnable</span></span><br><span class="line">        <span class="comment">// ThreadProxy threadProxy = new ThreadProxy(tiger);</span></span><br><span class="line">        <span class="comment">// threadProxy.start();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tiger</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;老虎嗷嗷叫....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//线程代理类 , 模拟了一个极简的 Thread 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThreadProxy</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;<span class="comment">//你可以把 Proxy 类当做 ThreadProxy</span></span><br><span class="line">    <span class="keyword">private</span> Runnable target = <span class="keyword">null</span>;<span class="comment">//属性，类型是 Runnable</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (target != <span class="keyword">null</span>) &#123;</span><br><span class="line">            target.run();<span class="comment">//动态绑定（运行类型 Tiger）</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ThreadProxy</span><span class="params">(Runnable target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        start0();<span class="comment">//这个方法时真正实现多线程方法</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start0</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="17-2-4-多线程案例"><a href="#17-2-4-多线程案例" class="headerlink" title="17.2.4 多线程案例"></a>17.2.4 多线程案例</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231121104204115.png" alt="image-20231121104204115"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        T1 t1 = <span class="keyword">new</span> T1();</span><br><span class="line">        T2 t2 = <span class="keyword">new</span> T2();</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(t1);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(t2);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T1</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 每个1s输出“hello, world!”，输出10次</span></span><br><span class="line">            System.out.println(<span class="string">&quot;hello, world!&quot;</span> + (++count) + Thread.currentThread().getName());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 每个1s输出“hi”，输出5次</span></span><br><span class="line">            System.out.println(<span class="string">&quot;hi!&quot;</span> + (++count) + Thread.currentThread().getName());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="17-3-模拟售票系统"><a href="#17-3-模拟售票系统" class="headerlink" title="17.3 模拟售票系统"></a>17.3 模拟售票系统</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellTicket</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        SellTicket01 sellTicket01 = new SellTicket01();</span></span><br><span class="line"><span class="comment">//        SellTicket01 sellTicket02 = new SellTicket01();</span></span><br><span class="line"><span class="comment">//        SellTicket01 sellTicket03 = new SellTicket01();</span></span><br><span class="line"><span class="comment">//        // 这里会有多个进程同时执行，同时访问共享数据时会出现数据竞争，从而导致错误结果</span></span><br><span class="line"><span class="comment">//        sellTicket01.start();</span></span><br><span class="line"><span class="comment">//        sellTicket02.start();</span></span><br><span class="line"><span class="comment">//        sellTicket03.start();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也会出现资源竞争问题，从而导致错误结果</span></span><br><span class="line">        SellTicket02 sellTicket02 = <span class="keyword">new</span> SellTicket02();</span><br><span class="line">        <span class="keyword">new</span> Thread(sellTicket02).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(sellTicket02).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(sellTicket02).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">// 继承Thread方式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SellTicket01</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> ticketNum = <span class="number">100</span>; <span class="comment">//设置static，多个线程共享</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;售票结束...&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//休眠 50 毫秒, 模拟</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">60</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;窗口&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;售出一张票&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;，剩余票数=&quot;</span> + (--ticketNum));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现接口方式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SellTicket02</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> ticketNum = <span class="number">100</span>; <span class="comment">//让多个线程共享 ticketNum</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;售票结束...&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//休眠 50 毫秒, 模拟</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;窗口 &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; 售出一张票&quot;</span> +</span><br><span class="line">                    <span class="string">&quot; 剩余票数=&quot;</span> + (--ticketNum));<span class="comment">//1 - 0 - -1 - -2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123094913189.png" alt="image-20231123094913189"></p>
<h2 id="17-4-线程终止"><a href="#17-4-线程终止" class="headerlink" title="17.4 线程终止"></a>17.4 线程终止</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122093546074.png" alt="image-20231122093546074"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadExit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        T t = <span class="keyword">new</span> T();</span><br><span class="line">        t.start();</span><br><span class="line">        <span class="comment">// 通知方式：主线程通过修改loop变量，让线程终止（停止run方法）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;main线程休眠10s&quot;</span>);</span><br><span class="line">        Thread.sleep(<span class="number">10</span> * <span class="number">1000</span>);</span><br><span class="line">        t.setLoop(<span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 设置控制变量，控制run方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> loop = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (loop) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;正在运行：&quot;</span> + (count++));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLoop</span><span class="params">(<span class="keyword">boolean</span> loop)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loop = loop;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="17-5-线程常用方法"><a href="#17-5-线程常用方法" class="headerlink" title="17.5 线程常用方法"></a>17.5 线程常用方法</h2><h3 id="17-5-1-第一组方法"><a href="#17-5-1-第一组方法" class="headerlink" title="17.5.1 第一组方法"></a>17.5.1 第一组方法</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122093745346.png" alt="image-20231122093745346"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122093956022.png" alt="image-20231122093956022"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadMethod01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="comment">// 测试相关方法</span></span><br><span class="line">        T t = <span class="keyword">new</span> T();</span><br><span class="line">        t.setName(<span class="string">&quot;durango&quot;</span>);</span><br><span class="line">        t.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        t.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 主线程打印5个hi，然后中断子线程的休眠</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;hi&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(t.getName() + <span class="string">&quot;优先级是&quot;</span> + t.getPriority());</span><br><span class="line">        t.interrupt(); <span class="comment">//执行到这里是会中断t线程的休眠</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                <span class="comment">// 获取当前线程名称</span></span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">20000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// 当线程执行到一个interrupt方法时，就会catch到一个异常，可以加入自己的业务代码</span></span><br><span class="line">                <span class="comment">// InterruptedException是捕获到的一个中断异常</span></span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;被中断了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="17-5-2-第二组方法"><a href="#17-5-2-第二组方法" class="headerlink" title="17.5.2 第二组方法"></a>17.5.2 第二组方法</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122100737396.png" alt="image-20231122100737396"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadMethod02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        T1 t1 = <span class="keyword">new</span> T1();</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++) &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;hi&quot;</span> + i);</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="comment">//Thread.yield(); //主线程礼让，资源充足时不一定成功</span></span><br><span class="line">                t1.join(); <span class="comment">//子线程插队，会先执行完毕，再执行主线程</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T1</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;hello&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="17-5-3-用户线程和守护线程"><a href="#17-5-3-用户线程和守护线程" class="headerlink" title="17.5.3 用户线程和守护线程"></a>17.5.3 用户线程和守护线程</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122102151846.png" alt="image-20231122102151846"></p>
<ul>
<li><p>在main主线程中开启了一个无限执行的子线程T，即使主线程指向完毕了，T也还在继续执行。</p>
</li>
<li><p>将一个线程设置成<strong>守护线程</strong>。<font color="red">setDaemon(true)</font></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122102545351.png" alt="image-20231122102545351"></p>
</li>
</ul>
<h2 id="17-6-线程的生命周期"><a href="#17-6-线程的生命周期" class="headerlink" title="17.6 线程的生命周期"></a>17.6 线程的生命周期</h2><h3 id="17-6-1-线程的状态"><a href="#17-6-1-线程的状态" class="headerlink" title="17.6.1 线程的状态"></a>17.6.1 线程的状态</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122103200151.png" alt="image-20231122103200151"></p>
<h3 id="17-6-2-状态转化图（重要！）"><a href="#17-6-2-状态转化图（重要！）" class="headerlink" title="17.6.2 状态转化图（重要！）"></a>17.6.2 状态转化图（重要！）</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231122105844283.png" alt="image-20231122105844283"></p>
<h3 id="17-6-3-通过程序查看"><a href="#17-6-3-通过程序查看" class="headerlink" title="17.6.3 通过程序查看"></a>17.6.3 通过程序查看</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        T t = <span class="keyword">new</span> T();</span><br><span class="line">        System.out.println(t.getState());</span><br><span class="line">        t.start();</span><br><span class="line">        <span class="keyword">while</span> (t.getState() != Thread.State.TERMINATED) &#123;</span><br><span class="line">            System.out.println(t.getName() + <span class="string">&quot;状态&quot;</span> + t.getState());</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;状态&quot;</span> + Thread.currentThread().getState());</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;hi&quot;</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="17-7-线程同步"><a href="#17-7-线程同步" class="headerlink" title="17.7 线程同步"></a>17.7 线程同步</h2><h3 id="17-7-1-线程同步机制"><a href="#17-7-1-线程同步机制" class="headerlink" title="17.7.1 线程同步机制"></a>17.7.1 线程同步机制</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123093337461.png" alt="image-20231123093337461"></p>
<h3 id="17-7-2-synchronized关键字"><a href="#17-7-2-synchronized关键字" class="headerlink" title="17.7.2 synchronized关键字"></a>17.7.2 synchronized关键字</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123093453121.png" alt="image-20231123093453121"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123095054030.png" alt="image-20231123095054030"></p>
<ul>
<li><p>使用synchronized解决售票问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellTicket</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SellTicket02 sellTicket02 = <span class="keyword">new</span> SellTicket02();</span><br><span class="line">        <span class="keyword">new</span> Thread(sellTicket02).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(sellTicket02).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(sellTicket02).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现接口方式，使用synchronized关键字实现同步</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SellTicket02</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> ticketNum = <span class="number">100</span>; <span class="comment">//让多个线程共享 ticketNum</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> loop = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123; <span class="comment">//同步方法，在同一个时刻，只能有一个线程来sell方法</span></span><br><span class="line">        <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;售票结束...&quot;</span>);</span><br><span class="line">            loop = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;窗口 &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; 售出一张票&quot;</span> +</span><br><span class="line">                <span class="string">&quot; 剩余票数=&quot;</span> + (--ticketNum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (loop) &#123;</span><br><span class="line">            sell();</span><br><span class="line">            <span class="comment">//休眠 50 毫秒, 模拟</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123094808434.png" alt="image-20231123094808434"></p>
</li>
</ul>
<h2 id="17-8-互斥锁"><a href="#17-8-互斥锁" class="headerlink" title="17.8 互斥锁"></a>17.8 互斥锁</h2><h3 id="17-8-1-基本概念"><a href="#17-8-1-基本概念" class="headerlink" title="17.8.1 基本概念"></a>17.8.1 基本概念</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123100946318.png" alt="image-20231123100946318"></p>
<h3 id="17-8-2-注意事项"><a href="#17-8-2-注意事项" class="headerlink" title="17.8.2 注意事项"></a>17.8.2 注意事项</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123101105826.png" alt="image-20231123101105826"></p>
<h3 id="17-8-3-售票系统的同步问题"><a href="#17-8-3-售票系统的同步问题" class="headerlink" title="17.8.3 售票系统的同步问题"></a>17.8.3 售票系统的同步问题</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellTicket</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SellTicket01 sellTicket01 = <span class="keyword">new</span> SellTicket01();</span><br><span class="line">        SellTicket01 sellTicket02 = <span class="keyword">new</span> SellTicket01();</span><br><span class="line">        SellTicket01 sellTicket03 = <span class="keyword">new</span> SellTicket01();</span><br><span class="line">        sellTicket01.start();</span><br><span class="line">        sellTicket02.start();</span><br><span class="line">        sellTicket03.start();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        SellTicket02 sellTicket02 = new SellTicket02();</span></span><br><span class="line"><span class="comment">//        new Thread(sellTicket02).start();</span></span><br><span class="line"><span class="comment">//        new Thread(sellTicket02).start();</span></span><br><span class="line"><span class="comment">//        new Thread(sellTicket02).start();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承Thread方式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SellTicket01</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> ticketNum = <span class="number">100</span>; <span class="comment">//设置static，多个线程共享</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> loop = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object obj = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 同步方法，锁在this对象上（无法实现同步，为什么？）</span></span><br><span class="line">    <span class="comment">// 注意！！！继承继承Thread方式创建线程时，创建的是多个对象</span></span><br><span class="line">    <span class="comment">// 因此this是三个不同的对象！！！</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;售票结束...&quot;</span>);</span><br><span class="line">            loop = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;窗口 &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; 售出一张票&quot;</span> +</span><br><span class="line">                <span class="string">&quot; 剩余票数=&quot;</span> + (--ticketNum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 同步代码块，锁在同一对象obj（obj是所有SellTicket01对象共享的才行）</span></span><br><span class="line">        <span class="keyword">synchronized</span> (obj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;售票结束...&quot;</span>);</span><br><span class="line">                loop = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;窗口 &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; 售出一张票&quot;</span> +</span><br><span class="line">                    <span class="string">&quot; 剩余票数=&quot;</span> + (--ticketNum));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (loop) &#123;</span><br><span class="line">            <span class="comment">//sell(); //无法同步</span></span><br><span class="line">            sell2(); <span class="comment">//可以同步</span></span><br><span class="line">            <span class="comment">//休眠 50 毫秒, 模拟</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现接口方式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SellTicket02</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> ticketNum = <span class="number">100</span>; <span class="comment">//让多个线程共享 ticketNum</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> loop = <span class="keyword">true</span>;</span><br><span class="line">    Object obj = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 同步方法，锁在this对象上</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">sell</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;售票结束...&quot;</span>);</span><br><span class="line">            loop = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;窗口 &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; 售出一张票&quot;</span> +</span><br><span class="line">                <span class="string">&quot; 剩余票数=&quot;</span> + (--ticketNum));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sell2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 同步代码块，锁可以在this，也可以在同一对象obj</span></span><br><span class="line">        <span class="keyword">synchronized</span> (obj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ticketNum &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;售票结束...&quot;</span>);</span><br><span class="line">                loop = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;窗口 &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; 售出一张票&quot;</span> +</span><br><span class="line">                    <span class="string">&quot; 剩余票数=&quot;</span> + (--ticketNum));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态同步方法，锁在当前类本身，即类名.class</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 静态方法中的同步代码块，锁在当前类本身，即类名.class</span></span><br><span class="line">        <span class="keyword">synchronized</span> (SellTicket.class) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;m&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (loop) &#123;</span><br><span class="line">            sell();</span><br><span class="line">            <span class="comment">//sell2();</span></span><br><span class="line">            <span class="comment">//休眠 50 毫秒, 模拟</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="17-9-线程的死锁"><a href="#17-9-线程的死锁" class="headerlink" title="17.9 线程的死锁"></a>17.9 线程的死锁</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123103318317.png" alt="image-20231123103318317"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLock</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//模拟死锁现象</span></span><br><span class="line">        DeadLockDemo A = <span class="keyword">new</span> DeadLockDemo(<span class="keyword">true</span>);</span><br><span class="line">        A.setName(<span class="string">&quot;A 线程&quot;</span>);</span><br><span class="line">        DeadLockDemo B = <span class="keyword">new</span> DeadLockDemo(<span class="keyword">false</span>);</span><br><span class="line">        B.setName(<span class="string">&quot;B 线程&quot;</span>);</span><br><span class="line">        A.start();</span><br><span class="line">        B.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeadLockDemo</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Object o1 = <span class="keyword">new</span> Object(); <span class="comment">// 设为static，所有DeadLockDemo对象共享</span></span><br><span class="line">    <span class="keyword">static</span> Object o2 = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DeadLockDemo</span><span class="params">(<span class="keyword">boolean</span> flag)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1. 如果 flag 为 T, 线程 A 就会先得到/持有 o1 对象锁, 然后尝试去获取 o2 对象锁</span></span><br><span class="line">        <span class="comment">//2. 如果线程 A 得不到 o2 对象锁，就会 Blocked</span></span><br><span class="line">        <span class="comment">//3. 如果 flag 为 F, 线程 B 就会先得到/持有 o2 对象锁, 然后尝试去获取 o1 对象锁</span></span><br><span class="line">        <span class="comment">//4. 如果线程 B 得不到 o1 对象锁，就会 Blocked</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (o1) &#123; <span class="comment">// 同步代码块</span></span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;拿到o1的锁，进入1&quot;</span>);</span><br><span class="line">                <span class="keyword">synchronized</span> (o2) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;拿到o2的锁，进入2&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (o2) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;拿到o2的锁，进入3&quot;</span>);</span><br><span class="line">                <span class="keyword">synchronized</span> (o1) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;拿到o1的锁，进入4&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123104309556.png" alt="image-20231123104309556"></p>
<h2 id="17-10-锁的释放"><a href="#17-10-锁的释放" class="headerlink" title="17.10 锁的释放"></a>17.10 锁的释放</h2><h3 id="17-10-1-下面操作会释放锁"><a href="#17-10-1-下面操作会释放锁" class="headerlink" title="17.10.1 下面操作会释放锁"></a>17.10.1 下面操作会释放锁</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123104530485.png" alt="image-20231123104530485"></p>
<h3 id="17-10-2-下面操作不会释放锁"><a href="#17-10-2-下面操作不会释放锁" class="headerlink" title="17.10.2 下面操作不会释放锁"></a>17.10.2 下面操作不会释放锁</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231123104706798.png" alt="image-20231123104706798"></p>
<h1 id="第十八章-坦克大战【2】"><a href="#第十八章-坦克大战【2】" class="headerlink" title="第十八章 坦克大战【2】"></a>第十八章 坦克大战【2】</h1><h2 id="18-1-坦克大战0-3"><a href="#18-1-坦克大战0-3" class="headerlink" title="18.1 坦克大战0.3"></a>18.1 坦克大战0.3</h2><h3 id="18-1-1-发射子弹"><a href="#18-1-1-发射子弹" class="headerlink" title="18.1.1 发射子弹"></a>18.1.1 发射子弹</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231124101154619.png" alt="image-20231124101154619"></p>
<ul>
<li><p>Shot.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shot</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;  <span class="comment">//子弹坐标</span></span><br><span class="line">    <span class="keyword">int</span> direct = <span class="number">0</span>; <span class="comment">//子弹方向</span></span><br><span class="line">    <span class="keyword">int</span> speed = <span class="number">10</span>; <span class="comment">//子弹速度</span></span><br><span class="line">    <span class="keyword">boolean</span> isLive = <span class="keyword">true</span>; <span class="comment">//子弹是否还存活</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Shot</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> direct)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">        <span class="keyword">this</span>.direct = direct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 休眠50ms</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 根据方向改变坐标</span></span><br><span class="line">            <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//上</span></span><br><span class="line">                    y -= speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//右</span></span><br><span class="line">                    x += speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//下</span></span><br><span class="line">                    y += speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//左</span></span><br><span class="line">                    x -= speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 测试输出坐标</span></span><br><span class="line">            System.out.println(<span class="string">&quot;子弹线程&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot; x = &quot;</span> + x + <span class="string">&quot;, y = &quot;</span> + y);</span><br><span class="line">                    <span class="comment">// 当子弹移动到面板的边界时，就应该销毁（把启动的子弹的线程销毁)</span></span><br><span class="line">            <span class="keyword">if</span> (!(x &gt;= <span class="number">0</span> &amp;&amp; x &lt;= <span class="number">1000</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt;= <span class="number">750</span>)) &#123;</span><br><span class="line">                isLive = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>hero.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hero</span> <span class="keyword">extends</span> <span class="title">Tank</span> </span>&#123; <span class="comment">// 自定义坦克类</span></span><br><span class="line">    <span class="comment">// 定义一个Shot对象</span></span><br><span class="line">    Shot shot = <span class="keyword">null</span>;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 射击，开启一个线程</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shotEnemyTank</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建Shot对象，根据当前Hero对象的位置和方向创建Shot</span></span><br><span class="line">        <span class="keyword">int</span> direct = getDirect();</span><br><span class="line">        <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//向上</span></span><br><span class="line">                shot = <span class="keyword">new</span> Shot(getX() + <span class="number">20</span>, getY(), getDirect());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//向右</span></span><br><span class="line">                shot = <span class="keyword">new</span> Shot(getX() + <span class="number">60</span>, getY() + <span class="number">20</span>, getDirect());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//向下</span></span><br><span class="line">                shot = <span class="keyword">new</span> Shot(getX() + <span class="number">20</span>, getY() + <span class="number">60</span>, getDirect());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//向左</span></span><br><span class="line">                shot = <span class="keyword">new</span> Shot(getX(), getY() + <span class="number">20</span>, getDirect());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 启动Shot线程</span></span><br><span class="line">        <span class="keyword">new</span> Thread(shot).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span></span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">	...</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 画出hero射击的子弹</span></span><br><span class="line">        <span class="keyword">if</span>(hero.shot != <span class="keyword">null</span> &amp;&amp; hero.shot.isLive) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;子弹被绘制！&quot;</span>);</span><br><span class="line">            <span class="comment">//g.fill3DRect(hero.shot.x, hero.shot.y, 1, 1, false);</span></span><br><span class="line">            g.draw3DRect(hero.shot.x, hero.shot.y, <span class="number">1</span>, <span class="number">1</span>, <span class="keyword">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">       ...</span><br><span class="line">        <span class="comment">// 如果按下的是J，就发射子弹</span></span><br><span class="line">        <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_J) &#123;</span><br><span class="line">            hero.shotEnemyTank();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123; <span class="comment">//每隔100ms，重绘面板，刷新绘图区域，子弹就会移动</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.repaint();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>TankGame03.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TankGame03</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TankGame03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mp = <span class="keyword">new</span> MyPanel();</span><br><span class="line">        <span class="comment">// 将mp放入Thread并启动</span></span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(mp);</span><br><span class="line">        thread.start();</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="18-2-坦克大战0-4"><a href="#18-2-坦克大战0-4" class="headerlink" title="18.2 坦克大战0.4"></a>18.2 坦克大战0.4</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231124144906258.png" alt="image-20231124144906258"></p>
<h3 id="18-2-1-敌人发射子弹"><a href="#18-2-1-敌人发射子弹" class="headerlink" title="18.2.1 敌人发射子弹"></a>18.2.1 敌人发射子弹</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231124145042566.png" alt="image-20231124145042566"></p>
<ul>
<li><p>Enemy.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Enemy</span> <span class="keyword">extends</span> <span class="title">Tank</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 在敌人坦克类，使用Vector 保存多个Shot线程</span></span><br><span class="line">    Vector&lt;Shot&gt; shots = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Enemy</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span></span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">	...</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">//初始化敌人坦克</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemySize; i++) &#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="comment">// 给该enemy对象初始化Shot对象</span></span><br><span class="line">            Shot shot = <span class="keyword">new</span> Shot(enemy.getX() + <span class="number">20</span>, enemy.getY() + <span class="number">60</span>, enemy.getDirect());</span><br><span class="line">            enemy.shots.add(shot);</span><br><span class="line">            <span class="comment">//启动Shot对象</span></span><br><span class="line">            <span class="keyword">new</span> Thread(shot).start();</span><br><span class="line">            enemies.add(enemy);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 画出enemy坦克(遍历Vector)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">            <span class="comment">// 取出坦克并绘制</span></span><br><span class="line">            Enemy enemy = enemies.get(i);</span><br><span class="line">            drawTank(enemy.getX(), enemy.getY(), g, enemy.getDirect(), <span class="number">1</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 绘制enemy的所有子弹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; enemy.shots.size(); j++) &#123;</span><br><span class="line">                <span class="comment">// 取出子弹</span></span><br><span class="line">                Shot shot = enemy.shots.get(j);</span><br><span class="line">                <span class="comment">// 绘制</span></span><br><span class="line">                <span class="keyword">if</span> (shot.isLive) &#123;</span><br><span class="line">                    g.draw3DRect(shot.x, shot.y, <span class="number">1</span>, <span class="number">1</span>, <span class="keyword">false</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 子弹消亡，从Vector移除</span></span><br><span class="line">                    enemy.shots.remove(shot);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="18-2-2-敌人坦克被击中"><a href="#18-2-2-敌人坦克被击中" class="headerlink" title="18.2.2 敌人坦克被击中"></a>18.2.2 敌人坦克被击中</h3><ul>
<li><p>MyPanel.java：判断子弹是否击中敌人</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span> </span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">	...</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">    	...</span><br><span class="line">        <span class="comment">// 画出enemy坦克(遍历Vector)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">            <span class="comment">// 取出坦克并绘制</span></span><br><span class="line">            Enemy enemy = enemies.get(i);</span><br><span class="line">            <span class="comment">// 当坦克存活时才绘制</span></span><br><span class="line">            <span class="keyword">if</span> (enemy.isLive) &#123;</span><br><span class="line">                drawTank(enemy.getX(), enemy.getY(), g, enemy.getDirect(), <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//坦克死亡时从Vector中删除</span></span><br><span class="line">                enemies.remove(enemy);</span><br><span class="line">            &#125;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">	<span class="comment">// 判断我方子弹是否击中敌人的子弹</span></span><br><span class="line">    <span class="comment">// 什么时候需要判断是否击中坦克？run方法中循环判断</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitTank</span><span class="params">(Shot s, Enemy enemy)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断s 击中坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (enemy.getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//坦克向上</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//坦克向下</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; enemy.getX() &amp;&amp; s.x &lt; enemy.getX() + <span class="number">40</span></span><br><span class="line">                        &amp;&amp; s.y &gt; enemy.getY() &amp;&amp; s.y &lt; enemy.getY() + <span class="number">60</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>; <span class="comment">//子弹销毁</span></span><br><span class="line">                    enemy.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//坦克向右</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//坦克向左</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; enemy.getX() &amp;&amp; s.x &lt; enemy.getX() + <span class="number">60</span></span><br><span class="line">                        &amp;&amp; s.y &gt; enemy.getY() &amp;&amp; s.y &lt; enemy.getY() + <span class="number">40</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>;     <span class="comment">//子弹销毁</span></span><br><span class="line">                    enemy.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123; <span class="comment">//每隔100ms，重绘面板，刷新绘图区域，子弹就会移动</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 判断是否击中了敌人坦克</span></span><br><span class="line">            <span class="keyword">if</span> (hero.shot != <span class="keyword">null</span> &amp;&amp; hero.shot.isLive) &#123;</span><br><span class="line">                <span class="comment">// 遍历所有的敌人坦克</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">                    Enemy enemy = enemies.get(i);</span><br><span class="line">                    hitTank(hero.shot, enemy);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.repaint();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="18-2-3-爆炸效果"><a href="#18-2-3-爆炸效果" class="headerlink" title="18.2.3 爆炸效果"></a>18.2.3 爆炸效果</h3><ul>
<li><p>Bomb.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bomb</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x, y; <span class="comment">//炸弹坐标</span></span><br><span class="line">    <span class="keyword">int</span> life = <span class="number">9</span>; <span class="comment">//炸弹生命周期</span></span><br><span class="line">    <span class="keyword">boolean</span> isLive = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Bomb</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 减少生命值，配合图片出现爆炸效果</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lifeDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (life &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            life --;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            isLive = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span> </span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 定义一个Vector，用于存放炸弹（爆炸效果）</span></span><br><span class="line">    <span class="comment">// 当子弹击中坦克时，就加入一个爆炸效果</span></span><br><span class="line">    Vector&lt;Bomb&gt; bombs = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    <span class="comment">// 定义三张炸弹图片，用于显示爆炸效果</span></span><br><span class="line">    Image image1 = <span class="keyword">null</span>;</span><br><span class="line">    Image image2 = <span class="keyword">null</span>;</span><br><span class="line">    Image image3 = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 初始化Image对象</span></span><br><span class="line">        image1 = Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/bomb_1.gif&quot;</span>));</span><br><span class="line">        image2 = Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/bomb_2.gif&quot;</span>));</span><br><span class="line">        image3 = Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(<span class="string">&quot;/bomb_3.gif&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">    	...</span><br><span class="line">    	<span class="comment">// 画出所有炸弹（爆炸效果）</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bombs.size(); i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;绘制爆炸效果&quot;</span>);</span><br><span class="line">            Bomb bomb = bombs.get(i);</span><br><span class="line">            <span class="comment">// 根据bomb的life值，画出对应的图片</span></span><br><span class="line">            <span class="keyword">if</span> (bomb.life &gt; <span class="number">6</span>) &#123;</span><br><span class="line">                g.drawImage(image1, bomb.x, bomb.y, <span class="number">60</span>, <span class="number">60</span>, <span class="keyword">this</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bomb.life &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                g.drawImage(image2, bomb.x, bomb.y, <span class="number">60</span>, <span class="number">60</span>, <span class="keyword">this</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                g.drawImage(image3, bomb.x, bomb.y, <span class="number">60</span>, <span class="number">60</span>, <span class="keyword">this</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 让炸弹生命值减少</span></span><br><span class="line">            bomb.lifeDown();</span><br><span class="line">            <span class="comment">// 如果炸弹的life为0了(isLive为false)，就从bombs中删除</span></span><br><span class="line">            <span class="keyword">if</span> (!bomb.isLive) &#123;</span><br><span class="line">                bombs.remove(bomb);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    / 判断我方子弹是否击中敌人的子弹</span><br><span class="line">    <span class="comment">// 什么时候需要判断是否击中坦克？run方法中循环判断</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitTank</span><span class="params">(Shot s, Enemy enemy)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断s 击中坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (enemy.getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//坦克向上</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//坦克向下</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; enemy.getX() &amp;&amp; s.x &lt; enemy.getX() + <span class="number">40</span></span><br><span class="line">                        &amp;&amp; s.y &gt; enemy.getY() &amp;&amp; s.y &lt; enemy.getY() + <span class="number">60</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>; <span class="comment">//子弹销毁</span></span><br><span class="line">                    enemy.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                    <span class="comment">// 创建Bomb对象，加入到bombs集合中</span></span><br><span class="line">                    Bomb bomb = <span class="keyword">new</span> Bomb(enemy.getX(), enemy.getY());</span><br><span class="line">                    bombs.add(bomb);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//坦克向右</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//坦克向左</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; enemy.getX() &amp;&amp; s.x &lt; enemy.getX() + <span class="number">60</span></span><br><span class="line">                        &amp;&amp; s.y &gt; enemy.getY() &amp;&amp; s.y &lt; enemy.getY() + <span class="number">40</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>;     <span class="comment">//子弹销毁</span></span><br><span class="line">                    enemy.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                    <span class="comment">// 创建Bomb对象，加入到bombs集合中</span></span><br><span class="line">                    Bomb bomb = <span class="keyword">new</span> Bomb(enemy.getX(), enemy.getY());</span><br><span class="line">                    bombs.add(bomb);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="18-2-4-敌人坦克自由移动"><a href="#18-2-4-敌人坦克自由移动" class="headerlink" title="18.2.4 敌人坦克自由移动"></a>18.2.4 敌人坦克自由移动</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231124163454322.png" alt="image-20231124163454322"></p>
<ul>
<li><p>Enemy.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Enemy</span> <span class="keyword">extends</span> <span class="title">Tank</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="comment">// 在敌人坦克类，使用Vector 保存多个Shot线程</span></span><br><span class="line">    Vector&lt;Shot&gt; shots = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    <span class="keyword">boolean</span> isLive = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Enemy</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> direct, <span class="keyword">int</span> step)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; step; i++) &#123;</span><br><span class="line">            <span class="comment">// 休眠50ms</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//上</span></span><br><span class="line">                    moveUp();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//右</span></span><br><span class="line">                    moveRight();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//下</span></span><br><span class="line">                    moveDown();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//左</span></span><br><span class="line">                    moveLeft();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (isLive) &#123;</span><br><span class="line">            <span class="comment">// 根据坦克的方向来继续移动</span></span><br><span class="line">            move(getDirect(), <span class="number">30</span>);</span><br><span class="line">            <span class="comment">// 然后随机地改变坦克方向 0-3</span></span><br><span class="line">            setDirect((<span class="keyword">int</span>)(Math.random() * <span class="number">4</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span> </span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">   ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        hero = <span class="keyword">new</span> Hero(<span class="number">100</span>, <span class="number">100</span>); <span class="comment">// 初始化自己的坦克</span></span><br><span class="line">        hero.setSpeed(<span class="number">5</span>); <span class="comment">// 初始化坦克速度</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化敌人坦克</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemySize; i++) &#123;</span><br><span class="line">            Enemy enemy = <span class="keyword">new</span> Enemy(<span class="number">100</span> * (i + <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">            enemy.setDirect(<span class="number">2</span>); <span class="comment">// 设置初始炮筒方向</span></span><br><span class="line">            <span class="keyword">new</span> Thread(enemy).start(); <span class="comment">//启动Enemy线程，让坦克自由移动</span></span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="18-2-4-控制坦克移动范围"><a href="#18-2-4-控制坦克移动范围" class="headerlink" title="18.2.4 控制坦克移动范围"></a>18.2.4 控制坦克移动范围</h3><ul>
<li><p>Enemy.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> direct, <span class="keyword">int</span> step)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; step; i++) &#123;</span><br><span class="line">        <span class="comment">// 休眠50ms</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">50</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//上</span></span><br><span class="line">                <span class="keyword">if</span> (getY() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    moveUp();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//右</span></span><br><span class="line">                <span class="keyword">if</span> (getX() + <span class="number">60</span> &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">                    moveRight();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//下</span></span><br><span class="line">                <span class="keyword">if</span> (getY() + <span class="number">60</span> &lt; <span class="number">750</span>) &#123;</span><br><span class="line">                    moveDown();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//左</span></span><br><span class="line">                <span class="keyword">if</span> (getX() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    moveLeft();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//jSystem.out.println((char) e.getKeyCode() + &quot;被按下..&quot;);</span></span><br><span class="line">    <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_W) &#123; <span class="comment">//W 上</span></span><br><span class="line">        <span class="comment">// 修改方向</span></span><br><span class="line">        hero.setDirect(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 修改坐标</span></span><br><span class="line">        <span class="keyword">if</span> (hero.getY() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            hero.moveUp();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_D) &#123; <span class="comment">// D 右</span></span><br><span class="line">        hero.setDirect(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (hero.getX() + <span class="number">60</span> &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">            hero.moveRight();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_S) &#123; <span class="comment">// S 下</span></span><br><span class="line">        hero.setDirect(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (hero.getY() + <span class="number">60</span> &lt; <span class="number">750</span>) &#123;</span><br><span class="line">            hero.moveDown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_A) &#123; <span class="comment">// A 左</span></span><br><span class="line">        hero.setDirect(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">if</span> (hero.getX() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            hero.moveLeft();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="18-3-坦克大战0-5"><a href="#18-3-坦克大战0-5" class="headerlink" title="18.3 坦克大战0.5"></a>18.3 坦克大战0.5</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231125165359114.png" alt="image-20231125165359114"></p>
<h3 id="18-3-1-发射多颗子弹"><a href="#18-3-1-发射多颗子弹" class="headerlink" title="18.3.1 发射多颗子弹"></a>18.3.1 发射多颗子弹</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231125165711044.png" alt="image-20231125165711044"></p>
<ul>
<li><p>Hero.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hero</span> <span class="keyword">extends</span> <span class="title">Tank</span> </span>&#123; <span class="comment">// 自定义坦克类</span></span><br><span class="line">    <span class="comment">// 定义一个Shot对象</span></span><br><span class="line">    Shot shot = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// 可以发射多颗子弹</span></span><br><span class="line">    Vector&lt;Shot&gt; shots = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 射击，开启一个线程</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shotEnemyTank</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 控制一次最多发射几颗子弹</span></span><br><span class="line">        <span class="keyword">if</span> (shots.size() == <span class="number">5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">       ...</span><br><span class="line">        <span class="comment">// 新创建的shot放入shots集合中</span></span><br><span class="line">        shots.add(shot);</span><br><span class="line">        <span class="comment">// 启动Shot线程</span></span><br><span class="line">        <span class="keyword">new</span> Thread(shot).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span> </span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 画出hero射击的子弹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; hero.shots.size(); i++) &#123;</span><br><span class="line">            Shot shot = hero.shots.get(i);</span><br><span class="line">            <span class="keyword">if</span> (shot != <span class="keyword">null</span> &amp;&amp; shot.isLive) &#123;</span><br><span class="line">                g.draw3DRect(shot.x, shot.y, <span class="number">1</span>, <span class="number">1</span>, <span class="keyword">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// shot对象已经销毁，从shots集合中移除</span></span><br><span class="line">                hero.shots.remove(shot);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    	...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断我方所有子弹是否击中任意敌人</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitEnemyTank</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; hero.shots.size(); i++) &#123;</span><br><span class="line">            Shot shot = hero.shots.get(i);</span><br><span class="line">            <span class="comment">// 判断该颗子弹是否击中任意敌人</span></span><br><span class="line">            <span class="keyword">if</span> (hero.shot != <span class="keyword">null</span> &amp;&amp; hero.shot.isLive)&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; enemies.size(); j++) &#123;</span><br><span class="line">                    Enemy enemy = enemies.get(j);</span><br><span class="line">                    hitTank(shot, enemy);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断我方子弹是否击中敌人的子弹</span></span><br><span class="line">    <span class="comment">// 什么时候需要判断是否击中坦克？run方法中循环判断</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitTank</span><span class="params">(Shot s, Enemy enemy)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断s 击中坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (enemy.getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//坦克向上</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//坦克向下</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; enemy.getX() &amp;&amp; s.x &lt; enemy.getX() + <span class="number">40</span></span><br><span class="line">                        &amp;&amp; s.y &gt; enemy.getY() &amp;&amp; s.y &lt; enemy.getY() + <span class="number">60</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>; <span class="comment">//子弹销毁</span></span><br><span class="line">                    enemy.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                    enemies.remove(enemy); <span class="comment">//将敌人坦克从Vector中删除</span></span><br><span class="line">                    <span class="comment">// 创建Bomb对象，加入到bombs集合中</span></span><br><span class="line">                    Bomb bomb = <span class="keyword">new</span> Bomb(enemy.getX(), enemy.getY());</span><br><span class="line">                    bombs.add(bomb);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//坦克向右</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//坦克向左</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; enemy.getX() &amp;&amp; s.x &lt; enemy.getX() + <span class="number">60</span></span><br><span class="line">                        &amp;&amp; s.y &gt; enemy.getY() &amp;&amp; s.y &lt; enemy.getY() + <span class="number">40</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>;     <span class="comment">//子弹销毁</span></span><br><span class="line">                    enemy.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                    enemies.remove(enemy);</span><br><span class="line">                    <span class="comment">// 创建Bomb对象，加入到bombs集合中</span></span><br><span class="line">                    Bomb bomb = <span class="keyword">new</span> Bomb(enemy.getX(), enemy.getY());</span><br><span class="line">                    bombs.add(bomb);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">keyPressed</span><span class="params">(KeyEvent e)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// 如果按下的是J，就发射子弹</span></span><br><span class="line">        <span class="keyword">if</span> (e.getKeyCode() == KeyEvent.VK_J) &#123;</span><br><span class="line">            <span class="comment">//只能发射一颗子弹，且子弹消亡了才能发射新的子弹</span></span><br><span class="line">            <span class="comment">/*if (hero.shot == null || !hero.shot.isLive) &#123;</span></span><br><span class="line"><span class="comment">                hero.shotEnemyTank();</span></span><br><span class="line"><span class="comment">            &#125;*/</span></span><br><span class="line">            <span class="comment">// 发射多颗子弹</span></span><br><span class="line">            hero.shotEnemyTank();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123; <span class="comment">//每隔100ms，重绘面板，刷新绘图区域，子弹就会移动</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 判断我方所有子弹是否击中了任意敌人坦克</span></span><br><span class="line">            hitEnemyTank();</span><br><span class="line">            <span class="keyword">this</span>.repaint();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="18-3-2-敌人发射多颗子弹"><a href="#18-3-2-敌人发射多颗子弹" class="headerlink" title="18.3.2 敌人发射多颗子弹"></a>18.3.2 敌人发射多颗子弹</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231126094243019.png" alt="image-20231126094243019"></p>
<ul>
<li><p>Enemy.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (isLive) &#123;</span><br><span class="line">        <span class="comment">// 敌人发射多颗子弹，如果shots.size() &lt; 3,创建新子弹</span></span><br><span class="line">        <span class="keyword">if</span> (shots.size() &lt; <span class="number">3</span>) &#123;</span><br><span class="line">            Shot shot = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">switch</span> (getDirect()) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    shot = <span class="keyword">new</span> Shot(getX() + <span class="number">20</span>, getY(), <span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    shot = <span class="keyword">new</span> Shot(getX() + <span class="number">60</span>, getY() + <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    shot = <span class="keyword">new</span> Shot(getX() + <span class="number">20</span>, getY() + <span class="number">60</span>, <span class="number">2</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    shot = <span class="keyword">new</span> Shot(getX(), getY(), <span class="number">3</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            shots.add(shot);</span><br><span class="line">            <span class="keyword">new</span> Thread(shot).start();</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        <span class="comment">// 根据坦克的方向来继续移动</span></span><br><span class="line">        move(getDirect(), <span class="number">30</span>);</span><br><span class="line">        <span class="comment">// 然后随机地改变坦克方向 0-3</span></span><br><span class="line">        setDirect((<span class="keyword">int</span>) (Math.random() * <span class="number">4</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="18-3-3-敌人坦克击中我方"><a href="#18-3-3-敌人坦克击中我方" class="headerlink" title="18.3.3 敌人坦克击中我方"></a>18.3.3 敌人坦克击中我方</h3><ul>
<li><p>Tank.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isLive = <span class="keyword">true</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"> ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.paint(g);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">750</span>); <span class="comment">//填充背景，默认是黑色</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 画出hero坦克-封装成方法</span></span><br><span class="line">        <span class="keyword">if</span> (hero != <span class="keyword">null</span> &amp;&amp; hero.isLive)&#123;</span><br><span class="line">            drawTank(hero.getX(), hero.getY(), g, hero.getDirect(), <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">     ...</span><br><span class="line"> 	&#125;</span><br><span class="line">    </span><br><span class="line">    / 判断敌人子弹是否击中我方坦克</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitHero</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 遍历所有敌人坦克</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">            Enemy enemy = enemies.get(i);</span><br><span class="line">            <span class="comment">// 遍历敌人坦克所有子弹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; enemy.shots.size(); j++) &#123;</span><br><span class="line">                Shot shot = enemy.shots.get(j);</span><br><span class="line">                <span class="keyword">if</span> (hero.isLive &amp;&amp; shot.isLive) &#123;</span><br><span class="line">                    hitTank(shot, hero);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断我方所有子弹是否击中任意敌人</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitEnemyTank</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 取出我方所有子弹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; hero.shots.size(); i++) &#123;</span><br><span class="line">            Shot shot = hero.shots.get(i);</span><br><span class="line">            <span class="comment">// 判断该颗子弹是否击中任意敌人</span></span><br><span class="line">            <span class="keyword">if</span> (hero.shot != <span class="keyword">null</span> &amp;&amp; hero.shot.isLive) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; enemies.size(); j++) &#123;</span><br><span class="line">                    Enemy enemy = enemies.get(j);</span><br><span class="line">                    hitTank(shot, enemy);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断子弹是否击中坦克</span></span><br><span class="line">    <span class="comment">// 什么时候需要判断是否击中坦克？run方法中循环判断</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitTank</span><span class="params">(Shot s, Tank tank)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断s 击中坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (tank.getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//坦克向上</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//坦克向下</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; tank.getX() &amp;&amp; s.x &lt; tank.getX() + <span class="number">40</span></span><br><span class="line">                        &amp;&amp; s.y &gt; tank.getY() &amp;&amp; s.y &lt; tank.getY() + <span class="number">60</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>; <span class="comment">//子弹销毁</span></span><br><span class="line">                    tank.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                    enemies.remove(tank); <span class="comment">//将敌人坦克从Vector中删除</span></span><br><span class="line">                    <span class="comment">// 创建Bomb对象，加入到bombs集合中</span></span><br><span class="line">                    Bomb bomb = <span class="keyword">new</span> Bomb(tank.getX(), tank.getY());</span><br><span class="line">                    bombs.add(bomb);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//坦克向右</span></span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//坦克向左</span></span><br><span class="line">                <span class="keyword">if</span> (s.x &gt; tank.getX() &amp;&amp; s.x &lt; tank.getX() + <span class="number">60</span></span><br><span class="line">                        &amp;&amp; s.y &gt; tank.getY() &amp;&amp; s.y &lt; tank.getY() + <span class="number">40</span>) &#123;</span><br><span class="line">                    s.isLive = <span class="keyword">false</span>;     <span class="comment">//子弹销毁</span></span><br><span class="line">                    tank.isLive = <span class="keyword">false</span>; <span class="comment">//敌人坦克销毁</span></span><br><span class="line">                    enemies.remove(tank);</span><br><span class="line">                    <span class="comment">// 创建Bomb对象，加入到bombs集合中</span></span><br><span class="line">                    Bomb bomb = <span class="keyword">new</span> Bomb(tank.getX(), tank.getY());</span><br><span class="line">                    bombs.add(bomb);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123; <span class="comment">//每隔100ms，重绘面板，刷新绘图区域，子弹就会移动</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">           ...</span><br><span class="line">            <span class="comment">// 判断敌人子弹是否击中我方坦克</span></span><br><span class="line">            hitHero();</span><br><span class="line">            <span class="keyword">this</span>.repaint();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="第十九章-IO流"><a href="#第十九章-IO流" class="headerlink" title="第十九章 IO流"></a>第十九章 IO流</h1><h2 id="19-1-文件流"><a href="#19-1-文件流" class="headerlink" title="19.1 文件流"></a>19.1 文件流</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127091955868.png" alt="image-20231127091955868"></p>
<h2 id="19-2-常用的文件操作"><a href="#19-2-常用的文件操作" class="headerlink" title="19.2 常用的文件操作"></a>19.2 常用的文件操作</h2><h3 id="19-2-1-创建文件"><a href="#19-2-1-创建文件" class="headerlink" title="19.2.1 创建文件"></a>19.2.1 创建文件</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127092406701.png" alt="image-20231127092406701"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式 1 new File(String pathname) 根据路径构建</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;e:\\news1.txt&quot;</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        file.createNewFile();</span><br><span class="line">        System.out.println(<span class="string">&quot;文件创建成功&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式 2 new File(File parent,String child) //根据父目录文件+子路径构建</span></span><br><span class="line"><span class="comment">// e:\\news2.txt</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    File parentFile = <span class="keyword">new</span> File(<span class="string">&quot;e:\\&quot;</span>);</span><br><span class="line">    String fileName = <span class="string">&quot;news2.txt&quot;</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(parentFile, fileName);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        file.createNewFile();</span><br><span class="line">        System.out.println(<span class="string">&quot;创建成功~&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式 3 new File(String parent,String child) //根据父目录+子路径构建</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">create03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String parentPath = <span class="string">&quot;e:\\&quot;</span>;</span><br><span class="line">    String fileName = <span class="string">&quot;news4.txt&quot;</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(parentPath, fileName);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        file.createNewFile();</span><br><span class="line">        System.out.println(<span class="string">&quot;创建成功~&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="19-2-2-获取文件相关信息"><a href="#19-2-2-获取文件相关信息" class="headerlink" title="19.2.2 获取文件相关信息"></a>19.2.2 获取文件相关信息</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127094041249.png" alt="image-20231127094041249"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//先创建文件对象</span></span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;e:\\news1.txt&quot;</span>);</span><br><span class="line">    <span class="comment">//getName、getAbsolutePath、getParent、length、exists、isFile、isDirectory</span></span><br><span class="line">    System.out.println(<span class="string">&quot;文件名字=&quot;</span> + file.getName());</span><br><span class="line">    System.out.println(<span class="string">&quot;文件绝对路径=&quot;</span> + file.getAbsolutePath());</span><br><span class="line">    System.out.println(<span class="string">&quot;文件父级目录=&quot;</span> + file.getParent());</span><br><span class="line">    System.out.println(<span class="string">&quot;文件大小(字节)=&quot;</span> + file.length());</span><br><span class="line">    System.out.println(<span class="string">&quot;文件是否存在=&quot;</span> + file.exists());</span><br><span class="line">    System.out.println(<span class="string">&quot;是不是一个文件=&quot;</span> + file.isFile());</span><br><span class="line">    System.out.println(<span class="string">&quot;是不是一个目录=&quot;</span> + file.isDirectory());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="19-2-3-目录的操作和文件删除"><a href="#19-2-3-目录的操作和文件删除" class="headerlink" title="19.2.3 目录的操作和文件删除"></a>19.2.3 目录的操作和文件删除</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127094541531.png" alt="image-20231127094541531"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断文件是否存在，存在则删除</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;d:\\news1.txt&quot;</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">    <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (file.delete())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;文件不存在&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断目录是否存在，存在则删除，不存在则创建</span></span><br><span class="line"><span class="comment">// 目录也是一种文件</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;d:\\demo&quot;</span>;</span><br><span class="line">    File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">    <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (file.delete())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;目录不存在&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (file.mkdirs()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;目录创建成功&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="19-3-IO流原理和分类"><a href="#19-3-IO流原理和分类" class="headerlink" title="19.3 IO流原理和分类"></a>19.3 IO流原理和分类</h2><h3 id="19-3-1-IO流原理"><a href="#19-3-1-IO流原理" class="headerlink" title="19.3.1 IO流原理"></a>19.3.1 IO流原理</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127095822070.png" alt="image-20231127095822070"></p>
<h3 id="19-3-2-流的分类"><a href="#19-3-2-流的分类" class="headerlink" title="19.3.2 流的分类"></a>19.3.2 流的分类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127100030596.png" alt="image-20231127100030596"></p>
<h3 id="19-3-3-IO流体系图"><a href="#19-3-3-IO流体系图" class="headerlink" title="19.3.3 IO流体系图"></a>19.3.3 IO流体系图</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/641983694">【IO系列】一篇带你读懂java中的IO流！</a></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaIO%E6%B5%81%E4%BD%93%E7%B3%BB%E5%9B%BE.jpg" alt="javaIO流体系图"></p>
<h2 id="19-4-IO流常用的类"><a href="#19-4-IO流常用的类" class="headerlink" title="19.4 IO流常用的类"></a>19.4 IO流常用的类</h2><h3 id="19-4-1-FileInputStream"><a href="#19-4-1-FileInputStream" class="headerlink" title="19.4.1 FileInputStream"></a>19.4.1 FileInputStream</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127101619906.png" alt="image-20231127101619906"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127104542559.png" alt="image-20231127104542559"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 单个字节的读取，效率比较低</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\hello.txt&quot;</span>;</span><br><span class="line">    <span class="keyword">int</span> readData = <span class="number">0</span>;</span><br><span class="line">    FileInputStream fileInputStream = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//创建 FileInputStream 对象，用于读取文件</span></span><br><span class="line">        fileInputStream = <span class="keyword">new</span> FileInputStream(filePath);</span><br><span class="line">        <span class="comment">//从该输入流读取一个字节的数据。 如果没有输入可用，此方法将阻止。</span></span><br><span class="line">        <span class="comment">//如果返回-1 , 表示读取完毕</span></span><br><span class="line">        <span class="keyword">while</span> ((readData = fileInputStream.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>) readData); <span class="comment">//转成 char 显示</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//关闭文件流，释放资源.</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fileInputStream.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 使用 read(byte[] b) </span></span><br><span class="line"><span class="comment">* 字节数组读取文件，提高效率</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\hello.txt&quot;</span>;</span><br><span class="line">    <span class="comment">//字节数组</span></span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span>]; <span class="comment">//一次读取 8 个字节.</span></span><br><span class="line">    <span class="keyword">int</span> readLen = <span class="number">0</span>;</span><br><span class="line">    FileInputStream fileInputStream = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//创建 FileInputStream 对象，用于读取 文件</span></span><br><span class="line">        fileInputStream = <span class="keyword">new</span> FileInputStream(filePath);</span><br><span class="line">        <span class="comment">//从该输入流读取最多 b.length 字节的数据到字节数组。 此方法将阻塞，直到某些输入可用。</span></span><br><span class="line">        <span class="comment">//如果返回-1 , 表示读取完毕</span></span><br><span class="line">        <span class="comment">//如果读取正常, 返回实际读取的字节数 &lt;=8</span></span><br><span class="line">        <span class="keyword">while</span> ((readLen = fileInputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print(<span class="keyword">new</span> String(buf, <span class="number">0</span>, readLen));<span class="comment">//显示</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//关闭文件流，释放资源.</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fileInputStream.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="19-4-2-FileOutputStream"><a href="#19-4-2-FileOutputStream" class="headerlink" title="19.4.2 FileOutputStream"></a>19.4.2 FileOutputStream</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127104815075.png" alt="image-20231127104815075"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231127105032806.png" alt="image-20231127105032806"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 演示使用 FileOutputStream 将数据写到文件中, * 如果该文件不存在，则创建该文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeFile</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//创建 FileOutputStream 对象</span></span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\a.txt&quot;</span>;</span><br><span class="line">    FileOutputStream fileOutputStream = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//得到 FileOutputStream 对象</span></span><br><span class="line">        <span class="comment">//1. new FileOutputStream(filePath) 创建方式，当写入内容是，会覆盖原来的内容</span></span><br><span class="line">        <span class="comment">//2. new FileOutputStream(filePath, true) 创建方式，当写入内容是，是追加到文件后面</span></span><br><span class="line">        fileOutputStream = <span class="keyword">new</span> FileOutputStream(filePath, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//写入一个字节</span></span><br><span class="line">        fileOutputStream.write(<span class="string">&#x27;H&#x27;</span>);</span><br><span class="line">        <span class="comment">//写入字符串</span></span><br><span class="line">        String str = <span class="string">&quot;hello,world!&quot;</span>;</span><br><span class="line">        <span class="comment">//str.getBytes() 可以把 字符串 -&gt; 字节数组</span></span><br><span class="line">        <span class="comment">//fileOutputStream.write(str.getBytes());</span></span><br><span class="line">        fileOutputStream.write(str.getBytes(), <span class="number">0</span>, <span class="number">12</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fileOutputStream.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*文件拷贝</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fileCopy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建文件的输入流 , 将文件读入到程序</span></span><br><span class="line">    <span class="comment">//2. 创建文件的输出流， 将读取到的文件数据，写入到指定的文件.</span></span><br><span class="line">    String srcFilePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\img.png&quot;</span>;</span><br><span class="line">    String destFilePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\img1.png&quot;</span>;</span><br><span class="line">    FileInputStream fileInputStream = <span class="keyword">null</span>;</span><br><span class="line">    FileOutputStream fileOutputStream = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        fileInputStream = <span class="keyword">new</span> FileInputStream(srcFilePath);</span><br><span class="line">        fileOutputStream = <span class="keyword">new</span> FileOutputStream(destFilePath);</span><br><span class="line">        <span class="comment">//定义一个字节数组,提高读取效果</span></span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> readLen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((readLen = fileInputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//读取到后，就写入到文件 通过 fileOutputStream</span></span><br><span class="line">            <span class="comment">//即，是一边读，一边写</span></span><br><span class="line">            fileOutputStream.write(buf, <span class="number">0</span>, readLen);<span class="comment">//一定要使用这个方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;拷贝完成！&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//关闭输入流和输出流，释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (fileInputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">                fileInputStream.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fileOutputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">                fileOutputStream.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="19-4-3-FileReader"><a href="#19-4-3-FileReader" class="headerlink" title="19.4.3 FileReader"></a>19.4.3 FileReader</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231128093504951.png" alt="image-20231128093504951"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231128093627408.png" alt="image-20231128093627408"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 单个字符读取文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\story.txt&quot;</span>;</span><br><span class="line">    FileReader fileReader = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> readData = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1. 创建 FileReader 对象</span></span><br><span class="line">        fileReader = <span class="keyword">new</span> FileReader(filePath);</span><br><span class="line">        <span class="comment">//循环读取 使用 read, 单个字符读取</span></span><br><span class="line">        <span class="keyword">while</span> ((readData = fileReader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>) readData);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (fileReader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                fileReader.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 字符数组读取文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\story.txt&quot;</span>;</span><br><span class="line">    FileReader fileReader = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> readLen = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span>[] buf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1. 创建 FileReader 对象</span></span><br><span class="line">        fileReader = <span class="keyword">new</span> FileReader(filePath);</span><br><span class="line">        <span class="comment">//循环读取 使用 read(buf), 返回的是实际读取到的字符数</span></span><br><span class="line">        <span class="comment">//如果返回-1, 说明到文件结束</span></span><br><span class="line">        <span class="keyword">while</span> ((readLen = fileReader.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print(<span class="keyword">new</span> String(buf, <span class="number">0</span>, readLen));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (fileReader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                fileReader.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="19-4-4-FileWriter"><a href="#19-4-4-FileWriter" class="headerlink" title="19.4.4 FileWriter"></a>19.4.4 FileWriter</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231128093836575.png" alt="image-20231128093836575"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231128093932631.png" alt="image-20231128093932631"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fileWriter01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\note.txt&quot;</span>;</span><br><span class="line">    <span class="comment">//创建 FileWriter 对象</span></span><br><span class="line">    FileWriter fileWriter = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">char</span>[] chars = &#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        fileWriter = <span class="keyword">new</span> FileWriter(filePath);<span class="comment">//默认是覆盖写入</span></span><br><span class="line">        <span class="comment">// 3) write(int):写入单个字符</span></span><br><span class="line">        fileWriter.write(<span class="string">&#x27;H&#x27;</span>);</span><br><span class="line">        <span class="comment">// 4) write(char[]):写入指定数组</span></span><br><span class="line">        fileWriter.write(chars);</span><br><span class="line">        <span class="comment">// 5) write(char[],off,len):写入指定数组的指定部分</span></span><br><span class="line">        fileWriter.write(<span class="string">&quot;韩顺平教育&quot;</span>.toCharArray(), <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">        <span class="comment">// 6) write（string）：写入整个字符串</span></span><br><span class="line">        fileWriter.write(<span class="string">&quot; 你好北京~&quot;</span>);</span><br><span class="line">        fileWriter.write(<span class="string">&quot;风雨之后，定见彩虹&quot;</span>);</span><br><span class="line">        <span class="comment">// 7) write(string,off,len):写入字符串的指定部分</span></span><br><span class="line">        fileWriter.write(<span class="string">&quot;上海天津&quot;</span>, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="comment">//在数据量大的情况下，可以使用循环操作.</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//对应 FileWriter , 一定要关闭流，或者 flush 才能真正的把数据写入到文件</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//fileWriter.flush();</span></span><br><span class="line">            <span class="comment">//关闭文件流，等价 flush() + 关闭</span></span><br><span class="line">            fileWriter.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;程序结束...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="19-5-节点流和处理流"><a href="#19-5-节点流和处理流" class="headerlink" title="19.5 节点流和处理流"></a>19.5 节点流和处理流</h2><h3 id="19-5-1-基本介绍"><a href="#19-5-1-基本介绍" class="headerlink" title="19.5.1 基本介绍"></a>19.5.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231128100629711.png" alt="image-20231128100629711"></p>
<ul>
<li><p>一览图</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AD%97%E8%8A%82%E6%B5%81%E5%92%8C%E5%A4%84%E7%90%86%E6%B5%81.png" alt="字节流和处理流"></p>
</li>
<li><p>节点流和处理流的区别和联系</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231128101924537.png" alt="image-20231128101924537"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231128102740720.png" alt="image-20231128102740720"></p>
</li>
<li><p>处理流的功能主要体现在以下两个方面:</p>
<ul>
<li>性能的提高: 主要以<strong>增加缓冲的方式</strong>来提高输入输出的效率.</li>
<li>操作的便捷: 处理流可能提供了一系列<strong>便捷的方法</strong>来一次输入输出大批量的数据，使用更加灵活方便</li>
</ul>
</li>
</ul>
<h3 id="19-5-2-缓冲流-BufferedReader-和-BufferedWriter"><a href="#19-5-2-缓冲流-BufferedReader-和-BufferedWriter" class="headerlink" title="19.5.2 缓冲流-BufferedReader 和 BufferedWriter"></a>19.5.2 缓冲流-BufferedReader 和 BufferedWriter</h3><ol>
<li><p>使用BufferedReader读取文本文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;e:\\a.java&quot;</span>;</span><br><span class="line">    <span class="comment">//创建 bufferedReader</span></span><br><span class="line">    BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(filePath));</span><br><span class="line">    <span class="comment">//读取</span></span><br><span class="line">    String line; <span class="comment">//按行读取, 效率高</span></span><br><span class="line">    <span class="comment">//说明</span></span><br><span class="line">    <span class="comment">//1. bufferedReader.readLine() 是按行读取文件</span></span><br><span class="line">    <span class="comment">//2. 当返回 null 时，表示文件读取完毕</span></span><br><span class="line">    <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭流, 这里注意，只需要关闭 BufferedReader ，因为底层会自动地去关闭 节点流</span></span><br><span class="line">    bufferedReader.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用BufferedWriter写入文本文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;e:\\ok.txt&quot;</span>;</span><br><span class="line">    <span class="comment">//创建 BufferedWriter</span></span><br><span class="line">    <span class="comment">//说明:</span></span><br><span class="line">    <span class="comment">//1. new FileWriter(filePath, true) 表示以追加的方式写入</span></span><br><span class="line">    <span class="comment">//2. new FileWriter(filePath) , 表示以覆盖的方式写入</span></span><br><span class="line">    BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(filePath));</span><br><span class="line">    bufferedWriter.write(<span class="string">&quot;hello, 韩顺平教育!&quot;</span>);</span><br><span class="line">    bufferedWriter.newLine();<span class="comment">//插入一个和系统相关的换行</span></span><br><span class="line">    bufferedWriter.write(<span class="string">&quot;hello2, 韩顺平教育!&quot;</span>);</span><br><span class="line">    bufferedWriter.newLine();</span><br><span class="line">    bufferedWriter.write(<span class="string">&quot;hello3, 韩顺平教育!&quot;</span>);</span><br><span class="line">    bufferedWriter.newLine();</span><br><span class="line">    <span class="comment">//说明：关闭外层流即可 ， 传入的 new FileWriter(filePath) ,会在底层关闭</span></span><br><span class="line">    bufferedWriter.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>拷贝文本文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 不要去操作 二进制文件[声音，视频，doc, pdf ], 可能造成文件损坏</span></span><br><span class="line">        String srcPath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\story.txt&quot;</span>;</span><br><span class="line">        String desPath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\story2.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line">        BufferedReader bufferedReader = <span class="keyword">null</span>;</span><br><span class="line">        BufferedWriter bufferedWriter = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(srcPath));</span><br><span class="line">        bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(desPath));</span><br><span class="line">        String line = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>((line = bufferedReader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bufferedWriter.write(line);</span><br><span class="line">        &#125;</span><br><span class="line">        bufferedReader.close();</span><br><span class="line">        bufferedWriter.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="19-5-3-缓冲流-BufferedInputStream-和-BufferedOutputStream"><a href="#19-5-3-缓冲流-BufferedInputStream-和-BufferedOutputStream" class="headerlink" title="19.5.3 缓冲流-BufferedInputStream 和 BufferedOutputStream"></a>19.5.3 缓冲流-BufferedInputStream 和 BufferedOutputStream</h3><ul>
<li><p><strong>字节流可以操作二进制文件</strong>，也可以操作文本文件</p>
</li>
<li><p>拷贝图片、音频文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String srcPath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\img.png&quot;</span>;</span><br><span class="line">    String desPath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\img2.png&quot;</span>;</span><br><span class="line"></span><br><span class="line">    BufferedInputStream bufferedInputStream = <span class="keyword">null</span>;</span><br><span class="line">    BufferedOutputStream bufferedOutputStream = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(srcPath));</span><br><span class="line">    bufferedOutputStream = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(desPath));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] buff = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> readLen = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((readLen = bufferedInputStream.read(buff)) != -<span class="number">1</span>) &#123;</span><br><span class="line">        bufferedOutputStream.write(buff, <span class="number">0</span>, readLen);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bufferedInputStream.close();</span><br><span class="line">    bufferedOutputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="19-5-4-序列化和反序列化"><a href="#19-5-4-序列化和反序列化" class="headerlink" title="19.5.4 序列化和反序列化"></a>19.5.4 序列化和反序列化</h3><ul>
<li><p>看一个需求</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231129100806911.png" alt="image-20231129100806911"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231129101412433.png" alt="image-20231129101412433"></p>
</li>
</ul>
<ul>
<li><p><strong><font color="red">序列化和反序列化</font></strong></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231129101022414.png" alt="image-20231129101022414"></p>
</li>
</ul>
<h3 id="19-5-5-对象流-ObjectInputStream-和-ObjectOutputStream"><a href="#19-5-5-对象流-ObjectInputStream-和-ObjectOutputStream" class="headerlink" title="19.5.5 对象流-ObjectInputStream 和 ObjectOutputStream"></a>19.5.5 对象流-ObjectInputStream 和 ObjectOutputStream</h3><ul>
<li><p>提供了对基本类型或对象类型的序列化和反序列化的方法</p>
<ul>
<li>ObjectOutputStream 提供 序列化功能</li>
<li>ObjectInputStream 提供 反序列化功能</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231129101606079.png" alt="image-20231129101606079"></p>
</li>
</ul>
<ul>
<li><p>演示 ObjectOutputStream 的使用, 完成数据的序列化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectOutputStream_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//序列化后，保存的文件格式，不是存文本，而是按照他的格式来保存</span></span><br><span class="line">        String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\data.dat&quot;</span>;</span><br><span class="line"></span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(filePath));</span><br><span class="line">        <span class="comment">//序列化数据</span></span><br><span class="line">        oos.writeInt(<span class="number">100</span>);<span class="comment">// int -&gt; Integer (实现了 Serializable)</span></span><br><span class="line">        oos.writeBoolean(<span class="keyword">true</span>);<span class="comment">// boolean -&gt; Boolean (实现了 Serializable)</span></span><br><span class="line">        oos.writeChar(<span class="string">&#x27;a&#x27;</span>);<span class="comment">// char -&gt; Character (实现了 Serializable)</span></span><br><span class="line">        oos.writeDouble(<span class="number">9.5</span>);<span class="comment">// double -&gt; Double (实现了 Serializable)</span></span><br><span class="line">        oos.writeUTF(<span class="string">&quot;韩顺平教育&quot;</span>);<span class="comment">//String</span></span><br><span class="line">        <span class="comment">//保存一个 dog 对象</span></span><br><span class="line">        oos.writeObject(<span class="keyword">new</span> Dog(<span class="string">&quot;旺财&quot;</span>, <span class="number">10</span>));</span><br><span class="line">        oos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Dog&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>演示 ObjectInputStream的使用，完成数据的反序列化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectInputStream_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 1.创建流对象</span></span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\data.dat&quot;</span>));</span><br><span class="line">        <span class="comment">// 2.读取， 注意顺序和保存数据一致</span></span><br><span class="line">        System.out.println(ois.readInt());</span><br><span class="line">        System.out.println(ois.readBoolean());</span><br><span class="line">        System.out.println(ois.readChar());</span><br><span class="line">        System.out.println(ois.readDouble());</span><br><span class="line">        System.out.println(ois.readUTF());</span><br><span class="line">        Object o = ois.readObject();</span><br><span class="line">        System.out.println(<span class="string">&quot;运行类型=&quot;</span> + o.getClass()); <span class="comment">//class com.durango.outputstream.Dog</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Dog信息&quot;</span> + o); <span class="comment">//Dog信息Dog&#123;name=&#x27;旺财&#x27;, age=10&#125;</span></span><br><span class="line">        <span class="comment">// 3.关闭</span></span><br><span class="line">        ois.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;以反序列化的方式读取(恢复)ok~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>注意事项<ol>
<li>读写顺序要一致</li>
<li>要求序列化或反序列化对象，需要实现可序列化</li>
<li>序列化的类中建议添加<strong>SerialVersionUID</strong>，为了提高版本的兼容性</li>
<li>序列化对象时，默认将里面所有属性都进行序列化，但<strong>除了static或transient修饰的</strong>成员</li>
<li>序列化对象时，要求<strong>里面属性的数据类型也需要实现序列化接口</strong></li>
<li>序列化具备<strong>可继承性</strong>，也就是如果某类已经实现了序列化，则它的所有子类也已经默认实现了序列化</li>
</ol>
</li>
</ul>
<h3 id="19-5-6-标准输入输出流"><a href="#19-5-6-标准输入输出流" class="headerlink" title="19.5.6 标准输入输出流"></a>19.5.6 标准输入输出流</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231129104244722.png" alt="image-20231129104244722"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// System.in 标准输入 - 键盘</span></span><br><span class="line"><span class="comment">// System 类的 public final static InputStream in = null;</span></span><br><span class="line"><span class="comment">// System.in的编译类型 InputStream</span></span><br><span class="line"><span class="comment">// System.in的运行类型 BufferedInputStream</span></span><br><span class="line">System.out.println(System.in.getClass());</span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out 标准输出 - 显示器</span></span><br><span class="line"><span class="comment">// System 类的 public final static PrintStream out = null;</span></span><br><span class="line"><span class="comment">// System.in的编译类型 PrintStream</span></span><br><span class="line"><span class="comment">// System.in的运行类型 PrintStream</span></span><br><span class="line">System.out.println(System.out.getClass());</span><br></pre></td></tr></table></figure>



<h3 id="19-5-7-转换流-InputStreamReader-和-OutputStreamWriter"><a href="#19-5-7-转换流-InputStreamReader-和-OutputStreamWriter" class="headerlink" title="19.5.7 转换流-InputStreamReader 和 OutputStreamWriter"></a>19.5.7 转换流-InputStreamReader 和 OutputStreamWriter</h3><ul>
<li>一个编码问题<ul>
<li>默认情况下，<strong>字符流</strong>读取文件是按照 utf-8 编码，无法指定编码</li>
<li>字节流可以指定编码</li>
</ul>
</li>
<li><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231129105841034.png" alt="image-20231129105841034"></li>
</ul>
<ul>
<li><p>演示：将字节流 FileInputStream 转成字符流 InputStreamReader, <strong>指定编码 gbk/utf-8</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\note.txt&quot;</span>;</span><br><span class="line">    <span class="comment">//1. 把 FileInputStream 转成 InputStreamReader</span></span><br><span class="line">    <span class="comment">//2. 指定编码 gbk</span></span><br><span class="line">    <span class="comment">//3. 把 InputStreamReader 传入 BufferedReader</span></span><br><span class="line">    <span class="comment">//InputStreamReader isr = new InputStreamReader(new FileInputStream(filePath), &quot;gbk&quot;);</span></span><br><span class="line">    <span class="comment">//BufferedReader br = new BufferedReader(isr);</span></span><br><span class="line">    <span class="comment">//将 2 和 3 合在一起</span></span><br><span class="line">    BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</span><br><span class="line">        <span class="keyword">new</span> FileInputStream(filePath), <span class="string">&quot;gbk&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. 读取</span></span><br><span class="line">    String s;</span><br><span class="line">    <span class="keyword">while</span> ((s = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;读取内容=&quot;</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//5. 关闭外层流</span></span><br><span class="line">    br.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>演示：编程将字节流FileOutputStream包装成(转换成)字符流OutputStreamWriter，对文件进行写入(按照GBK格式，可以指定其他，比如utf-8)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">// 1.创建流对象</span></span><br><span class="line">    String filePath = <span class="string">&quot;D:\\Code\\IdeaJavaProjects\\chapter19\\src\\note2.txt&quot;</span>;</span><br><span class="line">    OutputStreamWriter osw =</span><br><span class="line">        <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(filePath), <span class="string">&quot;gbk&quot;</span>);</span><br><span class="line">    <span class="comment">// 2.写入</span></span><br><span class="line">    osw.write(<span class="string">&quot;hello,韩顺平教育~&quot;</span>);</span><br><span class="line">    <span class="comment">// 3.关闭</span></span><br><span class="line">    osw.close();</span><br><span class="line">    System.out.println(<span class="string">&quot;保存成功~&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="19-5-8-打印流-PrintStream-和-PrintWriter"><a href="#19-5-8-打印流-PrintStream-和-PrintWriter" class="headerlink" title="19.5.8 打印流-PrintStream 和 PrintWriter"></a>19.5.8 打印流-PrintStream 和 PrintWriter</h3><ul>
<li><p>继承关系图</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231130093409020.png" alt="image-20231130093409020"></p>
</li>
<li><p>​    案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    PrintStream out = System.out;</span><br><span class="line">    <span class="comment">//在默认情况下，PrintStream 输出数据的位置是 标准输出，即显示器</span></span><br><span class="line">    out.print(<span class="string">&quot;john, hello&quot;</span>);</span><br><span class="line">    <span class="comment">//因为 print 底层使用的是 write , 所以我们可以直接调用 write 进行打印/输出</span></span><br><span class="line">    out.write(<span class="string">&quot;韩顺平,你好&quot;</span>.getBytes());</span><br><span class="line">    out.close();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//我们可以去修改打印流输出的位置/设备</span></span><br><span class="line">    <span class="comment">//1. 输出修改成 &quot;e:\\f1.txt&quot;</span></span><br><span class="line">    <span class="comment">// public static void setOut(PrintStream out) &#123;</span></span><br><span class="line">    <span class="comment">//      checkIO();</span></span><br><span class="line">    <span class="comment">//      setOut0(out); // native 方法，修改了 out</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    System.setOut(<span class="keyword">new</span> PrintStream(<span class="string">&quot;e:\\f1.txt&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;hello, 韩顺平教育~&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    PrintWriter printWriter = <span class="keyword">new</span> PrintWriter(System.out);</span><br><span class="line">    PrintWriter printWriter1 = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> FileWriter(<span class="string">&quot;e:\\f1.txt&quot;</span>));</span><br><span class="line">    printWriter.println(<span class="string">&quot;hi,你好&quot;</span>);</span><br><span class="line">    printWriter1.println(<span class="string">&quot;hello,world!&quot;</span>);</span><br><span class="line">    printWriter.close();</span><br><span class="line">    printWriter1.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="19-6-Properties-类"><a href="#19-6-Properties-类" class="headerlink" title="19.6 Properties 类"></a>19.6 Properties 类</h2><ul>
<li><a href="#properties">Map-Properties</a></li>
</ul>
<h3 id="19-6-1-基本介绍"><a href="#19-6-1-基本介绍" class="headerlink" title="19.6.1 基本介绍"></a>19.6.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231130100339284.png" alt="image-20231130100339284"></p>
<h3 id="19-6-2-常用方法"><a href="#19-6-2-常用方法" class="headerlink" title="19.6.2 常用方法"></a>19.6.2 常用方法</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231130100503751.png" alt="image-20231130100503751"></p>
<h3 id="19-6-3-案例"><a href="#19-6-3-案例" class="headerlink" title="19.6.3 案例"></a>19.6.3 案例</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231130100601965.png" alt="image-20231130100601965"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 Properties 类来读取 mysql.properties 文件</span></span><br><span class="line"><span class="comment">//1. 创建 Properties 对象</span></span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line"><span class="comment">//2. 加载指定配置文件</span></span><br><span class="line">properties.load(<span class="keyword">new</span> FileReader(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line"><span class="comment">//3. 把 k-v 显示到控制台</span></span><br><span class="line">properties.list(System.out);</span><br><span class="line"><span class="comment">//4. 根据 key 获取对应的值</span></span><br><span class="line">String user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">String pwd = properties.getProperty(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;用户名=&quot;</span> + user);</span><br><span class="line">System.out.println(<span class="string">&quot;密码是=&quot;</span> + pwd);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 Properties 类来创建 配置文件, 修改配置文件内容</span></span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line"><span class="comment">//创建</span></span><br><span class="line"><span class="comment">//1.如果该文件没有 key 就是创建</span></span><br><span class="line"><span class="comment">//2.如果该文件有 key ,就是修改</span></span><br><span class="line">properties.setProperty(<span class="string">&quot;charset&quot;</span>, <span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">properties.setProperty(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;汤姆&quot;</span>);<span class="comment">//注意保存时，是中文的 unicode 码值</span></span><br><span class="line">properties.setProperty(<span class="string">&quot;pwd&quot;</span>, <span class="string">&quot;888888&quot;</span>);</span><br><span class="line"><span class="comment">//将 k-v 存储文件中即可</span></span><br><span class="line">properties.store(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;src\\mysql2.properties&quot;</span>), <span class="string">&quot;this is a comment&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;保存配置文件成功~&quot;</span>);</span><br></pre></td></tr></table></figure>



<h1 id="第二十章-坦克大战【3】"><a href="#第二十章-坦克大战【3】" class="headerlink" title="第二十章 坦克大战【3】"></a>第二十章 坦克大战【3】</h1><h2 id="20-1-坦克大战0-6"><a href="#20-1-坦克大战0-6" class="headerlink" title="20.1 坦克大战0.6"></a>20.1 坦克大战0.6</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231201092439847.png" alt="image-20231201092439847"></p>
<h3 id="20-1-1-防止坦克重叠"><a href="#20-1-1-防止坦克重叠" class="headerlink" title="20.1.1 防止坦克重叠"></a>20.1.1 防止坦克重叠</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231201093358055.png" alt="image-20231201093358055"></p>
<ul>
<li><p>Enemy.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">public class Enemy extends Tank implements Runnable &#123;</span><br><span class="line">    ...</span><br><span class="line">    // 增加成员enemies，可以得到敌人坦克的Vector(在MyPanel中创建的)</span><br><span class="line">    Vector&lt;Enemy&gt; enemies = new Vector&lt;&gt;();</span><br><span class="line">    // 编写方法，判断当前坦克是否和其他Enemy坦克发生碰撞</span><br><span class="line">    </span><br><span class="line">    public boolean isTouchEnemy() &#123;</span><br><span class="line">        // 判断当前坦克方向</span><br><span class="line">        switch (this.getDirect()) &#123;</span><br><span class="line">            case 0: //上</span><br><span class="line">                for (int i = 0; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">                    //遍历Vector中所有敌人坦克</span><br><span class="line">                    Enemy enemy = enemies.get(i);</span><br><span class="line">                    if (enemy != this) &#123;</span><br><span class="line">                        int direct = enemy.getDirect();</span><br><span class="line">                        //1. 敌人坦克上下，x范围[x,x+40],y范围[y,y+60]</span><br><span class="line">                        if (direct == 0 || direct == 2) &#123;</span><br><span class="line">                            //当前坦克左上角[x,y],右上角[x+40,y]</span><br><span class="line">                            if (this.getX() &gt;= enemy.getX()</span><br><span class="line">                                    &amp;&amp; this.getX() &lt;= enemy.getX() + 40</span><br><span class="line">                                    &amp;&amp; this.getY() &gt;= enemy.getY()</span><br><span class="line">                                    &amp;&amp; this.getY() &lt;= enemy.getY() + 60) &#123;</span><br><span class="line">                                return true;</span><br><span class="line">                            &#125;</span><br><span class="line">                            if (this.getX() + 40 &gt;= enemy.getX()</span><br><span class="line">                                    &amp;&amp; this.getX() + 40 &lt;= enemy.getX() + 40</span><br><span class="line">                                    &amp;&amp; this.getY() &gt;= enemy.getY()</span><br><span class="line">                                    &amp;&amp; this.getY() &lt;= enemy.getY() + 60) &#123;</span><br><span class="line">                                return true;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        //2. 敌人坦克左右，x范围[x,x+60],y范围[y,y+40]</span><br><span class="line">                        if (direct == 1 || direct == 3) &#123;</span><br><span class="line">                            //当前坦克左上角[x,y],右上角[x+40,y]</span><br><span class="line">                            if (this.getX() &gt;= enemy.getX()</span><br><span class="line">                                    &amp;&amp; this.getX() &lt;= enemy.getX() + 60</span><br><span class="line">                                    &amp;&amp; this.getY() &gt;= enemy.getY()</span><br><span class="line">                                    &amp;&amp; this.getY() &lt;= enemy.getY() + 40) &#123;</span><br><span class="line">                                return true;</span><br><span class="line">                            &#125;</span><br><span class="line">                            if (this.getX() + 40 &gt;= enemy.getX()</span><br><span class="line">                                    &amp;&amp; this.getX() + 40 &lt;= enemy.getX() + 60</span><br><span class="line">                                    &amp;&amp; this.getY() &gt;= enemy.getY()</span><br><span class="line">                                    &amp;&amp; this.getY() &lt;= enemy.getY() + 40) &#123;</span><br><span class="line">                                return true;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            case 1: //右</span><br><span class="line">                ...</span><br><span class="line">                break;</span><br><span class="line">            case 2: //下</span><br><span class="line">                ...</span><br><span class="line">                break;</span><br><span class="line">            case 3: //左</span><br><span class="line">                ...</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void move(int direct, int step) &#123;</span><br><span class="line">        for (int i = 0; i &lt; step; i++) &#123;</span><br><span class="line">            ...</span><br><span class="line">            switch (direct) &#123;</span><br><span class="line">                case 0: //上</span><br><span class="line">                    if (getY() &gt; 0 &amp;&amp; !isTouchEnemy()) &#123;</span><br><span class="line">                        moveUp();</span><br><span class="line">                    &#125;</span><br><span class="line">                ...</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化敌人坦克</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemySize; i++) &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 设置Enemy的成员Vector&lt;Enemy&gt; enemies</span></span><br><span class="line">    enemy.setEnemies(enemies);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="20-1-2-记录总成绩"><a href="#20-1-2-记录总成绩" class="headerlink" title="20.1.2 记录总成绩"></a>20.1.2 记录总成绩</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231201102934955.png" alt="image-20231201102934955"></p>
<ul>
<li><p>Recorder.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Recorder</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 击毁坦克数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> allEnemyNum = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 定义IO对象，写数据到文件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> BufferedWriter bw = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String recordFile = <span class="string">&quot;src\\myRecord.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当我方坦克击毁一辆敌方坦克，allEnemyNum++</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addAllEnemyNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Recorder.allEnemyNum++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 游戏退出时，保存信息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">keepRecord</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(recordFile));</span><br><span class="line">            bw.write(allEnemyNum + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (bw != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    bw.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getAllEnemyNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> allEnemyNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setAllEnemyNum</span><span class="params">(<span class="keyword">int</span> allEnemyNum)</span> </span>&#123;</span><br><span class="line">        Recorder.allEnemyNum = allEnemyNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hitTank</span><span class="params">(Shot s, Tank tank)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 判断s 击中坦克</span></span><br><span class="line">    <span class="keyword">switch</span> (tank.getDirect()) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//坦克向上</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//坦克向下</span></span><br><span class="line">            <span class="keyword">if</span> (s.x &gt; tank.getX() &amp;&amp; s.x &lt; tank.getX() + <span class="number">40</span></span><br><span class="line">                &amp;&amp; s.y &gt; tank.getY() &amp;&amp; s.y &lt; tank.getY() + <span class="number">60</span>) &#123;</span><br><span class="line">               	...</span><br><span class="line">                <span class="keyword">if</span> (tank <span class="keyword">instanceof</span> Enemy) &#123;</span><br><span class="line">                    enemies.remove(tank); <span class="comment">//将敌人坦克从Vector中删除</span></span><br><span class="line">                    Recorder.addAllEnemyNum();</span><br><span class="line">                &#125;</span><br><span class="line">                ...</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>TankGame06.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TankGame06</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">    <span class="comment">// 在JFame中增加窗口监听</span></span><br><span class="line">    <span class="keyword">this</span>.addWindowListener(<span class="keyword">new</span> WindowAdapter() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosing</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;关闭窗口&quot;</span>);</span><br><span class="line">            Recorder.keepRecord();</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="20-1-3-记录敌人信息"><a href="#20-1-3-记录敌人信息" class="headerlink" title="20.1.3 记录敌人信息"></a>20.1.3 记录敌人信息</h3><ul>
<li><p>Recorder.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Recorder</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">    <span class="comment">// 定义Vector指向MyPane对象的 enemies</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Vector&lt;Enemy&gt; enemies = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 游戏退出时，保存信息</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">keepRecord</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(recordFile));</span><br><span class="line">            <span class="comment">// 保存成绩</span></span><br><span class="line">            bw.write(allEnemyNum + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">            <span class="comment">// 遍历敌人坦克Vector，保存敌人信息</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">                Enemy enemy = enemies.get(i);</span><br><span class="line">                <span class="keyword">if</span> (enemy.isLive) &#123;</span><br><span class="line">                    String record = enemy.getX() + <span class="string">&quot; &quot;</span> + enemy.getY() + <span class="string">&quot; &quot;</span> + enemy.getDirect();</span><br><span class="line">                    bw.write(record+ <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">	...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setEnemies</span><span class="params">(Vector&lt;Enemy&gt; enemies)</span> </span>&#123;</span><br><span class="line">        Recorder.enemies = enemies;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Recorder获取到enemies，用于保存信息</span></span><br><span class="line">    Recorder.setEnemies(enemies);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="20-1-4-恢复敌人信息"><a href="#20-1-4-恢复敌人信息" class="headerlink" title="20.1.4 恢复敌人信息"></a>20.1.4 恢复敌人信息</h3><ul>
<li><p>Node.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> direct;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Recorder.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Recorder</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="comment">// 定义Vector保存敌人的信息node</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Vector&lt;Node&gt; nodes = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 增加一个方法，用于读取recordFile，恢复相关信息</span></span><br><span class="line">    <span class="comment">// 继续上局游戏时调用</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Vector&lt;Node&gt; <span class="title">getNodesAndEnemyRec</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(recordFile));</span><br><span class="line">            allEnemyNum = Integer.parseInt(br.readLine());</span><br><span class="line">            <span class="comment">// 循环读取，生成nodes集合</span></span><br><span class="line">            String line = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                String[] xyd = line.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                Node node = <span class="keyword">new</span> Node(Integer.parseInt(xyd[<span class="number">0</span>]), Integer.parseInt(xyd[<span class="number">1</span>]),</span><br><span class="line">                        Integer.parseInt(xyd[<span class="number">2</span>]));</span><br><span class="line">                nodes.add(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (br != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    br.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nodes;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>TankGame06.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TankGame06</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;请输入选择：1：新游戏；2：继续游戏&quot;</span>);</span><br><span class="line">    String key = scanner.next();</span><br><span class="line">    mp = <span class="keyword">new</span> MyPanel(key);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPanel</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">KeyListener</span>, <span class="title">Runnable</span> </span>&#123; <span class="comment">//自定义画板类</span></span><br><span class="line">	<span class="comment">// 定义一个存放Node对象的Vector，用于恢复坦克信息</span></span><br><span class="line">    Vector&lt;Node&gt; nodes = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">    	nodes = Recorder.getNodesAndEnemyRec();</span><br><span class="line">    	...</span><br><span class="line">    	<span class="keyword">switch</span> (key) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;1&quot;</span>: <span class="comment">// 新游戏</span></span><br><span class="line">                Recorder.setAllEnemyNum(<span class="number">0</span>);</span><br><span class="line">                <span class="comment">//初始化敌人坦克</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; enemySize; i++) &#123;</span><br><span class="line">                    Enemy enemy = <span class="keyword">new</span> Enemy(<span class="number">100</span> * (i + <span class="number">1</span>), <span class="number">0</span>);</span><br><span class="line">                    enemy.setDirect(<span class="number">2</span>); <span class="comment">// 设置初始炮筒方向</span></span><br><span class="line">                    <span class="keyword">new</span> Thread(enemy).start(); <span class="comment">//启动Enemy线程，让坦克自由移动</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 给该enemy对象初始化Shot对象</span></span><br><span class="line">                    Shot shot = <span class="keyword">new</span> Shot(enemy.getX() + <span class="number">20</span>, enemy.getY() + <span class="number">60</span>, enemy.getDirect());</span><br><span class="line">                    enemy.shots.add(shot);</span><br><span class="line">                    <span class="comment">//启动Shot线程</span></span><br><span class="line">                    <span class="keyword">new</span> Thread(shot).start();</span><br><span class="line">                    enemies.add(enemy);</span><br><span class="line">                    <span class="comment">// 设置Enemy的成员Vector&lt;Enemy&gt; enemies</span></span><br><span class="line">                    enemy.setEnemies(enemies);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;2&quot;</span>: <span class="comment">// 继续游戏</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nodes.size(); i++) &#123;</span><br><span class="line">                    Node node = nodes.get(i);</span><br><span class="line">                    Enemy enemy = <span class="keyword">new</span> Enemy(node.getX(), node.getY());</span><br><span class="line">                    enemy.setDirect(node.getDirect()); <span class="comment">// 设置初始炮筒方向</span></span><br><span class="line">                    <span class="keyword">new</span> Thread(enemy).start(); <span class="comment">//启动Enemy线程，让坦克自由移动</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 给该enemy对象初始化Shot对象</span></span><br><span class="line">                    Shot shot = <span class="keyword">new</span> Shot(enemy.getX() + <span class="number">20</span>, enemy.getY() + <span class="number">60</span>, enemy.getDirect());</span><br><span class="line">                    enemy.shots.add(shot);</span><br><span class="line">                    <span class="comment">//启动Shot线程</span></span><br><span class="line">                    <span class="keyword">new</span> Thread(shot).start();</span><br><span class="line">                    enemies.add(enemy);</span><br><span class="line">                    <span class="comment">// 设置Enemy的成员Vector&lt;Enemy&gt; enemies</span></span><br><span class="line">                    enemy.setEnemies(enemies);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;输入有误！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">	&#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="20-2-坦克大战0-7"><a href="#20-2-坦克大战0-7" class="headerlink" title="20.2 坦克大战0.7"></a>20.2 坦克大战0.7</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231202104735994.png" alt="image-20231202104735994"></p>
<h3 id="20-2-1-播放音乐"><a href="#20-2-1-播放音乐" class="headerlink" title="20.2.1 播放音乐"></a>20.2.1 播放音乐</h3><ul>
<li><p>AePlayWave.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TankGame07</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> MyPanel mp = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> TankGame07();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TankGame07</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入选择：1：新游戏；2：继续游戏&quot;</span>);</span><br><span class="line">        String key = scanner.next();</span><br><span class="line">        mp = <span class="keyword">new</span> MyPanel(key);</span><br><span class="line">        <span class="comment">// 将mp放入Thread并启动</span></span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(mp);</span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="keyword">this</span>.add(mp);</span><br><span class="line">        <span class="keyword">this</span>.addKeyListener(mp);</span><br><span class="line">        <span class="keyword">this</span>.setSize(<span class="number">1300</span>, <span class="number">750</span>);</span><br><span class="line">        <span class="keyword">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="keyword">this</span>.setVisible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在JFame中增加窗口监听</span></span><br><span class="line">        <span class="keyword">this</span>.addWindowListener(<span class="keyword">new</span> WindowAdapter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosing</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;关闭窗口&quot;</span>);</span><br><span class="line">                Recorder.keepRecord();</span><br><span class="line">                System.exit(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">		...</span><br><span class="line">        <span class="comment">// 游戏初始化后，播放音乐</span></span><br><span class="line">        <span class="keyword">new</span> AePlayWave(<span class="string">&quot;src\\111.wav&quot;</span>).start();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="20-2-2-处理文件相关异常"><a href="#20-2-2-处理文件相关异常" class="headerlink" title="20.2.2 处理文件相关异常"></a>20.2.2 处理文件相关异常</h3><ul>
<li><p>MyPanel.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyPanel</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断记录文件是否存在</span></span><br><span class="line">        <span class="comment">// 不存在则只能开启&quot;新游戏&quot; key = &quot;1&quot;</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(Recorder.getRecordFile());</span><br><span class="line">        <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">            nodes = Recorder.getNodesAndEnemyRec();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有存档，只能开启新游戏&quot;</span>);</span><br><span class="line">            key = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="—-第三阶段-—"><a href="#—-第三阶段-—" class="headerlink" title="— 第三阶段 —"></a>— 第三阶段 —</h1><h1 id="第二十一章-网络编程"><a href="#第二十一章-网络编程" class="headerlink" title="第二十一章 网络编程"></a>第二十一章 网络编程</h1><h2 id="21-1-网络的相关概念"><a href="#21-1-网络的相关概念" class="headerlink" title="21.1 网络的相关概念"></a>21.1 网络的相关概念</h2><h3 id="21-1-1-网络通讯"><a href="#21-1-1-网络通讯" class="headerlink" title="21.1.1 网络通讯"></a>21.1.1 网络通讯</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204101445466.png" alt="image-20231204101445466"></p>
<h3 id="21-1-2-网络"><a href="#21-1-2-网络" class="headerlink" title="21.1.2 网络"></a>21.1.2 网络</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204101507849.png" alt="image-20231204101507849"></p>
<h3 id="21-1-3-IP地址"><a href="#21-1-3-IP地址" class="headerlink" title="21.1.3 IP地址"></a>21.1.3 IP地址</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204101613377.png" alt="image-20231204101613377"></p>
<h3 id="21-1-4-ipv4-地址分类"><a href="#21-1-4-ipv4-地址分类" class="headerlink" title="21.1.4 ipv4 地址分类"></a>21.1.4 ipv4 地址分类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204102429075.png" alt="image-20231204102429075"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204102445872.png" alt="image-20231204102445872"></p>
<h3 id="21-1-5-域名和端口"><a href="#21-1-5-域名和端口" class="headerlink" title="21.1.5 域名和端口"></a>21.1.5 域名和端口</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204102903300.png" alt="image-20231204102903300"></p>
<h3 id="21-1-6-TCP-IP协议"><a href="#21-1-6-TCP-IP协议" class="headerlink" title="21.1.6 TCP/IP协议"></a>21.1.6 TCP/IP协议</h3><ul>
<li>TCP/IP(Transmission Control Protocol/Internet Protocol)的简写中文译名为 <strong>传输控制协议/因特网互联协议</strong>，又叫网络通讯协议，这个协议是 Internet 最基本的协议、国际互联网络的基础，简单地说，就是由网络层的IP协议和传输层的TCP协议组成的。</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204103420610.png" alt="image-20231204103420610"></p>
<h3 id="21-1-7-网络通信协议"><a href="#21-1-7-网络通信协议" class="headerlink" title="21.1.7 网络通信协议"></a>21.1.7 网络通信协议</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204104003243.png" alt="image-20231204104003243"></p>
<h3 id="21-1-8-TCP-和-UDP"><a href="#21-1-8-TCP-和-UDP" class="headerlink" title="21.1.8 TCP 和 UDP"></a>21.1.8 TCP 和 UDP</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204104325582.png" alt="image-20231204104325582"></p>
<h2 id="21-2-InetAddress-类"><a href="#21-2-InetAddress-类" class="headerlink" title="21.2 InetAddress 类"></a>21.2 InetAddress 类</h2><h3 id="21-2-1-相关方法"><a href="#21-2-1-相关方法" class="headerlink" title="21.2.1 相关方法"></a>21.2.1 相关方法</h3><ol>
<li><strong>getLocalhost</strong>：获取本机InetAddress对象</li>
<li><strong>getByName</strong>：根据指定<strong>主机名/域名</strong>获取InetAddress对象</li>
<li><strong>getHostName</strong>：获取InetAddress对象的主机名</li>
<li><strong>getHostAddress</strong>：获取InetAddress对象的地址</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取本机 InetAddress 对象 getLocalHost</span></span><br><span class="line">InetAddress localHost = InetAddress.getLocalHost();</span><br><span class="line">System.out.println(localHost); <span class="comment">//Durango/172.25.153.218</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//根据指定主机名/域名获取 InetAddress对象  getByName</span></span><br><span class="line">InetAddress host2 = InetAddress.getByName(<span class="string">&quot;Durango&quot;</span>);</span><br><span class="line">System.out.println(host2); <span class="comment">//Durango/172.25.153.218</span></span><br><span class="line">InetAddress host3 = InetAddress.getByName(<span class="string">&quot;www.durango.cn&quot;</span>);</span><br><span class="line">System.out.println(host3); <span class="comment">//www.durango.cn/185.199.108.153</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取 InetAddress 对象的主机名 getHostName</span></span><br><span class="line">String host3Name = host3.getHostName();</span><br><span class="line">System.out.println(host3Name); <span class="comment">//www.durango.cn</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取 InetAddress 对象的地址 getHostAddress</span></span><br><span class="line">String host3Address = host3.getHostAddress();</span><br><span class="line">System.out.println(host3Address); <span class="comment">//185.199.108.153</span></span><br></pre></td></tr></table></figure>



<h2 id="21-3-Socket套接字"><a href="#21-3-Socket套接字" class="headerlink" title="21.3 Socket套接字"></a>21.3 Socket套接字</h2><h3 id="21-3-1-基本介绍"><a href="#21-3-1-基本介绍" class="headerlink" title="21.3.1 基本介绍"></a>21.3.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204110318452.png" alt="image-20231204110318452"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204110548528.png" alt="image-20231204110548528"></p>
<h2 id="21-4-TCP网络通信编程"><a href="#21-4-TCP网络通信编程" class="headerlink" title="21.4 TCP网络通信编程"></a>21.4 TCP网络通信编程</h2><h3 id="21-4-1-基本介绍和流程"><a href="#21-4-1-基本介绍和流程" class="headerlink" title="21.4.1 基本介绍和流程"></a>21.4.1 基本介绍和流程</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204110802157.png" alt="image-20231204110802157"></p>
<p><font color="red"><strong>注意事项：</strong></font></p>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><ul>
<li>思路流程图很重要！</li>
<li>数据发送完毕后记得设置结束标记</li>
<li>最后要关闭相关的流</li>
</ul>
</div>





<h3 id="21-4-2-应用案例-1-使用字节流"><a href="#21-4-2-应用案例-1-使用字节流" class="headerlink" title="21.4.2 应用案例 1(使用字节流)"></a>21.4.2 应用案例 1(使用字节流)</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204111017264.png" alt="image-20231204111017264"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204111528687.png" alt="image-20231204111528687"></p>
<p><font color="red">注意！设置结束标记 socket.shutdownOutput();</font></p>
<ul>
<li><p>SocketTCP01Server.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketTCP01Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 在本机 的 9999 端口监听, 等待连接</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端，在 9999 端口监听，等待连接..&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 当没有客户端连接 9999 端口时，程序会阻塞, 等待连接</span></span><br><span class="line">        <span class="comment">//   如果有客户端连接，则会返回 Socket 对象，程序继续</span></span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端 socket =&quot;</span> + socket.getClass() +<span class="string">&quot;已连接！&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 通过 socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span></span><br><span class="line">        InputStream inputStream = socket.getInputStream();</span><br><span class="line">        <span class="comment">//4. IO 读取</span></span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> readLen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, readLen));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.关闭流和 socket</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();<span class="comment">//关闭</span></span><br><span class="line">        System.out.println(<span class="string">&quot;服务端退出.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>SocketTCP01Client.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketTCP01Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 连接服务端 (ip , 端口）</span></span><br><span class="line">        <span class="comment">//解读: 连接本机的 9999 端口, 如果连接成功，返回 Socket 对象</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(InetAddress.getLocalHost(), <span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端 socket 返回=&quot;</span> + socket.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 连接上后，生成 Socket, 通过 socket.getOutputStream()</span></span><br><span class="line">        <span class="comment">// 得到 和 socket 对象关联的输出流对象</span></span><br><span class="line">        OutputStream outputStream = socket.getOutputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 通过输出流，写入数据到 数据通道</span></span><br><span class="line">        outputStream.write(<span class="string">&quot;hello, server&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 关闭流对象和 socket, 必须关闭</span></span><br><span class="line">        outputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端退出.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="21-4-3-应用案例-2-使用字节流"><a href="#21-4-3-应用案例-2-使用字节流" class="headerlink" title="21.4.3 应用案例 2(使用字节流)"></a>21.4.3 应用案例 2(使用字节流)</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204135824646.png" alt="image-20231204135824646"></p>
<ul>
<li><p>SocketTCP02Server.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketTCP02Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 在本机 的 9999 端口监听, 等待连接</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端，在 9999 端口监听，等待连接..&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 当没有客户端连接 9999 端口时，程序会阻塞, 等待连接</span></span><br><span class="line">        <span class="comment">//   如果有客户端连接，则会返回 Socket 对象，程序继续</span></span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端 socket 返回=&quot;</span> + socket.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 通过 socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span></span><br><span class="line">        InputStream inputStream = socket.getInputStream();</span><br><span class="line">        <span class="comment">//4. IO 读取</span></span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> readLen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, readLen));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 获取 socket 相关联的输出流</span></span><br><span class="line">        OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;hello, client&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">// 设置结束标记</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.关闭流和 socket</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();<span class="comment">//关闭</span></span><br><span class="line">        System.out.println(<span class="string">&quot;服务端退出.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>SocketTCP02Client.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketTCP02Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 连接服务端 (ip , 端口）</span></span><br><span class="line">        <span class="comment">//解读: 连接本机的 9999 端口, 如果连接成功，返回 Socket 对象</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(InetAddress.getLocalHost(), <span class="number">9999</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端 socket 返回=&quot;</span> + socket.getClass());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 连接上后，生成 Socket, 通过 socket.getOutputStream()</span></span><br><span class="line">        <span class="comment">// 得到 和 socket 对象关联的输出流对象</span></span><br><span class="line">        OutputStream outputStream = socket.getOutputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 通过输出流，写入数据到 数据通道</span></span><br><span class="line">        outputStream.write(<span class="string">&quot;hello, server&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">// 设置结束标记</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 获取和 socket 关联的输入流. 读取数据(字节)，并显示</span></span><br><span class="line">        InputStream inputStream = socket.getInputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> readLen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((readLen = inputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, readLen));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 关闭流对象和 socket, 必须关闭</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端退出.....&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="21-4-4-应用案例-3-使用字符流"><a href="#21-4-4-应用案例-3-使用字符流" class="headerlink" title="21.4.4 应用案例 3(使用字符流)"></a>21.4.4 应用案例 3(使用字符流)</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231204140444469.png" alt="image-20231204140444469"></p>
<p><font color="red">注意！bufferedWriter.newLine();和bufferedWriter.flush();</font></p>
<ul>
<li><p>SocketTCP03Server.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 在本机 的 9999 端口监听, 等待连接</span></span><br><span class="line">ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">9999</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;服务端，在 9999 端口监听，等待连接..&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 当没有客户端连接 9999 端口时，程序会阻塞, 等待连接</span></span><br><span class="line"><span class="comment">//   如果有客户端连接，则会返回 Socket 对象，程序继续</span></span><br><span class="line">Socket socket = serverSocket.accept();</span><br><span class="line">System.out.println(<span class="string">&quot;服务端 socket 返回=&quot;</span> + socket.getClass());</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 通过 socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span></span><br><span class="line">InputStream inputStream = socket.getInputStream();</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. IO 读取, 使用字符流, 使用 InputStreamReader 将 inputStream 转成字符流</span></span><br><span class="line">BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(inputStream));</span><br><span class="line">String s = bufferedReader.readLine();</span><br><span class="line">System.out.println(s);<span class="comment">//输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5. 获取 socket 相关联的输出流</span></span><br><span class="line">OutputStream outputStream = socket.getOutputStream();</span><br><span class="line"><span class="comment">// 使用字符输出流的方式回复信息 使用 OutputStreamWriter 将 outputStream 转换成字符流</span></span><br><span class="line">BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(outputStream));</span><br><span class="line">bufferedWriter.write(<span class="string">&quot;hello client 字符流&quot;</span>);</span><br><span class="line">bufferedWriter.newLine();<span class="comment">// 插入一个换行符，表示回复内容的结束！！！ 相当于socket.shutdownOutput()</span></span><br><span class="line">bufferedWriter.flush(); <span class="comment">//注意需要手动的 flush!!!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6.关闭流和 socket</span></span><br><span class="line">bufferedReader.close();</span><br><span class="line">bufferedWriter.close();</span><br><span class="line">socket.close();</span><br><span class="line">serverSocket.close();<span class="comment">//关闭</span></span><br><span class="line">System.out.println(<span class="string">&quot;服务端退出.....&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>SocketTCP03Client.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 连接服务端 (ip , 端口）</span></span><br><span class="line"><span class="comment">//解读: 连接本机的 9999 端口, 如果连接成功，返回 Socket 对象</span></span><br><span class="line">Socket socket = <span class="keyword">new</span> Socket(InetAddress.getLocalHost(), <span class="number">9999</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;客户端 socket 返回=&quot;</span> + socket.getClass());</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 连接上后，生成 Socket, 通过 socket.getOutputStream()</span></span><br><span class="line"><span class="comment">// 得到 和 socket 对象关联的输出流对象</span></span><br><span class="line">OutputStream outputStream = socket.getOutputStream();</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 通过输出流，写入数据到 数据通道, 使用字符流</span></span><br><span class="line">BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(outputStream));</span><br><span class="line">bufferedWriter.write(<span class="string">&quot;hello, server 字符流&quot;</span>);</span><br><span class="line">bufferedWriter.newLine();<span class="comment">//插入一个换行符，表示写入的内容结束, 注意，要求对方使用 readLine()!!!!</span></span><br><span class="line">bufferedWriter.flush();<span class="comment">// 如果使用的字符流，需要手动刷新，否则数据不会写入数据通道</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 获取和 socket 关联的输入流. 读取数据(字符)，并显示</span></span><br><span class="line">InputStream inputStream = socket.getInputStream();</span><br><span class="line">BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(inputStream));</span><br><span class="line">String s = bufferedReader.readLine();</span><br><span class="line">System.out.println(s);</span><br><span class="line"></span><br><span class="line"><span class="comment">//5. 关闭流对象和 socket, 必须关闭</span></span><br><span class="line">bufferedReader.close();<span class="comment">//关闭外层流</span></span><br><span class="line">bufferedWriter.close();</span><br><span class="line">socket.close();</span><br><span class="line">System.out.println(<span class="string">&quot;客户端退出.....&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="21-4-5-应用案例-4-上传图片"><a href="#21-4-5-应用案例-4-上传图片" class="headerlink" title="21.4.5 应用案例 4(上传图片)"></a>21.4.5 应用案例 4(上传图片)</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205092658640.png" alt="image-20231205092658640"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205102621085.png" alt="image-20231205102621085"></p>
<ul>
<li><p>StreamUtils.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StreamUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">//功能：将输入流转换成字节数组 byte[]</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] streamToByteArray(InputStream is) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        ByteArrayOutputStream bos = <span class="keyword">new</span> ByteArrayOutputStream();<span class="comment">//创建输出流对象</span></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; <span class="comment">//字节数组</span></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(b)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            bos.write(b, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">byte</span>[] array = bos.toByteArray();</span><br><span class="line">        bos.close();</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//功能：将 InputStream 转换成 String</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">streamToString</span><span class="params">(InputStream is)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is));</span><br><span class="line">        StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123; <span class="comment">//当读取到 null 时，就表示结束</span></span><br><span class="line">            builder.append(line + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> builder.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>TCPFileUploadServer.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPFileUploadServer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 服务端在本机监听8888端口</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端在8888端口监听，等待连接...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 等待连接</span></span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.通过socket获取输入流，读取客户端发送的数据</span></span><br><span class="line">        BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(socket.getInputStream());</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.将bytes写入到指定路径的文件</span></span><br><span class="line">        String filePath = <span class="string">&quot;src\\copy.jpg&quot;</span>;</span><br><span class="line">        BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(filePath));</span><br><span class="line">        bos.write(bytes);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.通过socket获取输出流，发送“收到图片”(通过字符流)</span></span><br><span class="line">        BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">        bw.write(<span class="string">&quot;收到图片&quot;</span>);</span><br><span class="line">        bw.flush(); <span class="comment">//把内容刷新到数据通道</span></span><br><span class="line">        socket.shutdownOutput();<span class="comment">//设置结束标记</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.关闭相关流</span></span><br><span class="line">        bis.close();</span><br><span class="line">        bos.close();</span><br><span class="line">        bw.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>TCPFileUploadClient.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TCPFileUploadClient</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 客户端连接服务端，得到socket对象</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(InetAddress.getLocalHost(), <span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;连接到服务器...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 创建读取磁盘文件的输入流</span></span><br><span class="line">        String filePath = <span class="string">&quot;D:\\zlx18\\Pictures\\Camera Roll\\绘图1.jpg&quot;</span>;</span><br><span class="line">        BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(filePath));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 把文件保存到字节数组中</span></span><br><span class="line">        <span class="keyword">byte</span>[] bytes = StreamUtils.streamToByteArray(bis);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.通过socket获取输出流，将bytes发送到服务端</span></span><br><span class="line">        BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(socket.getOutputStream());</span><br><span class="line">        bos.write(bytes); <span class="comment">//将文件对应的字节内容写入到数据通道</span></span><br><span class="line">        socket.shutdownOutput(); <span class="comment">//设置结束标记</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.通过socket获取输入流，接收服务端回复的消息</span></span><br><span class="line">        <span class="comment">// 使用StreamUtils工具类将输入流转换为String</span></span><br><span class="line">        String s = StreamUtils.streamToString(socket.getInputStream());</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.关闭相关流</span></span><br><span class="line">        bis.close();</span><br><span class="line">        bos.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="21-4-6-netstat-指令"><a href="#21-4-6-netstat-指令" class="headerlink" title="21.4.6 netstat 指令"></a>21.4.6 netstat 指令</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205103402358.png" alt="image-20231205103402358"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205104119614.png" alt="image-20231205104119614"></p>
<h2 id="21-5-UDP网络通信编程"><a href="#21-5-UDP网络通信编程" class="headerlink" title="21.5 UDP网络通信编程"></a>21.5 UDP网络通信编程</h2><h3 id="21-5-1-基本介绍和流程"><a href="#21-5-1-基本介绍和流程" class="headerlink" title="21.5.1 基本介绍和流程"></a>21.5.1 基本介绍和流程</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205104754694.png" alt="image-20231205104754694"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205105054222.png" alt="image-20231205105054222"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205105303498.png" alt="image-20231205105303498"></p>
<h3 id="21-5-2-案例1"><a href="#21-5-2-案例1" class="headerlink" title="21.5.2 案例1"></a>21.5.2 案例1</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205105332697.png" alt="image-20231205105332697"></p>
<ul>
<li><p>UDPReceiverA.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPReceiverA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 创建一个 DatagramSocket 对象，准备在 9999 接收数据</span></span><br><span class="line">        DatagramSocket socket = <span class="keyword">new</span> DatagramSocket(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 构建一个 (空的)DatagramPacket 对象，准备接收数据</span></span><br><span class="line">        <span class="comment">//   一个数据包最大 64k</span></span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buf, buf.length);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 调用接收方法, 将通过网络传输的 DatagramPacket 对象 填充到 packet 对象</span></span><br><span class="line">        <span class="comment">//   当有数据报发送到 本机的 9999 端口时，就会接收到数据</span></span><br><span class="line">        <span class="comment">//   如果没有数据包发送到 本机的 9999 端口, 就会阻塞等待.</span></span><br><span class="line">        System.out.println(<span class="string">&quot;接收端 A 等待接收数据..&quot;</span>);</span><br><span class="line">        socket.receive(packet);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 把 packet 进行拆包，取出数据，并显示.</span></span><br><span class="line">        <span class="keyword">int</span> length = packet.getLength();<span class="comment">//实际接收到的数据字节长度</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = packet.getData();<span class="comment">//接收到数据</span></span><br><span class="line">        String s = <span class="keyword">new</span> String(data, <span class="number">0</span>, length);</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//===回复信息给 B 端</span></span><br><span class="line">        <span class="comment">//将需要发送的数据，封装到 DatagramPacket 对象</span></span><br><span class="line">        data = <span class="string">&quot;好的, 明天见&quot;</span>.getBytes();</span><br><span class="line">        packet =</span><br><span class="line">                <span class="keyword">new</span> DatagramPacket(data, data.length, InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>), <span class="number">9998</span>);</span><br><span class="line">        socket.send(packet);<span class="comment">//发送</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 关闭资源</span></span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;A 端退出...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>UDPSenderB.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws IOException &#123;</span><br><span class="line">        //1.创建 DatagramSocket 对象，准备在 9998 端口 接收数据</span><br><span class="line">        DatagramSocket socket = new DatagramSocket(9998);</span><br><span class="line"></span><br><span class="line">        //2. 将需要发送的数据，封装到 DatagramPacket 对象</span><br><span class="line">        byte[] data = &quot;hello 明天吃火锅~&quot;.getBytes(); //</span><br><span class="line">        DatagramPacket packet =</span><br><span class="line">                new DatagramPacket(data, data.length, InetAddress.getByName(&quot;127.0.0.1&quot;), 9999);</span><br><span class="line">        socket.send(packet);</span><br><span class="line"></span><br><span class="line">        //3.=== 接收从 A 端回复的信息</span><br><span class="line">        //(1) 构建一个 DatagramPacket 对象，准备接收数据</span><br><span class="line">        byte[] buf = new byte[1024];</span><br><span class="line">        packet = new DatagramPacket(buf, buf.length);</span><br><span class="line">        //(2) 调用 接收方法, 将通过网络传输的 DatagramPacket 对象填充到 packet 对象</span><br><span class="line">        socket.receive(packet);</span><br><span class="line">        //(3) 可以把 packet 进行拆包，取出数据，并显示.</span><br><span class="line">        int length = packet.getLength();//实际接收到的数据字节长度</span><br><span class="line">        data = packet.getData();//接收到数据</span><br><span class="line">        String s = new String(data, 0, length);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        //4.关闭资源</span><br><span class="line">        socket.close();</span><br><span class="line">        System.out.println(&quot;B 端退出&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="21-6-Homeworks"><a href="#21-6-Homeworks" class="headerlink" title="21.6 Homeworks"></a>21.6 Homeworks</h2><h3 id="21-6-1-多次对话"><a href="#21-6-1-多次对话" class="headerlink" title="21.6.1 多次对话"></a>21.6.1 多次对话</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205150951816.png" alt="image-20231205150951816"></p>
<ul>
<li><p>Homework01Server.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Homework01Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">8080</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;等待客户端连接...&quot;</span>);</span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端连接成功!&quot;</span>);</span><br><span class="line"></span><br><span class="line">        BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">        BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">        <span class="keyword">boolean</span> key = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (key) &#123;</span><br><span class="line">            <span class="comment">// 采用字符流</span></span><br><span class="line">            String s = bufferedReader.readLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;客户端：&quot;</span> + s);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (s.equals(<span class="string">&quot;name&quot;</span>)) &#123;</span><br><span class="line">                bufferedWriter.write(<span class="string">&quot;我是nova&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.equals(<span class="string">&quot;hobby&quot;</span>)) &#123;</span><br><span class="line">                bufferedWriter.write(<span class="string">&quot;编写java程序&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.equals(<span class="string">&quot;bye&quot;</span>)) &#123;</span><br><span class="line">                bufferedWriter.write(<span class="string">&quot;bye&quot;</span>);</span><br><span class="line">                key = <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                bufferedWriter.write(<span class="string">&quot;你说什么&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            bufferedWriter.newLine();</span><br><span class="line">            bufferedWriter.flush();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;与客户端对话结束&quot;</span>);</span><br><span class="line">        bufferedReader.close();</span><br><span class="line">        bufferedWriter.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Homework01Client.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Homework01Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(InetAddress.getLocalHost(), <span class="number">8080</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;连接到服务端！&quot;</span>);</span><br><span class="line">        BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">        BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> key = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (key) &#123;</span><br><span class="line">            Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">            String message = scanner.next();</span><br><span class="line"></span><br><span class="line">            bufferedWriter.write(message);</span><br><span class="line">            bufferedWriter.newLine(); <span class="comment">// 插入换行符表示结束标志</span></span><br><span class="line">            bufferedWriter.flush();   <span class="comment">// 注意需要手动的 flush!!!</span></span><br><span class="line"></span><br><span class="line">            String s = bufferedReader.readLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;服务端：&quot;</span> + s);</span><br><span class="line">            <span class="keyword">if</span> (s.equals(<span class="string">&quot;bye&quot;</span>)) &#123;</span><br><span class="line">                key = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;与服务端对话结束&quot;</span>);</span><br><span class="line">        bufferedReader.close();</span><br><span class="line">        bufferedWriter.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="21-6-2-音乐下载"><a href="#21-6-2-音乐下载" class="headerlink" title="21.6.2 音乐下载"></a>21.6.2 音乐下载</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205153031867.png" alt="image-20231205153031867"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231205195815546.png" alt="image-20231205195815546"></p>
<ul>
<li><p>Homework03Server.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Homework03Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 监听端口，等待客户端连接</span></span><br><span class="line">        ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务端等待连接...&quot;</span>);</span><br><span class="line">        Socket socket = serverSocket.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端已连接！&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 得到socket关联的输入流，读取客户端要下载的文件名</span></span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        String musicName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(b)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            musicName += <span class="keyword">new</span> String(b, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端想要下载音乐《&quot;</span> + musicName + <span class="string">&quot;》&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 判断用户下载的文件是否存在</span></span><br><span class="line">        String filePath = <span class="string">&quot;src\\music\\&quot;</span> + musicName + <span class="string">&quot;.mp3&quot;</span>;</span><br><span class="line">        File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">        FileInputStream fileInputStream = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">            fileInputStream = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fileInputStream = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\music\\无名.mp3&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.从磁盘读取文件到字节数组</span></span><br><span class="line">        BufferedInputStream bis2 = <span class="keyword">new</span> BufferedInputStream(fileInputStream);</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = StreamUtils.streamToByteArray(bis2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. 得到socket关联的输出流，写入数据通道</span></span><br><span class="line">        BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(socket.getOutputStream());</span><br><span class="line">        System.out.println(<span class="string">&quot;音乐传输中...&quot;</span>);</span><br><span class="line">        bos.write(bytes);</span><br><span class="line">        bos.flush();</span><br><span class="line">        System.out.println(<span class="string">&quot;音乐传输完毕！&quot;</span>);</span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 关闭相关流</span></span><br><span class="line">        is.close();</span><br><span class="line">        bis2.close();</span><br><span class="line">        bos.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Homework03Client.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class Homework03Client &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        // 1. 连接服务端</span><br><span class="line">        Socket socket = new Socket(InetAddress.getLocalHost(), 8888);</span><br><span class="line">        System.out.println(&quot;连接到服务器&quot;);</span><br><span class="line"></span><br><span class="line">        // 2. 得到socket关联的输出流，发送要下载的文件名给客户端</span><br><span class="line">        Scanner scanner = new Scanner(System.in);</span><br><span class="line">        System.out.println(&quot;请输入你想下载的音乐名称：&quot;);</span><br><span class="line">        String musicName = scanner.next();</span><br><span class="line">        OutputStream os = socket.getOutputStream();</span><br><span class="line">        os.write(musicName.getBytes());</span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        // 3. 得到socket关联的输入流，从数据通道读取数据到字节数组</span><br><span class="line">        String filePath = &quot;src\\music.mp3&quot;;</span><br><span class="line">        BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());</span><br><span class="line">        byte[] bytes = StreamUtils.streamToByteArray(bis);</span><br><span class="line"></span><br><span class="line">        // 4. 将字节数组数据写入文件</span><br><span class="line">        BufferedOutputStream bos2 = new BufferedOutputStream(new FileOutputStream(filePath));</span><br><span class="line">        bos2.write(bytes);</span><br><span class="line">        System.out.println(&quot;音乐已经保存&quot;);</span><br><span class="line"></span><br><span class="line">		// 5. 关闭相关流</span><br><span class="line">        os.close();</span><br><span class="line">        bos2.close();</span><br><span class="line">        bis.close();</span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="第二十二章-多用户及时通信系统"><a href="#第二十二章-多用户及时通信系统" class="headerlink" title="第二十二章 多用户及时通信系统"></a>第二十二章 多用户及时通信系统</h1><h2 id="22-1-相关技术"><a href="#22-1-相关技术" class="headerlink" title="22.1 相关技术"></a>22.1 相关技术</h2><ul>
<li>项目框架设计</li>
<li>java面向对象编程</li>
<li>网络编程</li>
<li>多线程</li>
<li>IO流</li>
<li>mysql/使用集合充当内存数据库</li>
</ul>
<h2 id="22-2-项目开发流程"><a href="#22-2-项目开发流程" class="headerlink" title="22.2 项目开发流程"></a>22.2 项目开发流程</h2><ul>
<li>需求分析(30%) ==》设计阶段(20%) ==》实现阶段(20%) ==》测试阶段(20%) ==》实施阶段(10%) ==》维护阶段</li>
<li>开发 –&gt; 架构师、项目经理 or 产品经理</li>
<li>项目越大，需求和设计阶段占用时间越多</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206100702907.png" alt="image-20231206100702907"></p>
<h2 id="22-3-需求分析"><a href="#22-3-需求分析" class="headerlink" title="22.3 需求分析"></a>22.3 需求分析</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206101857544.png" alt="image-20231206101857544"></p>
<h2 id="22-4-界面设计"><a href="#22-4-界面设计" class="headerlink" title="22.4 界面设计"></a>22.4 界面设计</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206102025331.png" alt="image-20231206102025331"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206102035230.png" alt="image-20231206102035230"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206102100889.png" alt="image-20231206102100889"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206102116587.png" alt="image-20231206102116587"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206102147145.png" alt="image-20231206102147145"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206102408675.png" alt="image-20231206102408675"></p>
<h2 id="22-5-功能-用户登录"><a href="#22-5-功能-用户登录" class="headerlink" title="22.5 功能 - 用户登录"></a>22.5 功能 - 用户登录</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206103323570.png" alt="image-20231206103323570"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231206103521638.png" alt="image-20231206103521638"></p>
<h2 id="22-6-功能-拉取在线用户列表"><a href="#22-6-功能-拉取在线用户列表" class="headerlink" title="22.6 功能 - 拉取在线用户列表"></a>22.6 功能 - 拉取在线用户列表</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231211095407465.png" alt="image-20231211095407465"></p>
<h2 id="22-7-功能-无异常退出"><a href="#22-7-功能-无异常退出" class="headerlink" title="22.7 功能 - 无异常退出"></a>22.7 功能 - 无异常退出</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231211100407993.png" alt="image-20231211100407993"></p>
<h2 id="22-8-功能-私聊"><a href="#22-8-功能-私聊" class="headerlink" title="22.8 功能 - 私聊"></a>22.8 功能 - 私聊</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231211103253939.png" alt="image-20231211103253939"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231211105712625.png" alt="image-20231211105712625"></p>
<h2 id="22-9-功能-群发"><a href="#22-9-功能-群发" class="headerlink" title="22.9 功能 - 群发"></a>22.9 功能 - 群发</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231212100345453.png" alt="image-20231212100345453"></p>
<h2 id="22-10-功能-发文件"><a href="#22-10-功能-发文件" class="headerlink" title="22.10 功能 - 发文件"></a>22.10 功能 - 发文件</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231213095343660.png" alt="image-20231213095343660"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231213095700939.png" alt="image-20231213095700939"></p>
<h2 id="22-11-功能-服务器推送新闻"><a href="#22-11-功能-服务器推送新闻" class="headerlink" title="22.11 功能 - 服务器推送新闻"></a>22.11 功能 - 服务器推送新闻</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231214094835659.png" alt="image-20231214094835659"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231214094854374.png" alt="image-20231214094854374"></p>
<h2 id="22-12-功能扩展-离线发送"><a href="#22-12-功能扩展-离线发送" class="headerlink" title="22.12 功能扩展 - 离线发送"></a>22.12 功能扩展 - 离线发送</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231214100731327.png" alt="image-20231214100731327"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231214101119272.png" alt="image-20231214101119272"></p>
<h2 id="22-13-项目框架分析"><a href="#22-13-项目框架分析" class="headerlink" title="22.13 项目框架分析"></a>22.13 项目框架分析</h2><h3 id="22-13-1-文件目录"><a href="#22-13-1-文件目录" class="headerlink" title="22.13.1 文件目录"></a>22.13.1 文件目录</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20231217113613542.png" alt="image-20231217113613542"></p>
<h3 id="22-13-2-客户端框架"><a href="#22-13-2-客户端框架" class="headerlink" title="22.13.2 客户端框架"></a>22.13.2 客户端框架</h3><ul>
<li><p>视图类：QQView</p>
</li>
<li><p>服务类：</p>
<ul>
<li>ClientService：<em>完成用户登录验证、用户注册、退出客户端等功能</em></li>
<li>MessageClientService：<em>提供和消息相关的服务功能</em></li>
<li>FileClientService：<em>提供文件传输服务</em></li>
</ul>
</li>
<li><p>线程类：ClientConnectServerThread，<em>用于保持和服务器端的<strong>socket</strong>连接</em></p>
</li>
<li><p>管理类：ManageClientConnectServerThread，<em>管理客户端连接到服务器端线程</em></p>
</li>
<li><p><strong>视图类</strong>根据用户选择调用各个<strong>服务类</strong>的功能，ClientService建立起和服务器的socket连接，并创建<strong>线程类</strong>ClientConnectServerThread，保持和服务器端的<strong>socket</strong>连接。该<strong>线程类</strong>通过ManageClientConnectServerThread管理类进行管理，以便于其他服务能获得该线程及socket连接。MessageClientService和FileClientService都是通过<strong>管理类</strong>获得维持连接的<strong>线程类</strong>socket后，完成相应功能。</p>
</li>
</ul>
<h3 id="22-13-3-服务端框架"><a href="#22-13-3-服务端框架" class="headerlink" title="22.13.3 服务端框架"></a>22.13.3 服务端框架</h3><ul>
<li>服务类：<ul>
<li>ServerService：建立来自各个客户端的socket连接，验证登录是否合法</li>
</ul>
</li>
<li>线程类：<ul>
<li>ServerConnectClientThread：用于保持和用户端的<strong>socket</strong>连接，实现各种业务逻辑，如获取在线用户列表、退出系统、转发、群发、发文件等。</li>
<li>SendNewsToAllService：服务器推送消息的线程</li>
</ul>
</li>
<li>管理类：ManageServerConnectClientThread，管理ServerConnectClientThread线程类</li>
<li><strong>服务类</strong>监听端口并建立各个客户端的socket连接，验证登录是否合法后开启ServerConnectClientThread<strong>线程类</strong>维持<strong>socket</strong>连接，线程类通过接收到的客户端请求，做出相应业务处理。管理类ManageServerConnectClientThread便于获取线程socket连接以及断开连接等操作。</li>
</ul>
<h1 id="第二十三章-反射"><a href="#第二十三章-反射" class="headerlink" title="第二十三章 反射"></a>第二十三章 反射</h1><h2 id="23-1-一个需求引出反射"><a href="#23-1-一个需求引出反射" class="headerlink" title="23.1 一个需求引出反射"></a>23.1 一个需求引出反射</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240119100103895.png" alt="image-20240119100103895"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据配置文件 re.properties 指定信息, 创建 Cat 对象并调用方法 hi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//传统的方式 new 对象 -》 调用方法</span></span><br><span class="line"><span class="comment">// Cat cat = new Cat();</span></span><br><span class="line"><span class="comment">// cat.hi(); ===&gt; cat.cry() 修改源码.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 使用 Properties 类, 可以读写配置文件</span></span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\re.properties&quot;</span>));</span><br><span class="line">String classfullpath = properties.get(<span class="string">&quot;classfullpath&quot;</span>).toString(); <span class="comment">//&quot;com.hspedu.Cat&quot;</span></span><br><span class="line">String methodName = properties.get(<span class="string">&quot;method&quot;</span>).toString(); <span class="comment">//&quot;hi&quot;</span></span><br><span class="line">System.out.println(<span class="string">&quot;classfullpath=&quot;</span> + classfullpath);</span><br><span class="line">System.out.println(<span class="string">&quot;method=&quot;</span> + methodName);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建对象 , 传统的方法，行不通 =》 反射机制</span></span><br><span class="line"><span class="comment">//new classfullpath(); classfullpath是字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 使用反射机制解决</span></span><br><span class="line"><span class="comment">//  修改配置文件可加载不同的类和不同的方法</span></span><br><span class="line"><span class="comment">// (1) 加载类, 返回 Class 类型的对象 cls</span></span><br><span class="line">Class cls = Class.forName(classfullpath);</span><br><span class="line"><span class="comment">// (2) 通过 cls 得到你加载的类 com.hspedu.Cat 的对象实例</span></span><br><span class="line">Object o = cls.newInstance();</span><br><span class="line">System.out.println(<span class="string">&quot;o 的运行类型=&quot;</span> + o.getClass()); <span class="comment">//运行类型</span></span><br><span class="line"><span class="comment">// (3) 通过 cls 得到你加载的类 com.hspedu.Cat 的 methodName 的方法对象</span></span><br><span class="line"><span class="comment">// 即：在反射中，可以把方法视为对象（万物皆对象）</span></span><br><span class="line">Method method1 = cls.getMethod(methodName);</span><br><span class="line"><span class="comment">//(4) 通过 method1 调用方法: 即通过方法对象来实现调用方法</span></span><br><span class="line">method1.invoke(o); <span class="comment">//传统方法 对象.方法() , 反射机制 方法对象.invoke(对象实例)</span></span><br></pre></td></tr></table></figure>



<h2 id="23-2-反射机制"><a href="#23-2-反射机制" class="headerlink" title="23.2 反射机制"></a>23.2 反射机制</h2><h3 id="23-2-1-Java-Reflection"><a href="#23-2-1-Java-Reflection" class="headerlink" title="23.2.1 Java Reflection"></a>23.2.1 Java Reflection</h3><ul>
<li>反射机制允许程序在执行期借助于Reflection API<strong>取得任何类的内部信息</strong>(比如成员变量，构造器，成员方法等等)，并能操作对象的属性及方法。反射<strong>在设计模式和框架底层都会用到</strong>。</li>
<li>加载完类之后，在<strong>堆中</strong>就产生了一个<strong>Class类型的对象</strong> (一个类只对应一个Class对象) ，<strong>这个对象包含了类的完整结构信息</strong>。通过这个对象得到类的结构。这个Class对象就像一面镜子，透过这个镜子看到类的结构，以，形象的称之为: 反射</li>
</ul>
<h3 id="23-2-2-原理示意图"><a href="#23-2-2-原理示意图" class="headerlink" title="23.2.2 原理示意图"></a>23.2.2 原理示意图</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240119103941797.png" alt="image-20240119103941797"></p>
<h3 id="23-2-3-反射的作用"><a href="#23-2-3-反射的作用" class="headerlink" title="23.2.3 反射的作用"></a>23.2.3 反射的作用</h3><ol>
<li>在运行时判断任意一个对象所属的类</li>
<li>在运行时构造任意一个类的对象</li>
<li>在运行时得到任意一个类所具有的成员变量和方法</li>
<li>在运行时调用任意一个对象的成员变量和方法</li>
<li>生成动态代理（<strong>动态加载类</strong>，降低依赖性）</li>
</ol>
<h3 id="23-2-4-反射相关的主要类"><a href="#23-2-4-反射相关的主要类" class="headerlink" title="23.2.4 反射相关的主要类"></a>23.2.4 反射相关的主要类</h3><ol>
<li>java.lang.<strong>Class</strong>:代表一个类， Class对象表示某个类加载后在堆中的对象</li>
<li>构造器java.lang.reflect.<strong>Method</strong>: 代表类的方法,Method对象表示某个类的方法</li>
<li>java.lang.reflect.<strong>Field</strong>: 代表类的成员变量,Field对象表示某个类的成员变量</li>
<li>java.lang.reflect.<strong>Constructor</strong>: 代表类的构造方法, Constructor对象表示</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 使用 Properties 类, 可以读写配置文件</span></span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\re.properties&quot;</span>));</span><br><span class="line">String classfullpath = properties.get(<span class="string">&quot;classfullpath&quot;</span>).toString();<span class="comment">//&quot;com.durango.Cat&quot;</span></span><br><span class="line">String methodName = properties.get(<span class="string">&quot;method&quot;</span>).toString();<span class="comment">//&quot;hi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 使用反射机制解决</span></span><br><span class="line"><span class="comment">//(1) 加载类, 返回 Class 类型的对象 cls</span></span><br><span class="line">Class cls = Class.forName(classfullpath);</span><br><span class="line"><span class="comment">//(2) 通过 cls 得到你加载的类 com.hspedu.Cat 的对象实例</span></span><br><span class="line">Object o = cls.newInstance();</span><br><span class="line">System.out.println(<span class="string">&quot;o 的运行类型=&quot;</span> + o.getClass()); <span class="comment">//运行类型</span></span><br><span class="line"><span class="comment">//(3) 通过 cls 得到你加载的类 com.hspedu.Cat 的 methodName&quot;hi&quot; 的方法对象</span></span><br><span class="line"><span class="comment">// 即：在反射中，可以把方法视为对象（万物皆对象）</span></span><br><span class="line">Method method1 = cls.getMethod(methodName);</span><br><span class="line"><span class="comment">//(4) 通过 method1 调用方法: 即通过方法对象来实现调用方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;=============================&quot;</span>);</span><br><span class="line">method1.invoke(o); <span class="comment">//传统方法 对象.方法() , 反射: 成员方法.invoke(对象)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//(5)java.lang.reflect.Field: 代表类的成员变量, Field 对象表示某个类的成员变量</span></span><br><span class="line"><span class="comment">//得到 name 字段</span></span><br><span class="line"><span class="comment">//getField 不能得到私有的属性</span></span><br><span class="line">Field nameField = cls.getField(<span class="string">&quot;name&quot;</span>); <span class="comment">//</span></span><br><span class="line">System.out.println(nameField.get(o)); <span class="comment">// 传统写法 对象.成员变量 , 反射 : 成员变量.get(对象)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//(6)java.lang.reflect.Constructor: 代表类的构造方法, Constructor 对象表示构造器</span></span><br><span class="line">Constructor constructor = cls.getConstructor(); <span class="comment">//返回无参构造器</span></span><br><span class="line">System.out.println(constructor);<span class="comment">//Cat()</span></span><br><span class="line">Constructor constructor2 = cls.getConstructor(String.class);</span><br><span class="line">System.out.println(constructor2);<span class="comment">//Cat(String name)</span></span><br></pre></td></tr></table></figure>



<h3 id="23-2-5-反射优点和缺点"><a href="#23-2-5-反射优点和缺点" class="headerlink" title="23.2.5 反射优点和缺点"></a>23.2.5 反射优点和缺点</h3><ul>
<li>优点: 可以<strong>动态的创建和使用对象</strong>(也是框架底层核心)，使用灵活,没有反射机制，框架技术就失去底层支撑。</li>
<li>缺点: 使用反射基本是解释执行，对<strong>执行速度</strong>有影响</li>
</ul>
<h3 id="23-2-6-反射调用优化"><a href="#23-2-6-反射调用优化" class="headerlink" title="23.2.6 反射调用优化"></a>23.2.6 反射调用优化</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240119141022509.png" alt="image-20240119141022509"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">public class Reflection02 &#123;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException, InvocationTargetException, IllegalAccessException, InstantiationException, NoSuchMethodException &#123;</span><br><span class="line">        m1();//传统 耗时=0</span><br><span class="line">        m2();//反射 耗时=1075</span><br><span class="line">        m3();//反射优化 耗时=766</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //传统方法来调用 hi</span><br><span class="line">    public static void m1() &#123;</span><br><span class="line">        Cat cat = new Cat();</span><br><span class="line">        long start = System.currentTimeMillis();</span><br><span class="line">        for (int i = 0; i &lt; 90; i++) &#123;</span><br><span class="line">            cat.hi();</span><br><span class="line">        &#125;</span><br><span class="line">        long end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;m1() 耗时=&quot; + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //反射机制调用方法 hi</span><br><span class="line">    public static void m2() throws ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;</span><br><span class="line">        Class cls = Class.forName(&quot;com.durango.Cat&quot;);</span><br><span class="line">        Object o = cls.newInstance();</span><br><span class="line">        Method hi = cls.getMethod(&quot;hi&quot;);</span><br><span class="line">        long start = System.currentTimeMillis();</span><br><span class="line">        for (int i = 0; i &lt; 900000000; i++) &#123;</span><br><span class="line">            hi.invoke(o);//反射调用方法</span><br><span class="line">        &#125;</span><br><span class="line">        long end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;m2() 耗时=&quot; + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //反射调用优化 + 关闭访问检查</span><br><span class="line">    public static void m3() throws ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;</span><br><span class="line">        Class cls = Class.forName(&quot;com.durango.Cat&quot;);</span><br><span class="line">        Object o = cls.newInstance();</span><br><span class="line">        Method hi = cls.getMethod(&quot;hi&quot;);</span><br><span class="line">        hi.setAccessible(true);//在反射调用方法时，取消访问检查</span><br><span class="line">        long start = System.currentTimeMillis();</span><br><span class="line">        for (int i = 0; i &lt; 900000000; i++) &#123;</span><br><span class="line">            hi.invoke(o);//反射调用方法</span><br><span class="line">        &#125;</span><br><span class="line">        long end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(&quot;m3() 耗时=&quot; + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="23-3-Class类"><a href="#23-3-Class类" class="headerlink" title="23.3 Class类"></a>23.3 Class类</h2><h3 id="23-3-1-基本介绍"><a href="#23-3-1-基本介绍" class="headerlink" title="23.3.1 基本介绍"></a>23.3.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240120101117147.png" alt="image-20240120101117147"></p>
<ul>
<li>Class也是类，因此也继承Obiect类[类图]</li>
<li>Class类对象不是new出来的，而是系统创建的。ClassLoader类的loadClass方法</li>
<li>对于某个类的Class类对象，在内存中只有一份，因为类只加载一次</li>
<li>每个类的实例都会记得自己是由哪个Class实例所生成</li>
<li>通过Class对象可以完整地得到一个<strong>类的完整结构</strong>，通过一系列API</li>
<li>Class对象是存放在<strong>堆</strong>的</li>
<li>类的字节码二进制数据，是放在方法区的，有的地方称为类的元数据(包括方法代码(<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/38496907)%E5%8F%98%E9%87%8F%E5%90%8D%EF%BC%8C%E6%96%B9%E6%B3%95%E5%90%8D%EF%BC%8C%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AD%89%E7%AD%89">https://www.zhihu.com/question/38496907)变量名，方法名，访问权限等等</a>)</li>
</ul>
<h3 id="23-3-2-常用方法"><a href="#23-3-2-常用方法" class="headerlink" title="23.3.2 常用方法"></a>23.3.2 常用方法</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240120103747056.png" alt="image-20240120103747056"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">public class Class02 &#123;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchFieldException &#123;</span><br><span class="line">        String classAllPath = &quot;com.durango.Car&quot;;</span><br><span class="line">        //1 . 获取到 Car 类 对应的 Class 对象</span><br><span class="line">        //&lt;?&gt; 表示不确定的 Java 类型</span><br><span class="line">        Class&lt;?&gt; cls = Class.forName(classAllPath);</span><br><span class="line"></span><br><span class="line">        //2. 输出 cls</span><br><span class="line">        System.out.println(cls); //显示 cls 对象, 是哪个类的 Class 对象 com.durango.Car</span><br><span class="line">        System.out.println(cls.getClass());//输出 cls 运行类型 java.lang.Class</span><br><span class="line"></span><br><span class="line">        //3. 得到包名</span><br><span class="line">        System.out.println(cls.getPackage().getName());//包名 com.durango</span><br><span class="line"></span><br><span class="line">        //4. 得到全类名</span><br><span class="line">        System.out.println(cls.getName()); //com.durango.Car</span><br><span class="line"></span><br><span class="line">        //5. 通过 cls 创建对象实例</span><br><span class="line">        Car car = (Car) cls.newInstance();</span><br><span class="line">        System.out.println(car);//car.toString()</span><br><span class="line"></span><br><span class="line">        //6. 通过反射获取属性 brand</span><br><span class="line">        Field brand = cls.getField(&quot;brand&quot;);</span><br><span class="line">        System.out.println(brand.get(car));//宝马</span><br><span class="line"></span><br><span class="line">        //7. 通过反射给属性赋值</span><br><span class="line">        brand.set(car, &quot;奔驰&quot;);</span><br><span class="line">        System.out.println(brand.get(car));//奔驰</span><br><span class="line"></span><br><span class="line">        //8 我希望大家可以得到所有的属性(字段)</span><br><span class="line">        System.out.println(&quot;=======所有的字段属性====&quot;);</span><br><span class="line">        Field[] fields = cls.getFields();</span><br><span class="line">        for (Field f : fields) &#123;</span><br><span class="line">            System.out.println(f.getName());//名称</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="23-4-获取Class类对象"><a href="#23-4-获取Class类对象" class="headerlink" title="23.4 获取Class类对象"></a>23.4 获取Class类对象</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240120110300919.png" alt="image-20240120110300919"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240120110310107.png" alt="image-20240120110310107"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. Class.forName</span></span><br><span class="line">String classAllPath = <span class="string">&quot;com.durango.Car&quot;</span>; <span class="comment">//通过读取配置文件获取</span></span><br><span class="line">Class&lt;?&gt; cls1 = Class.forName(classAllPath);</span><br><span class="line">System.out.println(cls1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 类名.class , 应用场景: 用于参数传递</span></span><br><span class="line">Class cls2 = Car.class;</span><br><span class="line">System.out.println(cls2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 对象.getClass(), 应用场景，有对象实例</span></span><br><span class="line">Car car = <span class="keyword">new</span> Car();</span><br><span class="line">Class cls3 = car.getClass();</span><br><span class="line">System.out.println(cls3);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 通过类加载器来获取到类的 Class 对象</span></span><br><span class="line"><span class="comment">//  (1)先得到类加载器 car</span></span><br><span class="line">ClassLoader classLoader = car.getClass().getClassLoader();</span><br><span class="line"><span class="comment">//  (2)通过类加载器得到 Class 对象</span></span><br><span class="line">Class cls4 = classLoader.loadClass(classAllPath);</span><br><span class="line">System.out.println(cls4);</span><br><span class="line"></span><br><span class="line"><span class="comment">//cls1 , cls2 , cls3 , cls4 其实是同一个对象</span></span><br><span class="line">System.out.println(cls1.hashCode());</span><br><span class="line">System.out.println(cls2.hashCode());</span><br><span class="line">System.out.println(cls3.hashCode());</span><br><span class="line">System.out.println(cls4.hashCode());</span><br><span class="line"></span><br><span class="line"><span class="comment">//5. 基本数据(int, char,boolean,float,double,byte,long,short) 按如下方式得到 Class 类对象</span></span><br><span class="line">Class&lt;Integer&gt; integerClass = <span class="keyword">int</span>.class;</span><br><span class="line">Class&lt;Character&gt; characterClass = <span class="keyword">char</span>.class;</span><br><span class="line">Class&lt;Boolean&gt; booleanClass = <span class="keyword">boolean</span>.class;</span><br><span class="line">System.out.println(integerClass);<span class="comment">//int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6. 基本数据类型对应的包装类，可以通过 .TYPE 得到 Class 类对象</span></span><br><span class="line">Class&lt;Integer&gt; type1 = Integer.TYPE;</span><br><span class="line">Class&lt;Character&gt; type2 = Character.TYPE; <span class="comment">//其它包装类 BOOLEAN, DOUBLE, LONG,BYTE 等待</span></span><br><span class="line">System.out.println(type1);</span><br><span class="line">System.out.println(integerClass.hashCode());<span class="comment">//1956725890</span></span><br><span class="line">System.out.println(type1.hashCode());<span class="comment">//1956725890</span></span><br></pre></td></tr></table></figure>



<h2 id="23-5-哪些类型有-Class-对象"><a href="#23-5-哪些类型有-Class-对象" class="headerlink" title="23.5 哪些类型有 Class 对象"></a>23.5 哪些类型有 Class 对象</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240120110435904.png" alt="image-20240120110435904"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;String&gt; cls1 = String.class;<span class="comment">//外部类</span></span><br><span class="line">Class&lt;Serializable&gt; cls2 = Serializable.class;<span class="comment">//接口</span></span><br><span class="line">Class&lt;Integer[]&gt; cls3 = Integer[].class;<span class="comment">//数组</span></span><br><span class="line">Class&lt;<span class="keyword">float</span>[][]&gt; cls4 = <span class="keyword">float</span>[][].class;<span class="comment">//二维数组</span></span><br><span class="line">Class&lt;Deprecated&gt; cls5 = Deprecated.class;<span class="comment">//注解</span></span><br><span class="line">Class&lt;Thread.State&gt; cls6 = Thread.State.class;<span class="comment">//枚举</span></span><br><span class="line">Class&lt;Long&gt; cls7 = <span class="keyword">long</span>.class;<span class="comment">//基本数据类型</span></span><br><span class="line">Class&lt;Void&gt; cls8 = <span class="keyword">void</span>.class;<span class="comment">//void 数据类型</span></span><br><span class="line">Class&lt;Class&gt; cls9 = Class.class;<span class="comment">// Class</span></span><br></pre></td></tr></table></figure>



<h2 id="23-6-类加载"><a href="#23-6-类加载" class="headerlink" title="23.6 类加载"></a>23.6 类加载</h2><h3 id="23-6-1-基本说明"><a href="#23-6-1-基本说明" class="headerlink" title="23.6.1 基本说明"></a>23.6.1 基本说明</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121125253492.png" alt="image-20240121125253492"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121125833970.png" alt="image-20240121125833970"></p>
<h3 id="23-6-2-类加载时机"><a href="#23-6-2-类加载时机" class="headerlink" title="23.6.2 类加载时机"></a>23.6.2 类加载时机</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121125423921.png" alt="image-20240121125423921"></p>
<h3 id="23-6-3-类加载过程图"><a href="#23-6-3-类加载过程图" class="headerlink" title="23.6.3 类加载过程图"></a>23.6.3 类加载过程图</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121130105461.png" alt="image-20240121130105461"></p>
<h3 id="23-6-4-类加载各阶段完成任务"><a href="#23-6-4-类加载各阶段完成任务" class="headerlink" title="23.6.4 类加载各阶段完成任务"></a>23.6.4 类加载各阶段完成任务</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121130715158.png" alt="image-20240121130715158"></p>
<h3 id="23-6-5-加载阶段"><a href="#23-6-5-加载阶段" class="headerlink" title="23.6.5 加载阶段"></a>23.6.5 加载阶段</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121131146246.png" alt="image-20240121131146246"></p>
<h3 id="23-6-6-连接阶段-验证"><a href="#23-6-6-连接阶段-验证" class="headerlink" title="23.6.6 连接阶段 - 验证"></a>23.6.6 连接阶段 - 验证</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121131401578.png" alt="image-20240121131401578"></p>
<h3 id="23-6-7-连接阶段-准备"><a href="#23-6-7-连接阶段-准备" class="headerlink" title="23.6.7 连接阶段 - 准备"></a>23.6.7 连接阶段 - 准备</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121131457998.png" alt="image-20240121131457998"></p>
<h3 id="23-6-8-连接阶段-解析"><a href="#23-6-8-连接阶段-解析" class="headerlink" title="23.6.8 连接阶段 - 解析"></a>23.6.8 连接阶段 - 解析</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121131741830.png" alt="image-20240121131741830"></p>
<h3 id="23-6-9-初始化-Initialization"><a href="#23-6-9-初始化-Initialization" class="headerlink" title="23.6.9 初始化 Initialization"></a>23.6.9 初始化 Initialization</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121132156139.png" alt="image-20240121132156139"></p>
<h2 id="23-7-通过反射获取类的结构信息"><a href="#23-7-通过反射获取类的结构信息" class="headerlink" title="23.7 通过反射获取类的结构信息"></a>23.7 通过反射获取类的结构信息</h2><h3 id="23-7-1-第一组-java-lang-Class-类"><a href="#23-7-1-第一组-java-lang-Class-类" class="headerlink" title="23.7.1 第一组: java.lang.Class 类"></a>23.7.1 第一组: java.lang.Class 类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121144201063.png" alt="image-20240121144201063"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一组</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">api_01</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">    <span class="comment">// 得到 Class 对象</span></span><br><span class="line">    Class&lt;?&gt; personCls = Class.forName(<span class="string">&quot;com.durango.reflection.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getName:获取全类名</span></span><br><span class="line">    System.out.println(personCls.getName());<span class="comment">//com.durango.reflection.Person</span></span><br><span class="line">    <span class="comment">// getSimpleName:获取简单类名</span></span><br><span class="line">    System.out.println(personCls.getSimpleName());<span class="comment">//Person</span></span><br><span class="line">    <span class="comment">//getPackage:以 Package 形式返回 包信息</span></span><br><span class="line">    System.out.println(personCls.getPackage());<span class="comment">//com.durango.reflection</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//getFields:获取所有 public 修饰的属性，包含本类以及父类的</span></span><br><span class="line">    Field[] fields = personCls.getFields();</span><br><span class="line">    <span class="keyword">for</span> (Field field : fields) &#123;<span class="comment">//增强 for</span></span><br><span class="line">        System.out.println(<span class="string">&quot;本类以及父类的属性=&quot;</span> + field.getName());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getDeclaredFields:获取本类中所有属性</span></span><br><span class="line">    Field[] declaredFields = personCls.getDeclaredFields();</span><br><span class="line">    <span class="keyword">for</span> (Field declaredField : declaredFields) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;本类中所有属性=&quot;</span> + declaredField.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getMethods:获取所有 public 修饰的方法，包含本类以及父类的</span></span><br><span class="line">    Method[] methods = personCls.getMethods();</span><br><span class="line">    <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;本类以及父类的方法=&quot;</span> + method.getName());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getDeclaredMethods:获取本类中所有方法</span></span><br><span class="line">    Method[] declaredMethods = personCls.getDeclaredMethods();</span><br><span class="line">    <span class="keyword">for</span> (Method declaredMethod : declaredMethods) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;本类中所有方法=&quot;</span> + declaredMethod.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getConstructors: 获取所有 public 修饰的构造器，包含本类</span></span><br><span class="line">    Constructor&lt;?&gt;[] constructors = personCls.getConstructors();</span><br><span class="line">    <span class="keyword">for</span> (Constructor&lt;?&gt; constructor : constructors) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;本类的构造器=&quot;</span> + constructor.getName());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getDeclaredConstructors:获取本类中所有构造器</span></span><br><span class="line">    Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();</span><br><span class="line">    <span class="keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;本类中所有构造器=&quot;</span> + declaredConstructor.getName());<span class="comment">//这里老师只是输出名</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getSuperClass:以 Class 形式返回父类信息</span></span><br><span class="line">    Class&lt;?&gt; superclass = personCls.getSuperclass();</span><br><span class="line">    System.out.println(<span class="string">&quot;父类的 class 对象=&quot;</span> + superclass);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getInterfaces:以 Class[]形式返回接口信息</span></span><br><span class="line">    Class&lt;?&gt;[] interfaces = personCls.getInterfaces();</span><br><span class="line">    <span class="keyword">for</span> (Class&lt;?&gt; anInterface : interfaces) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;接口信息=&quot;</span> + anInterface);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getAnnotations:以 Annotation[] 形式返回注解信息</span></span><br><span class="line">    Annotation[] annotations = personCls.getAnnotations();</span><br><span class="line">    <span class="keyword">for</span> (Annotation annotation : annotations) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;注解信息=&quot;</span> + annotation);<span class="comment">//注解</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="23-7-2-第二组-java-lang-reflect-Field-类"><a href="#23-7-2-第二组-java-lang-reflect-Field-类" class="headerlink" title="23.7.2 第二组: java.lang.reflect.Field 类"></a>23.7.2 第二组: java.lang.reflect.Field 类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121144335991.png" alt="image-20240121144335991"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//得到 Class 对象</span></span><br><span class="line">Class&lt;?&gt; personCls = Class.forName(<span class="string">&quot;com.durango.reflection.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//getDeclaredFields:获取本类中所有属性</span></span><br><span class="line"><span class="comment">//规定 说明: 默认修饰符 是 0 ， public 是 1 ，private 是 2 ，protected 是 4 , static 是 8 ，final 是 16</span></span><br><span class="line">Field[] declaredFields = personCls.getDeclaredFields();</span><br><span class="line"><span class="keyword">for</span> (Field declaredField : declaredFields) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;本类中所有属性=&quot;</span> + declaredField.getName()</span><br><span class="line">                       + <span class="string">&quot; 该属性的修饰符值=&quot;</span> + declaredField.getModifiers()</span><br><span class="line">                       + <span class="string">&quot; 该属性的类型=&quot;</span> + declaredField.getType());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="23-7-3-第三组-java-lang-reflect-Method-类"><a href="#23-7-3-第三组-java-lang-reflect-Method-类" class="headerlink" title="23.7.3 第三组: java.lang.reflect.Method 类"></a>23.7.3 第三组: java.lang.reflect.Method 类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121144357121.png" alt="image-20240121144357121"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//getDeclaredMethods:获取本类中所有方法</span></span><br><span class="line">Method[] declaredMethods = personCls.getDeclaredMethods();</span><br><span class="line"><span class="keyword">for</span> (Method declaredMethod : declaredMethods) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;本类中所有方法=&quot;</span> + declaredMethod.getName()</span><br><span class="line">                       + <span class="string">&quot; 该方法的访问修饰符值=&quot;</span> + declaredMethod.getModifiers()</span><br><span class="line">                       + <span class="string">&quot; 该方法返回类型&quot;</span> + declaredMethod.getReturnType());</span><br><span class="line">    <span class="comment">//输出当前这个方法的形参数组情况</span></span><br><span class="line">    Class&lt;?&gt;[] parameterTypes = declaredMethod.getParameterTypes();</span><br><span class="line">    <span class="keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;该方法的形参类型=&quot;</span> + parameterType);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="23-7-4-第四组-java-lang-reflect-Constructor-类"><a href="#23-7-4-第四组-java-lang-reflect-Constructor-类" class="headerlink" title="23.7.4 第四组: java.lang.reflect.Constructor 类"></a>23.7.4 第四组: java.lang.reflect.Constructor 类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240121144435308.png" alt="image-20240121144435308"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//getDeclaredConstructors:获取本类中所有构造器</span></span><br><span class="line">Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();</span><br><span class="line"><span class="keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;====================&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;本类中所有构造器=&quot;</span> + declaredConstructor.getName());</span><br><span class="line">    Class&lt;?&gt;[] parameterTypes = declaredConstructor.getParameterTypes();</span><br><span class="line">    <span class="keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;该构造器的形参类型=&quot;</span> + parameterType);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="23-8-通过反射创建对象"><a href="#23-8-通过反射创建对象" class="headerlink" title="23.8 通过反射创建对象"></a>23.8 通过反射创建对象</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240122115415198.png" alt="image-20240122115415198"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchMethodException, InvocationTargetException </span>&#123;</span><br><span class="line">    <span class="comment">//1. 先获取到 User 类的 Class 对象</span></span><br><span class="line">    Class&lt;?&gt; userClass = Class.forName(<span class="string">&quot;com.durango.User&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 通过 public 的无参构造器创建实例</span></span><br><span class="line">    Object o = userClass.newInstance();</span><br><span class="line">    System.out.println(o);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 通过 public 的有参构造器创建实例</span></span><br><span class="line">    <span class="comment">//  3.1 先得到对应构造器</span></span><br><span class="line">    Constructor&lt;?&gt; constructor = userClass.getConstructor(String.class);</span><br><span class="line">    <span class="comment">//  3.2 创建实例，并传入实参</span></span><br><span class="line">    Object durango = constructor.newInstance(<span class="string">&quot;durango&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;durango = &quot;</span> + durango);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. 通过非 public 的有参构造器创建实例</span></span><br><span class="line">    <span class="comment">//  4.1 得到 private 的构造器对象</span></span><br><span class="line">    Constructor&lt;?&gt; constructor1 = userClass.getDeclaredConstructor(String.class, <span class="keyword">int</span>.class);</span><br><span class="line">    <span class="comment">//  4.2 创建实例</span></span><br><span class="line">    constructor1.setAccessible(<span class="keyword">true</span>);<span class="comment">// 暴破, 使用反射可以访问 private 构造器/方法/属性</span></span><br><span class="line">    Object user2 = constructor1.newInstance(<span class="string">&quot;张三丰&quot;</span>, <span class="number">100</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;user2=&quot;</span> + user2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="23-9-通过反射访问类中的成员"><a href="#23-9-通过反射访问类中的成员" class="headerlink" title="23.9 通过反射访问类中的成员"></a>23.9 通过反射访问类中的成员</h2><h3 id="23-9-1-访问属性"><a href="#23-9-1-访问属性" class="headerlink" title="23.9.1 访问属性"></a>23.9.1 访问属性</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240122121055144.png" alt="image-20240122121055144"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchFieldException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 得到 Student 类对应的 Class 对象</span></span><br><span class="line">        Class&lt;?&gt; stuClass = Class.forName(<span class="string">&quot;com.durango.reflection.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 创建对象</span></span><br><span class="line">        Object o = stuClass.newInstance();<span class="comment">//o 的运行类型就是 Student</span></span><br><span class="line">        System.out.println(o.getClass());<span class="comment">//Student</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 使用反射得到 age 属性对象</span></span><br><span class="line">        Field age = stuClass.getField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">        age.set(o, <span class="number">88</span>);<span class="comment">//通过反射来操作属性</span></span><br><span class="line">        System.out.println(o);</span><br><span class="line">        System.out.println(age.get(o));<span class="comment">//返回 age 属性的值</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 使用反射操作 name 属性</span></span><br><span class="line">        Field name = stuClass.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="comment">//对 name 进行暴破, 可以操作 private 属性</span></span><br><span class="line">        name.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//name.set(o, &quot;durango&quot;);</span></span><br><span class="line">        name.set(<span class="keyword">null</span>, <span class="string">&quot;durango~&quot;</span>);<span class="comment">//因为 name 是 static 属性，因此 o 也可以写出 null</span></span><br><span class="line">        System.out.println(o);</span><br><span class="line">        System.out.println(name.get(o)); <span class="comment">//获取属性值</span></span><br><span class="line">        System.out.println(name.get(<span class="keyword">null</span>));<span class="comment">//获取属性值, 要求 name 是 static</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="23-9-2-访问方法"><a href="#23-9-2-访问方法" class="headerlink" title="23.9.2 访问方法"></a>23.9.2 访问方法</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240122121858946.png" alt="image-20240122121858946"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException, InvocationTargetException, NoSuchMethodException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 得到 Boss 类对应的 Class 对象</span></span><br><span class="line">        Class&lt;?&gt; bossCls = Class.forName(<span class="string">&quot;com.durango.reflection.Boss&quot;</span>);</span><br><span class="line">        <span class="comment">//2. 创建对象</span></span><br><span class="line">        Object o = bossCls.newInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 调用 public 的 hi 方法</span></span><br><span class="line">        <span class="comment">//Method hi = bossCls.getMethod(&quot;hi&quot;, String.class);//OK</span></span><br><span class="line">        <span class="comment">//3.1 得到 hi 方法对象</span></span><br><span class="line">        Method hi = bossCls.getDeclaredMethod(<span class="string">&quot;hi&quot;</span>, String.class);<span class="comment">//OK</span></span><br><span class="line">        <span class="comment">//3.2 调用</span></span><br><span class="line">        hi.invoke(o, <span class="string">&quot;韩顺平教育~&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 调用 private static 方法</span></span><br><span class="line">        <span class="comment">//4.1 得到 say 方法对象</span></span><br><span class="line">        Method say = bossCls.getDeclaredMethod(<span class="string">&quot;say&quot;</span>, <span class="keyword">int</span>.class, String.class, <span class="keyword">char</span>.class);</span><br><span class="line">        <span class="comment">//4.2 因为 say 方法是 private, 所以需要暴破，原理和前面讲的构造器和属性一样</span></span><br><span class="line">        say.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        System.out.println(say.invoke(o, <span class="number">100</span>, <span class="string">&quot;张三&quot;</span>, <span class="string">&#x27;男&#x27;</span>));</span><br><span class="line">        <span class="comment">//4.3 因为 say 方法是 static 的，还可以这样调用 ，可以传入 null</span></span><br><span class="line">        System.out.println(say.invoke(<span class="keyword">null</span>, <span class="number">200</span>, <span class="string">&quot;李四&quot;</span>, <span class="string">&#x27;女&#x27;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 在反射中，如果方法有返回值，统一返回 Object , 但是他运行类型和方法定义的返回类型一致</span></span><br><span class="line">        Object reVal = say.invoke(<span class="keyword">null</span>, <span class="number">300</span>, <span class="string">&quot;王五&quot;</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;reVal 的运行类型=&quot;</span> + reVal.getClass());<span class="comment">//String</span></span><br><span class="line">        <span class="comment">//在演示一个返回的案例</span></span><br><span class="line">        Method m1 = bossCls.getDeclaredMethod(<span class="string">&quot;m1&quot;</span>);</span><br><span class="line">        Object reVal2 = m1.invoke(o);</span><br><span class="line">        System.out.println(<span class="string">&quot;reVal2 的运行类型=&quot;</span> + reVal2.getClass());<span class="comment">//Monster</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h1 id="第二十四章-MySQL"><a href="#第二十四章-MySQL" class="headerlink" title="第二十四章  MySQL"></a>第二十四章  MySQL</h1><p>（略）<a href="https://www.durango.cn/2021/07/18/MySQL%E5%9F%BA%E7%A1%80%E7%AF%87/">MySQL基础篇</a></p>
<h1 id="第二十五章-JDBC和连接池"><a href="#第二十五章-JDBC和连接池" class="headerlink" title="第二十五章 JDBC和连接池"></a>第二十五章 JDBC和连接池</h1><h2 id="25-1-JDBC概述"><a href="#25-1-JDBC概述" class="headerlink" title="25.1 JDBC概述"></a>25.1 JDBC概述</h2><h3 id="25-1-1-基本介绍"><a href="#25-1-1-基本介绍" class="headerlink" title="25.1.1 基本介绍"></a>25.1.1 基本介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240124104024941.png" alt="image-20240124104024941"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240124104154409.png" alt="image-20240124104154409"></p>
<h3 id="25-1-2-JDBC-带来的好处"><a href="#25-1-2-JDBC-带来的好处" class="headerlink" title="25.1.2 JDBC 带来的好处"></a>25.1.2 JDBC 带来的好处</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240124105311887.png" alt="image-20240124105311887"></p>
<h3 id="25-1-3-JDBC-API"><a href="#25-1-3-JDBC-API" class="headerlink" title="25.1.3 JDBC API"></a>25.1.3 JDBC API</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240124105548191.png" alt="image-20240124105548191"></p>
<h2 id="25-2-JDBC快速入门"><a href="#25-2-JDBC快速入门" class="headerlink" title="25.2 JDBC快速入门"></a>25.2 JDBC快速入门</h2><h3 id="25-2-1-JDBC程序编写步骤"><a href="#25-2-1-JDBC程序编写步骤" class="headerlink" title="25.2.1 JDBC程序编写步骤"></a>25.2.1 JDBC程序编写步骤</h3><ol>
<li>注册驱动 - 加载Driver类</li>
<li>获取连接 - 得到Connection</li>
<li>执行增删改查 - 通过Statement</li>
<li>释放资源 - 关闭Statement和Connection</li>
</ol>
<h3 id="25-2-2-JDBC第一个程序"><a href="#25-2-2-JDBC第一个程序" class="headerlink" title="25.2.2 JDBC第一个程序"></a>25.2.2 JDBC第一个程序<img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240124112817723.png" alt="image-20240124112817723"></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.durango.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mysql.jdbc.Connection;</span><br><span class="line"><span class="keyword">import</span> com.mysql.jdbc.Driver;</span><br><span class="line"><span class="keyword">import</span> com.mysql.jdbc.Statement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBC01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//前置工作： 在项目下创建一个文件夹比如 libs</span></span><br><span class="line">        <span class="comment">// 将 mysql.jar 拷贝到该目录下，点击 add to project ..加入到项目中</span></span><br><span class="line">        <span class="comment">// 1.注册驱动</span></span><br><span class="line">        Driver driver = <span class="keyword">new</span> Driver(); <span class="comment">//创建 driver 对象</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.得到连接</span></span><br><span class="line">        <span class="comment">//  (1) jdbc:mysql:// 规定好表示协议，通过 jdbc 的方式连接 mysql</span></span><br><span class="line">        <span class="comment">//  (2) localhost 主机，可以是 ip 地址</span></span><br><span class="line">        <span class="comment">//  (3) 3306 表示 mysql 监听的端口</span></span><br><span class="line">        <span class="comment">//  (4) db01 连接到 mysql dbms 的哪个数据库</span></span><br><span class="line">        <span class="comment">//  (5) ?characterEncoding=utf8 解决中文显示乱码问题</span></span><br><span class="line">        String url = <span class="string">&quot;jdbc:mysql://localhost:3306/db01?characterEncoding=utf8&quot;</span>;</span><br><span class="line">        <span class="comment">//  将用户名和密码放入到 Properties 对象</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.setProperty(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        properties.setProperty(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        Connection connection = (Connection) driver.connect(url, properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.执行sql语句</span></span><br><span class="line">        <span class="comment">//String sql = &quot;insert into actor values(null, &#x27;刘德华&#x27;, &#x27;男&#x27;, &#x27;1970-11-11&#x27;, &#x27;110&#x27;)&quot;;</span></span><br><span class="line">        <span class="comment">//String sql = &quot;update actor set name=&#x27;周星驰&#x27; where id = 1&quot;;</span></span><br><span class="line">        String sql = <span class="string">&quot;delete from actor where id = 1&quot;</span>;</span><br><span class="line">        <span class="comment">//statement 用于执行静态 SQL 语句并返回其生成的结果的对象</span></span><br><span class="line">        Statement statement = (Statement) connection.createStatement();</span><br><span class="line">        <span class="keyword">int</span> rows = statement.executeUpdate(sql); <span class="comment">// 如果是 DML 语句，返回的就是影响行数</span></span><br><span class="line">        System.out.println(rows &gt; <span class="number">0</span> ? <span class="string">&quot;成功&quot;</span> : <span class="string">&quot;失败&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.关闭连接</span></span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-3-获取数据库连接-5-种方式"><a href="#25-3-获取数据库连接-5-种方式" class="headerlink" title="25.3 获取数据库连接 5 种方式"></a>25.3 获取数据库连接 5 种方式</h2><h3 id="25-3-1-方式一"><a href="#25-3-1-方式一" class="headerlink" title="25.3.1 方式一"></a>25.3.1 方式一</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240125102720128.png" alt="image-20240125102720128"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect01</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    Driver driver = <span class="keyword">new</span> Driver(); <span class="comment">//创建driver对象 静态加载</span></span><br><span class="line"></span><br><span class="line">    String url = <span class="string">&quot;jdbc:mysql://localhost:3306/db01&quot;</span>;</span><br><span class="line">    <span class="comment">//将用户名和密码放入到 Properties 对象</span></span><br><span class="line">    Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">    properties.setProperty(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;root&quot;</span>);<span class="comment">// 用户</span></span><br><span class="line">    properties.setProperty(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>); <span class="comment">//密码</span></span><br><span class="line">    Connection connect = driver.connect(url, properties);</span><br><span class="line">    System.out.println(connect);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-3-2-方式二"><a href="#25-3-2-方式二" class="headerlink" title="25.3.2 方式二"></a>25.3.2 方式二</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240125103108015.png" alt="image-20240125103108015"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式二</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect02</span><span class="params">()</span> <span class="keyword">throws</span> SQLException, ClassNotFoundException, InstantiationException, IllegalAccessException </span>&#123;</span><br><span class="line">    <span class="comment">//使用反射加载 Driver 类 , 动态加载，更加的灵活，减少依赖性</span></span><br><span class="line">    Class&lt;?&gt; aClass = Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">    Driver driver = (Driver) aClass.newInstance();</span><br><span class="line"></span><br><span class="line">    String url = <span class="string">&quot;jdbc:mysql://localhost:3306/db01&quot;</span>;</span><br><span class="line">    <span class="comment">//将用户名和密码放入到 Properties 对象</span></span><br><span class="line">    Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">    properties.setProperty(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;root&quot;</span>);<span class="comment">// 用户</span></span><br><span class="line">    properties.setProperty(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>); <span class="comment">//密码</span></span><br><span class="line"></span><br><span class="line">    Connection connect = driver.connect(url, properties);</span><br><span class="line">    System.out.println(<span class="string">&quot;方式 2=&quot;</span> + connect);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-3-3-方式三"><a href="#25-3-3-方式三" class="headerlink" title="25.3.3 方式三"></a>25.3.3 方式三</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240125103158622.png" alt="image-20240125103158622"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式 3 使用 DriverManager 替代 driver 进行统一管理</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect03</span><span class="params">()</span> <span class="keyword">throws</span> IllegalAccessException, InstantiationException, ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//使用反射加载 Driver</span></span><br><span class="line">    Class&lt;?&gt; aClass = Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">    Driver driver = (Driver) aClass.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建 url 和 user 和 password</span></span><br><span class="line">    String url = <span class="string">&quot;jdbc:mysql://localhost:3306/db01&quot;</span>;</span><br><span class="line">    String user = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    DriverManager.registerDriver(driver);<span class="comment">//注册 Driver 驱动</span></span><br><span class="line">    Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">    System.out.println(<span class="string">&quot;第三种方式=&quot;</span> + connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-3-4-方式四"><a href="#25-3-4-方式四" class="headerlink" title="25.3.4 方式四"></a>25.3.4 方式四</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240125103359657.png" alt="image-20240125103359657"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式 4: 使用 Class.forName 自动完成注册驱动，简化代码</span></span><br><span class="line"><span class="comment">//这种方式获取连接是使用的最多，推荐使用</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect04</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//使用反射加载了 Driver 类</span></span><br><span class="line">    <span class="comment">//在加载 Driver 类时，完成了注册</span></span><br><span class="line">    Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建 url 和 user 和 password</span></span><br><span class="line">    String url = <span class="string">&quot;jdbc:mysql://localhost:3306/db01&quot;</span>;</span><br><span class="line">    String user = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">    System.out.println(<span class="string">&quot;第 4 种方式~ &quot;</span> + connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-3-5-方式-5"><a href="#25-3-5-方式-5" class="headerlink" title="25.3.5 方式 5"></a>25.3.5 方式 5</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240125103505378.png" alt="image-20240125103505378"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式 5 , 在方式 4 的基础上改进，增加配置文件，让连接 mysql 更加灵活</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect05</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//通过 Properties 对象获取配置文件的信息</span></span><br><span class="line">    Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">    properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取相关的值</span></span><br><span class="line">    String driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">    String user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    String password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    String url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Class.forName(driver);<span class="comment">//建议写上</span></span><br><span class="line">    Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">    System.out.println(<span class="string">&quot;方式 5 &quot;</span> + connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-4-ResultSet（结果集）"><a href="#25-4-ResultSet（结果集）" class="headerlink" title="25.4 ResultSet（结果集）"></a>25.4 ResultSet（结果集）</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240125103940095.png" alt="image-20240125103940095"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultSet_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//通过 Properties 对象获取配置文件的信息</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line">        <span class="comment">//获取相关的值</span></span><br><span class="line">        String driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        String user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        String password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 注册驱动</span></span><br><span class="line">        Class.forName(driver);<span class="comment">//建议写上</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 得到连接</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 得到 Statement</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 执行SQL语句</span></span><br><span class="line">        String sql = <span class="string">&quot;select id, name , sex, borndate from actor&quot;</span>;</span><br><span class="line">        <span class="comment">//执行给定的 SQL 语句，该语句返回单个 ResultSet 对象</span></span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 使用 while 取出数据</span></span><br><span class="line">        <span class="keyword">while</span> (resultSet.next()) &#123; <span class="comment">// 让光标向后移动，如果没有更多行，则返回 false</span></span><br><span class="line">            <span class="keyword">int</span> id = resultSet.getInt(<span class="number">1</span>); <span class="comment">//获取该行的第 1 列</span></span><br><span class="line">            <span class="comment">//int id1 = resultSet.getInt(&quot;id&quot;); 通过列名来获取值, 推荐</span></span><br><span class="line">            String name = resultSet.getString(<span class="number">2</span>);<span class="comment">//获取该行的第 2 列</span></span><br><span class="line">            String sex = resultSet.getString(<span class="number">3</span>);</span><br><span class="line">            Date date = resultSet.getDate(<span class="number">4</span>);</span><br><span class="line">            System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + sex + <span class="string">&quot;\t&quot;</span> + date);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-5-Statement"><a href="#25-5-Statement" class="headerlink" title="25.5 Statement"></a>25.5 Statement</h2><h3 id="25-5-1-基本介绍"><a href="#25-5-1-基本介绍" class="headerlink" title="25.5.1 基本介绍"></a>25.5.1 基本介绍</h3><ol>
<li>Statement对象 用于<strong>执行静态SQL语句并返回其生成的结果的对象</strong></li>
<li>在连接建立后，需要对数据库进行访问，执行命名或是SQL 语句，可以通过<ul>
<li>Statement 【存在SQL注入】</li>
<li>PreparedStatement【预处理】</li>
<li>CallableStatement 【存储过程】</li>
</ul>
</li>
<li>语句对象执行sql语句，存在<font color="red"><strong>sql注入</strong>风险</font></li>
<li>SQL 注入是 利用某些系统没有对用户输入的数据进行充分的检查，而在用户输数据中<strong>注入非法的 SQL 语句段或命令</strong>,恶意攻击数据库。</li>
<li>要防范 SQL 注入，只要用 PreparedStatement (从Statement扩展而来) 取代 Statement 就可以了</li>
</ol>
<h3 id="25-5-2-SQL注入案例"><a href="#25-5-2-SQL注入案例" class="headerlink" title="25.5.2 SQL注入案例"></a>25.5.2 SQL注入案例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 演示 sql 注入</span></span><br><span class="line"><span class="comment">-- 创建一张表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> admin ( <span class="comment">-- 管理员表</span></span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>, pwd <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin <span class="keyword">VALUES</span>(<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;123&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查找某个管理是否存在</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> admin</span><br><span class="line"><span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;tom&#x27;</span> <span class="keyword">AND</span> pwd <span class="operator">=</span> <span class="string">&#x27;123&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- SQL注入</span></span><br><span class="line"><span class="comment">-- 输入用户名 为 1&#x27; or</span></span><br><span class="line"><span class="comment">-- 输入万能密码 为 or &#x27;1&#x27;= &#x27;1</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> admin</span><br><span class="line"><span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">OR</span><span class="string">&#x27; AND pwd = &#x27;</span><span class="keyword">OR</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h3 id="25-5-3-应用实例"><a href="#25-5-3-应用实例" class="headerlink" title="25.5.3 应用实例"></a>25.5.3 应用实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Statement_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="comment">//让用户输入管理员名(1&#x27; or)和密码 (or &#x27;1&#x27; = &#x27;1)</span></span><br><span class="line">        System.out.print(<span class="string">&quot;请输入管理员的名字: &quot;</span>); <span class="comment">//next(): 当接收到 空格或者 &#x27;就是表示结束</span></span><br><span class="line">        String admin_name = scanner.nextLine(); <span class="comment">//如果希望看到 SQL 注入，这里需要用 nextLine</span></span><br><span class="line">        System.out.print(<span class="string">&quot;请输入管理员的密码: &quot;</span>);</span><br><span class="line">        String admin_pwd = scanner.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过 Properties 对象获取配置文件的信息</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line">        <span class="comment">//获取相关的值</span></span><br><span class="line">        String user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        String password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        String url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 注册驱动</span></span><br><span class="line">        Class.forName(driver);<span class="comment">//建议写上</span></span><br><span class="line">        <span class="comment">//2. 得到连接</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="comment">//3. 得到 Statement</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line">        <span class="comment">//4. 组织 SqL</span></span><br><span class="line">        String sql = <span class="string">&quot;select name , pwd from admin where name =&#x27;&quot;</span> + admin_name + <span class="string">&quot;&#x27; and pwd = &#x27;&quot;</span> + admin_pwd + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line">        <span class="keyword">if</span> (resultSet.next()) &#123; <span class="comment">//如果查询到一条记录，则说明该管理存在</span></span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜， 登录成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;对不起，登录失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//关闭连接</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-6-PreparedStatement"><a href="#25-6-PreparedStatement" class="headerlink" title="25.6 PreparedStatement"></a>25.6 PreparedStatement</h2><h3 id="25-6-1-基本介绍"><a href="#25-6-1-基本介绍" class="headerlink" title="25.6.1 基本介绍"></a>25.6.1 基本介绍</h3><ol>
<li>PreparedStatement 执行的 SQL 语句中的<strong>参数用问号(?)来表示</strong>，调用<br>PreparedStatement 对象的 <strong>setXxx()方法</strong>来设置这些参数setXxx() 方法有<br>两个参数，第一个参数是要设置的 SQL 语句中的参数的索引(从 1 开始)，第二个是设置的 SQL 语句中的参数的值</li>
<li>调用 executeQuery()，返回 ResultSet 对象</li>
<li>调用 executeUpdate0()， 执行更新，包括增、删、修改</li>
</ol>
<h3 id="25-6-2-预处理好处"><a href="#25-6-2-预处理好处" class="headerlink" title="25.6.2 预处理好处"></a>25.6.2 预处理好处</h3><ol>
<li>不再使用+ 拼接sql语句，减少语法错误</li>
<li>有效的解决了**<font color="red">sql注入问题</font>**!</li>
<li>大大减少了编译次数，效率较高</li>
</ol>
<h3 id="25-6-3-应用案例"><a href="#25-6-3-应用案例" class="headerlink" title="25.6.3 应用案例"></a>25.6.3 应用案例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PreparedStatement_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="comment">//让用户输入管理员名和密码</span></span><br><span class="line">        System.out.print(<span class="string">&quot;请输入管理员的名字: &quot;</span>); <span class="comment">//next(): 当接收到 空格或者 &#x27;就是表示结束</span></span><br><span class="line">        String admin_name = scanner.nextLine(); <span class="comment">//如果希望看到 SQL 注入，这里需要用 nextLine</span></span><br><span class="line">        System.out.print(<span class="string">&quot;请输入管理员的密码: &quot;</span>);</span><br><span class="line">        String admin_pwd = scanner.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过 Properties 对象获取配置文件的信息</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line">        <span class="comment">//获取相关的值</span></span><br><span class="line">        String user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        String password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        String url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 注册驱动</span></span><br><span class="line">        Class.forName(driver);<span class="comment">//建议写上</span></span><br><span class="line">        <span class="comment">//2. 得到连接</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 得到 PreparedStatement</span></span><br><span class="line">        <span class="comment">// 3.1 组织 SqL , Sql 语句的 ? 就相当于占位符</span></span><br><span class="line">        String sql = <span class="string">&quot;select name , pwd from admin where name =? and pwd = ?&quot;</span>;</span><br><span class="line">        <span class="comment">// 3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span></span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        <span class="comment">// 3.3 给 ? 赋值</span></span><br><span class="line">        preparedStatement.setString(<span class="number">1</span>, admin_name);</span><br><span class="line">        preparedStatement.setString(<span class="number">2</span>, admin_pwd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 执行 select 语句使用 executeQuery</span></span><br><span class="line">        <span class="comment">// 如果执行的是 dml(update, insert ,delete)语句 使用executeUpdate()</span></span><br><span class="line">        <span class="comment">// 这里执行 executeQuery ,不要在写 sql</span></span><br><span class="line">        ResultSet resultSet = preparedStatement.executeQuery();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (resultSet.next()) &#123; <span class="comment">//如果查询到一条记录，则说明该管理存在</span></span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜， 登录成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;对不起，登录失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭连接</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-7-JDBC-的相关-API-小结"><a href="#25-7-JDBC-的相关-API-小结" class="headerlink" title="25.7 JDBC 的相关 API 小结"></a>25.7 JDBC 的相关 API 小结</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240126145750445.png" alt="image-20240126145750445"></p>
<h2 id="25-8-封装-JDBCUtils工具类"><a href="#25-8-封装-JDBCUtils工具类" class="headerlink" title="25.8 封装 JDBCUtils工具类"></a>25.8 封装 JDBCUtils工具类</h2><ul>
<li>在jdbc操作中，获取连接和释放资源是经常使用到可以将其封装jdbc连接的工具类JDBCUtils</li>
</ul>
<h3 id="25-8-1-JDBCUtils工具类"><a href="#25-8-1-JDBCUtils工具类" class="headerlink" title="25.8.1 JDBCUtils工具类"></a>25.8.1 JDBCUtils工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义相关的属性(4 个), 因为只需要一份，因此，我们做出 static</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user; <span class="comment">//用户名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password; <span class="comment">//密码</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url; <span class="comment">//url</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver; <span class="comment">//驱动名</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//在 static 代码块去初始化</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line">            <span class="comment">//读取相关的属性值</span></span><br><span class="line">            user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="comment">//在实际开发中，我们可以这样处理</span></span><br><span class="line">            <span class="comment">//1. 将 编译异常 转成 运行异常</span></span><br><span class="line">            <span class="comment">//2. 调用者，可以选择捕获该异常，也可以选择默认处理该异常，比较方便. throw new RuntimeException(e);</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//连接数据库, 返回 Connection</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">//1. 将编译异常转成 运行异常</span></span><br><span class="line">            <span class="comment">//2. 调用者，可以选择捕获该异常，也可以选择默认处理该异常，比较方便.</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭相关资源</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    1. ResultSet 结果集</span></span><br><span class="line"><span class="comment">    2. Statement 或者 PreparedStatement</span></span><br><span class="line"><span class="comment">    3. Connection</span></span><br><span class="line"><span class="comment">    4. 如果需要关闭资源，就传入对象，否则传入 null</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet set, Statement statement, Connection connection)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//判断是否为 null</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (set != <span class="keyword">null</span>) &#123;</span><br><span class="line">                set.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="keyword">null</span>) &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">//将编译异常转成运行异常抛出</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-8-1-JDBCUtils工具类使用"><a href="#25-8-1-JDBCUtils工具类使用" class="headerlink" title="25.8.1 JDBCUtils工具类使用"></a>25.8.1 JDBCUtils工具类使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils_Use</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">&quot;select * from actor where id = ?&quot;</span>;</span><br><span class="line">        PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet set = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.得到连接</span></span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            System.out.println(connection.getClass());</span><br><span class="line">            <span class="comment">// 2.创建PreparedStatement对象</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// 3. 给？赋值</span></span><br><span class="line">            preparedStatement.setInt(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">            <span class="comment">// 4. 执行sql</span></span><br><span class="line">            set = preparedStatement.executeQuery();</span><br><span class="line">            <span class="comment">// 5. 遍历结果集</span></span><br><span class="line">            <span class="keyword">while</span> (set.next()) &#123;</span><br><span class="line">                <span class="keyword">int</span> id = set.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                String name = set.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                String sex = set.getString(<span class="string">&quot;sex&quot;</span>);</span><br><span class="line">                Date borndate = set.getDate(<span class="string">&quot;borndate&quot;</span>);</span><br><span class="line">                String phone = set.getString(<span class="string">&quot;phone&quot;</span>);</span><br><span class="line">                System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + sex + <span class="string">&quot;\t&quot;</span> + borndate + <span class="string">&quot;\t&quot;</span> + phone);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. 关闭资源</span></span><br><span class="line">            JDBCUtils.close(set, preparedStatement, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDML</span><span class="params">()</span> </span>&#123;<span class="comment">//insert , update, delete</span></span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">&quot;update actor set name = ? where id = ?&quot;</span>;</span><br><span class="line">        PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//给占位符赋值</span></span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;周星驰&quot;</span>);</span><br><span class="line">            preparedStatement.setInt(<span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="comment">//执行</span></span><br><span class="line">            preparedStatement.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            JDBCUtils.close(<span class="keyword">null</span>, preparedStatement, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-9-事务"><a href="#25-9-事务" class="headerlink" title="25.9 事务"></a>25.9 事务</h2><h3 id="25-9-1-基本介绍"><a href="#25-9-1-基本介绍" class="headerlink" title="25.9.1 基本介绍"></a>25.9.1 基本介绍</h3><ol>
<li>JDBC程序中当一个Connection对象创建时，<strong>默认情况下是自动提交事务</strong>:每次执行一个 SQL 语句时，如果执行成功，就会向数据库自动提交，而不能回滚</li>
<li>JDBC程序中为了让多个 SQL 语句作为一个整体执行，需要<strong>使用事务</strong></li>
<li>调用 Connection 的 **<font color="red">setAutoCommit(false)</font>**可以取消自动提交事务(开启事务)</li>
<li>在所有的 SQL 语句都成功执行后，调用 Connection 的 <strong><font color="red">commit()</font></strong> 方法提交事务</li>
<li>在其中某个操作失败或出现异常时，调用 Connection 的 <strong><font color="red">rollback()</font></strong> 方法回滚事务</li>
</ol>
<h3 id="25-9-2-应用案例"><a href="#25-9-2-应用案例" class="headerlink" title="25.9.2 应用案例"></a>25.9.2 应用案例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Transaction_</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 模拟经典的转账业务</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">noTransaction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//操作转账的业务</span></span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">&quot;update account set balance = balance - 100 where name = ?&quot;</span>;</span><br><span class="line">        String sql2 = <span class="string">&quot;update account set balance = balance + 100 where name = ?&quot;</span>;</span><br><span class="line">        PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection(); <span class="comment">// 在默认情况下，connection 是默认自动提交</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;马化腾&quot;</span>);</span><br><span class="line">            preparedStatement.executeUpdate(); <span class="comment">// 执行第 1 条 sql</span></span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>; <span class="comment">//抛出异常(下面两行代码不会执行)</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql2);</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;马云&quot;</span>);</span><br><span class="line">            preparedStatement.executeUpdate(); <span class="comment">// 执行第 2 条 sql</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            JDBCUtils.close(<span class="keyword">null</span>, preparedStatement, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//事务来解决</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">useTransaction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//操作转账的业务</span></span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">&quot;update account set balance = balance - 100 where id = 1&quot;</span>;</span><br><span class="line">        String sql2 = <span class="string">&quot;update account set balance = balance + 100 where id = 2&quot;</span>;</span><br><span class="line">        PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection(); <span class="comment">// 在默认情况下，connection 是默认自动提交</span></span><br><span class="line">            <span class="comment">//将 connection 设置为不自动提交</span></span><br><span class="line">            connection.setAutoCommit(<span class="keyword">false</span>); <span class="comment">//开启了事务</span></span><br><span class="line"></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            preparedStatement.executeUpdate(); <span class="comment">// 执行第 1 条 sql</span></span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>; <span class="comment">//抛出异常</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql2);</span><br><span class="line">            preparedStatement.executeUpdate(); <span class="comment">// 执行第 2 条 sql</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//这里提交事务</span></span><br><span class="line">            connection.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">//这里我们可以进行回滚，即撤销执行的 SQL</span></span><br><span class="line">            <span class="comment">//默认回滚到事务开始的状态.</span></span><br><span class="line">            System.out.println(<span class="string">&quot;执行发生了异常，撤销已经执行的 sql&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.rollback();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            JDBCUtils.close(<span class="keyword">null</span>, preparedStatement, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-10-批处理"><a href="#25-10-批处理" class="headerlink" title="25.10 批处理"></a>25.10 批处理</h2><h3 id="25-10-1-基本介绍"><a href="#25-10-1-基本介绍" class="headerlink" title="25.10.1 基本介绍"></a>25.10.1 基本介绍</h3><ol>
<li>当需要成批插入或者更新记录时。可以采用Java的批量更新机制，这一机制允许多条语句一次性提交给数据库批量处理。通常情况下比单独提交处理<strong>效率更高</strong></li>
<li>JDBC的批量处理语句包括下面方法:<ul>
<li>**<font color="red">addBatch()</font>**：添加需要批量处理的SQL语句或参数</li>
<li>**<font color="red">executeBatch()</font>**：执行批量处理语句:</li>
<li>**<font color="red">clearBatch()</font>**：清空批处理包的语句</li>
</ul>
</li>
<li>JDBC连接MySQL时，如果要使用批处理功能，请再<strong>url中加参数<font color="red">?rewriteBatchedStatements=true</font></strong></li>
<li>批处理往往和PreparedStatement一起搭配使用，可以既减少编译次数，又减少运行次数，效率大大提高</li>
</ol>
<h3 id="25-10-2-应用案例"><a href="#25-10-2-应用案例" class="headerlink" title="25.10.2 应用案例"></a>25.10.2 应用案例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Batch</span> </span>&#123;</span><br><span class="line">    <span class="comment">//传统方法，添加 5000 条数据到 admin</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">noBatch</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Connection connection = JDBCUtils.getConnection();</span><br><span class="line">        String sql = <span class="string">&quot;insert into admin2 values(null, ?, ?)&quot;</span>;</span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        System.out.println(<span class="string">&quot;开始执行&quot;</span>);</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();<span class="comment">//开始时间</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5000</span>; i++) &#123;<span class="comment">//5000 执行</span></span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;jack&quot;</span> + i);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>, <span class="string">&quot;666&quot;</span>);</span><br><span class="line">            preparedStatement.executeUpdate();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;传统的方式 耗时=&quot;</span> + (end - start));<span class="comment">//传统的方式 耗时=2805</span></span><br><span class="line">        <span class="comment">//关闭连接</span></span><br><span class="line">        JDBCUtils.close(<span class="keyword">null</span>, preparedStatement, connection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用批量方式添加数据</span></span><br><span class="line">    <span class="comment">//批量处理会减少我们发送 sql 语句的网络开销，而且减少编译次数，因此效率提高</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batch</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Connection connection = JDBCUtils.getConnection();</span><br><span class="line">        String sql = <span class="string">&quot;insert into admin2 values(null, ?, ?)&quot;</span>;</span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        System.out.println(<span class="string">&quot;开始执行&quot;</span>);</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();<span class="comment">//开始时间</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5000</span>; i++) &#123;<span class="comment">//5000 执行</span></span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, <span class="string">&quot;jack&quot;</span> + i);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>, <span class="string">&quot;666&quot;</span>);</span><br><span class="line"></span><br><span class="line">            preparedStatement.addBatch(); <span class="comment">//添加</span></span><br><span class="line">            <span class="comment">//当有 1000 条记录时，在批量执行</span></span><br><span class="line">            <span class="keyword">if</span> ((i + <span class="number">1</span>) % <span class="number">1000</span> == <span class="number">0</span>) &#123;<span class="comment">//满 1000 条 sql</span></span><br><span class="line">                preparedStatement.executeBatch(); <span class="comment">//执行批处理</span></span><br><span class="line">                preparedStatement.clearBatch(); <span class="comment">//清空</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;批量方式 耗时=&quot;</span> + (end - start));<span class="comment">//批量方式 耗时=65</span></span><br><span class="line">        <span class="comment">//关闭连接</span></span><br><span class="line">        JDBCUtils.close(<span class="keyword">null</span>, preparedStatement, connection);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-11数据库连接池"><a href="#25-11数据库连接池" class="headerlink" title="25.11数据库连接池"></a>25.11数据库连接池</h2><h3 id="25-11-1-5k-次连接数据库"><a href="#25-11-1-5k-次连接数据库" class="headerlink" title="25.11.1 5k 次连接数据库"></a>25.11.1 5k 次连接数据库</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConQuestion</span> </span>&#123;</span><br><span class="line">    <span class="comment">//代码 连接 mysql 5000 次</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCon</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//看看连接-关闭 connection 会耗用多久</span></span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;开始连接.....&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5000</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//使用传统的 jdbc 方式，得到连接</span></span><br><span class="line">            Connection connection = JDBCUtils.getConnection();</span><br><span class="line">            <span class="comment">//做一些工作，比如得到 PreparedStatement ，发送 sql</span></span><br><span class="line">            <span class="comment">//.......... //关闭</span></span><br><span class="line">            JDBCUtils.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;传统方式 5000 次 耗时=&quot;</span> + (end - start));<span class="comment">//传统方式 5000 次 耗时=6684</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-11-2-传统获取-Connection-问题分析"><a href="#25-11-2-传统获取-Connection-问题分析" class="headerlink" title="25.11.2 传统获取 Connection 问题分析"></a>25.11.2 传统获取 Connection 问题分析</h3><ol>
<li><p>传统的JDBC数据库连接使用 DriverManager 来获取，每次向数据库建立连接的时候都要将 Connection 加载到内存中再<strong>验证IP地址，用户名和密码</strong>(0.05s~1s时间)。需要数据库连接的时候，就向数据库要求一个，频</p>
<p>繁的进行数据库连接操作将<strong>占用很多的系统资源容易造成服务器崩溃</strong>。</p>
</li>
<li><p>每一次数据库连接，使用完后都得断开，如果程序出现异常而未能关闭，将导致数据库<strong>内存泄漏</strong>，最终将导致重启数据库</p>
</li>
<li><p>传统获取连接的方式，不能控制创建的连接数量，如连接过多，也可能导致内存泄漏，MySQL崩溃。</p>
</li>
<li><p>解决传统开发中的数据库连接问题，可以采用<strong>数据库连接池技术</strong>(connection pool)</p>
</li>
</ol>
<h3 id="25-11-3-数据库连接池种类"><a href="#25-11-3-数据库连接池种类" class="headerlink" title="25.11.3 数据库连接池种类"></a>25.11.3 数据库连接池种类</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240128214046525.png" alt="image-20240128214046525"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240128214424546.png" alt="image-20240128214424546"></p>
<ol>
<li>JDBC 的数据库连接池使用 javax.sgl.<strong>DataSource</strong> 来表示，DataSource只是一个接口，该接口通常由第三方提供实现[提供 .jar]</li>
<li><strong><font color="red">C3PO</font></strong> 数据库连接池，速度相对较慢，稳定性不错 (hibernate,spring)</li>
<li><strong><font color="red">DBCP</font></strong> 数据库连接池，速度相对c3p0较快，但不稳定</li>
<li><strong><font color="red">Proxool</font></strong> 数据库连接池，有监控连接池状态的功能，稳定性较c3p0差一点</li>
<li><strong><font color="red">BoneCP</font></strong> 数据库连接池，速度快</li>
<li><strong><font color="red">Druid</font></strong>(德鲁伊)是阿里提供的数据库连接池，集DBCP 、C3PO 、Proxoo优点于一身的数据库连接池</li>
</ol>
<h3 id="25-11-4-C3P0-应用实例"><a href="#25-11-4-C3P0-应用实例" class="headerlink" title="25.11.4 C3P0 应用实例"></a>25.11.4 C3P0 应用实例</h3><ul>
<li>方式一</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式 1： 相关参数，在程序中指定 user, url , password 等</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testC3P0_01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建一个数据源对象</span></span><br><span class="line">    ComboPooledDataSource comboPooledDataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 通过配置文件 mysql.properties 获取相关连接的信息</span></span><br><span class="line">    Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">    properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line">    <span class="comment">//读取相关的属性值</span></span><br><span class="line">    String user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    String password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    String url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">    String driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 给数据源 comboPooledDataSource 设置相关的参数</span></span><br><span class="line">    <span class="comment">//注意：连接管理是由 comboPooledDataSource 来管理</span></span><br><span class="line">    comboPooledDataSource.setDriverClass(driver);</span><br><span class="line">    comboPooledDataSource.setJdbcUrl(url);</span><br><span class="line">    comboPooledDataSource.setUser(user);</span><br><span class="line">    comboPooledDataSource.setPassword(password);</span><br><span class="line">    <span class="comment">//设置初始化连接数</span></span><br><span class="line">    comboPooledDataSource.setInitialPoolSize(<span class="number">10</span>);</span><br><span class="line">    <span class="comment">//最大连接数</span></span><br><span class="line">    comboPooledDataSource.setMaxPoolSize(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. 测试连接池的效率, 测试对 mysql 5000 次操作</span></span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5000</span>; i++) &#123;</span><br><span class="line">        Connection connection = comboPooledDataSource.getConnection(); <span class="comment">//这个方法就是从 DataSource 接口实现的</span></span><br><span class="line">        System.out.println(<span class="string">&quot;连接 OK&quot;</span>);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">    <span class="comment">//c3p0 5000 连接 mysql 耗时=318</span></span><br><span class="line">    System.out.println(<span class="string">&quot;c3p0 5000 连接 mysql 耗时=&quot;</span> + (end - start));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>方式二</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第二种方式 使用配置文件模板来完成</span></span><br><span class="line"><span class="comment">//1. 将 c3p0 提供的 c3p0.config.xml 拷贝到 src 目录下</span></span><br><span class="line"><span class="comment">//2. 该文件指定了连接数据库和连接池的相关参数</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testC3P0_02</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    ComboPooledDataSource comboPooledDataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;durango&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//测试 5000 次连接 mysql</span></span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;开始执行....&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">500000</span>; i++) &#123;</span><br><span class="line">        Connection connection = comboPooledDataSource.getConnection();</span><br><span class="line">        System.out.println(<span class="string">&quot;连接 OK~&quot;</span>);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">    <span class="comment">//c3p0 的第二种方式 耗时=413</span></span><br><span class="line">    System.out.println(<span class="string">&quot;c3p0 的第二种方式(500000) 耗时=&quot;</span> + (end - start));<span class="comment">//3371</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置文件 c3p0.config.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 数据源名称 代表连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;durango&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 驱动类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- url--&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://127.0.0.1:3306/db01<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 用户名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 密码 --&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  	<span class="comment">&lt;!-- 每次增长的连接数--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;acquireIncrement&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 初始的连接数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 最小连接数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 最大连接数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 可连接的最多的命令对象数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxStatements&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 每个连接对象可连接的最多的命令对象数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxStatementsPerConnection&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="25-11-5-Druid-德鲁伊-应用实例"><a href="#25-11-5-Druid-德鲁伊-应用实例" class="headerlink" title="25.11.5 Druid(德鲁伊) 应用实例"></a>25.11.5 Druid(德鲁伊) 应用实例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Durid_</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDruid</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1. 加入 Druid jar 包</span></span><br><span class="line">        <span class="comment">//2. 加入 配置文件 druid.properties , 将该文件拷贝项目的 src 目录</span></span><br><span class="line">        <span class="comment">//3. 创建 Properties 对象, 读取配置文件</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\druid.properties&quot;</span>));</span><br><span class="line">        <span class="comment">//4. 创建一个指定参数的数据库连接池, Druid 连接池</span></span><br><span class="line">        DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">500000</span>; i++) &#123;</span><br><span class="line">            Connection connection = dataSource.getConnection();</span><br><span class="line">            System.out.println(connection.getClass());</span><br><span class="line">            <span class="comment">//System.out.println(&quot;连接成功!&quot;);</span></span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//druid 连接池 操作 5000 耗时=2333</span></span><br><span class="line">        System.out.println(<span class="string">&quot;druid 连接池 操作 500000 耗时=&quot;</span> + (end - start));<span class="comment">//539</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-11-6-将-JDBCUtils-工具类改成-Druid-德鲁伊-实现"><a href="#25-11-6-将-JDBCUtils-工具类改成-Druid-德鲁伊-实现" class="headerlink" title="25.11.6 将 JDBCUtils 工具类改成 Druid(德鲁伊)实现"></a>25.11.6 将 JDBCUtils 工具类改成 Druid(德鲁伊)实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtilsByDruid</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在静态代码块完成 ds 初始化</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\druid.properties&quot;</span>));</span><br><span class="line">            ds = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写 getConnection 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭连接, 在数据库连接池技术中，close 不是真的断掉连接</span></span><br><span class="line">    <span class="comment">//而是把使用的 Connection 对象放回连接池</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet resultSet, Statement statement, Connection connection)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (resultSet != <span class="keyword">null</span>) &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="keyword">null</span>) &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="25-12-Apache—DBUtils"><a href="#25-12-Apache—DBUtils" class="headerlink" title="25.12 Apache—DBUtils"></a>25.12 Apache—DBUtils</h2><h3 id="25-12-1-先分析一个问题"><a href="#25-12-1-先分析一个问题" class="headerlink" title="25.12.1 先分析一个问题"></a>25.12.1 先分析一个问题</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240201101600286.png" alt="image-20240201101600286"></p>
<h3 id="25-12-2-用自己的土方法来解决"><a href="#25-12-2-用自己的土方法来解决" class="headerlink" title="25.12.2 用自己的土方法来解决"></a>25.12.2 用自己的土方法来解决</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用老师的土方法来解决 ResultSet =封装=&gt; Arraylist</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;Actor&gt; <span class="title">testSelectToArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;使用 druid 方式完成&quot;</span>);</span><br><span class="line">    <span class="comment">//1. 得到连接</span></span><br><span class="line">    Connection connection = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//2. 组织一个 sql</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from actor where id &gt;= ?&quot;</span>;</span><br><span class="line">    PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet set = <span class="keyword">null</span>;</span><br><span class="line">    ArrayList&lt;Actor&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">//创建 ArrayList 对象,存放 actor 对象</span></span><br><span class="line">    <span class="comment">//3. 创建 PreparedStatement 对象</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">        System.out.println(connection.getClass());<span class="comment">//运行类com.alibaba.druid.pool.DruidPooledConnection</span></span><br><span class="line">        preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        preparedStatement.setInt(<span class="number">1</span>, <span class="number">1</span>);<span class="comment">//给?号赋值</span></span><br><span class="line">        <span class="comment">//执行, 得到结果集</span></span><br><span class="line">        set = preparedStatement.executeQuery();</span><br><span class="line">        <span class="comment">//遍历该结果集</span></span><br><span class="line">        <span class="keyword">while</span> (set.next()) &#123;</span><br><span class="line">			<span class="keyword">int</span> id = set.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">   			String name = set.getString(<span class="string">&quot;name&quot;</span>);<span class="comment">//getName()</span></span><br><span class="line">            String sex = set.getString(<span class="string">&quot;sex&quot;</span>);<span class="comment">//getSex()</span></span><br><span class="line">            Date borndate = set.getDate(<span class="string">&quot;borndate&quot;</span>);</span><br><span class="line">            String phone = set.getString(<span class="string">&quot;phone&quot;</span>);</span><br><span class="line">            <span class="comment">//把得到的 resultset 的记录，封装到 Actor 对象，放入到 list 集合</span></span><br><span class="line">            list.add(<span class="keyword">new</span> Actor(id, name, sex, borndate, phone));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;list 集合数据=&quot;</span> + list);</span><br><span class="line">        <span class="keyword">for</span>(Actor actor : list) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id=&quot;</span> + actor.getId() + <span class="string">&quot;\t&quot;</span> + actor.getName());</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">    	e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//关闭资源</span></span><br><span class="line">        JDBCUtilsByDruid.close(set, preparedStatement, connection);</span><br><span class="line">    &#125;</span><br><span class="line">    	<span class="comment">//因为 ArrayList 和 connection 没有任何关联，所以该集合可以复用. </span></span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="25-12-3-基本介绍"><a href="#25-12-3-基本介绍" class="headerlink" title="25.12.3 基本介绍"></a>25.12.3 基本介绍</h3><ol>
<li><p><strong>commons-dbutils</strong> 是 Apache 组织提供的-一个开源JDBC工具类库，它是对JDBC的封装使用dbutils能极大简化jdbc编码的工作量。</p>
</li>
<li><p><strong>DbUtils</strong>类</p>
</li>
<li><p>**<font color="red">QueryRunner</font>**类: 该类封装了SQL的执行，是线程安全的。可以实现增、删、改、查、批处理</p>
</li>
<li><p><strong>ResultSetHandler</strong>接口: 该接口用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式，有如下几种：</p>
<p>​    <img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240201102308514.png" alt="image-20240201102308514"></p>
</li>
</ol>
<h3 id="25-12-4-应用实例"><a href="#25-12-4-应用实例" class="headerlink" title="25.12.4 应用实例"></a>25.12.4 应用实例</h3><p>query()方法源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">query</span><span class="params">(Connection conn, String sql, ResultSetHandler&lt;T&gt; rsh, Object... params)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    PreparedStatement stmt = <span class="keyword">null</span>; <span class="comment">//定义 PreparedStatement</span></span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>; <span class="comment">//接收返回的 ResultSet</span></span><br><span class="line">    T result = <span class="keyword">null</span>; <span class="comment">//返回 ArrayList</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        stmt = <span class="keyword">this</span>.prepareStatement(conn, sql); <span class="comment">//创建 PreparedStatement</span></span><br><span class="line">        <span class="keyword">this</span>.fillStatement(stmt, params); ;<span class="comment">//对 sql 进行 ? 赋值</span></span><br><span class="line">        rs = <span class="keyword">this</span>.wrap(stmt.executeQuery()); ;<span class="comment">//执行 sql,返回 resultset</span></span><br><span class="line">        result = rsh.handle(rs); <span class="comment">//返回的 resultset --&gt; arrayList[result] [使用到反射，对传入 class 对象</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException var33) &#123;</span><br><span class="line">        <span class="keyword">this</span>.rethrow(var33, sql, params);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.close(rs); ;<span class="comment">//关闭 resultset</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.close((Statement)stmt); <span class="comment">//关闭 preparedstatement 对象</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>apache-DBUtils 工具类 + druid 完成对表的查询操作</p>
<ul>
<li>返回结果是多行数据的情况</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryMany</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">// 1.用druid方式得到连接</span></span><br><span class="line">    Connection connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">    <span class="comment">// 2.使用 DBUtilsl 类和接口， 先引入DBUtils相关的jar</span></span><br><span class="line">    <span class="comment">// 3.创建 QueryRunner</span></span><br><span class="line">    QueryRunner queryRunner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    <span class="comment">// 4. 执行相关的方法，返回ArrayList结果集</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from actor where id &gt;= ?&quot;</span>;</span><br><span class="line">    <span class="comment">// (1) query 方法就是执行 sql 语句，得到 resultset ---封装到 --&gt; ArrayList 集合中</span></span><br><span class="line">    <span class="comment">// (2) list: 返回集合</span></span><br><span class="line">    <span class="comment">// (3) connection: 连接</span></span><br><span class="line">    <span class="comment">// (4) sql : 执行的 sql 语句</span></span><br><span class="line">    <span class="comment">// (5) new BeanListHandler&lt;&gt;(Actor.class): 在将 resultset -&gt; Actor 对象 -&gt; 封装到 ArrayList</span></span><br><span class="line">    <span class="comment">//      底层使用反射机制 去获取 Actor 类的属性，然后进行封装</span></span><br><span class="line">    <span class="comment">// (6) 1 就是给 sql 语句中的 ? 赋值，可以有多个值，因为是可变参数 Object... params</span></span><br><span class="line">    <span class="comment">// (7) 底层得到的 resultset,会在query中关闭, 还会关闭 PreparedStatment</span></span><br><span class="line">    List&lt;Actor&gt; list = queryRunner.query(connection, sql, <span class="keyword">new</span> BeanListHandler&lt;&gt;(Actor.class), <span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;输出集合信息&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (Actor actor : list) &#123;</span><br><span class="line">        System.out.println(actor);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>返回结果是单行数据的情况</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQuerySingle</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">// 1.用druid方式得到连接</span></span><br><span class="line">    Connection connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">    <span class="comment">// 2.使用 DBUtilsl 类和接口， 先引入DBUtils相关的jar</span></span><br><span class="line">    <span class="comment">// 3.创建 QueryRunner</span></span><br><span class="line">    QueryRunner queryRunner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    <span class="comment">// 4. 执行相关的方法，返回单个对象</span></span><br><span class="line">    String sql = <span class="string">&quot;select * from actor where id = ?&quot;</span>;</span><br><span class="line">    Actor actor = queryRunner.query(connection, sql, <span class="keyword">new</span> BeanHandler&lt;&gt;(Actor.class), <span class="number">4</span>);</span><br><span class="line">    System.out.println(actor);</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>查询结果是单行单列-返回的就是 object</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testScalar</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">// 1.用druid方式得到连接</span></span><br><span class="line">    Connection connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">    <span class="comment">// 2.使用 DBUtilsl 类和接口， 先引入DBUtils相关的jar</span></span><br><span class="line">    <span class="comment">// 3.创建 QueryRunner</span></span><br><span class="line">    QueryRunner queryRunner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    <span class="comment">// 4. 就可以执行相关的方法，返回单行单列 , 返回的就是 Object</span></span><br><span class="line">    String sql = <span class="string">&quot;select name from actor where id = ?&quot;</span>;</span><br><span class="line">    <span class="comment">//因为返回的是一个对象, 使用的 handler 就是 ScalarHandler</span></span><br><span class="line">    Object obj = queryRunner.query(connection, sql, <span class="keyword">new</span> ScalarHandler(), <span class="number">4</span>);</span><br><span class="line">    System.out.println(obj);</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>使用apache-dbutils + druid 完成 dml (update, insert ,delete)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDML</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">// 1.用druid方式得到连接</span></span><br><span class="line">    Connection connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">    <span class="comment">// 2.使用 DBUtilsl 类和接口， 先引入DBUtils相关的jar</span></span><br><span class="line">    <span class="comment">// 3.创建 QueryRunner</span></span><br><span class="line">    QueryRunner queryRunner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    <span class="comment">//4. 这里组织 sql 完成 update, insert delete</span></span><br><span class="line">    <span class="comment">//String sql = &quot;update actor set name = ? where id = ?&quot;;</span></span><br><span class="line">    <span class="comment">//String sql = &quot;insert into actor values(null, ?, ?, ?, ?)&quot;;</span></span><br><span class="line">    String sql = <span class="string">&quot;delete from actor where id = ?&quot;</span>;</span><br><span class="line">    <span class="comment">// (1) 执行 dml 操作是 queryRunner.update()</span></span><br><span class="line">    <span class="comment">// (2) 返回的值是受影响的行数 (affected: 受影响)</span></span><br><span class="line">    <span class="comment">//int affectedRow = queryRunner.update(connection, sql, &quot;林青霞&quot;, &quot;女&quot;, &quot;1966-10-10&quot;, &quot;116&quot;);</span></span><br><span class="line">    <span class="keyword">int</span> affectedRow = queryRunner.update(connection, sql, <span class="number">1000</span> );</span><br><span class="line">    System.out.println(affectedRow &gt; <span class="number">0</span> ? <span class="string">&quot;执行成功&quot;</span> : <span class="string">&quot;执行没有影响到表&quot;</span>);</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="25-12-5-表和-JavaBean-的类型映射关系"><a href="#25-12-5-表和-JavaBean-的类型映射关系" class="headerlink" title="25.12.5 表和 JavaBean 的类型映射关系"></a>25.12.5 表和 JavaBean 的类型映射关系</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240201111944056.png" alt="image-20240201111944056"></p>
<h2 id="25-13-DAO-和增删改查通用方法-BasicDao"><a href="#25-13-DAO-和增删改查通用方法-BasicDao" class="headerlink" title="25.13 DAO 和增删改查通用方法-BasicDao"></a>25.13 DAO 和增删改查通用方法-BasicDao</h2><h3 id="25-13-1-先分析一个问题"><a href="#25-13-1-先分析一个问题" class="headerlink" title="25.13.1 先分析一个问题"></a>25.13.1 先分析一个问题</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240203215133282.png" alt="image-20240203215133282"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240203215636053.png" alt="image-20240203215636053"></p>
<h3 id="25-13-2-基本说明"><a href="#25-13-2-基本说明" class="headerlink" title="25.13.2 基本说明"></a>25.13.2 基本说明</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240203220023888.png" alt="image-20240203220023888"></p>
<h3 id="25-13-3-BasicDAO-应用实例"><a href="#25-13-3-BasicDAO-应用实例" class="headerlink" title="25.13.3 BasicDAO 应用实例"></a>25.13.3 BasicDAO 应用实例</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240203220057648.png" alt="image-20240203220057648"></p>
<img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240203223232503.png" alt="image-20240203223232503" style="zoom:50%;">

<ul>
<li><p>JDBCUtilsByDruid.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtilsByDruid</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在静态代码块完成 ds 初始化</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\druid.properties&quot;</span>));</span><br><span class="line">            ds = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写 getConnection 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭连接, 在数据库连接池技术中，close 不是真的断掉连接</span></span><br><span class="line">    <span class="comment">//而是把使用的 Connection 对象放回连接池</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet resultSet, Statement statement, Connection connection)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (resultSet != <span class="keyword">null</span>) &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="keyword">null</span>) &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Actor.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Actor</span> </span>&#123; <span class="comment">//Javabean, POJO, Domain对象</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date borndate;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Actor</span><span class="params">()</span> </span>&#123; <span class="comment">//一定要给一个无参构造器[反射需要]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Actor</span><span class="params">(Integer id, String name, String sex, Date borndate, String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">        <span class="keyword">this</span>.borndate = borndate;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getBorndate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> borndate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBorndate</span><span class="params">(Date borndate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.borndate = borndate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;\nActor&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sex=&#x27;&quot;</span> + sex + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, borndate=&quot;</span> + borndate +</span><br><span class="line">                <span class="string">&quot;, phone=&#x27;&quot;</span> + phone + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>BasicDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BasicDAO</span>&lt;<span class="title">T</span>&gt; </span>&#123; <span class="comment">//泛型指定具体类型</span></span><br><span class="line">    <span class="keyword">private</span> QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//开发通用的 dml 方法, 针对任意的表</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(String sql, Object... parameters)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="keyword">int</span> update = qr.update(connection, sql, parameters);</span><br><span class="line">            <span class="keyword">return</span> update;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e); <span class="comment">//将编译异常-&gt;运行异常 ,抛出</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回多个对象(即查询的结果是多行), 针对任意表</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql        sql 语句，可以有 ?</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> clazz      传入一个类的 Class 对象 比如 Actor.class</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parameters 传入 ? 的具体的值，可以是多个</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 根据 Actor.class 返回对应的 ArrayList 集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">queryMulti</span><span class="params">(String sql, Class&lt;T&gt; clazz, Object... parameters)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="keyword">return</span> qr.query(connection, sql, <span class="keyword">new</span> BeanListHandler&lt;T&gt;(clazz), parameters);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e); <span class="comment">//将编译异常-&gt;运行异常 ,抛出</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询单行结果 的通用方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">querySingle</span><span class="params">(String sql, Class&lt;T&gt; clazz, Object... parameters)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="keyword">return</span> qr.query(connection, sql, <span class="keyword">new</span> BeanHandler&lt;T&gt;(clazz), parameters);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e); <span class="comment">//将编译异常-&gt;运行异常 ,抛出</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询单行单列的方法,即返回单值的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">queryScalar</span><span class="params">(String sql, Object... parameters)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="keyword">return</span> qr.query(connection, sql, <span class="keyword">new</span> ScalarHandler(), parameters);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e); <span class="comment">//将编译异常-&gt;运行异常 ,抛出</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtilsByDruid.close(<span class="keyword">null</span>, <span class="keyword">null</span>, connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>ActorDAO.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActorDAO</span> <span class="keyword">extends</span> <span class="title">BasicDAO</span>&lt;<span class="title">Actor</span>&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//1. 包含 BasicDAO 的方法</span></span><br><span class="line">    <span class="comment">//2. 根据业务需求，可以编写特有的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>TestDAO.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDAO</span> </span>&#123;</span><br><span class="line">    <span class="comment">//测试 ActorDAO 对 actor 表 crud 操作</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testActorDAO</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ActorDAO actorDAO = <span class="keyword">new</span> ActorDAO();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 查询多行记录</span></span><br><span class="line">        List&lt;Actor&gt; actors = actorDAO.queryMulti(<span class="string">&quot;select * from actor where id &gt;= ?&quot;</span>, Actor.class, <span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;===查询结果===&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Actor actor : actors) &#123;</span><br><span class="line">            System.out.println(actor);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 查询单行记录</span></span><br><span class="line">        Actor actor = actorDAO.querySingle(<span class="string">&quot;select * from actor where id = ?&quot;</span>, Actor.class, <span class="number">6</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;====查询单行结果====&quot;</span>);</span><br><span class="line">        System.out.println(actor);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 查询单行单列</span></span><br><span class="line">        Object o = actorDAO.queryScalar(<span class="string">&quot;select name from actor where id = ?&quot;</span>, <span class="number">6</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;====查询单行单列值===&quot;</span>);</span><br><span class="line">        System.out.println(o);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. dml 操作 insert ,update, delete</span></span><br><span class="line">        <span class="keyword">int</span> update = actorDAO.update(<span class="string">&quot;insert into actor values(null, ?, ?, ?, ?)&quot;</span>, <span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;男&quot;</span>, <span class="string">&quot;2000-11-11&quot;</span>, <span class="string">&quot;999&quot;</span>);</span><br><span class="line">        System.out.println(update &gt; <span class="number">0</span> ? <span class="string">&quot;执行成功&quot;</span> : <span class="string">&quot;执行没有影响表&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="第二十六章-满汉楼"><a href="#第二十六章-满汉楼" class="headerlink" title="第二十六章 满汉楼"></a>第二十六章 满汉楼</h1><p>（略）</p>
<h1 id="第二十七章-正则表达式"><a href="#第二十七章-正则表达式" class="headerlink" title="第二十七章 正则表达式"></a>第二十七章 正则表达式</h1><h2 id="27-1-快速入门"><a href="#27-1-快速入门" class="headerlink" title="27.1 快速入门"></a>27.1 快速入门</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Regexp_</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String content = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//1. 先创建一个 Pattern 对象， 模式对象, 可以理解成就是一个正则表达式对象</span></span><br><span class="line">        Pattern pattern = Pattern.compile(<span class="string">&quot;[a-zA-Z]+&quot;</span>); <span class="comment">//单词</span></span><br><span class="line">        <span class="comment">//Pattern pattern = Pattern.compile(&quot;[0-9]+&quot;);  //数字</span></span><br><span class="line">        <span class="comment">//Pattern pattern = Pattern.compile(&quot;([0-9]+)|([a-zA-Z]+)&quot;); //数字和单词</span></span><br><span class="line">        <span class="comment">//Pattern pattern = Pattern.compile(&quot;&lt;a target=\&quot;_blank\&quot; title=\&quot;(\\S*)\&quot;&quot;); //百度热搜的标题</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 创建一个匹配器对象</span></span><br><span class="line">        Matcher matcher = pattern.matcher(content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 循环匹配</span></span><br><span class="line">        <span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">            <span class="comment">//匹配内容，放到 m.group(0)</span></span><br><span class="line">            System.out.println(<span class="string">&quot;找到：&quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="27-2-正则表达式基本介绍"><a href="#27-2-正则表达式基本介绍" class="headerlink" title="27.2 正则表达式基本介绍"></a>27.2 正则表达式基本介绍</h2><ol>
<li>一个正则表达式，就是<strong>用某种模式去匹配字符串的一个公式</strong>.很多人因<br>为它们看上去比较古怪而且复杂所以不敢去使用，不过，经过练习后，<br>就觉得这些复杂的表达式写起来还是相当简单的，而且，一旦你弄懂它<br>们，你就能把数小时辛苦而且易错的文本处理工作缩短在几分钟(甚至<br>几秒钟)内完成</li>
</ol>
<h2 id="27-3-正则表达式底层实现（重要）"><a href="#27-3-正则表达式底层实现（重要）" class="headerlink" title="27.3 正则表达式底层实现（重要）"></a>27.3 正则表达式底层实现（重要）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegTheory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String content = <span class="string">&quot;1998 年 12 月 8 日，第二代 Java 平台的企业版 J2EE 发布。1999 年 6 月，Sun 公司发布了&quot;</span> +</span><br><span class="line">                <span class="string">&quot;第二代 Java 平台（简称为 Java2）的 3 个版本：J2ME（Java2 Micro Edition，Java2 平台的微型&quot;</span> +</span><br><span class="line">                <span class="string">&quot;版），应用于移动、无线及有限资源的环境；J2SE（Java 2 Standard Edition，Java 2 平台的&quot;</span> +</span><br><span class="line">                <span class="string">&quot;标准版），应用于桌面环境；J2EE（Java 2Enterprise Edition，Java 2 平台的企业版），应&quot;</span> +</span><br><span class="line">                <span class="string">&quot;用 3443 于基于 Java 的应用服务器。Java 2 平台的发布，是 Java 发展过程中最重要的一个&quot;</span> +</span><br><span class="line">                <span class="string">&quot;里程碑，标志着 Java 的应用开始普及 9889 &quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//目标：匹配所有四个数字</span></span><br><span class="line">        <span class="comment">//说明</span></span><br><span class="line">        <span class="comment">// 1. \\d 表示一个任意的数字</span></span><br><span class="line">        String regStr = <span class="string">&quot;(\\d\\d)(\\d\\d)&quot;</span>;</span><br><span class="line">        <span class="comment">// 2. 创建模式对象[即正则表达式对象]</span></span><br><span class="line">        Pattern pattern = Pattern.compile(regStr);</span><br><span class="line">        <span class="comment">//3. 创建匹配器</span></span><br><span class="line">        <span class="comment">//说明：创建匹配器 matcher， 按照 正则表达式的规则 去匹配 content 字符串</span></span><br><span class="line">        Matcher matcher = pattern.matcher(content);</span><br><span class="line">        <span class="comment">//4.开始匹配</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * matcher.find() 完成的任务 （考虑分组）</span></span><br><span class="line"><span class="comment">         * 什么是分组，比如 (\d\d)(\d\d) ,正则表达式中有() 表示分组, 第 1 个()表示第 1 组,第 2 个()表示第 2 组...</span></span><br><span class="line"><span class="comment">         * 1. 根据指定的规则 ,定位满足规则的子字符串(比如(19)(98))</span></span><br><span class="line"><span class="comment">         * 2. 找到后，</span></span><br><span class="line"><span class="comment">         *  2.1 将 子字符串的开始的索引 记录到 matcher对象的属性 int[] groups; groups[0] = 0 ,</span></span><br><span class="line"><span class="comment">         *      把 该子字符串的结束的索引+1 记录到 groups[1] = 4</span></span><br><span class="line"><span class="comment">         *  2.2 记录 1 组()匹配到的字符串 groups[2] = 0 groups[3] = 2</span></span><br><span class="line"><span class="comment">         *  2.3 记录 2 组()匹配到的字符串 groups[4] = 2 groups[5] = 4</span></span><br><span class="line"><span class="comment">         *  2.4.如果有更多的分组.....</span></span><br><span class="line"><span class="comment">         * 3. 同时记录 oldLast 的值为 子字符串的结束的索引+1, 即 4, 即下次执行 find 时，就从 4 开始匹配</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * matcher.group(0) 分析</span></span><br><span class="line"><span class="comment">         *  源码</span></span><br><span class="line"><span class="comment">         *  return getSubSequence(groups[group * 2], groups[group * 2 + 1]).toString();</span></span><br><span class="line"><span class="comment">         *  1. 根据 groups[0]=0 和 groups[1]=4 的记录的位置，从 content 开始截取子字符串返回</span></span><br><span class="line"><span class="comment">         *     是 [0,4) 包含 0 但是不包含索引为 4 的位置</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * 如果再次指向 find 方法.仍然安上面分析来执行</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">            <span class="comment">//小结</span></span><br><span class="line">            <span class="comment">//1. 如果正则表达式有() 即分组</span></span><br><span class="line">            <span class="comment">//2. 取出匹配的字符串规则如下</span></span><br><span class="line">            <span class="comment">//3. group(0) 表示匹配到的子字符串</span></span><br><span class="line">            <span class="comment">//4. group(1) 表示匹配到的子字符串的第一组字串</span></span><br><span class="line">            <span class="comment">//5. group(2) 表示匹配到的子字符串的第 2 组字串</span></span><br><span class="line">            <span class="comment">//6. ... 但是分组的数不能越界.</span></span><br><span class="line">            System.out.println(<span class="string">&quot;找到: &quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;第 1 组()匹配到的值=&quot;</span> + matcher.group(<span class="number">1</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;第 2 组()匹配到的值=&quot;</span> + matcher.group(<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="27-4-正则表达式语法"><a href="#27-4-正则表达式语法" class="headerlink" title="27.4 正则表达式语法"></a>27.4 正则表达式语法</h2><h3 id="27-4-1-基本介绍"><a href="#27-4-1-基本介绍" class="headerlink" title="27.4.1 基本介绍"></a>27.4.1 基本介绍</h3><p>元字符按照功能大致分为：</p>
<ul>
<li>限定符</li>
<li>选择匹配符</li>
<li>特殊字符</li>
<li>字符匹配符</li>
<li>定位符</li>
<li>分组组合和反向引用符</li>
</ul>
<h3 id="27-4-2-元字符-转义号"><a href="#27-4-2-元字符-转义号" class="headerlink" title="27.4.2 元字符 - 转义号 \\"></a>27.4.2 元字符 - 转义号 \\</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223123953145.png" alt="image-20240223123953145"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223124028575.png" alt="image-20240223124028575"></p>
<h3 id="27-6-3-元字符-字符匹配符"><a href="#27-6-3-元字符-字符匹配符" class="headerlink" title="27.6.3 元字符 - 字符匹配符"></a>27.6.3 元字符 - 字符匹配符</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226102714593.png" alt="image-20240226102714593"></p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226102725620.png" alt="image-20240226102725620"></p>
<table>
<thead>
<tr>
<th align="center">符号</th>
<th>含义</th>
<th>示例</th>
<th>说明</th>
<th>匹配输入</th>
</tr>
</thead>
<tbody><tr>
<td align="center">[ ]</td>
<td>可接收的字符列表</td>
<td>[efgh]</td>
<td>e、f、g、h中的任意1个字符</td>
<td></td>
</tr>
<tr>
<td align="center">[ ^ ]</td>
<td>不可接收的字符列表</td>
<td>[^abc]</td>
<td>除a、b、c、之外的任意1个字符，包含数字和特殊符号</td>
<td></td>
</tr>
<tr>
<td align="center">-</td>
<td>连字符</td>
<td>A-Z</td>
<td>任意单个大写字母</td>
<td></td>
</tr>
<tr>
<td align="center">.</td>
<td>匹配除了\n以外的任何字符</td>
<td>a..b</td>
<td>以a开头，b结尾，中间包含2个任意字符的长度为4的字符串</td>
<td>aaab, aefb, a35b</td>
</tr>
<tr>
<td align="center">\\d</td>
<td>匹配单个数字字符，相当于[0-9]</td>
<td>\\d{3}(\\d)?</td>
<td>包含3个或4个数字的字符串</td>
<td>123, 9876</td>
</tr>
<tr>
<td align="center">\\D</td>
<td>匹配单个非数字字符，相当于[^ 0-9]</td>
<td>\\D(\\d)*</td>
<td>以单个非数字字符开头，后接任意个数字符串</td>
<td>a, A342</td>
</tr>
<tr>
<td align="center">\\w</td>
<td>匹配单个数字，大小写字母字符，相当于[0-9a-zA-Z]</td>
<td>\\d{3}\\w{4}</td>
<td>以3个数字开头的长度为7的数字字母字符串</td>
<td>234abcd, 12345pe</td>
</tr>
<tr>
<td align="center">\\W</td>
<td>匹配单个非数字、大小写字母字符，相当于[^0-9a-zA-Z]</td>
<td>\\W+\\d{2}</td>
<td>以至少1个非数字字母字符开头，2个数字字符结尾的字符串</td>
<td>#29, #?@10</td>
</tr>
<tr>
<td align="center">\\s</td>
<td>匹配任何空白字符(空格,制表符等)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">\\S</td>
<td>匹配任何非空白字符</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">String content = <span class="string">&quot;a11c8abc _ABCy @&quot;</span>;</span><br><span class="line"><span class="comment">//String regStr = &quot;[a-z]&quot;;//匹配 a-z 之间任意一个字符</span></span><br><span class="line"><span class="comment">//String regStr = &quot;[A-Z]&quot;;//匹配 A-Z 之间任意一个字符</span></span><br><span class="line"><span class="comment">//String regStr = &quot;abc&quot;;//匹配 abc 字符串[默认区分大小写]</span></span><br><span class="line"><span class="comment">//String regStr = &quot;(?i)abc&quot;;//匹配 abc 字符串[不区分大小写]</span></span><br><span class="line"><span class="comment">//String regStr = &quot;[0-9]&quot;;//匹配 0-9 之间任意一个字符</span></span><br><span class="line"><span class="comment">//String regStr = &quot;[^a-z]&quot;;//匹配 不在 a-z 之间任意一个字符</span></span><br><span class="line"><span class="comment">//String regStr = &quot;[^0-9]&quot;;//匹配 不在 0-9 之间任意一个字符</span></span><br><span class="line"><span class="comment">//String regStr = &quot;[abcd]&quot;;//匹配 在 abcd 中任意一个字符</span></span><br><span class="line"><span class="comment">//String regStr = &quot;\\D&quot;;//匹配 不在 0-9 的任意一个字符</span></span><br><span class="line"><span class="comment">//String regStr = &quot;\\w&quot;;//匹配 大小写英文字母, 数字，下划线</span></span><br><span class="line"><span class="comment">//String regStr = &quot;\\W&quot;;//匹配 等价于 [^a-zA-Z0-9_]</span></span><br><span class="line"><span class="comment">//\\s 匹配任何空白字符(空格,制表符等)</span></span><br><span class="line"><span class="comment">//String regStr = &quot;\\s&quot;;</span></span><br><span class="line"><span class="comment">//\\S 匹配任何非空白字符 ,和\\s 刚好相反</span></span><br><span class="line"><span class="comment">//String regStr = &quot;\\S&quot;;</span></span><br><span class="line"><span class="comment">//. 匹配出 \n 之外的所有字符,如果要匹配.本身则需要使用 \\.</span></span><br><span class="line"><span class="comment">//String regStr = &quot;.&quot;;</span></span><br><span class="line"><span class="comment">//说明</span></span><br><span class="line"><span class="comment">//1. 当创建 Pattern 对象时，指定 Pattern.CASE_INSENSITIVE, 表示匹配是不区分字母大小写.</span></span><br><span class="line">Pattern pattern = Pattern.compile(regStr, Pattern.CASE_INSENSITIVE);</span><br><span class="line">Matcher matcher = pattern.matcher(content);</span><br><span class="line"><span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;找到 &quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="27-6-4-元字符-选择匹配符"><a href="#27-6-4-元字符-选择匹配符" class="headerlink" title="27.6.4 元字符 - 选择匹配符"></a>27.6.4 元字符 - 选择匹配符</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223133731633.png" alt="image-20240223133731633"></p>
<h3 id="27-6-5-元字符-限定符"><a href="#27-6-5-元字符-限定符" class="headerlink" title="27.6.5 元字符 - 限定符"></a>27.6.5 元字符 - 限定符</h3><p>用于指定其前面的字符和组合项连续出现多少次</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223133756832.png" alt="image-20240223133756832"></p>
<h3 id="27-6-6-元字符-定位符"><a href="#27-6-6-元字符-定位符" class="headerlink" title="27.6.6 元字符 - 定位符"></a>27.6.6 元字符 - 定位符</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223134820741.png" alt="image-20240223134820741"></p>
<h3 id="27-6-7-分组"><a href="#27-6-7-分组" class="headerlink" title="27.6.7 分组"></a>27.6.7 分组</h3><ul>
<li>捕获分组</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223150323017.png" alt="image-20240223150323017"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//非命名分组</span></span><br><span class="line">String regStr = <span class="string">&quot;(\\d\\d)(\\d\\d)&quot;</span>;<span class="comment">//匹配 4 个数字的字符串</span></span><br><span class="line"><span class="comment">//命名分组： 即可以给分组取名</span></span><br><span class="line">String regStr1 = <span class="string">&quot;(?&lt;g1&gt;\\d\\d)(?&lt;g2&gt;\\d\\d)&quot;</span>;<span class="comment">//匹配 4 个数字的字符串</span></span><br><span class="line">Pattern pattern = Pattern.compile(regStr);</span><br><span class="line">Matcher matcher = pattern.matcher(content);</span><br><span class="line"><span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;找到=&quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;第 1 个分组内容=&quot;</span> + matcher.group(<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;第 1 个分组内容[通过组名]=&quot;</span> + matcher.group(<span class="string">&quot;g1&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;第 2 个分组内容=&quot;</span> + matcher.group(<span class="number">2</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;第 2 个分组内容[通过组名]=&quot;</span> + matcher.group(<span class="string">&quot;g2&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>非捕获分组</li>
</ul>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223151121978.png" alt="image-20240223151121978"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">String content = <span class="string">&quot;hello 韩顺平教育 jack 韩顺平老师 韩顺平同学 hello 韩顺平学生&quot;</span>;</span><br><span class="line"><span class="comment">// 找到 韩顺平教育 、韩顺平老师、韩顺平同学 子字符串</span></span><br><span class="line"><span class="comment">//String regStr = &quot;韩顺平教育|韩顺平老师|韩顺平同学&quot;;</span></span><br><span class="line"><span class="comment">//上面的写法可以等价非捕获分组, 注意：不能 matcher.group(1)</span></span><br><span class="line">String regStr = <span class="string">&quot;韩顺平(?:教育|老师|同学)&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//找到 韩顺平 这个关键字,但是要求只是查找韩顺平教育和 韩顺平老师 中包含有的韩顺平</span></span><br><span class="line"><span class="comment">//下面也是非捕获分组，不能使用 matcher.group(1)</span></span><br><span class="line">String regStr1 = <span class="string">&quot;韩顺平(?=教育|老师)&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//找到 韩顺平 这个关键字,但是要求只是查找 不是 (韩顺平教育 和 韩顺平老师) 中包含有的韩顺平</span></span><br><span class="line"><span class="comment">//下面也是非捕获分组，不能使用 matcher.group(1)</span></span><br><span class="line">String regStr2 = <span class="string">&quot;韩顺平(?!教育|老师)&quot;</span>;</span><br><span class="line"></span><br><span class="line">Pattern pattern = Pattern.compile(regStr);</span><br><span class="line">Matcher matcher = pattern.matcher(content);</span><br><span class="line"><span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;找到: &quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="27-5-应用实例"><a href="#27-5-应用实例" class="headerlink" title="27.5 应用实例"></a>27.5 应用实例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">String content = <span class="string">&quot;13588889999&quot;</span>;</span><br><span class="line"><span class="comment">// 汉字</span></span><br><span class="line"><span class="comment">//String regStr = &quot;^[\u0391-\uffe5]+$&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 邮政编码</span></span><br><span class="line"><span class="comment">// 要求：1.是 1-9 开头的一个六位数. 比如：123890</span></span><br><span class="line"><span class="comment">//String regStr = &quot;^[1-9]\\d&#123;5&#125;$&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// QQ 号码</span></span><br><span class="line"><span class="comment">// 要求: 是 1-9 开头的一个(5 位数-10 位数) 比如: 12389 , 1345687 , 187698765</span></span><br><span class="line"><span class="comment">//String regStr = &quot;^[1-9]\\d&#123;4,9&#125;$&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机号码</span></span><br><span class="line"><span class="comment">// 要求: 必须以 13,14,15,18 开头的 11 位数 , 比如 13588889999</span></span><br><span class="line">String regStr = <span class="string">&quot;^1[3|4|5|8]\\d&#123;9&#125;$&quot;</span>;</span><br><span class="line"></span><br><span class="line">Pattern pattern = Pattern.compile(regStr);</span><br><span class="line">Matcher matcher = pattern.matcher(content);</span><br><span class="line"><span class="keyword">if</span>(matcher.find()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;满足格式&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;不满足格式&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//网址</span></span><br><span class="line"><span class="comment">//String content = &quot;https://www.bilibili.com/video/BV1fh411y7R8?from=search&amp;seid=1831060912083761326&quot;;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 思路</span></span><br><span class="line"><span class="comment">* 1. 先确定 url 的开始部分 https:// | http://</span></span><br><span class="line"><span class="comment">* 2.然后通过 ([\w-]+\.)+[\w-]+ 匹配 www.bilibili.com</span></span><br><span class="line"><span class="comment">* 3. (\/[\w-?=&amp;/%.#]*)? 匹配/video/BV1fh411y7R8?from=sear </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">String regStr1 = <span class="string">&quot;^((http|https)://)?([\\w-]+\\.)+[\\w-]+(\\/[\\w-?=&amp;/%.#]*)?$&quot;</span>;<span class="comment">//注意：[. ? *]表示匹配就是.本身</span></span><br></pre></td></tr></table></figure>



<h2 id="27-6-正则表达式三个常用类"><a href="#27-6-正则表达式三个常用类" class="headerlink" title="27.6 正则表达式三个常用类"></a>27.6 正则表达式三个常用类</h2><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240223154309577.png" alt="image-20240223154309577"></p>
<ul>
<li>常用方法<ul>
<li>boolean Pattern.maches(regStr, content) 整体匹配</li>
<li>boolean Macher.maches() 整体匹配</li>
<li>int Macher.start()     int Macher.end() 返回匹配的索引</li>
<li>String Macher.replaceAll(String s) 替换匹配的子串</li>
</ul>
</li>
</ul>
<h2 id="27-8-分组、捕获、反向引用"><a href="#27-8-分组、捕获、反向引用" class="headerlink" title="27.8 分组、捕获、反向引用"></a>27.8 分组、捕获、反向引用</h2><h3 id="27-8-1-提出需求"><a href="#27-8-1-提出需求" class="headerlink" title="27.8.1 提出需求"></a>27.8.1 提出需求</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226100609246.png" alt="image-20240226100609246"></p>
<h3 id="27-8-2-介绍"><a href="#27-8-2-介绍" class="headerlink" title="27.8.2 介绍"></a>27.8.2 介绍</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226100742475.png" alt="image-20240226100742475"></p>
<h3 id="27-8-3-看几个小案例"><a href="#27-8-3-看几个小案例" class="headerlink" title="27.8.3 看几个小案例"></a>27.8.3 看几个小案例</h3><p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226101541332.png" alt="image-20240226101541332"></p>
<h3 id="27-8-4-经典的结巴程序"><a href="#27-8-4-经典的结巴程序" class="headerlink" title="27.8.4 经典的结巴程序"></a>27.8.4 经典的结巴程序</h3><p>把 类似 : “我….我要….学学学学….编程 java!”; 通过正则表达式 修改成 “我要学编程 java” </p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226103540076.png" alt="image-20240226103540076"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegExp13</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String content = <span class="string">&quot;我....我要....学学学学....编程 java!&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 去掉所有的.</span></span><br><span class="line">        Pattern pattern = Pattern.compile(<span class="string">&quot;\\.&quot;</span>);</span><br><span class="line">        Matcher matcher = pattern.matcher(content);</span><br><span class="line">        <span class="comment">//注意：返回的字符串才是替换后的字符串 原来的 content 不变化</span></span><br><span class="line">        content = matcher.replaceAll(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;newContent=&quot;</span> + content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 去掉重复的字 我我要学学学学编程 java</span></span><br><span class="line">        <span class="comment">// 思路</span></span><br><span class="line">        <span class="comment">//(1) 使用 (.)\\1+ 匹配到 (我)我 (学)学学学</span></span><br><span class="line">        <span class="comment">//(2) 使用 反向引用$1 来替换匹配到的内容</span></span><br><span class="line">        <span class="comment">// 注意：因为正则表达式变化，所以需要重置 matcher</span></span><br><span class="line">        pattern = Pattern.compile(<span class="string">&quot;(.)\\1+&quot;</span>);<span class="comment">//分组的捕获内容记录到$1</span></span><br><span class="line">        matcher = pattern.matcher(content);</span><br><span class="line">        <span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;找到=&quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 使用 反向引用$1 来替换匹配到的内容</span></span><br><span class="line">        content = matcher.replaceAll(<span class="string">&quot;$1&quot;</span>); <span class="comment">//用(我)替换(我)我；(学)替换(学)学学学</span></span><br><span class="line">        System.out.println(<span class="string">&quot;content=&quot;</span> + content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 使用一条语句 去掉重复的字 我我要学学学学编程 java!</span></span><br><span class="line">        content = Pattern.compile(<span class="string">&quot;(.)\\1+&quot;</span>).matcher(content).replaceAll(<span class="string">&quot;$1&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;content=&quot;</span> + content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="27-9-String-类中使用正则表达式"><a href="#27-9-String-类中使用正则表达式" class="headerlink" title="27.9 String 类中使用正则表达式"></a>27.9 String 类中使用正则表达式</h2><h3 id="27-9-1-替换功能"><a href="#27-9-1-替换功能" class="headerlink" title="27.9.1 替换功能"></a>27.9.1 替换功能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String content = <span class="string">&quot;2000 年 5 月，JDK1.3、JDK1.4 和 J2SE1.3 相继发布，几周后其&quot;</span> +</span><br><span class="line">                <span class="string">&quot;获得了 Apple 公司 Mac OS X 的工业标准的支持。2001 年 9 月 24 日，J2EE1.3 发				 布。2002 年 2 月 26 日，J2SE1.4 发布。自此 Java 的计算能力有了大幅提升&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用正则表达式方式，将 JDK1.3 和 JDK1.4 替换成 JDK</span></span><br><span class="line"><span class="comment">//content = content.replaceAll(&quot;JDK1\\.3|JDK1\\.4&quot;, &quot;JDK&quot;);</span></span><br><span class="line">content = content.replaceAll(<span class="string">&quot;JDK1(\\.3|\\.4)&quot;</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">System.out.println(content);</span><br></pre></td></tr></table></figure>



<h3 id="27-9-2-判断功能"><a href="#27-9-2-判断功能" class="headerlink" title="27.9.2 判断功能"></a>27.9.2 判断功能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//要求 验证一个 手机号， 要求必须是以 138 139 开头的</span></span><br><span class="line">content = <span class="string">&quot;13888889999&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (content.matches(<span class="string">&quot;1(38|39)\\d&#123;8&#125;&quot;</span>)) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;验证成功&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;验证失败&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="27-9-3-分割功能"><a href="#27-9-3-分割功能" class="headerlink" title="27.9.3 分割功能"></a>27.9.3 分割功能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//要求按照 # 或者 - 或者 ~ 或者 数字 来分割字符串</span></span><br><span class="line">System.out.println(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line">content = <span class="string">&quot;hello#abc-jack12smith~北京&quot;</span>;</span><br><span class="line">String[] split = content.split(<span class="string">&quot;#|-|~|\\d+&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (String s : split) &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="27-10-Homeworks"><a href="#27-10-Homeworks" class="headerlink" title="27.10 Homeworks"></a>27.10 Homeworks</h2><ul>
<li><p>Homework01</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226113849814.png" alt="image-20240226113849814"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">String content = <span class="string">&quot;1530268781@qq.com&quot;</span>;</span><br><span class="line">String regStr = <span class="string">&quot;^[\\w-]+@([a-zA-Z]+\\.)+[a-zA-Z]+$&quot;</span>;</span><br><span class="line"></span><br><span class="line">Pattern pattern = Pattern.compile(regStr);</span><br><span class="line">Matcher matcher = pattern.matcher(content);</span><br><span class="line"><span class="keyword">boolean</span> matches = matcher.matches();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (content.matches(regStr)) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;输入合法&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;输入不合法&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Homework02</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226113936314.png" alt="image-20240226113936314"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 要求验证是不是整数或者小数</span></span><br><span class="line"><span class="comment">* 要求考虑整数和负数 如123 -123 3.14 -3.14</span></span><br><span class="line"><span class="comment">* 思路：</span></span><br><span class="line"><span class="comment">* 先写出简单的正则表达式，再逐步完善</span></span><br><span class="line"><span class="comment">* 考虑 0012.3 不是规范的，0.3是规范的，将</span></span><br><span class="line"><span class="comment">* \\d+ 改成 [1-9]\\d*|0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">String content = <span class="string">&quot;12.3&quot;</span>;</span><br><span class="line">String regStr = <span class="string">&quot;^[-+]?([1-9]\\d*|0)(\\.\\d+)?$&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (content.matches(regStr)) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;匹配成功&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;匹配失败&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Homework03</p>
<p><img src="/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20240226114121201.png" alt="image-20240226114121201"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 对一个url进行解析</span></span><br><span class="line"><span class="comment">* 协议 如 http: https:</span></span><br><span class="line"><span class="comment">* 域名 如 www.suhu.com</span></span><br><span class="line"><span class="comment">* 端口 如 8080</span></span><br><span class="line"><span class="comment">* 文件名 如 index.htm</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">String content = <span class="string">&quot;http://www.sohu.com:8080/abc/xxx/index.htm&quot;</span>;</span><br><span class="line">String regStr = <span class="string">&quot;^([a-zA-Z]+)://([a-zA-Z.]+):(\\d+)([\\w-/]*)/([\\w.]+)$&quot;</span>;</span><br><span class="line"></span><br><span class="line">Pattern pattern = Pattern.compile(regStr);</span><br><span class="line">Matcher matcher = pattern.matcher(content);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;整体匹配=&quot;</span> + matcher.group(<span class="number">0</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;协议=&quot;</span> + matcher.group(<span class="number">1</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;域名=&quot;</span> + matcher.group(<span class="number">2</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;端口=&quot;</span> + matcher.group(<span class="number">3</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;路径=&quot;</span> + matcher.group(<span class="number">4</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;文件名=&quot;</span> + matcher.group(<span class="number">5</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;匹配失败&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:1530268781@qq.com">Durango</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.durango.cn/2023/09/06/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">https://www.durango.cn/2023/09/06/Java学习笔记/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.durango.cn" target="_blank">Welcome to Durango's blog!</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post_share"><div class="social-share" data-image="/img/java_cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.png" target="_blank"><img class="post-qr-code-img" src="/img/alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/02/26/Java%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"><img class="prev-cover" src="/img/java_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java常用正则表达式</div></div></a></div><div class="next-post pull-right"><a href="/2022/11/30/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E9%AA%8C/"><img class="next-cover" src="/img/ML_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">机器学习实验</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/02/26/Java常用正则表达式/" title="Java常用正则表达式"><img class="cover" src="/img/java_cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-26</div><div class="title">Java常用正则表达式</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%94-%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5-%E2%80%94"><span class="toc-text">— 第一阶段 —</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%86%85%E5%AE%B9%E4%BB%8B%E7%BB%8D"><span class="toc-text">第一章 内容介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-Java%E6%A6%82%E8%BF%B0"><span class="toc-text">第二章 Java概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Java%E5%8E%86%E5%8F%B2"><span class="toc-text">2.1 Java历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Java-%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E5%B9%B3%E5%8F%B0"><span class="toc-text">2.2 Java 技术体系平台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Java%E8%AF%AD%E8%A8%80%E7%89%B9%E7%82%B9"><span class="toc-text">2.3 Java语言特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%8F%8A%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">2.4 Java虚拟机及运行过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-JDK-JRE"><span class="toc-text">2.5 JDK JRE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-Java%E6%B3%A8%E9%87%8A"><span class="toc-text">2.6 Java注释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-Java%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83"><span class="toc-text">2.7 Java代码规范</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">第三章 基本数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E5%BF%85%E8%83%8C%EF%BC%89"><span class="toc-text">3.1 数据类型（必背）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.2 整数类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.3 浮点类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.4 字符类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.5 布尔类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">3.6 数据类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-1-%E8%87%AA%E5%8A%A8%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%EF%BC%88%E5%BF%85%E8%83%8C%EF%BC%89"><span class="toc-text">3.6.1. 自动类型转换（必背）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-2-%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">3.6.2 强制类型转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-3-%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2"><span class="toc-text">3.6.3 与字符串转换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">第四章 运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">4.1 算数运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">4.2 关系运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">4.3 逻辑运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">4.4 赋值运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">4.5 三元运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-text">4.6 标识符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5"><span class="toc-text">4.7 键盘输入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-%E8%BF%9B%E5%88%B6%EF%BC%88%E5%9F%BA%E6%9C%AC%E5%8A%9F%EF%BC%89"><span class="toc-text">4.8 进制（基本功）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-1-%E8%BF%9B%E5%88%B6%E4%BB%8B%E7%BB%8D"><span class="toc-text">4.8.1 进制介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-2-%E8%BF%9B%E5%88%B6%E8%BD%AC%E5%8C%96"><span class="toc-text">4.8.2 进制转化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-3-%E6%BA%90%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E3%80%81%E8%A1%A5%E7%A0%81%EF%BC%88%E5%BF%85%E8%83%8C%EF%BC%89"><span class="toc-text">4.8.3 源码、反码、补码（必背）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-text">4.9 位运算</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="toc-text">第五章 程序控制结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E9%A1%BA%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-text">5.1 顺序结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E5%88%86%E6%94%AF%E6%8E%A7%E5%88%B6"><span class="toc-text">5.2 分支控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-text">5.3 循环控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-for%E5%BE%AA%E7%8E%AF"><span class="toc-text">5.3.1 for循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-while%E5%BE%AA%E7%8E%AF"><span class="toc-text">5.3.2 while循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-3-do-while%E5%BE%AA%E7%8E%AF"><span class="toc-text">5.3.3 do while循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-4-%E5%B5%8C%E5%A5%97%E5%BE%AA%E7%8E%AF"><span class="toc-text">5.3.4 嵌套循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-5-break%E8%B7%B3%E8%BD%AC"><span class="toc-text">5.3.5 break跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-6-continue%E8%B7%B3%E8%BD%AC"><span class="toc-text">5.3.6 continue跳转</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E6%95%B0%E7%BB%84"><span class="toc-text">第六章 数组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">6.1 数组初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">6.1.1 静态初始化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E6%95%B0%E7%BB%84%E6%8B%B7%E8%B4%9D"><span class="toc-text">6.4 数组拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E6%95%B0%E7%BB%84%E5%8F%8D%E8%BD%AC"><span class="toc-text">6.5 数组反转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E6%95%B0%E7%BB%84%E6%89%A9%E5%AE%B9"><span class="toc-text">6.6 数组扩容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">6.8 二维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-1-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">6.8.1 初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-2-%E5%BA%94%E7%94%A8-%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92"><span class="toc-text">6.8.2 应用-杨辉三角</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89"><span class="toc-text">第七章 面向对象编程（基础）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1"><span class="toc-text">7.1 类与对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB"><span class="toc-text">7.1.1 类与对象的区别和联系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-2-%E5%AF%B9%E8%B1%A1%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%AD%98%E5%9C%A8%E5%BD%A2%E5%BC%8F%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">7.1.2 对象在内存中存在形式（重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-3-%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F-%E5%B1%9E%E6%80%A7-%E5%AD%97%E6%AE%B5"><span class="toc-text">7.1.3 成员变量|属性|字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-4-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-text">7.1.4 创建对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-5-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E6%9C%BA%E5%88%B6%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">7.1.5 类和对象的内存分配机制（重要！）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95"><span class="toc-text">7.2 成员方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8%E6%9C%BA%E5%88%B6%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">7.2.1 方法的调用机制（重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">7.2.2 方法的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-3-%E6%96%B9%E6%B3%95%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">7.2.3 方法的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-4-%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82"><span class="toc-text">7.2.4 方法的使用细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-5-%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8"><span class="toc-text">7.2.5 方法的调用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95%E7%9A%84%E4%BC%A0%E5%8F%82%E6%9C%BA%E5%88%B6%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">7.3 成员方法的传参机制（重要！）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-1-%E5%80%BC%E4%BC%A0%E9%80%92"><span class="toc-text">7.3.1 值传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-2-%E5%9C%B0%E5%9D%80%E4%BC%A0%E9%80%92"><span class="toc-text">7.3.2 地址传递</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-%E9%80%92%E5%BD%92%E8%B0%83%E7%94%A8"><span class="toc-text">7.4 递归调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-1-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">7.4.1 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-2-%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-text">7.4.2 执行机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-%E6%96%B9%E6%B3%95%E9%87%8D%E8%BD%BD-Overload"><span class="toc-text">7.5 方法重载 Overload</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-text">7.6 可变参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-7-%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">7.7 作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-8-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-text">7.8 构造方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">7.8.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">7.8.2 注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-9-%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E7%9A%84%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">7.9 对象创建的流程分析（重要！）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-10-this%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">7.10 this关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-1-%E5%86%85%E5%AD%98%E7%A4%BA%E6%84%8F%E5%9B%BE"><span class="toc-text">7.10.1 内存示意图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-10-2-this%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">7.10.2 this注意事项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%AD%E7%BA%A7%EF%BC%89"><span class="toc-text">第八章 面向对象编程（中级）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7IDEA"><span class="toc-text">8.1 开发工具IDEA</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">8.1.1 目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">8.1.2 常用快捷键（重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E6%9D%BF%EF%BC%88%E6%8F%90%E9%AB%98%E5%BC%80%E5%8F%91%E9%80%9F%E5%BA%A6%EF%BC%89"><span class="toc-text">8.1.3 自定义模板（提高开发速度）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%8C%85"><span class="toc-text">8.2 包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">8.4.1 作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-2-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">8.4.2 基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-3-%E5%8C%85%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-text">8.4.3 包的本质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-4-%E5%8C%85%E7%9A%84%E5%91%BD%E5%90%8D"><span class="toc-text">8.4.4 包的命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-5-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8C%85"><span class="toc-text">8.4.5 常用的包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-6-%E5%8C%85%E7%9A%84%E5%AF%BC%E5%85%A5"><span class="toc-text">8.4.6 包的导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-9-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">8.4.9 注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-%E8%AE%BF%E9%97%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6-Modifier"><span class="toc-text">8.5 访问修饰符 Modifier</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D%EF%BC%88%E5%BF%85%E8%83%8C%EF%BC%89"><span class="toc-text">8.5.1 基本介绍（必背）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">8.5.2 注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-6-%E5%B0%81%E8%A3%85-Encapsulation"><span class="toc-text">8.6 封装 Encapsulation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-1-%E5%B0%81%E8%A3%85%E4%BB%8B%E7%BB%8D"><span class="toc-text">8.6.1 封装介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-2-%E4%BD%9C%E7%94%A8"><span class="toc-text">8.6.2 作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-3-%E5%B0%81%E8%A3%85%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">8.6.3 封装实现步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-4-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">8.6.4 快速入门案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-7-%E7%BB%A7%E6%89%BF-Extends"><span class="toc-text">8.7 继承 Extends</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-1-%E7%BB%A7%E6%89%BF%E4%BB%8B%E7%BB%8D"><span class="toc-text">8.7.1 继承介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-2-%E7%BB%A7%E6%89%BF%E7%BB%86%E8%8A%82"><span class="toc-text">8.7.2 继承细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-3-%E7%BB%A7%E6%89%BF%E6%9C%AC%E8%B4%A8%E5%88%86%E6%9E%90%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">8.7.3 继承本质分析（重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-4-%E6%9C%AC%E8%B4%A8%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B"><span class="toc-text">8.7.4 本质分析案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-8-super%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">8.8 super关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">8.8.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-2-%E4%BD%9C%E7%94%A8%E5%92%8C%E7%BB%86%E8%8A%82"><span class="toc-text">8.8.2 作用和细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-3-super%E5%92%8Cthis%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-text">8.8.3 super和this的比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-9-%E6%96%B9%E6%B3%95%E9%87%8D%E5%86%99-%E9%87%8D%E6%9E%84-%E8%A6%86%E7%9B%96-Override"><span class="toc-text">8.9 方法重写&#x2F;重构&#x2F;覆盖 Override</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">8.9.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">8.9.2 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9-3-%E9%87%8D%E5%86%99%E4%B8%8E%E9%87%8D%E8%BD%BD%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-text">8.9.3 重写与重载的比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-9-4-%E6%A1%88%E4%BE%8B"><span class="toc-text">8.9.4 案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-10-%E5%A4%9A%E6%80%81-Polymorphic"><span class="toc-text">8.10 多态 Polymorphic</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-10-1-%E4%B8%80%E4%B8%AA%E5%9C%BA%E6%99%AF"><span class="toc-text">8.10.1 一个场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-10-2-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">8.10.2 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-10-3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">8.10.3 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-10-4-java%E7%9A%84%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E6%9C%BA%E5%88%B6%EF%BC%88%E9%9D%9E%E5%B8%B8%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">8.10.4 java的动态绑定机制（非常重要！）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-11-%E5%A4%9A%E6%80%81%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">8.11 多态的应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-11-1-%E5%A4%9A%E6%80%81%E6%95%B0%E7%BB%84"><span class="toc-text">8.11.1 多态数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-11-2-%E5%A4%9A%E6%80%81%E5%8F%82%E6%95%B0"><span class="toc-text">8.11.2 多态参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-12-Object%E7%B1%BB%E8%AF%A6%E8%A7%A3"><span class="toc-text">8.12 Object类详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-12-1-equals%E6%96%B9%E6%B3%95"><span class="toc-text">8.12.1 equals方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-12-2-hashcode%E6%96%B9%E6%B3%95"><span class="toc-text">8.12.2 hashcode方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-12-2-toString%E6%96%B9%E6%B3%95"><span class="toc-text">8.12.2 toString方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-12-3-finalize-%E6%96%B9%E6%B3%95"><span class="toc-text">8.12.3 finalize 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-13-%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95-debug"><span class="toc-text">8.13 断点调试 debug</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-13-1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">8.13.1 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-13-2-%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-text">8.13.2  快捷键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-13-3-%E6%A1%88%E4%BE%8B"><span class="toc-text">8.13.3 案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-14-%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%9B%B6%E9%92%B1%E9%80%9A"><span class="toc-text">8.14 案例：零钱通</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-%E9%A1%B9%E7%9B%AE%EF%BC%9A%E6%88%BF%E5%B1%8B%E5%87%BA%E7%A7%9F%E7%B3%BB%E7%BB%9F"><span class="toc-text">第九章 项目：房屋出租系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82"><span class="toc-text">9.1 项目需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1"><span class="toc-text">9.2  界面设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"><span class="toc-text">9.3 系统设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0"><span class="toc-text">9.4 系统实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-1-%E4%BA%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E5%BA%93"><span class="toc-text">9.4.1 了解和使用工具库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-2-%E5%AE%8C%E6%88%90House%E7%B1%BB"><span class="toc-text">9.4.2 完成House类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-3-%E6%98%BE%E7%A4%BA%E4%B8%BB%E8%8F%9C%E5%8D%95%E5%92%8C%E5%AE%8C%E6%88%90%E9%80%80%E5%87%BA%E8%BD%AF%E4%BB%B6%E5%8A%9F%E8%83%BD"><span class="toc-text">9.4.3 显示主菜单和完成退出软件功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-4-%E6%98%BE%E7%A4%BA%E6%88%BF%E5%B1%8B%E5%88%97%E8%A1%A8%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">9.4.4 显示房屋列表的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-5-%E6%B7%BB%E5%8A%A0%E6%88%BF%E5%B1%8B%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">9.4.5 添加房屋信息的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-6-%E5%88%A0%E9%99%A4%E6%88%BF%E5%B1%8B%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">9.4.6 删除房屋信息的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-7-%E9%80%80%E5%87%BA%E7%A1%AE%E8%AE%A4%E5%8A%9F%E8%83%BD"><span class="toc-text">9.4.7 退出确认功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-8-%E6%9F%A5%E6%89%BE%E6%88%BF%E5%B1%8B%E4%BF%A1%E6%81%AF%E5%8A%9F%E8%83%BD"><span class="toc-text">9.4.8 查找房屋信息功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-9-%E4%BF%AE%E6%94%B9%E6%88%BF%E5%B1%8B%E4%BF%A1%E6%81%AF%E5%8A%9F%E8%83%BD"><span class="toc-text">9.4.9 修改房屋信息功能</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%94-%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5-%E2%80%94"><span class="toc-text">— 第二阶段 —</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%EF%BC%88%E9%AB%98%E7%BA%A7%EF%BC%89"><span class="toc-text">第十章 面向对象编程（高级）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E7%B1%BB%E5%8F%98%E9%87%8F%E5%92%8C%E7%B1%BB%E6%96%B9%E6%B3%95%EF%BC%88static%EF%BC%89"><span class="toc-text">10.1 类变量和类方法（static）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-1-%E7%B1%BB%E5%8F%98%E9%87%8F%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">10.1.1 类变量快速入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-2-%E7%B1%BB%E5%8F%98%E9%87%8F%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80"><span class="toc-text">10.1.2 类变量内存布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-3-%E7%B1%BB%E5%8F%98%E9%87%8F%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.2.3 类变量基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-4-%E7%B1%BB%E5%8F%98%E9%87%8F%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">10.2.4 类变量注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-5-%E7%B1%BB%E6%96%B9%E6%B3%95%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.2.5 类方法基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-5-%E7%B1%BB%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">10.2.5 类方法使用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-5-%E7%B1%BB%E6%96%B9%E6%B3%95%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">10.2.5 类方法注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-main%E6%96%B9%E6%B3%95"><span class="toc-text">10.2 main方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-1-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3main%E6%96%B9%E6%B3%95"><span class="toc-text">10.2.1 深入理解main方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-2-%E7%89%B9%E5%88%AB%E6%8F%90%E7%A4%BA"><span class="toc-text">10.2.2 特别提示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-2-%E5%9C%A8IDEA%E4%B8%AD%E7%BB%99Main-%E4%BC%A0%E5%8F%82"><span class="toc-text">10.2.2 在IDEA中给Main()传参</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-text">10.3 代码块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.3.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-2-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">10.3.2 基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-3-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E5%A5%BD%E5%A4%84"><span class="toc-text">10.3.3 使用场景和好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-4-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%81%EF%BC%89"><span class="toc-text">10.3.4 注意事项（重要！！）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88static%E5%AE%9E%E8%B7%B5%EF%BC%89"><span class="toc-text">10.4 单例设计模式（static实践）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-1-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-text">10.4.1 设计模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-2-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-text">10.4.2 单例模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-3-%E8%AE%BE%E8%AE%A1%E6%AD%A5%E9%AA%A4"><span class="toc-text">10.4.3 设计步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-4-%E6%81%B6%E6%B1%89%E5%BC%8F%E5%92%8C%E6%87%92%E6%B1%89%E5%BC%8F"><span class="toc-text">10.4.4 恶汉式和懒汉式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-5-final%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">10.5 final关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.5.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">10.5.2 注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-6-%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-text">10.6  抽象类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.6.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-%EF%BC%88%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%80%83%EF%BC%89"><span class="toc-text">10.6.2 注意事项 （面试常考）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-7-%E6%A8%A1%E6%9D%BF%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88abstract%E5%AE%9E%E8%B7%B5%EF%BC%89"><span class="toc-text">10.7 模板设计模式（abstract实践）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-8-%E6%8E%A5%E5%8F%A3%EF%BC%88interface%EF%BC%89"><span class="toc-text">10.8 接口（interface）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.8.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-2-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">10.8.2 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">10.8.3 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-4-%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3-VS-%E7%BB%A7%E6%89%BF%E7%B1%BB"><span class="toc-text">10.8.4 实现接口 VS 继承类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-5-%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%A4%9A%E6%80%81%E7%89%B9%E6%80%A7"><span class="toc-text">10.8.5 接口的多态特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-9-%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">10.9 内部类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.9.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-2-%E5%88%86%E7%B1%BB"><span class="toc-text">10.9.2 分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-3-%E5%B1%80%E9%83%A8%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">10.9.3 局部内部类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-4-%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%89"><span class="toc-text">10.9.4 匿名内部类（重要！！！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-5-%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">10.9.5 匿名内部类最佳实践</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-6-%E6%88%90%E5%91%98%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">10.9.6 成员内部类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-6-%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">10.9.6 静态内部类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3"><span class="toc-text">第十一章 枚举和注解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%AE%9E%E7%8E%B0%E6%9E%9A%E4%B8%BE"><span class="toc-text">11.1 自定义类实现枚举</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-enum%E5%85%B3%E9%94%AE%E5%AD%97%E5%AE%9E%E7%8E%B0%E6%9E%9A%E4%B8%BE"><span class="toc-text">11.2 enum关键字实现枚举</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-1-%E8%AF%B4%E6%98%8E"><span class="toc-text">11.2.1 说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">11.2.2 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-3-Enum%E7%B1%BB%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">11.2.3 Enum类常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-4-enum%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3"><span class="toc-text">11.2.4 enum实现接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-%E6%B3%A8%E8%A7%A3%EF%BC%88Annotation%EF%BC%89"><span class="toc-text">11.3 注解（Annotation）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E7%9A%84Annotation"><span class="toc-text">11.4 三个基本的Annotation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-5-JDK%E7%9A%84%E5%85%83%E6%B3%A8%E8%A7%A3%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-text">11.5 JDK的元注解（了解）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">11.5.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-2-Retention"><span class="toc-text">11.5.2 Retention</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-3-Target"><span class="toc-text">11.5.3 Target</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-4-Documented"><span class="toc-text">11.5.4 Documented</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-5-Inherited"><span class="toc-text">11.5.5 Inherited</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-%E5%BC%82%E5%B8%B8"><span class="toc-text">第十二章 异常</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">12.1 基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-%E5%BC%82%E5%B8%B8%E4%BD%93%E7%B3%BB%E5%9B%BE"><span class="toc-text">12.2 异常体系图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3-%E5%B8%B8%E8%A7%81%E8%BF%90%E8%A1%8C%E6%97%B6%E5%BC%82%E5%B8%B8"><span class="toc-text">12.3 常见运行时异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4-%E5%B8%B8%E8%A7%81%E7%BC%96%E8%AF%91%E5%BC%82%E5%B8%B8"><span class="toc-text">12.4 常见编译异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-5-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">12.5 异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-6-try-catch-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">12.6 try-catch 异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-7-try-catch-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%BB%83%E4%B9%A0"><span class="toc-text">12.7 try-catch 异常处理练习</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-8-throws%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">12.8 throws异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-9-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-text">12.9 自定义异常</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-9-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">12.9.1 基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-9-2-%E6%AD%A5%E9%AA%A4"><span class="toc-text">12.9.2 步骤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0-%E5%B8%B8%E7%94%A8%E7%B1%BB"><span class="toc-text">第十三章 常用类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1-%E5%8C%85%E8%A3%85%E7%B1%BB"><span class="toc-text">13.1 包装类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-1-%E5%8C%85%E8%A3%85%E7%B1%BB%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">13.1.1 包装类的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-2-%E5%8C%85%E8%A3%85%E7%B1%BB%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">13.1.2 包装类与基本数据类型转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-3-%E5%8C%85%E8%A3%85%E7%B1%BB%E4%B8%8EString%E7%9B%B8%E4%BA%92%E8%BD%AC%E5%8C%96"><span class="toc-text">13.1.3 包装类与String相互转化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-4-Integer%E7%B1%BB-%E5%92%8C-Character%E7%B1%BB%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">13.1.4 Integer类 和 Character类的常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-5-%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">13.1.5 经典面试题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-String%E7%B1%BB-%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">13.2 String类 （重要！）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-1-String%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">13.2.1 String基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-2-%E5%88%9B%E5%BB%BA-String-%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">13.2.2 创建 String 对象的两种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-3-%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-text">13.2.3 练习题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%89%B9%E6%80%A7%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">13.3 字符串特性及面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%89%B9%E6%80%A7"><span class="toc-text">13.3.1 字符串特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-String%E7%B1%BB%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95"><span class="toc-text">13.4 String类常见方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-5-StringBuffer%E7%B1%BB"><span class="toc-text">13.5 StringBuffer类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">13.5.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-2-StingBuffer-VS-String-%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">13.5.2 StingBuffer VS String （重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-3-StringBuffer%E4%B8%8EString%E7%9B%B8%E4%BA%92%E8%BD%AC%E5%8C%96"><span class="toc-text">13.5.3 StringBuffer与String相互转化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-4-StringBuffer%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">13.5.4 StringBuffer常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-5-%E6%B5%8B%E8%AF%95%E9%A2%98"><span class="toc-text">13.5.5 测试题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-6-StringBuilder"><span class="toc-text">13.6 StringBuilder</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">13.6.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-2-String-StringBuffer-StringBuilder%E6%AF%94%E8%BE%83%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">13.6.2 String StringBuffer StringBuilder比较（重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-3-%E6%95%88%E7%8E%87%E6%B5%8B%E8%AF%95"><span class="toc-text">13.6.3 效率测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-7-Math%E7%B1%BB"><span class="toc-text">13.7 Math类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-8-Arrays%E7%B1%BB"><span class="toc-text">13.8 Arrays类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-8-1-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">13.8.1 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-8-2-%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-text">13.8.2 练习题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-9-System%E7%B1%BB"><span class="toc-text">13.9 System类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-10-BigInteger-%E5%92%8C-BigDecimal-%E7%B1%BB"><span class="toc-text">13.10 BigInteger 和 BigDecimal 类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-11-%E6%97%A5%E6%9C%9F%E7%B1%BB"><span class="toc-text">13.11 日期类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-11-1-%E7%AC%AC%E4%B8%80%E4%BB%A3%E6%97%A5%E6%9C%9F%E7%B1%BB-Date"><span class="toc-text">13.11.1 第一代日期类 Date</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-11-2-%E7%AC%AC%E4%BA%8C%E4%BB%A3%E6%97%A5%E6%9C%9F%E7%B1%BB-Calendar"><span class="toc-text">13.11.2 第二代日期类 Calendar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-11-3-%E7%AC%AC%E4%B8%89%E4%BB%A3%E6%97%A5%E6%9C%9F%E7%B1%BB-LocalDateTime"><span class="toc-text">13.11.3 第三代日期类 LocalDateTime</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-%E9%9B%86%E5%90%88"><span class="toc-text">第十四章 集合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#14-1-%E9%9B%86%E5%90%88%E4%BB%8B%E7%BB%8D"><span class="toc-text">14.1 集合介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-2-%E6%A1%86%E6%9E%B6%E4%BD%93%E7%B3%BB%E5%9B%BE%EF%BC%88%E5%BF%85%E8%83%8C%EF%BC%89"><span class="toc-text">14.2 框架体系图（必背）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-3-Collection%E6%8E%A5%E5%8F%A3"><span class="toc-text">14.3 Collection接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-1-%E5%AE%9E%E7%8E%B0%E7%B1%BB%E7%9A%84%E7%89%B9%E7%82%B9%E5%92%8C%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">14.3.1 实现类的特点和常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-2-%E9%81%8D%E5%8E%861-Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text">14.3.2 遍历1 - Iterator迭代器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-2-%E9%81%8D%E5%8E%863-for%E5%BE%AA%E7%8E%AF%E5%A2%9E%E5%BC%BA"><span class="toc-text">14.3.2 遍历3 - for循环增强</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-4-List%E6%8E%A5%E5%8F%A3"><span class="toc-text">14.4 List接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-4-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">14.4.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-4-2-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">14.4.2 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-3-%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-text">14.3.3 遍历方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-5-List-ArrayList"><span class="toc-text">14.5 List - ArrayList</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-5-1-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">14.5.1 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-5-2-%E5%BA%95%E5%B1%82%E6%93%8D%E4%BD%9C%E6%9C%BA%E5%88%B6%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">14.5.2 底层操作机制（重要！）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-6-List-Vector"><span class="toc-text">14.6 List - Vector</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-6-1-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">14.6.1 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-6-2-%E5%BA%95%E5%B1%82%E6%93%8D%E4%BD%9C%E6%9C%BA%E5%88%B6%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">14.6.2 底层操作机制（重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-6-3-Vector-%E5%92%8C-ArrayList-%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-text">14.6.3 Vector 和 ArrayList 的比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-7-List-LinkedList"><span class="toc-text">14.7 List - LinkedList</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-1-LinkedList-%E7%9A%84%E5%85%A8%E9%9D%A2%E8%AF%B4%E6%98%8E"><span class="toc-text">14.7.1 LinkedList 的全面说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-2-%E5%BA%95%E5%B1%82%E6%93%8D%E4%BD%9C%E6%9C%BA%E5%88%B6"><span class="toc-text">14.7.2 底层操作机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-7-3-ArrayList%E5%92%8CLinked%E6%AF%94%E8%BE%83"><span class="toc-text">14.7.3 ArrayList和Linked比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-8-Set%E6%8E%A5%E5%8F%A3"><span class="toc-text">14.8 Set接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-8-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">14.8.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-8-2-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">14.8.2 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-8-3-%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-text">14.8.3 遍历方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-9-Set-HashSet"><span class="toc-text">14.9 Set - HashSet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-9-1-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">14.9.1 基本说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-9-2-HashSet%E5%BA%95%E5%B1%82%E6%9C%BA%E5%88%B6"><span class="toc-text">14.9.2 HashSet底层机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-9-3-HashSet%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-text">14.9.3 HashSet练习题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-10-Set-LinkedHashSet"><span class="toc-text">14.10 Set - LinkedHashSet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-10-1-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">14.10.1 基本说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-10-2-LinkedHashSet%E5%BA%95%E5%B1%82%E6%9C%BA%E5%88%B6"><span class="toc-text">14.10.2 LinkedHashSet底层机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-11-Map%E6%8E%A5%E5%8F%A3"><span class="toc-text">14.11 Map接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-11-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">14.11.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-11-2-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">14.11.2 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-11-3-%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-text">14.11.3 遍历方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-12-Map-HashMap"><span class="toc-text">14.12 Map - HashMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-12-1-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">14.12.1 基本说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-12-2-HashMap%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81"><span class="toc-text">14.12.2 HashMap底层源码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-13-Map-Hashtable"><span class="toc-text">14.13 Map - Hashtable</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-13-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">14.13.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-13-2-%E5%BA%95%E5%B1%82%E6%9C%BA%E5%88%B6"><span class="toc-text">14.13.2 底层机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-13-2-Hashtable-VS-HashMap"><span class="toc-text">14.13.2 Hashtable VS HashMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-14-Map-Properties"><span class="toc-text">14.14 Map - Properties</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-14-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">14.14.1 基本介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-15-%E5%BC%80%E5%8F%91%E4%B8%AD%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E9%9B%86%E5%90%88%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%88%E8%AE%B0%E4%BD%8F%EF%BC%81%EF%BC%89"><span class="toc-text">14.15 开发中如何选择集合实现类（记住！）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-16-TreeSet-%E5%92%8C-TreeMap"><span class="toc-text">14.16 TreeSet 和 TreeMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-16-1-TreeSet"><span class="toc-text">14.16.1 TreeSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-16-2-TreeMap"><span class="toc-text">14.16.2 TreeMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-17-Collections%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">14.17 Collections工具类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0-%E6%B3%9B%E5%9E%8B"><span class="toc-text">第十五章 泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#15-1-%E6%B3%9B%E5%9E%8B%E5%85%A5%E9%97%A8"><span class="toc-text">15.1 泛型入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-1-%E4%BC%A0%E7%BB%9F%E6%96%B9%E6%B3%95%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-text">15.1.1 传统方法问题分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-2-%E6%B3%9B%E5%9E%8B%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-text">15.1.2  泛型的好处</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-2-%E6%B3%9B%E5%9E%8B%E4%BB%8B%E7%BB%8D"><span class="toc-text">15.2 泛型介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-3-%E6%B3%9B%E5%9E%8B%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-text">15.3 泛型的语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-4-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">15.4 注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-5-%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-text">15.5 练习题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-6-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B"><span class="toc-text">15.6 自定义泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B%E7%B1%BB"><span class="toc-text">15.6.1 自定义泛型类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3"><span class="toc-text">15.6.2 自定义泛型接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-6-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%9B%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-text">15.6.3 自定义泛型方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-7-%E6%B3%9B%E5%9E%8B%E7%9A%84%E7%BB%A7%E6%89%BF%E5%92%8C%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">15.7 泛型的继承和通配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-8-JUnit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-text">15.8 JUnit单元测试类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AB%A0-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E3%80%901%E3%80%91"><span class="toc-text">第十六章 坦克大战【1】</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1-%E7%BB%98%E5%88%B6%E5%9D%A6%E5%85%8B"><span class="toc-text">16.1 绘制坦克</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-1-%E5%9D%90%E6%A0%87%E5%92%8C%E5%83%8F%E7%B4%A0"><span class="toc-text">16.1.1 坐标和像素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-2-%E7%BB%98%E5%9B%BE%E5%8E%9F%E7%90%86"><span class="toc-text">16.1.2 绘图原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-3-Graphics%E7%B1%BB"><span class="toc-text">16.1.3 Graphics类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-4-%E7%BB%98%E5%88%B6%E5%9D%A6%E5%85%8B"><span class="toc-text">16.1.4 绘制坦克</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-2-java%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-text">16.2 java事件处理机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-1-%E5%B0%8F%E7%90%83%E7%A7%BB%E5%8A%A8"><span class="toc-text">16.2.1 小球移动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-2-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-text">16.2.2 事件处理机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-3-%E5%9D%A6%E5%85%8B%E7%A7%BB%E5%8A%A8"><span class="toc-text">16.3 坦克移动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-4-%E4%BD%9C%E4%B8%9A"><span class="toc-text">16.4 作业</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%83%E7%AB%A0-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80"><span class="toc-text">第十七章 多线程基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#17-1-%E7%BA%BF%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-text">17.1 线程相关概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-2-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">17.2 线程基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-1-%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">17.2.1 创建线程的两种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-2-%E7%BB%A7%E6%89%BFThread%E7%B1%BB"><span class="toc-text">17.2.2 继承Thread类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-3-%E5%AE%9E%E7%8E%B0Runnable%E6%8E%A5%E5%8F%A3"><span class="toc-text">17.2.3 实现Runnable接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-4-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%A1%88%E4%BE%8B"><span class="toc-text">17.2.4 多线程案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-3-%E6%A8%A1%E6%8B%9F%E5%94%AE%E7%A5%A8%E7%B3%BB%E7%BB%9F"><span class="toc-text">17.3 模拟售票系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-4-%E7%BA%BF%E7%A8%8B%E7%BB%88%E6%AD%A2"><span class="toc-text">17.4 线程终止</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-5-%E7%BA%BF%E7%A8%8B%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">17.5 线程常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-1-%E7%AC%AC%E4%B8%80%E7%BB%84%E6%96%B9%E6%B3%95"><span class="toc-text">17.5.1 第一组方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-2-%E7%AC%AC%E4%BA%8C%E7%BB%84%E6%96%B9%E6%B3%95"><span class="toc-text">17.5.2 第二组方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-3-%E7%94%A8%E6%88%B7%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B"><span class="toc-text">17.5.3 用户线程和守护线程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-6-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">17.6 线程的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-6-1-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-text">17.6.1 线程的状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-6-2-%E7%8A%B6%E6%80%81%E8%BD%AC%E5%8C%96%E5%9B%BE%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%81%EF%BC%89"><span class="toc-text">17.6.2 状态转化图（重要！）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-6-3-%E9%80%9A%E8%BF%87%E7%A8%8B%E5%BA%8F%E6%9F%A5%E7%9C%8B"><span class="toc-text">17.6.3 通过程序查看</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-7-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-text">17.7 线程同步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-1-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6"><span class="toc-text">17.7.1 线程同步机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-7-2-synchronized%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">17.7.2 synchronized关键字</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-8-%E4%BA%92%E6%96%A5%E9%94%81"><span class="toc-text">17.8 互斥锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-8-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">17.8.1 基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-8-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">17.8.2 注意事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-8-3-%E5%94%AE%E7%A5%A8%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98"><span class="toc-text">17.8.3 售票系统的同步问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-9-%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%AD%BB%E9%94%81"><span class="toc-text">17.9 线程的死锁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-10-%E9%94%81%E7%9A%84%E9%87%8A%E6%94%BE"><span class="toc-text">17.10 锁的释放</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-10-1-%E4%B8%8B%E9%9D%A2%E6%93%8D%E4%BD%9C%E4%BC%9A%E9%87%8A%E6%94%BE%E9%94%81"><span class="toc-text">17.10.1 下面操作会释放锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-10-2-%E4%B8%8B%E9%9D%A2%E6%93%8D%E4%BD%9C%E4%B8%8D%E4%BC%9A%E9%87%8A%E6%94%BE%E9%94%81"><span class="toc-text">17.10.2 下面操作不会释放锁</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AB%A0-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E3%80%902%E3%80%91"><span class="toc-text">第十八章 坦克大战【2】</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#18-1-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%980-3"><span class="toc-text">18.1 坦克大战0.3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-1-%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9"><span class="toc-text">18.1.1 发射子弹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-2-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%980-4"><span class="toc-text">18.2 坦克大战0.4</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-1-%E6%95%8C%E4%BA%BA%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9"><span class="toc-text">18.2.1 敌人发射子弹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-2-%E6%95%8C%E4%BA%BA%E5%9D%A6%E5%85%8B%E8%A2%AB%E5%87%BB%E4%B8%AD"><span class="toc-text">18.2.2 敌人坦克被击中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-3-%E7%88%86%E7%82%B8%E6%95%88%E6%9E%9C"><span class="toc-text">18.2.3 爆炸效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-4-%E6%95%8C%E4%BA%BA%E5%9D%A6%E5%85%8B%E8%87%AA%E7%94%B1%E7%A7%BB%E5%8A%A8"><span class="toc-text">18.2.4 敌人坦克自由移动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-4-%E6%8E%A7%E5%88%B6%E5%9D%A6%E5%85%8B%E7%A7%BB%E5%8A%A8%E8%8C%83%E5%9B%B4"><span class="toc-text">18.2.4 控制坦克移动范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-3-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%980-5"><span class="toc-text">18.3 坦克大战0.5</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-1-%E5%8F%91%E5%B0%84%E5%A4%9A%E9%A2%97%E5%AD%90%E5%BC%B9"><span class="toc-text">18.3.1 发射多颗子弹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-2-%E6%95%8C%E4%BA%BA%E5%8F%91%E5%B0%84%E5%A4%9A%E9%A2%97%E5%AD%90%E5%BC%B9"><span class="toc-text">18.3.2 敌人发射多颗子弹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-3-%E6%95%8C%E4%BA%BA%E5%9D%A6%E5%85%8B%E5%87%BB%E4%B8%AD%E6%88%91%E6%96%B9"><span class="toc-text">18.3.3 敌人坦克击中我方</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B9%9D%E7%AB%A0-IO%E6%B5%81"><span class="toc-text">第十九章 IO流</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#19-1-%E6%96%87%E4%BB%B6%E6%B5%81"><span class="toc-text">19.1 文件流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-2-%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-text">19.2 常用的文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-1-%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6"><span class="toc-text">19.2.1 创建文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-2-%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="toc-text">19.2.2 获取文件相关信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-3-%E7%9B%AE%E5%BD%95%E7%9A%84%E6%93%8D%E4%BD%9C%E5%92%8C%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-text">19.2.3 目录的操作和文件删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-3-IO%E6%B5%81%E5%8E%9F%E7%90%86%E5%92%8C%E5%88%86%E7%B1%BB"><span class="toc-text">19.3 IO流原理和分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-1-IO%E6%B5%81%E5%8E%9F%E7%90%86"><span class="toc-text">19.3.1 IO流原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-2-%E6%B5%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">19.3.2 流的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-3-3-IO%E6%B5%81%E4%BD%93%E7%B3%BB%E5%9B%BE"><span class="toc-text">19.3.3 IO流体系图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-4-IO%E6%B5%81%E5%B8%B8%E7%94%A8%E7%9A%84%E7%B1%BB"><span class="toc-text">19.4 IO流常用的类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-4-1-FileInputStream"><span class="toc-text">19.4.1 FileInputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-4-2-FileOutputStream"><span class="toc-text">19.4.2 FileOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-4-3-FileReader"><span class="toc-text">19.4.3 FileReader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-4-4-FileWriter"><span class="toc-text">19.4.4 FileWriter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-5-%E8%8A%82%E7%82%B9%E6%B5%81%E5%92%8C%E5%A4%84%E7%90%86%E6%B5%81"><span class="toc-text">19.5 节点流和处理流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">19.5.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-2-%E7%BC%93%E5%86%B2%E6%B5%81-BufferedReader-%E5%92%8C-BufferedWriter"><span class="toc-text">19.5.2 缓冲流-BufferedReader 和 BufferedWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-3-%E7%BC%93%E5%86%B2%E6%B5%81-BufferedInputStream-%E5%92%8C-BufferedOutputStream"><span class="toc-text">19.5.3 缓冲流-BufferedInputStream 和 BufferedOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-4-%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">19.5.4 序列化和反序列化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-5-%E5%AF%B9%E8%B1%A1%E6%B5%81-ObjectInputStream-%E5%92%8C-ObjectOutputStream"><span class="toc-text">19.5.5 对象流-ObjectInputStream 和 ObjectOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-6-%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-text">19.5.6 标准输入输出流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-7-%E8%BD%AC%E6%8D%A2%E6%B5%81-InputStreamReader-%E5%92%8C-OutputStreamWriter"><span class="toc-text">19.5.7 转换流-InputStreamReader 和 OutputStreamWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-5-8-%E6%89%93%E5%8D%B0%E6%B5%81-PrintStream-%E5%92%8C-PrintWriter"><span class="toc-text">19.5.8 打印流-PrintStream 和 PrintWriter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-6-Properties-%E7%B1%BB"><span class="toc-text">19.6 Properties 类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-6-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">19.6.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-6-2-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">19.6.2 常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-6-3-%E6%A1%88%E4%BE%8B"><span class="toc-text">19.6.3 案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E7%AB%A0-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%98%E3%80%903%E3%80%91"><span class="toc-text">第二十章 坦克大战【3】</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#20-1-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%980-6"><span class="toc-text">20.1 坦克大战0.6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-1-1-%E9%98%B2%E6%AD%A2%E5%9D%A6%E5%85%8B%E9%87%8D%E5%8F%A0"><span class="toc-text">20.1.1 防止坦克重叠</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-1-2-%E8%AE%B0%E5%BD%95%E6%80%BB%E6%88%90%E7%BB%A9"><span class="toc-text">20.1.2 记录总成绩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-1-3-%E8%AE%B0%E5%BD%95%E6%95%8C%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">20.1.3 记录敌人信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-1-4-%E6%81%A2%E5%A4%8D%E6%95%8C%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">20.1.4 恢复敌人信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-2-%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%980-7"><span class="toc-text">20.2 坦克大战0.7</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-2-1-%E6%92%AD%E6%94%BE%E9%9F%B3%E4%B9%90"><span class="toc-text">20.2.1 播放音乐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-2-2-%E5%A4%84%E7%90%86%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E5%BC%82%E5%B8%B8"><span class="toc-text">20.2.2 处理文件相关异常</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%94-%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5-%E2%80%94"><span class="toc-text">— 第三阶段 —</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E7%AB%A0-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="toc-text">第二十一章 网络编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-1-%E7%BD%91%E7%BB%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-text">21.1 网络的相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-1-%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF"><span class="toc-text">21.1.1 网络通讯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-2-%E7%BD%91%E7%BB%9C"><span class="toc-text">21.1.2 网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-3-IP%E5%9C%B0%E5%9D%80"><span class="toc-text">21.1.3 IP地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-4-ipv4-%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB"><span class="toc-text">21.1.4 ipv4 地址分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-5-%E5%9F%9F%E5%90%8D%E5%92%8C%E7%AB%AF%E5%8F%A3"><span class="toc-text">21.1.5 域名和端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-6-TCP-IP%E5%8D%8F%E8%AE%AE"><span class="toc-text">21.1.6 TCP&#x2F;IP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-7-%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE"><span class="toc-text">21.1.7 网络通信协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-8-TCP-%E5%92%8C-UDP"><span class="toc-text">21.1.8 TCP 和 UDP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-2-InetAddress-%E7%B1%BB"><span class="toc-text">21.2 InetAddress 类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-1-%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="toc-text">21.2.1 相关方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-3-Socket%E5%A5%97%E6%8E%A5%E5%AD%97"><span class="toc-text">21.3 Socket套接字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-3-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">21.3.1 基本介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-4-TCP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E7%BC%96%E7%A8%8B"><span class="toc-text">21.4 TCP网络通信编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-4-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D%E5%92%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">21.4.1 基本介绍和流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-4-2-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-1-%E4%BD%BF%E7%94%A8%E5%AD%97%E8%8A%82%E6%B5%81"><span class="toc-text">21.4.2 应用案例 1(使用字节流)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-4-3-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-2-%E4%BD%BF%E7%94%A8%E5%AD%97%E8%8A%82%E6%B5%81"><span class="toc-text">21.4.3 应用案例 2(使用字节流)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-4-4-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-3-%E4%BD%BF%E7%94%A8%E5%AD%97%E7%AC%A6%E6%B5%81"><span class="toc-text">21.4.4 应用案例 3(使用字符流)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-4-5-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-4-%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87"><span class="toc-text">21.4.5 应用案例 4(上传图片)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-4-6-netstat-%E6%8C%87%E4%BB%A4"><span class="toc-text">21.4.6 netstat 指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-5-UDP%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E7%BC%96%E7%A8%8B"><span class="toc-text">21.5 UDP网络通信编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-5-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D%E5%92%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">21.5.1 基本介绍和流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-5-2-%E6%A1%88%E4%BE%8B1"><span class="toc-text">21.5.2 案例1</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-6-Homeworks"><span class="toc-text">21.6 Homeworks</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-6-1-%E5%A4%9A%E6%AC%A1%E5%AF%B9%E8%AF%9D"><span class="toc-text">21.6.1 多次对话</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-6-2-%E9%9F%B3%E4%B9%90%E4%B8%8B%E8%BD%BD"><span class="toc-text">21.6.2 音乐下载</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%8C%E7%AB%A0-%E5%A4%9A%E7%94%A8%E6%88%B7%E5%8F%8A%E6%97%B6%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F"><span class="toc-text">第二十二章 多用户及时通信系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#22-1-%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF"><span class="toc-text">22.1 相关技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-2-%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-text">22.2 项目开发流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-3-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-text">22.3 需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-4-%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1"><span class="toc-text">22.4 界面设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-5-%E5%8A%9F%E8%83%BD-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-text">22.5 功能 - 用户登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-6-%E5%8A%9F%E8%83%BD-%E6%8B%89%E5%8F%96%E5%9C%A8%E7%BA%BF%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8"><span class="toc-text">22.6 功能 - 拉取在线用户列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-7-%E5%8A%9F%E8%83%BD-%E6%97%A0%E5%BC%82%E5%B8%B8%E9%80%80%E5%87%BA"><span class="toc-text">22.7 功能 - 无异常退出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-8-%E5%8A%9F%E8%83%BD-%E7%A7%81%E8%81%8A"><span class="toc-text">22.8 功能 - 私聊</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-9-%E5%8A%9F%E8%83%BD-%E7%BE%A4%E5%8F%91"><span class="toc-text">22.9 功能 - 群发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-10-%E5%8A%9F%E8%83%BD-%E5%8F%91%E6%96%87%E4%BB%B6"><span class="toc-text">22.10 功能 - 发文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-11-%E5%8A%9F%E8%83%BD-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81%E6%96%B0%E9%97%BB"><span class="toc-text">22.11 功能 - 服务器推送新闻</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-12-%E5%8A%9F%E8%83%BD%E6%89%A9%E5%B1%95-%E7%A6%BB%E7%BA%BF%E5%8F%91%E9%80%81"><span class="toc-text">22.12 功能扩展 - 离线发送</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-13-%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6%E5%88%86%E6%9E%90"><span class="toc-text">22.13 项目框架分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#22-13-1-%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95"><span class="toc-text">22.13.1 文件目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-13-2-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A1%86%E6%9E%B6"><span class="toc-text">22.13.2 客户端框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-13-3-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A1%86%E6%9E%B6"><span class="toc-text">22.13.3 服务端框架</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%89%E7%AB%A0-%E5%8F%8D%E5%B0%84"><span class="toc-text">第二十三章 反射</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#23-1-%E4%B8%80%E4%B8%AA%E9%9C%80%E6%B1%82%E5%BC%95%E5%87%BA%E5%8F%8D%E5%B0%84"><span class="toc-text">23.1 一个需求引出反射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-2-%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6"><span class="toc-text">23.2 反射机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-1-Java-Reflection"><span class="toc-text">23.2.1 Java Reflection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-2-%E5%8E%9F%E7%90%86%E7%A4%BA%E6%84%8F%E5%9B%BE"><span class="toc-text">23.2.2 原理示意图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-3-%E5%8F%8D%E5%B0%84%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">23.2.3 反射的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-4-%E5%8F%8D%E5%B0%84%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%BB%E8%A6%81%E7%B1%BB"><span class="toc-text">23.2.4 反射相关的主要类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-5-%E5%8F%8D%E5%B0%84%E4%BC%98%E7%82%B9%E5%92%8C%E7%BC%BA%E7%82%B9"><span class="toc-text">23.2.5 反射优点和缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-6-%E5%8F%8D%E5%B0%84%E8%B0%83%E7%94%A8%E4%BC%98%E5%8C%96"><span class="toc-text">23.2.6 反射调用优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-3-Class%E7%B1%BB"><span class="toc-text">23.3 Class类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-3-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">23.3.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-3-2-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">23.3.2 常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-4-%E8%8E%B7%E5%8F%96Class%E7%B1%BB%E5%AF%B9%E8%B1%A1"><span class="toc-text">23.4 获取Class类对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-5-%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B%E6%9C%89-Class-%E5%AF%B9%E8%B1%A1"><span class="toc-text">23.5 哪些类型有 Class 对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-6-%E7%B1%BB%E5%8A%A0%E8%BD%BD"><span class="toc-text">23.6 类加载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-1-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">23.6.1 基本说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-2-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%97%B6%E6%9C%BA"><span class="toc-text">23.6.2 类加载时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-3-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B%E5%9B%BE"><span class="toc-text">23.6.3 类加载过程图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-4-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%90%84%E9%98%B6%E6%AE%B5%E5%AE%8C%E6%88%90%E4%BB%BB%E5%8A%A1"><span class="toc-text">23.6.4 类加载各阶段完成任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-5-%E5%8A%A0%E8%BD%BD%E9%98%B6%E6%AE%B5"><span class="toc-text">23.6.5 加载阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-6-%E8%BF%9E%E6%8E%A5%E9%98%B6%E6%AE%B5-%E9%AA%8C%E8%AF%81"><span class="toc-text">23.6.6 连接阶段 - 验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-7-%E8%BF%9E%E6%8E%A5%E9%98%B6%E6%AE%B5-%E5%87%86%E5%A4%87"><span class="toc-text">23.6.7 连接阶段 - 准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-8-%E8%BF%9E%E6%8E%A5%E9%98%B6%E6%AE%B5-%E8%A7%A3%E6%9E%90"><span class="toc-text">23.6.8 连接阶段 - 解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-6-9-%E5%88%9D%E5%A7%8B%E5%8C%96-Initialization"><span class="toc-text">23.6.9 初始化 Initialization</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-7-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E7%B1%BB%E7%9A%84%E7%BB%93%E6%9E%84%E4%BF%A1%E6%81%AF"><span class="toc-text">23.7 通过反射获取类的结构信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-7-1-%E7%AC%AC%E4%B8%80%E7%BB%84-java-lang-Class-%E7%B1%BB"><span class="toc-text">23.7.1 第一组: java.lang.Class 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-7-2-%E7%AC%AC%E4%BA%8C%E7%BB%84-java-lang-reflect-Field-%E7%B1%BB"><span class="toc-text">23.7.2 第二组: java.lang.reflect.Field 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-7-3-%E7%AC%AC%E4%B8%89%E7%BB%84-java-lang-reflect-Method-%E7%B1%BB"><span class="toc-text">23.7.3 第三组: java.lang.reflect.Method 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-7-4-%E7%AC%AC%E5%9B%9B%E7%BB%84-java-lang-reflect-Constructor-%E7%B1%BB"><span class="toc-text">23.7.4 第四组: java.lang.reflect.Constructor 类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-8-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-text">23.8 通过反射创建对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-9-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E8%AE%BF%E9%97%AE%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%88%90%E5%91%98"><span class="toc-text">23.9 通过反射访问类中的成员</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-9-1-%E8%AE%BF%E9%97%AE%E5%B1%9E%E6%80%A7"><span class="toc-text">23.9.1 访问属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-9-2-%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%95"><span class="toc-text">23.9.2 访问方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%AB%A0-MySQL"><span class="toc-text">第二十四章  MySQL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%94%E7%AB%A0-JDBC%E5%92%8C%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-text">第二十五章 JDBC和连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#25-1-JDBC%E6%A6%82%E8%BF%B0"><span class="toc-text">25.1 JDBC概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-1-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">25.1.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-1-2-JDBC-%E5%B8%A6%E6%9D%A5%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-text">25.1.2 JDBC 带来的好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-1-3-JDBC-API"><span class="toc-text">25.1.3 JDBC API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-2-JDBC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">25.2 JDBC快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-2-1-JDBC%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99%E6%AD%A5%E9%AA%A4"><span class="toc-text">25.2.1 JDBC程序编写步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-2-2-JDBC%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F"><span class="toc-text">25.2.2 JDBC第一个程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-3-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5-5-%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">25.3 获取数据库连接 5 种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-3-1-%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-text">25.3.1 方式一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-3-2-%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-text">25.3.2 方式二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-3-3-%E6%96%B9%E5%BC%8F%E4%B8%89"><span class="toc-text">25.3.3 方式三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-3-4-%E6%96%B9%E5%BC%8F%E5%9B%9B"><span class="toc-text">25.3.4 方式四</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-3-5-%E6%96%B9%E5%BC%8F-5"><span class="toc-text">25.3.5 方式 5</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-4-ResultSet%EF%BC%88%E7%BB%93%E6%9E%9C%E9%9B%86%EF%BC%89"><span class="toc-text">25.4 ResultSet（结果集）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-5-Statement"><span class="toc-text">25.5 Statement</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-5-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">25.5.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-5-2-SQL%E6%B3%A8%E5%85%A5%E6%A1%88%E4%BE%8B"><span class="toc-text">25.5.2 SQL注入案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-5-3-%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">25.5.3 应用实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-6-PreparedStatement"><span class="toc-text">25.6 PreparedStatement</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-6-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">25.6.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-6-2-%E9%A2%84%E5%A4%84%E7%90%86%E5%A5%BD%E5%A4%84"><span class="toc-text">25.6.2 预处理好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-6-3-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">25.6.3 应用案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-7-JDBC-%E7%9A%84%E7%9B%B8%E5%85%B3-API-%E5%B0%8F%E7%BB%93"><span class="toc-text">25.7 JDBC 的相关 API 小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-8-%E5%B0%81%E8%A3%85-JDBCUtils%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">25.8 封装 JDBCUtils工具类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-8-1-JDBCUtils%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">25.8.1 JDBCUtils工具类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-8-1-JDBCUtils%E5%B7%A5%E5%85%B7%E7%B1%BB%E4%BD%BF%E7%94%A8"><span class="toc-text">25.8.1 JDBCUtils工具类使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-9-%E4%BA%8B%E5%8A%A1"><span class="toc-text">25.9 事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-9-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">25.9.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-9-2-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">25.9.2 应用案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-10-%E6%89%B9%E5%A4%84%E7%90%86"><span class="toc-text">25.10 批处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-10-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">25.10.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-10-2-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">25.10.2 应用案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-11%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-text">25.11数据库连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-11-1-5k-%E6%AC%A1%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">25.11.1 5k 次连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-11-2-%E4%BC%A0%E7%BB%9F%E8%8E%B7%E5%8F%96-Connection-%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-text">25.11.2 传统获取 Connection 问题分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-11-3-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%A7%8D%E7%B1%BB"><span class="toc-text">25.11.3 数据库连接池种类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-11-4-C3P0-%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">25.11.4 C3P0 应用实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-11-5-Druid-%E5%BE%B7%E9%B2%81%E4%BC%8A-%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">25.11.5 Druid(德鲁伊) 应用实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-11-6-%E5%B0%86-JDBCUtils-%E5%B7%A5%E5%85%B7%E7%B1%BB%E6%94%B9%E6%88%90-Druid-%E5%BE%B7%E9%B2%81%E4%BC%8A-%E5%AE%9E%E7%8E%B0"><span class="toc-text">25.11.6 将 JDBCUtils 工具类改成 Druid(德鲁伊)实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-12-Apache%E2%80%94DBUtils"><span class="toc-text">25.12 Apache—DBUtils</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-12-1-%E5%85%88%E5%88%86%E6%9E%90%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-text">25.12.1 先分析一个问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-12-2-%E7%94%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9C%9F%E6%96%B9%E6%B3%95%E6%9D%A5%E8%A7%A3%E5%86%B3"><span class="toc-text">25.12.2 用自己的土方法来解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-12-3-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">25.12.3 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-12-4-%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">25.12.4 应用实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-12-5-%E8%A1%A8%E5%92%8C-JavaBean-%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-text">25.12.5 表和 JavaBean 的类型映射关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-13-DAO-%E5%92%8C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95-BasicDao"><span class="toc-text">25.13 DAO 和增删改查通用方法-BasicDao</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-13-1-%E5%85%88%E5%88%86%E6%9E%90%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-text">25.13.1 先分析一个问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-13-2-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">25.13.2 基本说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-13-3-BasicDAO-%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">25.13.3 BasicDAO 应用实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%85%AD%E7%AB%A0-%E6%BB%A1%E6%B1%89%E6%A5%BC"><span class="toc-text">第二十六章 满汉楼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%83%E7%AB%A0-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">第二十七章 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#27-1-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">27.1 快速入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-2-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">27.2 正则表达式基本介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-3-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-text">27.3 正则表达式底层实现（重要）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-4-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95"><span class="toc-text">27.4 正则表达式语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#27-4-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-text">27.4.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-4-2-%E5%85%83%E5%AD%97%E7%AC%A6-%E8%BD%AC%E4%B9%89%E5%8F%B7"><span class="toc-text">27.4.2 元字符 - 转义号 \\</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-6-3-%E5%85%83%E5%AD%97%E7%AC%A6-%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D%E7%AC%A6"><span class="toc-text">27.6.3 元字符 - 字符匹配符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-6-4-%E5%85%83%E5%AD%97%E7%AC%A6-%E9%80%89%E6%8B%A9%E5%8C%B9%E9%85%8D%E7%AC%A6"><span class="toc-text">27.6.4 元字符 - 选择匹配符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-6-5-%E5%85%83%E5%AD%97%E7%AC%A6-%E9%99%90%E5%AE%9A%E7%AC%A6"><span class="toc-text">27.6.5 元字符 - 限定符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-6-6-%E5%85%83%E5%AD%97%E7%AC%A6-%E5%AE%9A%E4%BD%8D%E7%AC%A6"><span class="toc-text">27.6.6 元字符 - 定位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-6-7-%E5%88%86%E7%BB%84"><span class="toc-text">27.6.7 分组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-5-%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-text">27.5 应用实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-6-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%89%E4%B8%AA%E5%B8%B8%E7%94%A8%E7%B1%BB"><span class="toc-text">27.6 正则表达式三个常用类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-8-%E5%88%86%E7%BB%84%E3%80%81%E6%8D%95%E8%8E%B7%E3%80%81%E5%8F%8D%E5%90%91%E5%BC%95%E7%94%A8"><span class="toc-text">27.8 分组、捕获、反向引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#27-8-1-%E6%8F%90%E5%87%BA%E9%9C%80%E6%B1%82"><span class="toc-text">27.8.1 提出需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-8-2-%E4%BB%8B%E7%BB%8D"><span class="toc-text">27.8.2 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-8-3-%E7%9C%8B%E5%87%A0%E4%B8%AA%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-text">27.8.3 看几个小案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-8-4-%E7%BB%8F%E5%85%B8%E7%9A%84%E7%BB%93%E5%B7%B4%E7%A8%8B%E5%BA%8F"><span class="toc-text">27.8.4 经典的结巴程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-9-String-%E7%B1%BB%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">27.9 String 类中使用正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#27-9-1-%E6%9B%BF%E6%8D%A2%E5%8A%9F%E8%83%BD"><span class="toc-text">27.9.1 替换功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-9-2-%E5%88%A4%E6%96%AD%E5%8A%9F%E8%83%BD"><span class="toc-text">27.9.2 判断功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-9-3-%E5%88%86%E5%89%B2%E5%8A%9F%E8%83%BD"><span class="toc-text">27.9.3 分割功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-10-Homeworks"><span class="toc-text">27.10 Homeworks</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('/img/java_topImg.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Durango</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi,welcome to my <a href="https://www.durango.cn/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'krF5kMcSSzhBp49rUb2CjNu2-gzGzoHsz',
      appKey: 'VJnaTN0zWPbBeDLnEaP8wDWF',
      placeholder: '记得留下你的昵称和邮箱...可以快速收到回复',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener toc scroll 
  window.removeEventListener('scroll', window.tocScrollFn)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":180,"height":250},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>